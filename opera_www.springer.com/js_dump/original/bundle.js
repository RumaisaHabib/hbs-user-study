!function(){"use strict";const t=t=>{const e=[];return t?(Array.prototype.forEach.call(t,(function(t){e.push(t)})),e):e},e=(t,e,s)=>{let i;if(void 0===e)throw new Error("Missing namespace in `createEvent` function");return i="function"==typeof window.CustomEvent?new CustomEvent(`${e}:${t}`,s):((t,e)=>{e=e||{bubbles:!1,cancelable:!1,detail:null};var s=document.createEvent("CustomEvent");return s.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),s})(`${e}:${t}`,s),i},s={TARGET_HIDE_CLASS:"u-js-hide",TRIGGER_OPEN_CLASS:"is-open",TRIGGER_OPEN_LABEL:void 0,CLOSE_ON_FOCUS_OUT:!0,AUTOFOCUS:null,OPEN_EVENT:!1,DEFAULT_OPEN:!1},i={TARGET_HIDE_CLASS:"data-expander-hide-class",TRIGGER_OPEN_CLASS:"data-expander-trigger-open-class",TRIGGER_OPEN_LABEL:"data-expander-trigger-open-label",CLOSE_ON_FOCUS_OUT:"data-expander-close-on-focus-out",AUTOFOCUS:"data-expander-autofocus",OPEN_EVENT:"data-expander-open-event",DEFAULT_OPEN:"data-expander-default-open"};(()=>{const t=document.getElementById("dropdowns"),e=document.querySelector(".c-header__nav-menu");if(!t||!e)return;const s=[...t.querySelectorAll(".c-dropdown")];s.length<1||s.forEach((s=>{const i=e.querySelector(`[href="#${s.id}"]`);if(!i)return;i.setAttribute("data-expander","data-expander"),i.setAttribute("data-expander-target",`#${s.id}`);const n=i.parentNode;s.querySelector("h2").remove(),n.appendChild(s),s.classList.add("c-header__submenu"),n.classList.add("c-header__item--with-submenu"),t.remove()}))})(),((n={})=>{const r=document.querySelectorAll("[data-expander]");0!==r.length&&t(r).forEach((r=>{const a="data-expander-target";if(!r.hasAttribute(a))return;const o=document.querySelector(r.getAttribute(a));if(!o)return;const l=((t,e)=>{const s={};for(const i in e)if(e.hasOwnProperty(i)){let n=e[i];const r=t.hasAttribute(n)&&t.getAttribute(n);r&&(s[i]="true"===r||"false"===r?"true"===r:r)}return s})(r,i),c=new class{constructor(t,e,i={}){this._options=Object.assign({},s,i),this._autoFocusElement=t,this._triggerEl=t,this._targetEl=e,this._originalTriggerText=t.textContent,this._isOpen=this._options.DEFAULT_OPEN,this._handleButtonClick=this._handleButtonClick.bind(this),this._handleButtonKeydown=this._handleButtonKeydown.bind(this),this._handleDocumentClick=this._handleDocumentClick.bind(this),this._handleDocumentKeydown=this._handleDocumentKeydown.bind(this)}_handleButtonClick(t){t.preventDefault(),this._isOpen?this.close():this.open()}_handleButtonKeydown(t){"Enter"!==t.key&&" "!==t.key&&"Spacebar"!==t.key||(t.preventDefault(),this._isOpen?this.close():this.open())}_handleDocumentKeydown(t){"Escape"===t.key&&(this.close(),this._triggerEl.focus()),this._options.CLOSE_ON_FOCUS_OUT&&("Tab"===t.key&&!0===t.shiftKey&&(t.target!==this._targetTabbableItems[0]&&t.target!==this._triggerEl&&t.target!==this._targetEl||(t.preventDefault(),window.requestAnimationFrame((()=>{this.close(),this._triggerEl.focus()})))),"Tab"===t.key&&!1===t.shiftKey&&t.target===this._targetTabbableItems[this._targetTabbableItems.length-1]&&(t.preventDefault(),window.requestAnimationFrame((()=>{this.close(),this._triggerEl.focus()}))))}_handleDocumentClick(t){let e=t.target;e===this._targetEl||e===this._triggerEl||this._targetEl.contains(e)||this._triggerEl.contains(e)||this.close()}_setupTemporaryEventListeners(){document.addEventListener("keydown",this._handleDocumentKeydown),this._options.CLOSE_ON_FOCUS_OUT&&document.addEventListener("click",this._handleDocumentClick)}_removeTemporaryEventListeners(){document.removeEventListener("keydown",this._handleDocumentKeydown),this._options.CLOSE_ON_FOCUS_OUT&&document.removeEventListener("click",this._handleDocumentClick)}_updateAttributes(){this._triggerEl.setAttribute("aria-expanded",this._isOpen.toString()),this._isOpen?this._targetEl.removeAttribute("hidden"):this._targetEl.setAttribute("hidden","")}_updateClassAttributes(){this._isOpen?(this._triggerEl.classList.add(this._options.TRIGGER_OPEN_CLASS),this._targetEl.classList.remove(this._options.TARGET_HIDE_CLASS)):(this._triggerEl.classList.remove(this._options.TRIGGER_OPEN_CLASS),this._targetEl.classList.add(this._options.TARGET_HIDE_CLASS))}_updateTriggerLabel(){this._options.TRIGGER_OPEN_LABEL&&(this._triggerEl.textContent=this._isOpen?this._options.TRIGGER_OPEN_LABEL:this._originalTriggerText)}_updateTabbableItems(){this._targetTabbableItems=t(this._targetEl.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter((t=>"hidden"!==window.getComputedStyle(t).getPropertyValue("visibility")))}_handleAutoFocus(){"target"===this._options.AUTOFOCUS&&(this._autoFocusElement=this._targetEl,this._targetEl.setAttribute("tabindex","-1")),"firstTabbable"===this._options.AUTOFOCUS&&(this._autoFocusElement=this._targetTabbableItems.length>0&&this._targetTabbableItems[0],this._autoFocusElement.setSelectionRange&&this._autoFocusElement.setSelectionRange(0,this._autoFocusElement.value.length)),this._autoFocusElement.focus()}open(){if(!this._isOpen&&(this._isOpen=!0,this._updateTriggerLabel(),this._updateAttributes(),this._updateClassAttributes(),this._updateTabbableItems(),this._setupTemporaryEventListeners(),this._handleAutoFocus(),this._options.OPEN_EVENT)){const t=e("open","globalExpander",{bubbles:!1});this._triggerEl.dispatchEvent(t)}}close(){this._isOpen&&(this._isOpen=!1,this._updateTriggerLabel(),this._updateAttributes(),this._updateClassAttributes(),this._removeTemporaryEventListeners())}init(){"A"===this._triggerEl.tagName&&"#"===this._triggerEl.getAttribute("href").charAt(0)&&(this._triggerEl.setAttribute("href","javascript:;"),this._triggerEl.setAttribute("role","button")),this._options.AUTOFOCUS&&this._triggerEl.setAttribute("aria-haspopup","true"),this._updateTriggerLabel(),this._updateAttributes(),this._updateClassAttributes(),this._triggerEl.addEventListener("click",this._handleButtonClick),this._triggerEl.addEventListener("keydown",this._handleButtonKeydown)}}(r,o,Object.assign({},n,l));c.init()}))})(),[...document.querySelectorAll(".c-process")].forEach((t=>{const e=t.querySelector(".c-process__steps"),s=[...e.querySelectorAll("li")],i=[...e.querySelectorAll("a")],n=[...t.querySelectorAll(".c-process__section")];s[0].classList.add("c-process__steps--current"),i[0].setAttribute("aria-current","step"),n.forEach((t=>{n.indexOf(t)>0&&(t.hidden=!0)})),e.addEventListener("click",(t=>{t.preventDefault();const r=t.target.closest("a");if(i.includes(r)){const t=i.indexOf(r);e.querySelector(".c-process__steps--current").classList.remove("c-process__steps--current"),e.querySelector("[aria-current]").removeAttribute("aria-current"),s[t].classList.add("c-process__steps--current"),i[t].setAttribute("aria-current","step"),n.forEach((t=>{t.hidden=!0})),n[t].hidden=!1,n[t].querySelector(".c-process__heading").focus()}}))})),(()=>{const t=document.documentElement,e=t.dataset.studio;if(!t.hasAttribute("data-preview"))return;const s=t=>{window.open(`https://${e}#command=open&bean=content/${t}`,"_blank").focus()};window.addEventListener("contextmenu",(t=>{window.contextMenu&&(window.contextMenu.hide(),window.contextMenu.uninstall());const e=(t=>{const e=[];for(;t;)e.unshift(t),t=t.parentElement;return e.filter((t=>t.hasAttribute("data-content-id")))})(t.target);e.length<1||(t.preventDefault(),(t=>{const e=[];t.forEach(((t,i)=>{let n=t.getAttribute("data-content-id"),r=t.getAttribute("data-title");e.push({text:`${r} (${n})`,onclick:()=>s(n)})})),window.contextMenu=new ContextMenu(document.body,e),window.contextMenu.install()})(e),window.contextMenu.show(t.pageX,t.pageY))}));[...document.querySelectorAll("[data-content-id]")].forEach((t=>{let e=t.getAttribute("data-content-id");t.setAttribute("tabindex","0");const i=`edit ${e}`;t.setAttribute("role","button"),t.setAttribute("aria-label",i);const n=document.createElement("span");n.setAttribute("aria-hidden","true"),n.textContent=i,n.classList.add("k-content-label"),t.appendChild(n),t.addEventListener("keypress",(t=>{"Enter"===t.key&&(t.preventDefault(),s(e))}))}))})()}();
