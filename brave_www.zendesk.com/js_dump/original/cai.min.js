!function(){var e={139:function(e){e.exports=function(){"use strict";function e(e){return Number.isInteger(e)&&e>=0}function t(e){this.name="ArgumentError",this.message=e}return function(n,r){if(r=r||{},"function"!=typeof n)throw new t("fetch must be a function");if("object"!=typeof r)throw new t("defaults must be an object");if(void 0!==r.retries&&!e(r.retries))throw new t("retries must be a positive integer");if(void 0!==r.retryDelay&&!e(r.retryDelay)&&"function"!=typeof r.retryDelay)throw new t("retryDelay must be a positive integer or a function returning a positive integer");if(void 0!==r.retryOn&&!Array.isArray(r.retryOn)&&"function"!=typeof r.retryOn)throw new t("retryOn property expects an array or function");var o={retries:3,retryDelay:1e3,retryOn:[]};return r=Object.assign(o,r),function(o,i){var a=r.retries,s=r.retryDelay,c=r.retryOn;if(i&&void 0!==i.retries){if(!e(i.retries))throw new t("retries must be a positive integer");a=i.retries}if(i&&void 0!==i.retryDelay){if(!e(i.retryDelay)&&"function"!=typeof i.retryDelay)throw new t("retryDelay must be a positive integer or a function returning a positive integer");s=i.retryDelay}if(i&&i.retryOn){if(!Array.isArray(i.retryOn)&&"function"!=typeof i.retryOn)throw new t("retryOn property expects an array or function");c=i.retryOn}return new Promise((function(e,t){var r=function(r){var s="undefined"!=typeof Request&&o instanceof Request?o.clone():o;n(s,i).then((function(n){if(Array.isArray(c)&&-1===c.indexOf(n.status))e(n);else if("function"==typeof c)try{return Promise.resolve(c(r,null,n)).then((function(t){t?u(r,null,n):e(n)})).catch(t)}catch(e){t(e)}else r<a?u(r,null,n):e(n)})).catch((function(e){if("function"==typeof c)try{Promise.resolve(c(r,e,null)).then((function(n){n?u(r,e,null):t(e)})).catch((function(e){t(e)}))}catch(e){t(e)}else r<a?u(r,e,null):t(e)}))};function u(e,t,n){var o="function"==typeof s?s(e,t,n):s;setTimeout((function(){r(++e)}),o)}r(0)}))}}}()}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r].call(i.exports,i,i.exports,n),i.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};!function(){"use strict";n.r(r);var e=n(139);const t=n.n(e)()(fetch),o=e=>JSON.stringify(e),i=()=>(({name:e,shouldParse:t=!1,removeFromDOM:n=!0})=>{const r=document.querySelector(`meta[name=${e}]`);try{return t?JSON.parse(r.content):r.content}catch(e){return null}finally{r&&n&&r.remove()}})({name:"zendesk-app-name",removeFromDOM:!1}),a=(e,t=i())=>`${((e=i())=>`zendesk.${e}`)(t)}.${e}`,s=e=>Object.keys(e).map((t=>`${t}:${e[t].replace?e[t].replace(/:/gi,""):e[t]}`));class c{static init(e=i(),t=[]){c.appName=e,c.buffer=t,c.nextFlush=0,c._scheduleFlush()}}c._addMetric=({method:e,metric:t,tags:n,value:r})=>{const o=Object.assign(Object.assign({},{origin:"app",scope:c.appName,owner:"ponderosa",path:window.location.pathname}),n);c.buffer.push([e,a(t,c.appName),r,s(o)]),c.buffer.length>=10&&c._flushBuffer()},c.increment=(e,t={},n=1)=>{c._addMetric({method:"increment",metric:e,value:n,tags:t})},c.histogram=(e,t={},n)=>{c._addMetric({method:"histogram",metric:e,value:n,tags:t})},c._scheduleFlush=()=>{const e=c.nextFlush;e&&clearTimeout(e),c.nextFlush=setTimeout(c._flushBuffer,1e4)},c._flushBuffer=()=>{if(c._scheduleFlush(),0===c.buffer.length)return;const e=c.buffer.map(o).join("\n");c.buffer=[],t("/api/reporting",{method:"post",body:e,exponential:!0,retries:5,retryDelay:5}).catch((e=>{console.error(e)}))};const u={CAI_METRIC_TRACK_ANON_ID_CHANGED:"CAI_METRIC_TRACK_ANON_ID_CHANGED",CAI_METRIC_IDENTIFY_ANON_ID_CHANGED:"CAI_METRIC_IDENTIFY_ANON_ID_CHANGED",CAI_METRIC_PAGE_ANON_ID_CHANGED:"CAI_METRIC_PAGE_ANON_ID_CHANGED",CAI_METRIC_SCREEN_ANON_ID_CHANGED:"CAI_METRIC_SCREEN_ANON_ID_CHANGED",CAI_METRIC_ALIAS_ANON_ID_CHANGED:"CAI_METRIC_ALIAS_ANON_ID_CHANGED",CAI_METRIC_GROUP_ANON_ID_CHANGED:"CAI_METRIC_GROUP_ANON_ID_CHANGED",CAI_METRIC_SET_ANON_ID_CHANGED:"CAI_METRIC_SET_ANON_ID_CHANGED",CAI_METRIC_RESET_CALLED:"CAI_METRIC_RESET_CALLED"},l=!["marketing_website","marketing_website_dev","help_center","help_center_dev"].includes("marketing_website"),f=(e,...t)=>{l?c.increment(e.toLowerCase(),...t):window.analytics.track(e)},d="ajs_anonymous_id",_=`backup_${d}`,p=()=>{const e=window.localStorage.getItem(d);e&&window.localStorage.setItem(_,e)},y=e=>{if(!e.event.event)return e;if(e.event.event in u)return e;const t=window.localStorage.getItem(_);var n,r;return t&&(n=t,r=String(e.event.anonymousId),n.replace(/['"]+/g,"")!==r.replace(/['"]+/g,""))&&f(`CAI_METRIC_${e.event.type.toUpperCase()}_ANON_ID_CHANGED`,{scope:"marketing_website",event:e.event.event}),p(),e},m=()=>{window.analytics.on("initialize",(()=>{p(),l&&c.init("cai_metrics")})),window.analytics.on("reset",(()=>{f(u.CAI_METRIC_RESET_CALLED)}))},h={name:"Logging MTU Spikes",type:"destination",version:"1.0.0",isLoaded:()=>!0,load:()=>Promise.resolve(),track:y,identify:y,alias:y,group:y,page:y,screen:y},A={CAI_METRIC:"cai_metric",CUSTOMER_ANALYTICS_INTEGRATION:"customer_analytics_integration",DISABLE_CUSTOMER_ANALYTICS:"disable_customer_analytics",EU_DATA_CENTER:"eu_data_center",US_DATA_CENTER:"us_data_center",GERMANY_DATA_CENTER:"germany_data_center",ADVANCED_SECURITY:"advanced_security"};var g,w="/api/v2/account/features.json",I="v2",v="production",C="qbUubtShzPR7jpBCsJDHFRx2LsvwOtx1",E={[C]:!0},N=!1,T=!0,O=!0,b=36e5,D=3e4,R=6e4,S=0,M=0,j="undefined"!=typeof ZAFClient&&"undefined"!=typeof clientInstance&&"function"==typeof clientInstance.request,P=N,x=!1,k=null;function G(e,t){return new Promise((function(n,r){if(j){window.clientInstance.request({type:"GET",url:e,timeout:t.timeout}).then(n,r)}else{var o=new XMLHttpRequest;o.onload=function(){t.onload&&t.onload.apply(this),n(this)},o.ontimeout=function(){t.ontimeout&&t.ontimeout.apply(this),n(this)},o.onerror=function(e){t.onerror&&t.onerror.call(this,e),n(e)},o.open("GET",e,!0),o.timeout=R,o.send()}}))}function L(){var e=function(){var e;try{e=JSON.parse(window.localStorage.getItem("ingestionLoggerSettings")||"{}")}catch(t){e={}}return e}().enabled;if(!1!==e&&(null!==e||"production"!==v))return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function U(e){return L("Disabling customer analytics integration ("+e+")."),P=!0,window.analytics.CAI_STATE="disabled",clearInterval(g),new Promise((function(e){e(P)}))}function H(e,t){return e.hasOwnProperty(t)&&e[t].enabled}function F(e){return new Promise((function(t){var n,r=(n=S,Math.floor(Math.random()*Math.pow(2,n)*D));(M+=r)>=b?U(e+",exceeded-retries").then(t):(L("Retrying in "+r),window.analytics.CAI_STATE="retrying",setTimeout($,r))}))}function B(e){let t;if("v1"===I)k=null==e?void 0:e.deployments,t=e=>function(e,t){return e.hasOwnProperty(t)&&e[t]}(k,e);else{if("v2"!==I)return U("unknown-version");k=null==e?void 0:e.features,t=e=>H(k,e)}if(!k)return U("no-features");const n=t(A.CUSTOMER_ANALYTICS_INTEGRATION),r=t(A.DISABLE_CUSTOMER_ANALYTICS);return n&&!r?(1===S&&L("Enabling customer analytics integration."),new Promise((function(e){e(P=!1)}))):U(`${A.DISABLE_CUSTOMER_ANALYTICS} is disabled`)}function $(){return x=!0,L("Checking customer analytics integration ("+ ++S+")"),new Promise((function(e){if(!N)return e(!1);return j?G(w,{timeout:R}).then((function(t){B(t).then(e)})).catch((function(t){"timeout"===t.statusText?F("timeout").then(e):4===t.readyState&&200!==t.status?U("status-"+t.status).then(e):(F("error").then(e),L(t.statusText,t.responseText))})):G(w,{timeout:R,onload:function(){if(200===this.status){try{var t=JSON.parse(this.responseText)}catch(t){return F("parse-error").then(e),void L(t)}B(t).then(e)}else U("status-"+this.status)},ontimeout:function(){F("timeout").then(e)},onerror:function(t){F("error").then(e),L(t)}})}))}function Y(){var e,t;(e=C,t=fetch(`https://cdn.segment.com/v1/projects/${e}/settings`),new Promise((function(e){t.then((function(t){t.json().then((function(t){e(t)}))}))}))).then((function(e){window.pendo_options={cookieDomain:".zendesk.com",apiKey:e.integrations.Pendo.apiKey,usePendoAgentAPI:!0}})).catch((e=>{throw console.warn("Failed to load settings",e),e}))}!function(){var e=window.analytics=window.analytics||[],t=window.deferredAnalytics=window.deferredAnalytics||[];e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"],e.factory=function(t){return function(){var n=Array.prototype.slice.call(arguments);return n.unshift(t),e.push(n),e}};for(var n=0;n<e.methods.length;n++){var r=e.methods[n];e[r]=e.factory(r)}function o(){if(!T)return{path:"-",referrer:"-",search:"-",title:"-",url:"-"};var e=function(e){var t={};if("string"==typeof(e=void 0!==e?e:window.location.search)&&e.length>0){"?"===e[0]&&(e=e.substring(1));for(var n=0,r=(e=e.split("&")).length;n<r;n++){var o,i,a=e[n],s=a.indexOf("=");s>=0?(o=a.substr(0,s),i=a.substr(s+1)):(o=a,i=""),i=decodeURIComponent(i),void 0===t[o]?t[o]=i:t[o]instanceof Array?t[o].push(i):t[o]=[t[o],i]}}return t},t=function(e){var t=[];if(e&&e.constructor===Object)for(var n in e)if(e[n]instanceof Array)for(var r=0,o=e[n].length;r<o;r++)t.push([encodeURIComponent(n),encodeURIComponent(e[n][r])].join("="));else t.push([encodeURIComponent(n),encodeURIComponent(e[n])].join("="));return t.join("&")},n=["utm_source","sourceutm_medium","utm_campaign","utm_term","utm_content"],r=e(location.search),o={};for(var i in n){var a=n[i];r.hasOwnProperty(a)&&(o[a]=r[a])}var s=Object.keys(o).length>0?"?"+t(o):"";function c(){var e=document.getElementsByTagName("link"),t="";return Array.prototype.slice.call(e).forEach((e=>{"canonical"===e.getAttribute("rel")&&(t=e.getAttribute("href"))})),t}return{path:function(){const e=c();if(!e)return window.location.pathname;const t=document.createElement("a");return t.href=e,t.pathname.startsWith("/")?t.pathname:"/"+t.pathname}(),referrer:"-",search:s,title:"-",url:function(e){var t=c();if(t)return t.includes("?")?t:t+e;var n=window.location.href.replace(window.location.search,e),r=n.indexOf("#");return-1===r?n:n.slice(0,r)}(s)}}t.length>0&&(Array.prototype.push.apply(e,t),t=[]),e.load=function(t,n){if(E[t]){E[t]=!1;var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src="https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(r,o),e._loadOptions=n}},e._writeKey=C,e.SNIPPET_VERSION="4.15.2",e.setAnonymousId(),e.on("initialize",(function(){if(O){var e=!this._user.id()?"_PENDO_T_"+this._user.anonymousId():this._user.id(),t={},n=Object.assign({id:e},this._user.traits());t.visitor=n;var r=Object.assign({id:this._group.id()},this._group.traits());t.account=r,window.pendo_options.visitor=Object.assign(t.visitor,window.pendo_options.visitor),window.pendo_options.account=Object.assign(t.account,window.pendo_options.account)}})),$().then((function(t){if(!t){const t=!N||H(k,A.CAI_METRIC);t&&m(),e.ready((function(){t&&window.analytics.register(h),window.analytics.deregister("Page Enrichment")})),O&&Y(),e.load(C,{integrations:{Pendo:O}})}})),e.addSourceMiddleware((function({payload:e,next:t}){return e.obj.context.page=o(),"page"===e.obj.type&&(e.obj.properties=Object.assign({},o()),e.obj.name&&(e.obj.properties.name=e.obj.name)),new Promise((function(n){if(x||$().then((function(r){if(r)return n();t(e)})),P)return n();n(t(e))}))}))}()}(),window.CAI=r}();
//# sourceMappingURL=cai.js.map