!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("wafer-scrollview",[],t):"object"==typeof exports?exports["wafer-scrollview"]=t():(e.wafer=e.wafer||{},e.wafer.wafers=e.wafer.wafers||{},e.wafer.wafers["wafer-scrollview"]=t())}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(i[r])return i[r].exports;var s=i[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var i={};return t.m=e,t.c=i,t.d=function(e,i,r){},t.n=function(e){},t.o=function(e,t){},t.p="https://s.yimg.com/aaq/wf/",t(t.s="./src/entry.js")}({"./src/base.js":function(e,t,i){"use strict";function r(){return u=s(i("./src/data.js"))}function s(e){return e&&e.__esModule?e:{default:e}}function a(e){}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u,c=Object.assign||function(e){},d=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),h=function e(t,i,r){null===t&&(t=Function.prototype);var s=Object.getOwnPropertyDescriptor(t,i);if(void 0===s){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,i,r)}if("value"in s)return s.value;var n=s.get;if(void 0!==n)return n.call(r)},v=window.wafer,f=v.base,p=v.constants,m=v.features,g=v.utils,y=v.WaferBaseClass,w=m.smoothScroll,b=m.transformProperty,_=p.ATTR_PREFIX,E=g.bindEvent,A=g.clearAndSetInnerHTML,S=g.clearTimeout,k=g.convertNodeListToArray,C=g.elementInView,x=g.fetchWithCache,L=g.findAncestor,T=g.getConfigFromJSONScriptNode,M=g.getFocusableElems,O=g.isVisible,P=g.removeTransition,D=g.setTimeout,W=g.setTransition,B=g.throttle,I=g.unbindEvent,N=5,j=250,V="ease-out",F="active",X="visited",H=["indicatorClick","indicatorMouseLeave","indicatorMouseover","next","pause","prev","resume","stateDidUpdate","tabClick"],U=["index"],z="ontouchstart"in window,Y=function(e,t){z&&(e.style.cursor=t)},R=function(){var e=[],t=!1;return{add:function(t,i){},exec:function(i){}}}(),q=function(e){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=i.counter,a=void 0===s?0:s,l=i.syncDelay,d=void 0===l?25:l;n(this,t);var h=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,{},{STATE_ATTRS:U})),v=e.getAttribute(_+"behavior"),p=e.getAttribute(_+"snap-behavior");if(h._util=c({},h._util,{elem:e,snapBehavior:p,sliderElem:k(e.getElementsByClassName("slides"))[0]||e,behavior:v,nextBtn:k(e.getElementsByClassName("next-btn"))[0],prevBtn:k(e.getElementsByClassName("prev-btn"))[0]}),H.forEach(function(e){h[e]=h[e].bind(h)}),"native"===v){var m=e.getAttribute(_+"scroll-snap");h._util.isUsingScrollSnap=null===m||void 0===m?0:Number(m);var g=h._util.sliderElem;h._state=h._state||{},h._state.activeElem=null,h._syncWithThrottle=B(function(){},d,h);var y=k(g.children);return y.some(function(e){}),m&&y.some(function(e){}),h._state.activeElem=h._state.activeElem||y[0],h._state.activeElem.classList.add("active"),h.snapNativeScrollViewToActiveElement({calledOnLoad:!0,source:"onLoad"}),h.checkAndAddActiveClassForNativeOverflow(),h.addEventListeners(),o(h)}var w=e.getAttribute(_+"edge-padding")||"",b=parseInt(w,10)||0,E=parseInt(e.getAttribute(_+"right-padding"),10)||0,A=e.getAttribute(_+"resize-end"),S=e.getAttribute(_+"boundary"),C=e.getAttribute(_+"pagination-target"),x=parseInt(e.getAttribute(_+"has-indicator-pagination"),10)||0,M=e.getAttribute(_+"trigger-wf-during-transition"),O=e.getAttribute(_+"scrollview-td"),P=Number(e.getAttribute(_+"auto-switch"))||0,I=Number(e.getAttribute(_+"auto-switch-disable-hover"))||0,z=Number(e.getAttribute(_+"auto-switch-timeout"))||2e3,R=e.getAttribute(_+"scrollview-ttf"),q=e.getElementsByClassName("wafer-indicators-counts")[0],J=T(q).counts,G=C&&k(document.body.querySelectorAll(C))||k(e.getElementsByClassName("indicators")),K=e.getAttribute(_+"cycle"),Q=void 0,Z=void 0,$=void 0,ee=void 0,te=void 0;K=null===K||void 0===K?0:Number(K),G.some(function(e){Q=e.getAttribute(_+"pagination-type")||"default","count"===Q?(Z=k(e.getElementsByClassName("current-page"))[0],ee=e):(te=e,$=e?k(e.children):null)});var ie=new((u||r()).default)({windowLimit:N}),re=S&&L(e,S);ie.cycle=K;var se=h._util=c({},h._util,{autoSwitchDisableHover:I,autoSwitchTimeout:z,_switchScrollTimeout:null,boundaryElem:re,counter:a,cycle:K,dataList:ie,drag:{endX:0,endY:0,isVerticalDirection:!1,startX:0,startY:0},edgePadding:b,elem:e,index:null,indicatorCountElem:Z,indicatorElems:G,indicatorItems:$,indicatorPagination:x,indicatorsCustomCount:J,indicatorType:Q,indicatorWithCountElem:ee,indicatorWithoutCountElem:te,resizeEnd:null===A||void 0===A?0:Number(A),rightPadding:E,shouldAutoSwitch:P,sliderItemsDataMapping:new Map,transitionDuration:null===O||void 0===O?j:Number(O),transitionTimingFunction:null===R||void 0===R?V:R,triggerWafersDuringTransition:"1"===M?1:0});w&&-1!==w.indexOf("%")&&(se.edgePaddingPercentage=parseInt(w.replace("%",""),10),se.edgePadding=0),h._state={autoSwitchInProgress:!1,autoSwitchPausedByUser:!1,disableEventHandlers:!1,hasBeenThreadmilled:!1,mouseOnElement:!1,slideWidth:null,triggerNodeMap:new Map,virtualCounter:null},se.sliderItems=k(se.sliderElem.children);var ae=se.sliderItems.length;if(h._state.slideWidth=100/ae,h.updateWidth(),W(se.sliderElem,"transform",se.transitionDuration,se.transitionTimingFunction),Y(se.sliderElem,"-webkit-grab"),se.edgePaddingPercentage){var ne=se.itemWidth*se.edgePaddingPercentage/100;se.sliderElem.style["padding-left"]=ne+"px"}else se.sliderElem.style["padding-left"]=se.edgePadding+"px";for(var oe=document.createDocumentFragment(),le=void 0,ue=!1,ce=0;ce<ae;ce++){var de=se.sliderItems[ce];ie.add(de),de.style.width=h._state.slideWidth+"%",!ue&&ce>0&&de.classList.contains(F)&&(le=ce,ue=!0),oe.appendChild(de)}if(se.sliderElem.appendChild(oe),le)for(var he=0;he<le;he++)h.showCurrent(1);return h.addEventListeners(),h.addAriaAttributes(),0!==a||le||(h.preFetch(),h.updateIndicators(a),h.updateButtons(!0),ie.getActive().classList.add(F,X)),e.classList.add("wafer-scrollview-rendered"),window.wafer.ready(function(){D(function(){h._util.index&&h.scrollToIndex(h._util.index),f.emitWaferEvent("scrollview:ready",{elem:e,meta:{}})},40)}),h}return l(t,e),d(t,[{key:"addAriaAttributes",value:function(e){var t=this._util;t.sliderItems=k(t.sliderElem.children),e=e||t.dataList.getActive();for(var i=t.sliderItems.length,r=!1,s=0;s<i;s++){var a=t.sliderItems[s];r=e!==a,a.setAttribute("aria-hidden",r+"");var n=M(a);r?n.forEach(function(e){e.setAttribute("tabindex","-1")}):n.forEach(function(e){e.removeAttribute("tabindex")})}}},{key:"slidesHasBeenUpdated",value:function(){}},{key:"updateWidth",value:function(){var e=this._util,t=this._state.virtualCounter,i=e.edgePadding,r=e.edgePaddingPercentage,s=e.rightPadding,a=e.sliderElem,n=e.sliderItems;a.style.width="";var o=a.clientWidth;if(r){var l=o*e.edgePaddingPercentage/100;e.sliderElem.style["padding-left"]=l+"px",e.itemWidth=o-2*l}else e.itemWidth=i?o-2*i:s?o-s:o;a.style.width=e.itemWidth*n.length+"px",a.style[b]="translateX(-"+(t*e.itemWidth+this.negativeWidthCoefficient)+"px)"}},{key:"removeSlide",value:function(e){}},{key:"addEventListeners",value:function(){var e=this,i=this._util,r=i.behavior,s=i.elem,a=i.sliderElem;if("native"===r)return window.wafer.ready(function(){}),void E(a||s,"scroll",this._syncWithThrottle);var n=this._util.indicatorItems;if(this.setTimeoutForAutoSwitch(),n){var o=this._util.indicatorWithoutCountElem;o&&(n.forEach(function(e,t){}),E(o,"click",this.indicatorClick));this._util.shouldAutoSwitch&&o&&(E(o,"mouseover",this.indicatorMouseover),E(o,"mouseleave",this.indicatorMouseLeave))}h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"addEventListeners",this).call(this)}},{key:"scrollToIndex",value:function(e){}},{key:"pauseAutoSwitch",value:function(){if(this._util.shouldAutoSwitch){var e=this._util.sliderElem.parentNode;this._state.autoSwitchInProgress=!1,this._util._switchScrollTimeout&&S(this._util._switchScrollTimeout,this),e&&e.setAttribute("aria-busy","false")}}},{key:"setTimeoutForAutoSwitch",value:function(){var e=this;if(this._util.shouldAutoSwitch&&!this._state.autoSwitchPausedByUser&&!this._state.autoSwitchInProgress&&!this._state.mouseOnElement){this._state.autoSwitchInProgress=!0;var t=this._util.autoSwitchTimeout;this.pauseAutoSwitch(),this._util._switchScrollTimeout=D(function(){},t,this)}}},{key:"removeEventListeners",value:function(){var e=this._util,i=e.behavior,r=e.elem,s=e.indicatorWithCountElem,a=e.shouldAutoSwitch,n=e.sliderElem;if("native"===i)return void I(n||r,"scroll",this._syncWithThrottle);s&&I(s,"click",this.indicatorClick),a&&s&&(E(s,"mouseover",this.indicatorMouseover),E(s,"mouseleave",this.indicatorMouseLeave)),this.pauseAutoSwitch(),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"removeEventListeners",this).call(this)}},{key:"preFetch",value:function(){if(!window.wafer.base.isBot)for(var e=this._util.dataList,t=0;t<3;t++){var i=e.getForward(t),r=e.getBackward(t);i&&this.renderSlide(i,{prefetch:!0}),r&&this.renderSlide(r,{prefetch:!0})}}},{key:"snapNativeScrollViewToActiveElement",value:function(){}},{key:"handleResize",value:function(){}},{key:"handleFetch",value:function(e){}},{key:"renderSlide",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.prefetch,r=void 0!==i&&i,s=this._util.sliderElem;if(!r||C(s,{offsetX:0,offsetY:0},f.viewport)){var a=void 0,n=void 0,o=void 0,l=void 0,u=e.getAttribute(_+"url");switch(u&&(a="fetch",o=!!Number(e.getAttribute(_+"replace")),n=e.getAttribute(_+"result-selector"),l=e.getAttribute(_+"body")),a){case"fetch":this.handleFetch(e,{fetchBody:l,fetchUrl:u,prefetch:r,replace:o,resultSelector:n});break;default:r?f.prefetch(e):D(function(){},this._util.transitionDuration)}}}},{key:"updateElemsUsingVirtualElements",value:function(e,t){}},{key:"showCurrent",value:function(){}},{key:"triggerOnChange",value:function(){}},{key:"updateIndicators",value:function(e,t){var i=this._util,r=i.indicatorCountElem,s=i.indicatorsCustomCount,a=i.indicatorItems;if(a){var n=a[t],o=a[e];n&&(n.classList.remove(F),n.removeAttribute("aria-current")),o&&(o.classList.add(F,X),o.setAttribute("aria-current",!0))}r&&(r.innerHTML=s&&s[e]||e+1)}},{key:"updateButtons",value:function(e){var t=this._util,i=t.behavior,r=t.nextBtn,s=t.prevBtn;if("native"!==i){var a=t.counter,n=t.cycle,o=t.dataList,l=o.size;r&&(n&&!e||a!==l-1?r.removeAttribute("disabled"):r.setAttribute("disabled",!0)),s&&(n&&!e||0!==a?s.removeAttribute("disabled"):s.setAttribute("disabled",!0))}else{var u=this._state.activeElem;if(u){var c=u.previousElementSibling,d=u.nextElementSibling;r&&(d?r.removeAttribute("disabled"):r.setAttribute("disabled",!0)),s&&(c?s.removeAttribute("disabled"):s.setAttribute("disabled",!0))}}}},{key:"updateAfterDrag",value:function(){}},{key:"didLock",value:function(){this.pauseAutoSwitch()}},{key:"didUnLock",value:function(){}},{key:"isValidMove",value:function(e){}},{key:"grab",value:function(){}},{key:"grabbing",value:function(){}},{key:"clearDrag",value:function(){}},{key:"indicatorClick",value:function(e){}},{key:"scrollViewTransformAnimationDidComplete",value:function(){}},{key:"indicatorMouseover",value:function(e){}},{key:"indicatorMouseLeave",value:function(e){}},{key:"getSnapSlideScrollToNode",value:function(e,t){}},{key:"checkAndAddActiveClassForNativeOverflow",value:function(){}},{key:"next",value:function(e){}},{key:"resetAutoSwitchState",value:function(){}},{key:"pause",value:function(e){}},{key:"prev",value:function(e){}},{key:"resume",value:function(e){}},{key:"keydown",value:function(e){}},{key:"touchstart",value:function(e){}},{key:"touchend",value:function(e){}},{key:"touchmove",value:function(e){}},{key:"mousedown",value:function(e){}},{key:"mouseover",value:function(){}},{key:"mouseup",value:function(e){}},{key:"mouseleave",value:function(e){}},{key:"mousemove",value:function(e){}},{key:"tabClick",value:function(e){}},{key:"remove",value:function(){}},{key:"stateDidUpdate",value:function(){}},{key:"destroy",value:function(){this.removeEventListeners(),h(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"negativeWidthCoefficient",get:function(){if(!this.isReady())return 0;var e=this._util,t=e.counter,i=e.dataList,r=e.resizeEnd,s=e.rightPadding;if(t>=i.size-2){if(s)return-s;if(r){var a=i.tail;if(!a)return 0;var n=a.style.width,o=a.getBoundingClientRect().width;a.style.width="";var l=a.getBoundingClientRect(),u=l.width;return a.style.width=n,-(o-Math.min(u,o))}}return 0}}]),t}(y);q.events={click:[["has-scrollsnap-click","tabClick"],["next-btn","next"],["pause-btn","pause"],["prev-btn","prev"],["resume-btn","resume"]],keydown:[["_self","keydown"]],mousedown:[["slides","mousedown"]],mouseleave:[["next-btn","mouseleave"],["prev-btn","mouseleave"],["_self","mouseleave"]],mousemove:[["slides","mousemove"]],mouseover:[["next-btn","mouseover"],["prev-btn","mouseover"],["_self","mouseover"]],mouseup:[["slides","mouseup"]],touchend:[["slides","touchend"]],touchmove:[["slides","touchmove"]],touchstart:[["slides","touchstart"]]},t.default=q,e.exports=t.default},"./src/controller.js":function(e,t,i){"use strict";function r(){return l=s(i("./src/base.js"))}function s(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l,u=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),c=function e(t,i,r){},d=window.wafer,h=d.base,v=d.controllers,f=d.utils,p=f.elementInView,m=f.throttle,g=v.WaferBaseController,y=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.root,s=void 0===i?document:i,o=e.selector,u=void 0===o?".wafer-scrollview":o;a(this,t);var c=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{root:s,selector:u,WaferClass:(l||r()).default}));return c.sync(),c._validateWithThrottle=m(function(){c.validate()},25,c),c}return o(t,e),u(t,[{key:"handleVisibilityChange",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this._state.elementInstances,i=!0,r=!1,s=void 0;try{for(var a,n=t.values()[Symbol.iterator]();!(i=(a=n.next()).done);i=!0){var o=a.value,l=o.instance;l._util.shouldAutoSwitch&&(e?(l.resetAutoSwitchState(),l.setTimeoutForAutoSwitch({force:!0})):l.pauseAutoSwitch())}}catch(e){r=!0,s=e}finally{try{!i&&n.return&&n.return()}finally{if(r)throw s}}}},{key:"handleScroll",value:function(){this._validateWithThrottle()}},{key:"handleResize",value:function(){}},{key:"willValidate",value:function(e){var t=this._state.elementInstances;e.forEach(function(e){var i=t.get(e),r=i.instance;r._util.shouldAutoSwitch&&(p(e,{offsetX:0,offsetY:0},h.viewport)?r.setTimeoutForAutoSwitch():r.pauseAutoSwitch())})}}]),t}(g);t.default=y,e.exports=t.default},"./src/data.js":function(e,t,i){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),a="next",n="prev",o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.windowLimit,s=void 0===i?5:i;r(this,e),this.active=null,this.elemMapping=new Map,this.tail=null,this.cycle=!1,this.head=null,this.scrollItemsLimit=Math.floor(s/2)}return s(e,[{key:"add",value:function(e){var t=this.tail,i=this.elemMapping.size;if(t){var r=this.elemMapping.get(t);this.elemMapping.set(e,new Map([["index",i],[a,r.get(a)],[n,t]])),this.elemMapping.get(this.tail).set(a,e),this.elemMapping.get(this.head).set(n,e),this.tail=e}else this.elemMapping.set(e,new Map([["index",i],[a,e],[n,e]])),this.head=this.tail=e;this.active||(this.active=e)}},{key:"remove",value:function(e){}},{key:"getActive",value:function(){return this.active}},{key:"setNextAsActive",value:function(){}},{key:"setPreviousAsActive",value:function(){}},{key:"getElementToAppend",value:function(){}},{key:"getElementToPrepend",value:function(){}},{key:"getForward",value:function(e){for(var t=0,i=this.active;t++<e;){if(i=this.elemMapping.get(i).get(a),!this.cycle&&i===this.head)return null}return i}},{key:"getBackward",value:function(e){for(var t=0,i=this.active;t++<e;){if(i=this.elemMapping.get(i).get(n),!this.cycle&&this.tail===i)return null}return i}},{key:"appendWithReplace",value:function(e,t){}},{key:"size",get:function(){return this.elemMapping.size}}]),e}();t.default=o,e.exports=t.default},"./src/entry.js":function(e,t,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var s;t.default=new((s||function(){return s=r(i("./src/controller.js"))}()).default)({}),e.exports=t.default}})});