!function(){var n,e,t,i,o,r="click",a="#login-banner",s="loginBanner.ldt",l="loginBanner.dc",c="loginBanner.tdc",d="loginBannerVisible",g="loginBannerShowedCount";function m(e){var t=this;t.config=e||{},t.tracker=n.YAHOO&&n.YAHOO.i13n&&n.YAHOO.i13n.rapidInstance,o=n.wafer,t.backOffPeriodValidity()&&t.setupLoginBanner()}function h(n){var e;if("function"==typeof n&&(e=n),i=document.querySelector(a)){var t=new m(JSON.parse(i.dataset.config));e&&e(null,t)}else e&&e(new Error("Login banner init failed"))}function B(i,o,r){n=i,e=i.localStorage,t=o}m.prototype={backOffPeriodValidity:function(){var n=this,t=!1,i=Math.floor((new Date).getTime()/1e3),o=parseInt(e.getItem(s),10),r=parseInt(e.getItem(l),10),a=n.config.bannerTimeToResurrect||604800;return n.config.bannerMaxViewsCount&&(!r||r<n.config.bannerMaxViewsCount)?t=!0:o&&i-o>a&&(t=!0,e.setItem(l,0)),t},handleLoginBannerDismiss:function(){var n=this,t=Number(n.config.bannerMaxViewsCount)||0,i=n.config.i13nDismissBtn;n.initializeTimestamp(s),i.cat=parseInt(e.getItem(c),10),t&&e.setItem(l,t),n.tracker&&n.tracker.beaconClick(i.sec,i.slk,i.pos,i),n.hideLoginBanner()},handleLoginBannerOnboard:function(){var n=this,t=n.config.i13nYesBtn;t.cat=parseInt(e.getItem(c),10),n.tracker&&n.tracker.beaconClick(t.sec,t.slk,t.pos,t),n.hideLoginBanner()},handleLoginBannerSignUp:function(){var n=this,t=n.config.i13nSignUpBtn;t.cat=parseInt(e.getItem(c),10),n.tracker&&n.tracker.beaconClick(t.sec,t.slk,t.pos,t),n.hideLoginBanner()},hideLoginBanner:function(){var n=this;t.body.classList.remove(d),n.onboardBtn.removeEventListener(r,n.handleLoginBannerOnboard),n.dismissBtn.removeEventListener(r,n.handleLoginBannerDismiss),i.classList.remove("test-helper")},initializeTimestamp:function(n){var t=Math.floor((new Date).getTime()/1e3),i=parseInt(e.getItem(n),10)||0;(!i||i<t)&&e.setItem(n,t)},setupLoginBanner:function(){var n=this;n.bannerNode=t.querySelector(a),n.onboardBtn=t.querySelector(".login-banner-onboard-btn"),n.dismissBtn=t.querySelector(".login-banner-dismiss-btn"),n.signUpBtn=t.querySelector(".login-banner-signup-btn"),n.bannerNode&&n.onboardBtn&&n.dismissBtn&&(n.showLoginBanner=n.showLoginBanner.bind(n),n.handleLoginBannerOnboard=n.handleLoginBannerOnboard.bind(n),n.handleLoginBannerSignUp=n.handleLoginBannerSignUp.bind(n),n.handleLoginBannerDismiss=n.handleLoginBannerDismiss.bind(n),n.onboardBtn.addEventListener(r,n.handleLoginBannerOnboard),n.signUpBtn.addEventListener(r,n.handleLoginBannerSignUp),n.dismissBtn.addEventListener(r,n.handleLoginBannerDismiss),Number(n.config.bannerScrollThreshold)?o&&o.on&&o.on("scroll",n.showLoginBanner):n.showLoginBanner())},showLoginBanner:function(r){var a,m=this,h=Number(m.config.bannerScrollThreshold)||0,B=Number(m.config.enableOtherPromoCheck)||0,b=m.config.bannerPosition;if(!(B&&n.hpClientInstance&&n.hpClientInstance.promoSlots&&(a=n.hpClientInstance.promoSlots)&&a.getItemAtSlot(b))&&(!h||r&&r.scrollY&&h<=r.scrollY)){o&&o.removeListener&&o.removeListener("scroll",m.showLoginBanner);var u=parseInt(e.getItem(g),10)||0;if(0===u){var f=parseInt(e.getItem(l),10)||0,p=parseInt(e.getItem(c),10)||0;m.initializeTimestamp(s),t.body.classList.add(d),i.classList.add("test-helper"),a&&a.addToSlot(b,"login-banner"),e.setItem(g,u+1),e.setItem(l,f+1),e.setItem(c,p+1)}else i.classList.remove("test-helper"),u>=m.config.maxVisitsWithoutBanner?e.setItem(g,0):e.setItem(g,u+1)}}},"undefined"!=typeof module?(module.exports.LoginBannerFunc=m,module.exports.defineGlobals=B,module.exports.initLoginBanner=h):(B(window,document),function(e){var t=n[e],i="__storage_test__";if(!t)return!1;try{return t.setItem(i,i),t.removeItem(i),!0}catch(n){return n instanceof DOMException&&(22===n.code||1014===n.code||"QuotaExceededError"===n.name||"NS_ERROR_DOM_QUOTA_REACHED"===n.name)&&0!==t.length}}("localStorage")&&("complete"===t.readyState?h():n.addEventListener("load",h)))}();