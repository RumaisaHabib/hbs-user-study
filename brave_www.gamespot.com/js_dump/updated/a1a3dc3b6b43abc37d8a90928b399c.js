"use strict";(self.webpackChunkgamespot=self.webpackChunkgamespot||[]).push([[9150],{4391:(e,t,a)=>{var r=a(4612);const n=new r.ZP("tracking"),s={click:[{delegateSelector:"[data-track-page-event]:not(form)"}],submit:[{delegateSelector:"form[data-track-page-event]"}]};const i=class{constructor({ParamsManager:e,ServicesManager:t}){this.ParamsManager=e,this.ServicesManager=t,this.pageLoadTrackPageEvents()}initialize(){n.log("[MANAGER] Initializing"),this.initPageEventListeners()}initPageEventListeners(){document.addEventListener("update_tracking_params",(e=>{const{eventName:t,trackingParamsOverride:a,trackingParamsUpdateType:r=!0}=e.detail;t&&a&&(n.log(`[MANAGER] ${"string"==typeof r?r:"update"} tracking params for [${t}] with: `,a),this.ParamsManager.getParams({eventName:t,trackingParamsOverride:a,trackingParamsUpdateType:r},!0))})),document.addEventListener("on_page_event",(e=>{const{eventName:t}=e.detail;this.trackPageView({eventName:t})})),document.addEventListener("on_tracking_event",(e=>{const{detail:t}=e;this.trackPageView(t)}));for(const[e,t]of Object.entries(s))for(const a of t){const{delegateSelector:t}=a;t&&(n.log(`[MANAGER] Add [${e}] event listener to document for ${t} elements`),document.addEventListener(e,(a=>{const r=a.target.closest(t);r&&(n.log(`[MANAGER] [${e}] event from document for ${t} element detected`),this.trackPageEvent({eventTarget:r}))})))}n.log("[MANAGER] Document event listeners initialized")}pageLoadTrackPageEvents(){document.querySelectorAll("meta.js-track-page-event").forEach((e=>{this.trackPageEvent({paramsAttributeKey:"content",eventTarget:e})}))}trackPageEvent(e){}trackPageView(e){n.log("[MANAGER] trackPageView: ",e),this.ServicesManager.callServiceMethod({methodName:"trackPageView",serviceTrackingParams:this.ParamsManager.getParams(e,!0)})}};var o=a(9996),c=a.n(o),l=a(4339);const g=new class{constructor(e=window){const{utag_data:t={}}=e;e.utag_data||(e.utag_data=t),this.srcWindow=e}setValue(e,t){}setValues(e,t=[]){}},d="pageLoad";class u{constructor(){this.pageLoadEventName=d,this.trackingParams={},this.getParams({eventName:this.pageLoadEventName})}getTrackPageEventParams({paramsAttributeKey:e="data-track-page-event",eventTarget:t}){}getParams({eventName:e="pageLoad",trackingParamsOverride:t,trackingParamsUpdateType:a=!0},r=!1){const s=e===this.pageLoadEventName;let i=!1,o=this.trackingParams[e];return void 0===o?(i=!0,o=t||(s?l.D.getTrackingSettings():this.getParamsFromEventMetaElements(e))):t&&a&&(i=!0,o="replace"===a?t:c()(o,t)),i&&(this.trackingParams[e]=o),n.log(`[PARAMS] Tracking params for ${e}: `,o),null!==o&&(o=c().all([o])),r&&o.tealium&&o.tealium.utagData&&this.updateGlobalUtagData(o.tealium.utagData),o}getParamsFromEventMetaElements(e){}hasParams(e){let t=this.trackingParams[e];return void 0===t&&(t=this.getParams({eventName:e})),null!==t&&Object.keys(t).length>0}updateGlobalUtagData(e){}}class m{constructor(e){this.params=e}canTrackPageEvent(){}canTrackPageView(){}}class h extends m{constructor(e){super(e),this.hasComscoreService=!1}trackPageView(e){this.hasComscoreService||(this.hasComscoreService=void 0!==window.COMSCORE),this.hasComscoreService&&e&&(n.log("[COMSCORE SERVICE] trackPageView",e),window.COMSCORE.beacon(e))}}var v=a(8721);const p=new class{constructor(){this.guidMetaElement=document.getElementById("view-guid-meta"),this.guid=this.guidMetaElement?this.guidMetaElement.getAttribute("content"):""}get(){return this.guid}update(){this.guid=(0,v.Z)(),this.guidMetaElement&&this.guidMetaElement.setAttribute("content",this.guid)}};p.get()||p.update(),document.addEventListener("pre_page_event",(()=>{p.update()}));const k=p,E={event:"eventName",click_id:"commerceClickId",retailer:"merchantName",price:"merchantPrice",auth_method:"authMethod"};class S extends m{constructor(e){super(e),window.dataLayer=window.dataLayer||[],this.trackPageView(e)}trackPageEvent(e){}trackPageView(e){const t={event:"Pageview",pageview_id:this.getPageViewGuid(),...e,...this.getUserPageVars()};window.dataLayer.push(t),n.log(`[GTM SERVICE] Track GoogleTagManager page view: ${JSON.stringify(t)}`)}getPageEventParams(e){}getPageViewGuid(){return k.get()}getUserPageVars(){return{registered_user_id:l.D.getUserVar("userId")}}}const f=class{constructor(){}getParams(e,t){}getLookupTable(){}},y={api_result_event:[{customLinkType:"trackApiCall"}],click:[{customLinkType:"trackClick",delegateSelector:".js-event-tracking"},{customLinkType:"trackCommentPost",delegateSelector:".js-comment-post-event-tracking"},{customLinkType:"trackForumPost",delegateSelector:".js-forum-post-event-tracking"},{customLinkType:"trackLeadClick",delegateSelector:".js-lead-click-event-tracking"},{customLinkType:"trackPodcastDownloadClick",delegateSelector:".js-podcast-download-event-tracking"},{customLinkType:"trackSearchRelatedVideoClick",delegateSelector:".js-search-video-event-tracking"},{customLinkType:"trackVideoDownloadClick",delegateSelector:".js-video-download-event-tracking"}],customEventTracking:[{customLinkType:"trackCustom",delegateSelector:".js-custom-event-tracking"},{customLinkType:"trackCustom",delegateSelector:".js-event-tracking"},{customLinkType:"trackUpvoteClick",delegateSelector:".js-upvote-event-tracking"}],followEventTracking:[{customLinkType:"trackGameFollowClick",delegateSelector:".js-game-follow-event-tracking"},{customLinkType:"trackGBShowFollowClick",delegateSelector:".js-gb-show-follow-event-tracking"},{customLinkType:"trackShowFollowClick",delegateSelector:".js-show-follow-event-tracking"},{customLinkType:"trackUserFollowClick",delegateSelector:".js-user-follow-event-tracking"}],newsletterSubscribe:[{customLinkType:"trackNewsletterSignUp",delegateSelector:".js-newsletter-signup-event-tracking"}],trackAcceptNotifications:[{customLinkType:"trackAcceptNotifications"}]};const P=new class{constructor(){this.currentAttemptIndex=0,this.maxAttemptCount=10,this.omObject=void 0,this.timeoutDurations={0:100,1:100,2:200,3:300,4:500,5:800,6:1300,7:2100,8:3400,9:5500}}async isAvailable(){}getOmObject(){}checkAdobeAvailable(){}};class w{constructor(){}getEventTrackingData(e,t){}initPageEventListeners(){}initSectionTagging(){}handleApiResultEventTracking(e,t){}handleCustomEventTracking(e,t){}handleDelegateCustomEventTracking(e,t,a){}handleOnPageEvent(){}async trackCustomEvent({customLinkType:e,eventTrackingData:t}){}trackImpressions(){}trackPageLoadEvents(){}}var b=a(5492);class T extends m{constructor(e){}async trackPageView(e){}getContextParams(){}getPageViewGuid(){}getSeamlessScrollPage(){}getUtagDataParams(e){}getUtagServicesParams(){}}class A extends m{constructor(e){super(e),this.hasTrackonomics=!1,this.initPageEventListeners()}refreshTrackonomics(){}initPageEventListeners(){const{jQuery:e}=window;if(!e)return;e(document).on("ajaxContentLoaded",(()=>{this.refreshTrackonomics()}))}}const L=class{constructor(){this.services={}}async hasServices(e){return(await this.getServices({serviceNames:Object.keys(e),serviceTrackingParams:e})).length>0}callServiceMethod({methodName:e,baseTrackingParams:t,serviceNames:a,serviceTrackingParams:r}){a||(a=r?Object.keys(r):this.getServiceNames()),this.getServices({serviceNames:a,serviceTrackingParams:r}).then((a=>{a.forEach((({serviceName:a,trackingService:s})=>{let i={...t};(null==r?void 0:r[a])&&(i={...i,...r[a]}),void 0!==s&&"function"==typeof s[e]&&(n.log(`[SERVICES] Calling ${a}.${e} with settings: ${JSON.stringify(i)}`),s[e](i))}))}))}getService(e,t){const{PhoenixLoader:a}=window;let r,s,i=!1,o="",c=`Service not found: ${e}`;return new Promise((l=>{"comscore"===e&&(n.log("[SERVICES] Add comscore to tracking services"),i=!0,r="comscore",o="Comscore added",c="Comscore disabled",s=h),"google_tag_manager"===e&&(n.log("[SERVICES] Add google tag manager to tracking services"),i=!0,r="google_tag_manager",o="Google Tag Manager added",c="Google Tag Manager disabled",s=S),"tealium"===e&&(n.log("[SERVICES] Add tealium to tracking services"),i=!0,r="tealium",c="Tealium disabled",o="Tealium added",s=T),"trackonomics"===e&&(n.log("[SERVICES] Add trackonomics to tracking services"),i=!0,r="trackonomics",c="Trackonomics disabled",o="Trackonomics added",s=A),!0===i?a.gdprConsentCallback(r,(()=>{this.services[e]=new s(t),n.log(`[SERVICES] ${o}`),l({serviceName:e,trackingService:this.services[e]})}),"performance",(()=>{n.error(`[SERVICES] ${c}`),l({errorMessage:c,serviceName:e,trackingService:void 0})})):(n.error(`[SERVICES] ${c}`),l({errorMessage:c,serviceName:e,trackingService:void 0}))}))}getServiceNames(){}getServices({serviceNames:e,serviceTrackingParams:t={}}){const a=[];return e.forEach((e=>{const r=t[e];let n;this.services[e]?n=Promise.resolve({serviceName:e,trackingService:this.services[e]}):r&&(n=this.getService(e,r)),n&&a.push(n)})),Promise.all(a)}},{Phoenix:C,PhoenixLoader:M}=window;let O;if(C&&C.Storage)O=C.Storage.get("jsDebug");else{const e=new URLSearchParams(window.location.search).get("jsDebug");O="string"==typeof e?e.split(","):[]}O&&r.yM.setEnabledServices(O);const V=[],N={PhoenixLoaderReady:void 0===M},j=()=>{n.log("[ROADBLOCKS] ",JSON.stringify(N))};j(),N.PhoenixLoaderReady||V.push(new Promise((e=>{M.gdprConsentCallback(!0,(function(){N.PhoenixLoaderReady=!0,n.log("[ROADBLOCKS] Privacy consent allowed"),j(),e()}),"performance")})));Promise.all(V).then((async()=>{n.log("Tracking initialization begin"),n.log("Initialize ParamsManager");const e=new u,t=e.hasParams(d);n.log("Has tracking params: ",t),n.log("Initialize ServicesManager");const a=new L,r=e.getParams({eventName:d}),s=await a.hasServices(r);if(n.log("Has tracking services: ",s),t&&s){new i({ParamsManager:e,ServicesManager:a}).initialize()}else n.error("Unable to initialize: missing tracking params and services");C&&C.Storage&&C.Storage.remove("referringPageTypes"),n.log("Tracking initialization end"),document.dispatchEvent(new Event("tracking_initialized"))}))},4339:(e,t,a)=>{a.d(t,{D:()=>r,Z:()=>n});const r=new class{constructor(){const{sitePageVars:e}=window;this.sitePageVars=e}getFeatureFlags(){}getTrackingSettings(){return this.sitePageVars&&this.sitePageVars.trackingSettings?this.sitePageVars.trackingSettings:null}getUserVar(e){return this.sitePageVars&&this.sitePageVars.user?this.sitePageVars.user[e]:null}},n=r},4612:(e,t,a)=>{a.d(t,{cG:()=>i,yM:()=>o,ZP:()=>c});const r={error(...e){},info(...e){},log(...e){},profile(...e){},profileEnd(...e){},timeStamp(...e){},trace(...e){},warn(...e){}},n={},s=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;class i{constructor(e){}browserArgs(e,t){}disable(){}enable(){}error(...e){}info(...e){}log(...e){}profile(...e){}profileEnd(...e){}timeStamp(...e){}trace(...e){}warn(...e){}get(e){}_call(e,...t){}}const o=new class{constructor(){}add(e){}setEnabledServices(e){}detectServices(){}},c=i},5492:(e,t,a)=>{a.d(t,{Z:()=>n});const r=new(a(4612).ZP)("loader"),n={load:(e,t={async:!0},a=!1)=>new Promise(((n,s)=>{try{const i=a?null:document.querySelector('script[src="'+e+'"]');if(a&&r.log(`Force load ${e}`),i)i.addEventListener("load",n),i.addEventListener("error",(()=>{s(new Error(`Loading script src = '${e}' errored.`))})),i.addEventListener("abort",(()=>{s(new Error(`Loading script src = '${e}' was aborted.`))}));else{r.log("Loading Script ... ",e);const a=document.createElement("script");a.type="text/javascript",a.async=t.async,a.src=e,a.addEventListener("load",(()=>{r.log("Script Loaded  ",e),n()})),a.addEventListener("error",(()=>{s(new Error(`Loading script src = '${e}' errored.`))})),a.addEventListener("abort",(()=>{s(new Error(`Loading script src = '${e}' was aborted.`))}));const i=document.head||document.getElementsByTagName("head")[0];i?i.appendChild(a):s(new Error(`Unable to get <head> element to append script src = '${e}' to.`))}}catch(t){r.error("Error Loading Script ",e),s(t)}}))}},9996:e=>{var t=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===a}(e)}(e)};var a="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(e,t){return!1!==t.clone&&t.isMergeableObject(e)?c((a=e,Array.isArray(a)?[]:{}),e,t):e;var a}function n(e,t,a){}function s(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){})):[]}(e))}function i(e,t){try{return t in e}catch(e){return!1}}function o(e,t,a){var n={};return a.isMergeableObject(e)&&s(e).forEach((function(t){n[t]=r(e[t],a)})),s(t).forEach((function(s){(function(e,t){return i(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,s)||(i(e,s)&&a.isMergeableObject(t[s])?n[s]=function(e,t){if(!t.customMerge)return c;var a=t.customMerge(e);return"function"==typeof a?a:c}(s,a)(e[s],t[s],a):n[s]=r(t[s],a))})),n}function c(e,a,s){(s=s||{}).arrayMerge=s.arrayMerge||n,s.isMergeableObject=s.isMergeableObject||t,s.cloneUnlessOtherwiseSpecified=r;var i=Array.isArray(a);return i===Array.isArray(e)?i?s.arrayMerge(e,a,s):o(e,a,s):r(a,s)}c.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,a){return c(e,a,t)}),{})};var l=c;e.exports=l},8721:(e,t,a)=>{a.d(t,{Z:()=>l});const r={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let n;const s=new Uint8Array(16);function i(){}const o=[];for(let e=0;e<256;++e)o.push((e+256).toString(16).slice(1));function c(e,t=0){}const l=function(e,t,a){if(r.randomUUID&&!t&&!e)return r.randomUUID();const n=(e=e||{}).random||(e.rng||i)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){a=a||0;for(let e=0;e<16;++e)t[a+e]=n[e];return t}return c(n)}}},e=>{var t;t=4391,e(e.s=t)}]);