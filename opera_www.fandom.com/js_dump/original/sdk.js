!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.SilverSurferSDK=e():t.SilverSurferSDK=e()}(window,(function(){return(()=>{var t={9996:t=>{"use strict";var e=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===n}(t)}(t)},n="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function r(t,e){return!1!==e.clone&&e.isMergeableObject(t)?c((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function o(t,e,n){return t.concat(e).map((function(t){return r(t,n)}))}function i(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function a(t,e){try{return e in t}catch(t){return!1}}function c(t,n,s){(s=s||{}).arrayMerge=s.arrayMerge||o,s.isMergeableObject=s.isMergeableObject||e,s.cloneUnlessOtherwiseSpecified=r;var u=Array.isArray(n);return u===Array.isArray(t)?u?s.arrayMerge(t,n,s):function(t,e,n){var o={};return n.isMergeableObject(t)&&i(t).forEach((function(e){o[e]=r(t[e],n)})),i(e).forEach((function(i){(function(t,e){return a(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,i)||(a(t,i)&&n.isMergeableObject(e[i])?o[i]=function(t,e){if(!e.customMerge)return c;var n=e.customMerge(t);return"function"==typeof n?n:c}(i,n)(t[i],e[i],n):o[i]=r(e[i],n))})),o}(t,n,s):r(n,s)}c.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return c(t,n,e)}),{})};var s=c;t.exports=s},8668:(t,e,n)=>{var r=n(1469);t.exports=function(){if(!arguments.length)return[];var t=arguments[0];return r(t)?t:[t]}},6384:(t,e,n)=>{var r=n(7040),o=n(4125),i=n(2117),a=n(7518),c=n(4705);function s(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}s.prototype.clear=r,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=c,t.exports=s},7443:(t,e,n)=>{var r=n(2118);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},1196:t=>{t.exports=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1}},9932:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}},2908:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},4865:(t,e,n)=>{var r=n(9465),o=n(7813),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];i.call(t,e)&&o(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},8470:(t,e,n)=>{var r=n(7813);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},9465:(t,e,n)=>{var r=n(8777);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},5990:t=>{t.exports=function(t){return t}},7786:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},4239:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},2118:t=>{t.exports=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1}},939:(t,e,n)=>{var r=n(2492),o=n(7005);t.exports=function t(e,n,i,a,c){return e===n||(null==e||null==n||!o(e)&&!o(n)?e!=e&&n!=n:r(e,n,i,a,t,c))}},2492:(t,e,n)=>{var r=n(6384),o=n(7114),i=n(8351),a=n(6096),c=n(4160),s=n(1469),u=n(4144),l=n(6719),d="[object Arguments]",f="[object Array]",p="[object Object]",v=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,h,g,y){var b=s(t),m=s(e),w=b?f:c(t),S=m?f:c(e),_=(w=w==d?p:w)==p,O=(S=S==d?p:S)==p,x=w==S;if(x&&u(t)){if(!u(e))return!1;b=!0,_=!1}if(x&&!_)return y||(y=new r),b||l(t)?o(t,e,n,h,g,y):i(t,e,w,n,h,g,y);if(!(1&n)){var E=_&&v.call(t,"__wrapped__"),I=O&&v.call(e,"__wrapped__");if(E||I){var A=E?t.value():t,j=I?e.value():e;return y||(y=new r),g(A,j,n,h,y)}}return!!x&&(y||(y=new r),a(t,e,n,h,g,y))}},7206:t=>{t.exports=function(t){return t}},280:(t,e,n)=>{var r=n(5569)(Object.keys,Object);t.exports=r},9877:t=>{var e=Math.floor,n=Math.random;t.exports=function(t,r){return t+e(n()*(r-t+1))}},4259:t=>{t.exports=function(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+e];return i}},5652:(t,e,n)=>{var r=n(8668),o=n(7443),i=n(1196),a=n(4757),c=n(3593),s=n(1814);t.exports=function(t,e,n){var u=-1,l=o,d=t.length,f=!0,p=[],v=p;if(n)f=!1,l=i;else if(d>=200){var h=e?null:c(t);if(h)return s(h);f=!1,l=a,v=new r}else v=e?[]:p;t:for(;++u<d;){var g=t[u],y=e?e(g):g;if(g=n||0!==g?g:0,f&&y==y){for(var b=v.length;b--;)if(v[b]===y)continue t;e&&v.push(y),p.push(g)}else l(v,y,n)||(v!==p&&v.push(y),p.push(g))}return p}},7406:(t,e,n)=>{var r=n(1811),o=n(928),i=n(292),a=n(327);t.exports=function(t,e){return e=r(e,t),null==(t=i(t,e))||delete t[a(o(e))]}},4757:(t,e,n)=>{var r=n(2118);t.exports=function(t,e){return!(null==t||!t.length)&&r(t,e,0)>-1}},1811:(t,e,n)=>{var r=n(1469);t.exports=function(){if(!arguments.length)return[];var t=arguments[0];return r(t)?t:[t]}},8363:(t,e,n)=>{var r=n(4865),o=n(9465);t.exports=function(t,e,n,i){var a=!n;n||(n={});for(var c=-1,s=e.length;++c<s;){var u=e[c],l=i?i(n[u],t[u],u,n,t):void 0;void 0===l&&(l=t[u]),a?o(n,u,l):r(n,u,l)}return n}},3593:t=>{t.exports=function(){}},696:(t,e,n)=>{var r=n(8630);t.exports=function(t){return r(t)?void 0:t}},8777:(t,e,n)=>{var r=n(852),o=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},7114:(t,e,n)=>{var r=n(8668),o=n(2908),i=n(4757);t.exports=function(t,e,n,a,c,s){var u=1&n,l=t.length,d=e.length;if(l!=d&&!(u&&d>l))return!1;var f=s.get(t),p=s.get(e);if(f&&p)return f==e&&p==t;var v=-1,h=!0,g=2&n?new r:void 0;for(s.set(t,e),s.set(e,t);++v<l;){var y=t[v],b=e[v];if(a)var m=u?a(b,y,v,e,t,s):a(y,b,v,t,e,s);if(void 0!==m){if(m)continue;h=!1;break}if(g){if(!o(e,(function(t,e){if(!i(g,e)&&(y===t||c(y,t,n,a,s)))return g.push(e)}))){h=!1;break}}else if(y!==b&&!c(y,b,n,a,s)){h=!1;break}}return s.delete(t),s.delete(e),h}},8351:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},6096:(t,e,n)=>{var r=n(8234),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,i,a,c){var s=1&n,u=r(t),l=u.length;if(l!=r(e).length&&!s)return!1;for(var d=l;d--;){var f=u[d];if(!(s?f in e:o.call(e,f)))return!1}var p=c.get(t),v=c.get(e);if(p&&v)return p==e&&v==t;var h=!0;c.set(t,e),c.set(e,t);for(var g=s;++d<l;){var y=t[f=u[d]],b=e[f];if(i)var m=s?i(b,y,f,e,t,c):i(y,b,f,t,e,c);if(!(void 0===m?y===b||a(y,b,n,i,c):m)){h=!1;break}g||(g="constructor"==f)}if(h&&!g){var w=t.constructor,S=e.constructor;w==S||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof S&&S instanceof S||(h=!1)}return c.delete(t),c.delete(e),h}},9021:t=>{t.exports=function(t){return t}},8234:(t,e,n)=>{var r=n(5569)(Object.keys,Object);t.exports=r},6904:t=>{t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},852:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},5924:(t,e,n)=>{var r=n(5569)(Object.getPrototypeOf,Object);t.exports=r},4160:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},6612:t=>{t.exports=function(){return!1}},5726:t=>{t.exports=function(){return!1}},7040:t=>{t.exports=function(){this.__data__=[],this.size=0}},4125:(t,e,n)=>{var r=n(8470),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():o.call(e,n,1),--this.size,0))}},2117:(t,e,n)=>{var r=n(8470);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},7518:(t,e,n)=>{var r=n(8470);t.exports=function(t){return r(this.__data__,t)>-1}},4705:(t,e,n)=>{var r=n(8470);t.exports=function(t,e){var n=this.__data__,o=r(n,t);return o<0?(++this.size,n.push([t,e])):n[o][1]=e,this}},5569:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},292:t=>{t.exports=function(t){return t}},1814:t=>{t.exports=function(){return[]}},327:t=>{t.exports=function(t){return t}},7813:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},7361:(t,e,n)=>{var r=n(7786);t.exports=function(t,e,n){var o=null==t?void 0:r(t,e);return void 0===o?n:o}},5694:t=>{t.exports=function(){return!1}},1469:t=>{var e=Array.isArray;t.exports=e},8612:(t,e,n)=>{var r=n(3560),o=n(1780);t.exports=function(t){return null!=t&&o(t.length)&&!r(t)}},4144:t=>{t.exports=function(){return!1}},1609:(t,e,n)=>{var r=n(280),o=n(4160),i=n(5694),a=n(1469),c=n(8612),s=n(4144),u=n(5726),l=n(6719),d=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(c(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||s(t)||l(t)||i(t)))return!t.length;var e=o(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(u(t))return!r(t).length;for(var n in t)if(d.call(t,n))return!1;return!0}},8446:(t,e,n)=>{var r=n(939);t.exports=function(t,e){return r(t,e)}},3560:(t,e,n)=>{var r=n(4239),o=n(3218);t.exports=function(t){if(!o(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},1780:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},3218:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},7005:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},8630:(t,e,n)=>{var r=n(4239),o=n(5924),i=n(7005),a=Function.prototype,c=Object.prototype,s=a.toString,u=c.hasOwnProperty,l=s.call(Object);t.exports=function(t){if(!i(t)||"[object Object]"!=r(t))return!1;var e=o(t);if(null===e)return!0;var n=u.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&s.call(n)==l}},6719:t=>{t.exports=function(){return!1}},928:t=>{t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},7557:(t,e,n)=>{var r=n(9932),o=n(5990),i=n(7406),a=n(1811),c=n(8363),s=n(696),u=n(9021),l=n(6904),d=u((function(t,e){var n={};if(null==t)return n;var u=!1;e=r(e,(function(e){return e=a(e,t),u||(u=e.length>1),e})),c(t,l(t),n),u&&(n=o(n,7,s));for(var d=e.length;d--;)i(n,e[d]);return n}));t.exports=d},3608:(t,e,n)=>{var r=n(9877),o=n(6612),i=n(8601),a=parseFloat,c=Math.min,s=Math.random;t.exports=function(t,e,n){if(n&&"boolean"!=typeof n&&o(t,e,n)&&(e=n=void 0),void 0===n&&("boolean"==typeof e?(n=e,e=void 0):"boolean"==typeof t&&(n=t,t=void 0)),void 0===t&&void 0===e?(t=0,e=1):(t=i(t),void 0===e?(e=t,t=0):e=i(e)),t>e){var u=t;t=e,e=u}if(n||t%1||e%1){var l=s();return c(t+l*(e-t+a("1e-"+((l+"").length-1))),e)}return r(t,e)}},9579:(t,e,n)=>{var r=n(4259),o=n(554);t.exports=function(t,e,n){var i=null==t?0:t.length;return i?(e=n||void 0===e?1:o(e),r(t,(e=i-e)<0?0:e,i)):[]}},8601:t=>{t.exports=function(t){return t}},554:t=>{t.exports=function(t){return t}},4908:(t,e,n)=>{var r=n(5652);t.exports=function(t){return t&&t.length?r(t):[]}},5578:(t,e,n)=>{var r=n(7206),o=n(5652);t.exports=function(t,e){return t&&t.length?o(t,r(e,2)):[]}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{ACTION:()=>tc,addAction:()=>oc,addActiveDataAction:()=>rc,addInteraction:()=>sc,default:()=>gc,getActions:()=>ic,getAllActions:()=>ac,getContext:()=>hc,getGalactusUserProfile:()=>vc,getUserProfile:()=>cc,getVersionHash:()=>pc,isCrossdomainDisabled:()=>lc,isCrossdomainFinished:()=>uc,isInitialized:()=>dc,isReady:()=>fc,registerClient:()=>nc,trackPageview:()=>ec});const t=Array.isArray,e=function(){if(!arguments.length)return[];var e=arguments[0];return t(e)?e:[e]},o=function(t,e,n){for(var r=n-1,o=t.length;++r<o;)if(t[r]===e)return r;return-1},i=function(t,e){return!(null==t||!t.length)&&o(t,e,0)>-1},a=function(t,e,n){for(var r=-1,o=null==t?0:t.length;++r<o;)if(n(e,t[r]))return!0;return!1},c=function(t,e){return!(null==t||!t.length)&&o(t,e,0)>-1},s=function(t,n){return t&&t.length?function(t,n,r){var o=-1,s=i,u=t.length,l=!0,d=[],f=d;if(r)l=!1,s=a;else if(u>=200){if(n?null:void 0)return[];l=!1,s=c,f=new e}else f=n?[]:d;t:for(;++o<u;){var p=t[o],v=n?n(p):p;if(p=r||0!==p?p:0,l&&v==v){for(var h=f.length;h--;)if(f[h]===v)continue t;n&&f.push(v),d.push(p)}else s(f,v,r)||(f!==d&&f.push(v),d.push(p))}return d}(t,n):[]};function u(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){u(i,r,o,a,c,"next",t)}function c(t){u(i,r,o,a,c,"throw",t)}a(void 0)}))}}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function f(t,e,n){return e&&d(t.prototype,e),n&&d(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}var p,v,h=function(t,e){return function(t){var e=function(t){var e,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var o=e&&e.prototype instanceof g?e:g,i=Object.create(o.prototype),a=new j(r||[]);return i._invoke=function(t,e,n){var r=d;return function(o,i){if(r===p)throw new Error("Generator is already running");if(r===v){if("throw"===o)throw i;return k()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=v,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var s=l(t,e,n);if("normal"===s.type){if(r=n.done?v:f,s.arg===h)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=v,n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",v="completed",h={};function g(){}function y(){}function b(){}var m={};s(m,i,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(D([])));S&&S!==n&&r.call(S,i)&&(m=S);var _=b.prototype=g.prototype=Object.create(m);function O(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(o,i,a,c){var s=l(t[o],t,i);if("throw"!==s.type){var u=s.arg,d=u.value;return d&&"object"==typeof d&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,c)}))}c(s.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function E(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,E(t,n),"throw"===n.method))return h;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var o=l(r,t.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,h;var i=o.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function D(t){if(t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:k}}function k(){return{value:e,done:!0}}return y.prototype=b,s(_,"constructor",b),s(b,"constructor",y),y.displayName=s(b,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,s(t,c,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},O(x.prototype),s(x.prototype,a,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new x(u(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(_),s(_,c,"Generator"),s(_,i,(function(){return this})),s(_,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=D,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;A(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:D(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}(t.exports);try{regeneratorRuntime=e}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}}(e={exports:{}}),e.exports}(),g=function(){function t(){this.id=t.UNKNOWN_USER,this.language=void 0}var e=t.prototype;return e.reset=function(){this.id=t.UNKNOWN_USER,this.language=void 0},t.getDefault=function(){return new t},t.getAnon=function(){var e=new t;return e.id=t.ANON_USER,e},e.apply=function(e){return e instanceof t&&(this.id=e.id,null!=e&&e.language&&(this.language=e.language)),this},t.fromContext=function(e){return t.getDefault().apply(e)},t.fromTransport=function(e){var n=t.getDefault();if("object"==typeof e&&null!=e&&e.id){var r=e.id;"number"==typeof r?n.id=r:"string"==typeof r&&(n.id=parseInt(r,10)),n.language=null==e?void 0:e.lang}return n},t.fromWindow=function(){var e=window;return null!=e&&e._ulc&&"object"==typeof e._ulc?t.fromTransport(e._ulc):t.getDefault()},e.toTransport=function(){return{id:this.id,lang:this.language}},e.toString=function(){return JSON.stringify(this.toTransport())},e.updateWindow=function(){window._ulc=this.toTransport()},e.toScript=function(){return"window._ulc = "+this.toString()+";"},f(t,[{key:"lang",get:function(){return null==this?void 0:this.language}},{key:"isUnknown",get:function(){return this.id===t.UNKNOWN_USER}},{key:"isAnon",get:function(){return this.isUnknown||this.id===t.ANON_USER}},{key:"anon",get:function(){return this.isAnon}}]),t}();g.UNKNOWN_USER=-1,g.ANON_USER=0,function(t){t.UNKNOWN="unknown",t.MEDIAWIKI="mw",t.DISCUSSIONS="dis",t.TRIVIA="trivia",t.F2="f2",t.FANHUB="fanhub",t.VIDEO="video"}(v||(v={}));var y,b,m,w=((p={})[v.MEDIAWIKI]=!0,p[v.DISCUSSIONS]=!0,p[v.TRIVIA]=!0,p[v.F2]=!0,p[v.FANHUB]=!0,p[v.VIDEO]=!0,p),S=function(){function t(){this.$time=0,this.product=v.UNKNOWN,this.productId=void 0,this.$time=Date.now()}var e=t.prototype;return e.reset=function(){this.product=v.UNKNOWN,this.productId=void 0,this.productVariant=void 0,this.productCategory=void 0,this.page=void 0,this.pageId=void 0,this.pageLanguage=void 0,this.adTags=void 0,this.$time=Date.now()},t.getDefault=function(){return new t},e.zeroTime=function(){return this.$time=0,this},e.apply=function(e){return e instanceof t&&(e.isUnknown||(this.product=e.product),null!=e&&e.productId&&"string"==typeof e.productId&&e.productId.length>0&&(this.productId=e.productId),null!=e&&e.productVariant&&(this.productVariant=e.productVariant),null!=e&&e.productCategory&&(this.productCategory=e.productCategory),null!=e&&e.page&&(this.page=e.page),null!=e&&e.pageId&&(this.pageId=e.pageId),null!=e&&e.pageLanguage&&(this.pageLanguage=e.pageLanguage),null!=e&&e.adTags&&(this.adTags=e.adTags),null!=e&&e.$time&&"number"==typeof e.$time&&e.$time>0&&(this.$time=e.$time)),this},t.fromContext=function(e){return t.getDefault().apply(e)},t.fromTransport=function(e){var n=t.getDefault();return e.p&&e.pId&&"number"==typeof e.time&&(n.product=e.p,n.productId=e.pId,n.productVariant=null==e?void 0:e.pVar,n.productCategory=null==e?void 0:e.pCat,n.page=null==e?void 0:e.pg,n.pageId=null==e?void 0:e.pgId,n.pageLanguage=null==e?void 0:e.pgLang,n.adTags=null==e?void 0:e.adTags,n.$time=e.time>0?e.time:Date.now()),n},t.fromWindow=function(){var e=window;return null!=e&&e._plc&&"object"==typeof e._plc?t.fromTransport(e._plc):t.getDefault()},e.toTransport=function(t){void 0===t&&(t=!1);var e={p:this.product,pId:this.productId,pVar:null==this?void 0:this.productVariant,pCat:null==this?void 0:this.productCategory,pg:null==this?void 0:this.page,pgId:null==this?void 0:this.pageId,pgLang:null==this?void 0:this.pageLanguage,adTags:null==this?void 0:this.adTags,time:this.time};return t&&(e.time=0),e},e.toString=function(t){return void 0===t&&(t=!1),JSON.stringify(this.toTransport(t))},e.updateWindow=function(t){void 0===t&&(t=!1);var e=window;e._plc=this.toTransport(t),t&&(e._plc.time=Date.now())},e.toScript=function(t){void 0===t&&(t=!1);var e="window._plc = "+this.toString(t)+";";return t&&(e+="window._plc.time = Date.now();"),e},f(t,[{key:"time",get:function(){return this.$time}},{key:"isUnknown",get:function(){return"string"!=typeof this.product||!w[this.product]}},{key:"isValid",get:function(){return!this.isUnknown&&"string"==typeof this.productId&&this.$time>0}}]),t}();function _(t,e,n){return void 0===e&&(e="/"),void 0===n&&(n={}),fetch(function(t){var e,n,r=null==(e=window)||null==(n=e.location)?void 0:n.hostname;if(r){if(r.endsWith("fandom.com"))return"https://services.fandom.com/"+t;if(r.endsWith("fandom-dev.us"))return"https://services.fandom-dev.us/"+t}return"http://"+t}(t)+e,n).then((function(n){return"opaque"===n.type||n.ok||401===n.status||404===n.status||console.error("fetch Error",{serviceName:t,path:e,response:n}),n.json()}))}function O(){return x.apply(this,arguments)}function x(){return(x=l(h.mark((function t(){var e,n,r;return h.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_("whoami","/",{credentials:"include"});case 3:return n=t.sent,r=null!=(e=null==n?void 0:n.userId)?e:""+g.ANON_USER,t.abrupt("return",parseInt(r,10));case 8:t.prev=8,t.t0=t.catch(0);case 10:return t.abrupt("return",g.ANON_USER);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function E(){return(E=l(h.mark((function t(){var e;return h.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=g.fromWindow()).isUnknown){t.next=12;break}return t.prev=2,t.next=5,O();case 5:e.id=t.sent,t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(2),console.debug("Failed, falling back to default user context",t.t0),t.abrupt("return",g.getDefault());case 12:return t.abrupt("return",e);case 13:case"end":return t.stop()}}),t,null,[[2,8]])})))).apply(this,arguments)}function I(t){if("object"!=typeof t)return{};for(var e={},n=0,r=Object.entries(t);n<r.length;n++){var o=r[n],i=o[0],a=o[1];a&&(e[i]=a.reduce((function(t,e){return t[e]=1,t}),{}))}return e}function A(t){var e=document.cookie.match(RegExp("(?:^|;\\s*)"+function(t){return t.replace(/([.*+?\^$(){}|\[\]\/\\])/g,"\\$1")}(t)+"=([^;]*)"));return e?e[1]:void 0}function j(){return A("wikia_beacon_id")||""}function D(){return S.fromWindow()}function k(){return g.fromWindow()}!function(t){t.INIT="roots-initial",t.LOADED="roots-loaded"}(y||(y={})),function(t){t.SS_PRE_BOOTSTRAP="ss_pre_bootstrap",t.SS_SDK_START="ss_sdk_start",t.SS_SDK_LOADED="ss_sdk_loaded",t.SS_SDK_READY="ss_sdk_ready",t.SS_CROSS_DOMAIN_READY="ss_cross_domain_ready",t.SS_CROSS_DOMAIN_REGISTER_START="ss_cross_domain_register_start",t.SS_CROSS_DOMAIN_REGISTER_ALL_PAGES_DONE="ss_cross_domain_register_all_pages_done"}(b||(b={})),function(t){t.PF_START="pf_start",t.PF_LOADED="pf_loaded",t.PF_READY="pf_ready"}(m||(m={}));const P=Object.values({SilverSurfer:"silversurfer",PathfinderExperiments:"pf-experiments",ClientSide:"browser-client-",Custom:"custom-"});var C,R;!function(t){t.CATEGORY="category",t.EVENT="event",t.LABEL="label",t.ACTION="action",t.VALUE="value",t.NON_INTERACTIVE="nonInteractive",t.IS_DEBUG="isDebug"}(C||(C={})),function(t){t.EXPERIMENT_VARIANT="experimentVariant",t.SS_VERSION="silverSurferVersion",t.AD_PVUID="pvUID",t.BEACON_ID="beaconId"}(R||(R={}));const T=[...Object.values(R),...Object.values(C)];function N(){var t,e,n;return null!==(n=null===(e=null===(t=null===window||void 0===window?void 0:window.google_tag_manager)||void 0===t?void 0:t.dataLayer)||void 0===e?void 0:e.gtmDom)&&void 0!==n&&n}function L(){N()&&(window.__datalayer_pre=window.__datalayer_pre||[],window.__datalayer_pre.length>0&&(window.__datalayer_pre_interval_id&&window.clearInterval(window.__datalayer_pre_interval_id),window.__datalayer_pre.forEach((t=>window.dataLayer.push(t))),window.__datalayer_pre=[]),window.__datalayer_pre_interval_id&&(window.clearInterval(window.__datalayer_pre_interval_id),window.__datalayer_pre_interval_id=null))}function B(t){if(t.isDebug=!!t.isDebug,t.event){if(window.dataLayer=window.dataLayer||[],t.category||(t.category=t.event),t.label||(t.label=t.category),t.isDebug){e=t.event,P.some((t=>e.includes(t)))||console.warn("[Tracking] GTM event not caught",t.event);const n=T;Object.keys(t).every((e=>!(!n.includes(e)&&!t.skipValidation&&(console.warn("[Tracking] Element not enabled in DW",e),1))))}return function(t){return window.__datalayer_pre=window.__datalayer_pre||[],N()?(L(),window.dataLayer.push(t)):window.__datalayer_pre.push(t)}(t)}var e;return console.error("[Tracking] missing 'event' field",t),null}function M(){return!!window.location.search.includes("ss_debug")||U()}window.__datalayer_pre_interval_id||N()||(window.__datalayer_pre_interval_id=window.setInterval(L,500));const U=()=>/^localhost/.test(location.hostname)||"127.0.0.1"===location.hostname;function F(t,e){const n=n=>{const r=Object.assign(Object.assign({nonInteractive:!0},t),n);return e(r),r};return n.click=e=>n(Object.assign(Object.assign(Object.assign({},t),e),{action:"click",nonInteractive:!1})),n.impression=e=>n(Object.assign(Object.assign(Object.assign({},t),e),{action:"impression",nonInteractive:!0})),n.hover=e=>n(Object.assign(Object.assign(Object.assign({},t),e),{action:"hover",nonInteractive:!0})),n.loaded=e=>n(Object.assign(Object.assign(Object.assign({},t),e),{action:"loaded",nonInteractive:!0})),n.extend=n=>F(Object.assign(Object.assign({},t),n),e),n}function z(t,e){const n=Object.assign({},t);if(!n.event&&!n.category)throw console.error("[Tracking] Missing event or category field",n),new Error("Missing event or category field");return n.category||(n.category=n.event),n.event||(n.event=n.category),F(n,e)}function V(t){return z(t,B)}function W(t){return`${M()?"dev-":""}${t}`}z({category:"base-tracker"},B);const H="__frontend_utils_consistent_random";function $(){return window[H]||(window[H]=Math.random()),window[H]}const G=V({event:"browser-client-timings"});let K=new Map;function q(t,e){var n,r;K.set(t,e),n=t,r=e,(M()||$()<=.005)&&G({category:`timings-event-${n}`,label:r.toString(),action:"timed",value:r})}function Y(t){try{const e=Math.round(Date.now()-function(){if(!window.performance&&!window.performance.timeOrigin)throw new Error("Performance value not set");return window.performance.timeOrigin}());return q(t,e),M()&&console.log("Timing",t,e),e}catch(t){console.error("TimingRecord Error",t)}}function J(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}function X(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((r=r.apply(t,e||[])).next())}))}Object.create,Object.create;var Q=n(9579),Z=n.n(Q),tt=n(7557),et=n.n(tt);const nt={profileId:null,namespaces:{adTags:{},devices:{set:[]},locations:{set:[]},languages:{contentLanguages:[],acceptLanguages:[]}}},rt="silver_surfer_tracking_key_v2",ot="silver_surfer_actions_v2",it="silver_surfer_interactions_v2";const at=t=>`silver-surfer-galactus-fallback-user-profile-v2_${t}`;function ct(){return X(this,void 0,void 0,(function*(){const t=localStorage.getItem(it);return t?JSON.parse(t):{}}))}function st(){return X(this,void 0,void 0,(function*(){const t=localStorage.getItem(rt);return t?JSON.parse(t):[]}))}function ut(){return X(this,void 0,void 0,(function*(){const t=localStorage.getItem(ot);return t?JSON.parse(t):[]}))}let lt,dt;const ft=new WeakMap,pt=new WeakMap,vt=new WeakMap,ht=new WeakMap,gt=new WeakMap;let yt={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return pt.get(t);if("objectStoreNames"===e)return t.objectStoreNames||vt.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return mt(t[e])},set:(t,e,n)=>(t[e]=n,!0),has:(t,e)=>t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t};function bt(t){return"function"==typeof t?(e=t)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(dt||(dt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(wt(this),t),mt(ft.get(this))}:function(...t){return mt(e.apply(wt(this),t))}:function(t,...n){const r=e.call(wt(this),t,...n);return vt.set(r,t.sort?t.sort():[t]),mt(r)}:(t instanceof IDBTransaction&&function(t){if(pt.has(t))return;const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{e(),r()},i=()=>{n(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)}));pt.set(t,e)}(t),n=t,(lt||(lt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((t=>n instanceof t))?new Proxy(t,yt):t);var e,n}function mt(t){if(t instanceof IDBRequest)return function(t){const e=new Promise(((e,n)=>{const r=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{e(mt(t.result)),r()},i=()=>{n(t.error),r()};t.addEventListener("success",o),t.addEventListener("error",i)}));return e.then((e=>{e instanceof IDBCursor&&ft.set(e,t)})).catch((()=>{})),gt.set(e,t),e}(t);if(ht.has(t))return ht.get(t);const e=bt(t);return e!==t&&(ht.set(t,e),gt.set(e,t)),e}const wt=t=>gt.get(t),St=["get","getKey","getAll","getAllKeys","count"],_t=["put","add","delete","clear"],Ot=new Map;function xt(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!=typeof e)return;if(Ot.get(e))return Ot.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,o=_t.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!o&&!St.includes(n))return;const i=async function(t,...e){const i=this.transaction(t,o?"readwrite":"readonly");let a=i.store;return r&&(a=a.index(e.shift())),(await Promise.all([a[n](...e),o&&i.done]))[0]};return Ot.set(e,i),i}var Et;function It(){return"undefined"!=typeof window&&window.location&&window.location.hostname&&window.location.hostname.includes("fandom.com")?"https://services.fandom.com/":"https://services.fandom-dev."+(location.hostname.match(/(?!\.)(pl|us)$/)||["us"])[0]+"/"}Et=yt,yt={...Et,get:(t,e,n)=>xt(t,e)||Et.get(t,e,n),has:(t,e)=>!!xt(t,e)||Et.has(t,e)};const At={DEBUG:"ss_debug",BRANCH:"ss_branch_deploy",CANARY:"ss_canary",ENABLED_PATHFINDER_MODULE:"ss_pathfinder_enable",FORCED_PATHFINDER:"ss_pathfinder_forced",FORCED_BUCKETING:"ss_pathfinder_force_bucket"},jt=U,Dt=(null==="4793721a5\n"?void 0:"4793721a5\n".replace(/\n/g,""))||"local",kt=t=>window.location.search.includes(t),Pt=()=>kt(`${At.DEBUG}=true`);function Ct(){}const Rt=Date.now(),Tt=(t,e,n=[])=>(r,...o)=>((t,e,n,r,...o)=>{const i=function(t){return"error"===t?console.error:"debug"===t?Pt()||jt()?console.debug:Ct:console.log}(t),a=`%c${e} | ${function(){var t,e;return((Date.now()-(null!==(e=null===(t=window.performance)||void 0===t?void 0:t.timeOrigin)&&void 0!==e?e:Rt))/1e3).toFixed(4)}()}s | ${r}`;o.length?i(a,n,...o):i(a,n)})(e,t,n.join(";"),r,...o);function Nt(t){return["background-color: silver;","padding: 2px 4px","border-radius: 2px",`color: ${t}`]}const Lt={info:Tt("SilverSurfer","info",Nt("#000")),debug:Tt("SilverSurfer","debug",Nt("#330")),error:Tt("SilverSurfer","error",Nt("#300"))},Bt=V({event:"browser-client-metric"}),Mt=$();function Ut(t,e,n,r){try{return n<Mt&&!M()?null:Bt({category:W(`browser-client-metric-${t}`),label:r,value:null!=e?e:t,action:"metric"})}catch(t){return null}}const Ft="page-view-table",zt="actions-table",Vt="interactions-table",Wt="current",Ht="galactus-fallback-user-profile-table",$t="active-data-table";let Gt=!1;function Kt(){return X(this,void 0,void 0,(function*(){if(!Gt)try{return yield function(t,e,{blocked:n,upgrade:r,blocking:o,terminated:i}={}){const a=indexedDB.open(t,e),c=mt(a);return r&&a.addEventListener("upgradeneeded",(t=>{r(mt(a.result),t.oldVersion,t.newVersion,mt(a.transaction))})),n&&a.addEventListener("blocked",(()=>n())),c.then((t=>{i&&t.addEventListener("close",(()=>i())),o&&t.addEventListener("versionchange",(()=>o()))})).catch((()=>{})),c}("silver-surfer",6,{upgrade(t,e,n,r){t.objectStoreNames.contains(Ft)||t.createObjectStore(Ft),t.objectStoreNames.contains(Ht)||t.createObjectStore(Ht),t.objectStoreNames.contains(zt)||t.createObjectStore(zt,{autoIncrement:!0}),t.objectStoreNames.contains(Vt)||t.createObjectStore(Vt),t.objectStoreNames.contains($t)||t.createObjectStore($t)},blocked(){},blocking(){},terminated(){}})}catch(t){Lt.error("Cannot access indexedDB:",t),Ut("cannot-access-indexeddb",1,1),Gt=!0}}))}const qt=t=>`user-profile-${t}`;var Yt;!function(t){t.IndexedDB="indexeddb",t.LocalStorage="localstorage"}(Yt||(Yt={}));const Jt={[Yt.IndexedDB]:200,[Yt.LocalStorage]:100},Xt={[Yt.IndexedDB]:500,[Yt.LocalStorage]:200};function Qt(){try{return!!(null===window||void 0===window?void 0:window.localStorage)}catch(t){return!1}}function Zt(){try{return!!(null===window||void 0===window?void 0:window.indexedDB)}catch(t){return!1}}function te(t){return X(this,void 0,void 0,(function*(){const e=!!Zt()&&(yield function(t){return X(this,void 0,void 0,(function*(){const e=yield Kt();return(yield null==e?void 0:e.put(Vt,t,Wt))===Wt}))}(t)),n=!!Qt()&&(yield function(t){return X(this,void 0,void 0,(function*(){try{localStorage.setItem(it,JSON.stringify(t))}catch(t){return!1}return!0}))}(t)),r=e||n;return r?Lt.debug("Local interactions updated from cross domain"):Lt.error("Failed to update local interactions"),r}))}function ee(){return X(this,void 0,void 0,(function*(){let t=-1,e=-1;if(Zt())try{t=yield function(){return X(this,void 0,void 0,(function*(){return 4*[yield st(),yield ut(),yield ct()].map((t=>JSON.stringify(t).length)).reduce(((t,e)=>t+e),0)}))}()}catch(t){Lt.debug("Error while getting localStorage size",t)}if(Qt())try{e=yield function(){return X(this,void 0,void 0,(function*(){const t=yield Kt();let e=0,n=yield null==t?void 0:t.transaction(Ft).store.openCursor();for(;n;)e+=JSON.stringify(n.value).length,n=yield n.continue();let r=yield null==t?void 0:t.transaction(zt).store.openCursor();for(;r;)e+=JSON.stringify(r.value).length,r=yield r.continue();return 4*e}))}()}catch(t){Lt.debug("Error while getting indexedDB size",t)}return{localStorageSize:t,indexedDBSize:e}}))}function ne(t,e,n,r={}){console.error("logErrorEvent",{client:t,clientVersion:e,name:n,data:r})}Math.max(Xt[Yt.LocalStorage],Jt[Yt.LocalStorage]);const re=(t,e)=>(n,r={})=>ne(t,e,n,r),oe=(t,e)=>(n,r)=>ne(t,e,n,(({ok:t,redirected:e,status:n,statusText:r,type:o,url:i})=>({ok:t,redirected:e,status:n,statusText:r,type:o,url:i}))(r));re("silver-surfer",Dt);const ie=oe("silver-surfer",Dt);function ae(t,e,n){return void 0===n&&(n={}),fetch(e,n).then((n=>("opaque"===n.type||n.ok||401===n.status||404===n.status||("function"==typeof t?t(e,n):console.error("fetchWithLogging Error",{url:e,response:n})),n)))}const ce=t=>(e,n={})=>ae(t,It()+e,Object.assign({mode:"cors",credentials:"include"},n)),se=t=>(e,n,r={})=>ae(t,It()+e,Object.assign({method:"POST",headers:{"Content-Type":"application/json"},mode:"cors",credentials:"include",body:JSON.stringify(n)},r)),ue=ce(ie);se(ie);var le=n(9996),de=n.n(le),fe=function(){return fe=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},fe.apply(this,arguments)},pe={channelId:"default",host:window,coordinatorHost:window.top},ve={connect:"connect",connected:"connected"},he="@wikia/post-quecast";function ge(t){return t.channelId&&t.libId===he&&t.action&&function(t){return"string"==typeof t.type&&"number"==typeof t.timestamp}(t.action)}function ye(t){return!t.data.private}function be(t,e){return t.data.channelId===e}function me(t){return t.data.action}var we=function(){function t(){}return t.make=function(t){return function(t){var e;return t.host===t.coordinatorHost&&!!(null===(e=t.coordinatorHost[he])||void 0===e?void 0:e.callbackConnector)}(t)?t.coordinatorHost[he].callbackConnector:new _e({senderHost:t.coordinatorHost,listenerHost:t.host})},t}(),Se=function(){function t(t){this.coordinatorHost=t,this.callbacks=[]}return t.prototype.dispatch=function(t){var e=this;if(!ge(t))throw new Error("Incorrect object type. Expected PostMessageData, but got "+t);this.callbacks.forEach((function(n){return n({data:t,source:e.coordinatorHost})}))},t.prototype.addListener=function(t){this.callbacks.push(t)},t.prototype.removeListener=function(t){this.callbacks=this.callbacks.filter((function(e){return e!==t}))},t}(),_e=function(){function t(t){this.options=t,this.map=new Map}return t.prototype.dispatch=function(t){if(!ge(t))throw new Error("Incorrect object type. Expected PostMessageData, but got "+t);this.options.senderHost.postMessage(t,"*")},t.prototype.addListener=function(t){var e=function(e){var n;(n=e)&&n.source&&n.data&&ge(n.data)&&t(e)};this.map.set(t,e),this.options.listenerHost.addEventListener("message",e)},t.prototype.removeListener=function(t){var e=this.map.get(t);this.options.listenerHost.removeEventListener("message",e),this.map.delete(t)},t}(),Oe=function(){function t(t){this.callbacks=[],this.history=[],this.channelId=t.channelId,this.connector=we.make(t),this.setupActions(),this.setupConnection()}return t.prototype.setupActions=function(){this.getHistory(),this.listenEvent()},t.prototype.getHistory=function(){var t=this,e=function(n){if(be(n,t.channelId)&&function(t){return!!t.data.private}(n)){var r=me(n);(function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.some((function(e){return t.type===e}))})(r,ve.connected)&&(t.connector.removeListener(e),t.handleActions.apply(t,r.history))}};this.connector.addListener(e)},t.prototype.listenEvent=function(){var t=this;this.connector.addListener((function(e){if(be(e,t.channelId)&&ye(e)){var n=me(e);t.handleActions(n)}}))},t.prototype.handleActions=function(){for(var t,e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];(t=this.history).push.apply(t,n),n.forEach((function(t){return e.callbacks.forEach((function(e){return e(t)}))}))},t.prototype.setupConnection=function(){this.connector.dispatch({action:{type:ve.connect,timestamp:Date.now()},channelId:this.channelId,private:!0,libId:he})},t.prototype.addListener=function(t){this.history.forEach((function(e){return t(e)})),this.callbacks.push(t)},t.prototype.removeListener=function(t){this.callbacks=this.callbacks.filter((function(e){return e!==t}))},t}(),xe=function(){function t(t){void 0===t&&(t={});var e=fe(fe({},pe),t);this.channelId=e.channelId,this.connector=we.make(e)}return t.prototype.dispatch=function(t){this.connector.dispatch({action:fe(fe({},t),{timestamp:Date.now()}),channelId:this.channelId,private:!0,libId:he})},t}(),Ee=function(){function t(t){void 0===t&&(t={});var e=fe(fe({},pe),t);this.transmitter=new xe(e),this.receiver=new Oe(e)}return t.prototype.dispatch=function(t){this.transmitter.dispatch(t)},t.prototype.addListener=function(t){this.receiver.addListener(t)},t.prototype.removeListener=function(t){this.receiver.removeListener(t)},t}(),Ie=function(){function t(t,e){this.channelId=t,this.connectors=new Map,this.history=[],this.connectors.set(e,e[he].callbackConnector)}return t.prototype.addConnection=function(t){this.ensureConnector(t).dispatch({action:this.createConnectedAction(),private:!0,channelId:this.channelId,libId:he})},t.prototype.createConnectedAction=function(){return{type:ve.connected,history:this.history,timestamp:Date.now()}},t.prototype.broadcast=function(t){var e=this;this.history.push(t),this.connectors.forEach((function(n){n.dispatch({action:t,channelId:e.channelId,libId:he})}))},t.prototype.ensureConnector=function(t){return this.connectors.has(t)||this.connectors.set(t,new _e({senderHost:t,listenerHost:t})),this.connectors.get(t)},t}(),Ae=function(){function t(t){this.coordinatorHost=t,this.channels=new Map,this.callbackConnector=new Se(t),this.postMessageConnector=new _e({senderHost:t,listenerHost:t})}return t.prototype.init=function(){var t=this,e=function(e){ye(e)||(t.handleConnect(e),t.handleBroadcast(e))};this.callbackConnector.addListener(e),this.postMessageConnector.addListener(e)},t.prototype.handleConnect=function(t){(function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.some((function(e){return t.data.action.type===e}))})(t,ve.connect)&&this.ensureChannel(t.data.channelId).addConnection(t.source)},t.prototype.handleBroadcast=function(t){(function(t){return!Object.values(ve).some((function(e){return t.data.action.type===e}))})(t)&&this.ensureChannel(t.data.channelId).broadcast(t.data.action)},t.prototype.ensureChannel=function(t){return this.channels.has(t)||this.channels.set(t,new Ie(t,this.coordinatorHost)),this.channels.get(t)},t}(),je=function(t,e){return je=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},je(t,e)};function De(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}je(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function ke(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}function Pe(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ce(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function Re(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}function Te(t){return this instanceof Te?(this.v=t,this):new Te(t)}function Ne(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(t,e||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){o[t]&&(r[t]=function(e){return new Promise((function(n,r){i.push([t,e,n,r])>1||c(t,e)}))})}function c(t,e){try{!function(t){t.value instanceof Te?Promise.resolve(t.value.v).then(s,u):l(i[0][2],t)}(o[t](e))}catch(t){l(i[0][3],t)}}function s(t){c("next",t)}function u(t){c("throw",t)}function l(t,e){t(e),i.shift(),i.length&&c(i[0][0],i[0][1])}}function Le(t){return"function"==typeof t}function Be(t){var e=t((function(t){Error.call(t),t.stack=(new Error).stack}));return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}Object.create,Object.create;var Me=Be((function(t){return function(e){t(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e}}));function Ue(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Fe=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._teardowns=null}return t.prototype.unsubscribe=function(){var t,e,n,r,o;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var a=Pe(i),c=a.next();!c.done;c=a.next())c.value.remove(this)}catch(e){t={error:e}}finally{try{c&&!c.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}else i.remove(this);var s=this.initialTeardown;if(Le(s))try{s()}catch(t){o=t instanceof Me?t.errors:[t]}var u=this._teardowns;if(u){this._teardowns=null;try{for(var l=Pe(u),d=l.next();!d.done;d=l.next()){var f=d.value;try{We(f)}catch(t){o=null!=o?o:[],t instanceof Me?o=Re(Re([],Ce(o)),Ce(t.errors)):o.push(t)}}}catch(t){n={error:t}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}if(o)throw new Me(o)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)We(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._teardowns=null!==(n=this._teardowns)&&void 0!==n?n:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&Ue(e,t)},t.prototype.remove=function(e){var n=this._teardowns;n&&Ue(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t;var e}(),ze=Fe.EMPTY;function Ve(t){return t instanceof Fe||t&&"closed"in t&&Le(t.remove)&&Le(t.add)&&Le(t.unsubscribe)}function We(t){Le(t)?t():t.unsubscribe()}var He=null,$e=null,Ge=void 0,Ke=!1,qe=!1,Ye={setTimeout:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Ye.delegate;return((null==n?void 0:n.setTimeout)||setTimeout).apply(void 0,Re([],Ce(t)))},clearTimeout:function(t){var e=Ye.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function Je(t){Ye.setTimeout((function(){if(!He)throw t;He(t)}))}function Xe(){}var Qe=Ze("C",void 0,void 0);function Ze(t,e,n){return{kind:t,value:e,error:n}}var tn=null;function en(t){if(Ke){var e=!tn;if(e&&(tn={errorThrown:!1,error:null}),t(),e){var n=tn,r=n.errorThrown,o=n.error;if(tn=null,r)throw o}}else t()}function nn(t){Ke&&tn&&(tn.errorThrown=!0,tn.error=t)}var rn=function(t){function e(e){var n=t.call(this)||this;return n.isStopped=!1,e?(n.destination=e,Ve(e)&&e.add(n)):n.destination=un,n}return De(e,t),e.create=function(t,e,n){return new on(t,e,n)},e.prototype.next=function(t){this.isStopped?sn(function(t){return Ze("N",t,void 0)}(t),this):this._next(t)},e.prototype.error=function(t){this.isStopped?sn(Ze("E",void 0,t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?sn(Qe,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Fe),on=function(t){function e(e,n,r){var o,i=t.call(this)||this;if(Le(e))o=e;else if(e){var a;o=e.next,n=e.error,r=e.complete,i&&qe?(a=Object.create(e)).unsubscribe=function(){return i.unsubscribe()}:a=e,o=null==o?void 0:o.bind(a),n=null==n?void 0:n.bind(a),r=null==r?void 0:r.bind(a)}return i.destination={next:o?an(o):Xe,error:an(null!=n?n:cn),complete:r?an(r):Xe},i}return De(e,t),e}(rn);function an(t,e){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{t.apply(void 0,Re([],Ce(e)))}catch(t){Ke?nn(t):Je(t)}}}function cn(t){throw t}function sn(t,e){var n=$e;n&&Ye.setTimeout((function(){return n(t,e)}))}var un={closed:!0,next:Xe,error:cn,complete:Xe},ln="function"==typeof Symbol&&Symbol.observable||"@@observable";function dn(t){return t}function fn(t){return 0===t.length?dn:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var pn=function(){function t(t){t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r,o=this,i=(r=t)&&r instanceof rn||function(t){return t&&Le(t.next)&&Le(t.error)&&Le(t.complete)}(r)&&Ve(r)?t:new on(t,e,n);return en((function(){var t=o,e=t.operator,n=t.source;i.add(e?e.call(i,n):n?o._subscribe(i):o._trySubscribe(i))})),i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=vn(e))((function(e,r){var o=new on({next:function(e){try{t(e)}catch(t){r(t),o.unsubscribe()}},error:r,complete:e});n.subscribe(o)}))},t.prototype._subscribe=function(t){var e;return null===(e=this.source)||void 0===e?void 0:e.subscribe(t)},t.prototype[ln]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return fn(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=vn(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();function vn(t){var e;return null!==(e=null!=t?t:Ge)&&void 0!==e?e:Promise}function hn(t){return function(e){if(function(t){return Le(null==t?void 0:t.lift)}(e))return e.lift((function(e){try{return t(e,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}}var gn=function(t){function e(e,n,r,o,i){var a=t.call(this,e)||this;return a.onFinalize=i,a._next=n?function(t){try{n(t)}catch(t){e.error(t)}}:t.prototype._next,a._error=o?function(t){try{o(t)}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._error,a._complete=r?function(){try{r()}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,a}return De(e,t),e.prototype.unsubscribe=function(){var e,n=this.closed;t.prototype.unsubscribe.call(this),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))},e}(rn),yn=Array.isArray;function bn(t,e,n){return n?bn(t,e).pipe(function(t){return e=function(e){return function(t,e){return yn(e)?t.apply(void 0,Re([],Ce(e))):t(e)}(t,e)},hn((function(t,n){var r=0;t.subscribe(new gn(n,(function(t){n.next(e.call(void 0,t,r++))})))}));var e}(n)):new pn((function(n){var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.next(1===t.length?t[0]:t)},o=t(r);return Le(e)?function(){return e(r,o)}:void 0}))}var mn=Be((function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),wn=function(t){function e(){var e=t.call(this)||this;return e.closed=!1,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return De(e,t),e.prototype.lift=function(t){var e=new Sn(this,this);return e.operator=t,e},e.prototype._throwIfClosed=function(){if(this.closed)throw new mn},e.prototype.next=function(t){var e=this;en((function(){var n,r;if(e._throwIfClosed(),!e.isStopped){var o=e.observers.slice();try{for(var i=Pe(o),a=i.next();!a.done;a=i.next())a.value.next(t)}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}}))},e.prototype.error=function(t){var e=this;en((function(){if(e._throwIfClosed(),!e.isStopped){e.hasError=e.isStopped=!0,e.thrownError=t;for(var n=e.observers;n.length;)n.shift().error(t)}}))},e.prototype.complete=function(){var t=this;en((function(){if(t._throwIfClosed(),!t.isStopped){t.isStopped=!0;for(var e=t.observers;e.length;)e.shift().complete()}}))},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(e){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)},e.prototype._innerSubscribe=function(t){var e=this,n=e.hasError,r=e.isStopped,o=e.observers;return n||r?ze:(o.push(t),new Fe((function(){return Ue(o,t)})))},e.prototype._checkFinalizedStatuses=function(t){var e=this,n=e.hasError,r=e.thrownError,o=e.isStopped;n?t.error(r):o&&t.complete()},e.prototype.asObservable=function(){var t=new pn;return t.source=this,t},e.create=function(t,e){return new Sn(t,e)},e}(pn),Sn=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return De(e,t),e.prototype.next=function(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.next)||void 0===n||n.call(e,t)},e.prototype.error=function(t){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.error)||void 0===n||n.call(e,t)},e.prototype.complete=function(){var t,e;null===(e=null===(t=this.destination)||void 0===t?void 0:t.complete)||void 0===e||e.call(t)},e.prototype._subscribe=function(t){var e,n;return null!==(n=null===(e=this.source)||void 0===e?void 0:e.subscribe(t))&&void 0!==n?n:ze},e}(wn),_n={now:function(){return(_n.delegate||Date).now()},delegate:void 0},On=function(t){function e(e,n,r){void 0===e&&(e=1/0),void 0===n&&(n=1/0),void 0===r&&(r=_n);var o=t.call(this)||this;return o._bufferSize=e,o._windowTime=n,o._timestampProvider=r,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=n===1/0,o._bufferSize=Math.max(1,e),o._windowTime=Math.max(1,n),o}return De(e,t),e.prototype.next=function(e){var n=this,r=n.isStopped,o=n._buffer,i=n._infiniteTimeWindow,a=n._timestampProvider,c=n._windowTime;r||(o.push(e),!i&&o.push(a.now()+c)),this._trimBuffer(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){this._throwIfClosed(),this._trimBuffer();for(var e=this._innerSubscribe(t),n=this._infiniteTimeWindow,r=this._buffer.slice(),o=0;o<r.length&&!t.closed;o+=n?1:2)t.next(r[o]);return this._checkFinalizedStatuses(t),e},e.prototype._trimBuffer=function(){var t=this,e=t._bufferSize,n=t._timestampProvider,r=t._buffer,o=t._infiniteTimeWindow,i=(o?1:2)*e;if(e<1/0&&i<r.length&&r.splice(0,r.length-i),!o){for(var a=n.now(),c=0,s=1;s<r.length&&r[s]<=a;s+=2)c=s;c&&r.splice(0,c+1)}},e}(wn),xn=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function En(t){return Le(null==t?void 0:t.then)}function In(t){return Le(t[ln])}function An(t){return Symbol.asyncIterator&&Le(null==t?void 0:t[Symbol.asyncIterator])}function jn(t){return new TypeError("You provided "+(null!==t&&"object"==typeof t?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var Dn="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function kn(t){return Le(null==t?void 0:t[Dn])}function Pn(t){return Ne(this,arguments,(function(){var e,n,r;return ke(this,(function(o){switch(o.label){case 0:e=t.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Te(e.read())];case 3:return n=o.sent(),r=n.value,n.done?[4,Te(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Te(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}}))}))}function Cn(t){return Le(null==t?void 0:t.getReader)}function Rn(t){if(t instanceof pn)return t;if(null!=t){if(In(t))return o=t,new pn((function(t){var e=o[ln]();if(Le(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(xn(t))return r=t,new pn((function(t){for(var e=0;e<r.length&&!t.closed;e++)t.next(r[e]);t.complete()}));if(En(t))return n=t,new pn((function(t){n.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,Je)}));if(An(t))return Tn(t);if(kn(t))return e=t,new pn((function(t){var n,r;try{for(var o=Pe(e),i=o.next();!i.done;i=o.next()){var a=i.value;if(t.next(a),t.closed)return}}catch(t){n={error:t}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}t.complete()}));if(Cn(t))return Tn(Pn(t))}var e,n,r,o;throw jn(t)}function Tn(t){return new pn((function(e){(function(t,e){var n,r,o,i;return function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{s(r.next(t))}catch(t){i(t)}}function c(t){try{s(r.throw(t))}catch(t){i(t)}}function s(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,c)}s((r=r.apply(t,e||[])).next())}))}(this,void 0,void 0,(function(){var a,c;return ke(this,(function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),n=function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=Pe(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,o){!function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}(r,o,(e=t[n](e)).done,e.value)}))}}}(t),s.label=1;case 1:return[4,n.next()];case 2:if((r=s.sent()).done)return[3,4];if(a=r.value,e.next(a),e.closed)return[2];s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return c=s.sent(),o={error:c},[3,11];case 6:return s.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}}))}))})(t,e).catch((function(t){return e.error(t)}))}))}var Nn=new pn((function(t){return t.complete()}));function Ln(t){return t<=0?function(){return Nn}:hn((function(e,n){var r=0;e.subscribe(new gn(n,(function(e){++r<=t&&(n.next(e),t<=r&&n.complete())})))}))}function Bn(t){void 0===t&&(t={});var e=t.connector,n=void 0===e?function(){return new wn}:e,r=t.resetOnError,o=void 0===r||r,i=t.resetOnComplete,a=void 0===i||i,c=t.resetOnRefCountZero,s=void 0===c||c;return function(t){var e=null,r=null,i=null,c=0,u=!1,l=!1,d=function(){null==r||r.unsubscribe(),r=null},f=function(){d(),e=i=null,u=l=!1},p=function(){var t=e;f(),null==t||t.unsubscribe()};return hn((function(t,v){c++,l||u||d();var h,g=i=null!=i?i:n();v.add((function(){0!=--c||l||u||(r=Mn(p,s))})),g.subscribe(v),e||(e=new on({next:function(t){return g.next(t)},error:function(t){l=!0,d(),r=Mn(f,o,t),g.error(t)},complete:function(){u=!0,d(),r=Mn(f,a),g.complete()}}),(h=t,Rn(h)).subscribe(e))}))(t)}}function Mn(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return!0===e?(t(),null):!1===e?null:e.apply(void 0,Re([],Ce(n))).pipe(Ln(1)).subscribe((function(){return t()}))}class Un{constructor(){!function(t){if(void 0===t&&(t=window),!t[he]){var e=new Ae(t);e.init(),t[he]=e}}(),this.communicator=new Ee,this.actions=bn((t=>this.communicator.addListener(t)),(t=>this.communicator.removeListener(t))).pipe(function(t,e,n){var r,o,i,a=!1;return t&&"object"==typeof t?(i=null!==(r=t.bufferSize)&&void 0!==r?r:1/0,e=null!==(o=t.windowTime)&&void 0!==o?o:1/0,a=!!t.refCount,n=t.scheduler):i=null!=t?t:1/0,Bn({connector:function(){return new On(i,e,n)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}({refCount:!0}))}dispatch(t){this.communicator.dispatch(Object.assign(Object.assign({},t),{__global:!0}))}}let Fn=null;function zn(){return null===Fn&&(Fn=new Un),Fn}function Vn(...t){return e=>{return e.pipe((n=e=>t.some((t=>e.type===t)),hn((function(t,e){var r=0;t.subscribe(new gn(e,(function(t){return n.call(undefined,t,r++)&&e.next(t)})))}))));var n}}const Wn=function(){return X(this,void 0,void 0,(function*(){if("boolean"==typeof(null===window||void 0===window?void 0:window.__f_optin))return Promise.resolve(window.__f_optin);const t=zn();return new Promise(((e,n)=>{t.actions.pipe(Vn("[AdEngine OptIn] set opt in"),Ln(1)).subscribe((({geoRequiresConsent:t,geoRequiresSignal:r,gdprConsent:o,ccpaSignal:i})=>{t&&o||r&&!i||!r&&!t?e(!0):n(!1)}))}))}))};function Hn(t){const e=new RegExp("(googlebot/|Googlebot-Mobile|Googlebot-Image|Google favicon|Mediapartners-Google|bingbot|slurp|java|wget|curl|Commons-HttpClient|Python-urllib|libwww|httpunit|nutch|phpcrawl|msnbot|jyxobot|FAST-WebCrawler|FAST Enterprise Crawler|biglotron|teoma|convera|seekbot|gigablast|exabot|ngbot|ia_archiver|GingerCrawler|webmon |httrack|webcrawler|grub.org|UsineNouvelleCrawler|antibot|netresearchserver|speedy|fluffy|bibnum.bnf|findlink|msrbot|panscient|yacybot|AISearchBot|IOI|ips-agent|tagoobot|MJ12bot|dotbot|woriobot|yanga|buzzbot|mlbot|yandexbot|purebot|Linguee Bot|Voyager|CyberPatrol|voilabot|baiduspider|citeseerxbot|spbot|twengabot|postrank|turnitinbot|scribdbot|page2rss|sitebot|linkdex|Adidxbot|blekkobot|ezooms|dotbot|Mail.RU_Bot|discobot|heritrix|findthatfile|europarchive.org|NerdByNature.Bot|sistrix crawler|ahrefsbot|Aboundex|domaincrawler|wbsearchbot|summify|ccbot|edisterbot|seznambot|ec2linkfinder|gslfbot|aihitbot|intelium_bot|facebookexternalhit|yeti|RetrevoPageAnalyzer|lb-spider|sogou|lssbot|careerbot|wotbox|wocbot|ichiro|DuckDuckBot|lssrocketcrawler|drupact|webcompanycrawler|acoonbot|openindexspider|gnam gnam spider|web-archive-net.com.bot|backlinkcrawler|coccoc|integromedb|content crawler spider|toplistbot|seokicks-robot|it2media-domain-crawler|ip-web-crawler.com|siteexplorer.info|elisabot|proximic|changedetection|blexbot|arabot|WeSEE:Search|niki-bot|CrystalSemanticsBot|rogerbot|360Spider|psbot|InterfaxScanBot|Lipperhey SEO Service|CC Metadata Scaper|g00g1e.net|GrapeshotCrawler|urlappendbot|brainobot|fr-crawler|binlar|SimpleCrawler|Livelapbot|Twitterbot|cXensebot|smtbot|bnf.fr_bot|A6-Indexer|ADmantX|Facebot|Twitterbot|OrangeBot|memorybot|AdvBot|MegaIndex|SemanticScholarBot|ltx71|nerdybot|xovibot|BUbiNG|Qwantify|archive.org_bot|Applebot|TweetmemeBot|crawler4j|findxbot|SemrushBot|yoozBot|lipperhey|y!j-asr|Domain Re-Animator Bot|AddThis)","i"),n="string"==typeof t?t:null===navigator||void 0===navigator?void 0:navigator.userAgent;return e.test(n)}function $n(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map((function(t){return"'"+t+"'"})).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function Gn(t){return!!t&&!!t[Rr]}function Kn(t){return!!t&&(function(t){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Tr}(t)||Array.isArray(t)||!!t[Cr]||!!t.constructor[Cr]||tr(t)||er(t))}function qn(t){return Gn(t)||$n(23,t),t[Rr].t}function Yn(t,e,n){void 0===n&&(n=!1),0===Jn(t)?(n?Object.keys:Nr)(t).forEach((function(r){n&&"symbol"==typeof r||e(r,t[r],t)})):t.forEach((function(n,r){return e(r,n,t)}))}function Jn(t){var e=t[Rr];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:tr(t)?2:er(t)?3:0}function Xn(t,e){return 2===Jn(t)?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Qn(t,e,n){var r=Jn(t);2===r?t.set(e,n):3===r?(t.delete(e),t.add(n)):t[e]=n}function Zn(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function tr(t){return jr&&t instanceof Map}function er(t){return Dr&&t instanceof Set}function nr(t){return t.o||t.t}function rr(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=Lr(t);delete e[Rr];for(var n=Nr(e),r=0;r<n.length;r++){var o=n[r],i=e[o];!1===i.writable&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[o]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[o]})}return Object.create(Object.getPrototypeOf(t),e)}function or(t,e){return void 0===e&&(e=!1),ar(t)||Gn(t)||!Kn(t)||(Jn(t)>1&&(t.set=t.add=t.clear=t.delete=ir),Object.freeze(t),e&&Yn(t,(function(t,e){return or(e,!0)}),!0)),t}function ir(){$n(2)}function ar(t){return null==t||"object"!=typeof t||Object.isFrozen(t)}function cr(t){var e=Br[t];return e||$n(18,t),e}function sr(){return Ir}function ur(t,e){e&&(cr("Patches"),t.u=[],t.s=[],t.v=e)}function lr(t){dr(t),t.p.forEach(pr),t.p=null}function dr(t){t===Ir&&(Ir=t.l)}function fr(t){return Ir={p:[],l:Ir,h:t,m:!0,_:0}}function pr(t){var e=t[Rr];0===e.i||1===e.i?e.j():e.O=!0}function vr(t,e){e._=e.p.length;var n=e.p[0],r=void 0!==t&&t!==n;return e.h.g||cr("ES5").S(e,t,r),r?(n[Rr].P&&(lr(e),$n(4)),Kn(t)&&(t=hr(e,t),e.l||yr(e,t)),e.u&&cr("Patches").M(n[Rr].t,t,e.u,e.s)):t=hr(e,n,[]),lr(e),e.u&&e.v(e.u,e.s),t!==Pr?t:void 0}function hr(t,e,n){if(ar(e))return e;var r=e[Rr];if(!r)return Yn(e,(function(o,i){return gr(t,r,e,o,i,n)}),!0),e;if(r.A!==t)return e;if(!r.P)return yr(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var o=4===r.i||5===r.i?r.o=rr(r.k):r.o;Yn(3===r.i?new Set(o):o,(function(e,i){return gr(t,r,o,e,i,n)})),yr(t,o,!1),n&&t.u&&cr("Patches").R(r,n,t.u,t.s)}return r.o}function gr(t,e,n,r,o,i){if(Gn(o)){var a=hr(t,o,i&&e&&3!==e.i&&!Xn(e.D,r)?i.concat(r):void 0);if(Qn(n,r,a),!Gn(a))return;t.m=!1}if(Kn(o)&&!ar(o)){if(!t.h.F&&t._<1)return;hr(t,o),e&&e.A.l||yr(t,o)}}function yr(t,e,n){void 0===n&&(n=!1),t.h.F&&t.m&&or(e,n)}function br(t,e){var n=t[Rr];return(n?nr(n):t)[e]}function mr(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function wr(t){t.P||(t.P=!0,t.l&&wr(t.l))}function Sr(t){t.o||(t.o=rr(t.t))}function _r(t,e,n){var r=tr(e)?cr("MapSet").N(e,n):er(e)?cr("MapSet").T(e,n):t.g?function(t,e){var n=Array.isArray(t),r={i:n?1:0,A:e?e.A:sr(),P:!1,I:!1,D:{},l:e,t,k:null,o:null,j:null,C:!1},o=r,i=Mr;n&&(o=[r],i=Ur);var a=Proxy.revocable(o,i),c=a.revoke,s=a.proxy;return r.k=s,r.j=c,s}(e,n):cr("ES5").J(e,n);return(n?n.A:sr()).p.push(r),r}function Or(t){return Gn(t)||$n(22,t),function t(e){if(!Kn(e))return e;var n,r=e[Rr],o=Jn(e);if(r){if(!r.P&&(r.i<4||!cr("ES5").K(r)))return r.t;r.I=!0,n=xr(e,o),r.I=!1}else n=xr(e,o);return Yn(n,(function(e,o){r&&function(t,e){return 2===Jn(t)?t.get(e):t[e]}(r.t,e)===o||Qn(n,e,t(o))})),3===o?new Set(n):n}(t)}function xr(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return rr(t)}var Er,Ir,Ar="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),jr="undefined"!=typeof Map,Dr="undefined"!=typeof Set,kr="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,Pr=Ar?Symbol.for("immer-nothing"):((Er={})["immer-nothing"]=!0,Er),Cr=Ar?Symbol.for("immer-draftable"):"__$immer_draftable",Rr=Ar?Symbol.for("immer-state"):"__$immer_state",Tr=("undefined"!=typeof Symbol&&Symbol.iterator,""+Object.prototype.constructor),Nr="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,Lr=Object.getOwnPropertyDescriptors||function(t){var e={};return Nr(t).forEach((function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)})),e},Br={},Mr={get:function(t,e){if(e===Rr)return t;var n=nr(t);if(!Xn(n,e))return function(t,e,n){var r,o=mr(e,n);return o?"value"in o?o.value:null===(r=o.get)||void 0===r?void 0:r.call(t.k):void 0}(t,n,e);var r=n[e];return t.I||!Kn(r)?r:r===br(t.t,e)?(Sr(t),t.o[e]=_r(t.A.h,r,t)):r},has:function(t,e){return e in nr(t)},ownKeys:function(t){return Reflect.ownKeys(nr(t))},set:function(t,e,n){var r=mr(nr(t),e);if(null==r?void 0:r.set)return r.set.call(t.k,n),!0;if(!t.P){var o=br(nr(t),e),i=null==o?void 0:o[Rr];if(i&&i.t===n)return t.o[e]=n,t.D[e]=!1,!0;if(Zn(n,o)&&(void 0!==n||Xn(t.t,e)))return!0;Sr(t),wr(t)}return t.o[e]===n&&"number"!=typeof n&&(void 0!==n||e in t.o)||(t.o[e]=n,t.D[e]=!0,!0)},deleteProperty:function(t,e){return void 0!==br(t.t,e)||e in t.t?(t.D[e]=!1,Sr(t),wr(t)):delete t.D[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=nr(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r?{writable:!0,configurable:1!==t.i||"length"!==e,enumerable:r.enumerable,value:n[e]}:r},defineProperty:function(){$n(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){$n(12)}},Ur={};Yn(Mr,(function(t,e){Ur[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}})),Ur.deleteProperty=function(t,e){return Ur.set.call(this,t,e,void 0)},Ur.set=function(t,e,n){return Mr.set.call(this,t[0],e,n,t[0])};var Fr=function(){function t(t){var e=this;this.g=kr,this.F=!0,this.produce=function(t,n,r){if("function"==typeof t&&"function"!=typeof n){var o=n;n=t;var i=e;return function(t){var e=this;void 0===t&&(t=o);for(var r=arguments.length,a=Array(r>1?r-1:0),c=1;c<r;c++)a[c-1]=arguments[c];return i.produce(t,(function(t){var r;return(r=n).call.apply(r,[e,t].concat(a))}))}}var a;if("function"!=typeof n&&$n(6),void 0!==r&&"function"!=typeof r&&$n(7),Kn(t)){var c=fr(e),s=_r(e,t,void 0),u=!0;try{a=n(s),u=!1}finally{u?lr(c):dr(c)}return"undefined"!=typeof Promise&&a instanceof Promise?a.then((function(t){return ur(c,r),vr(t,c)}),(function(t){throw lr(c),t})):(ur(c,r),vr(a,c))}if(!t||"object"!=typeof t){if(void 0===(a=n(t))&&(a=t),a===Pr&&(a=void 0),e.F&&or(a,!0),r){var l=[],d=[];cr("Patches").M(t,a,l,d),r(l,d)}return a}$n(21,t)},this.produceWithPatches=function(t,n){if("function"==typeof t)return function(n){for(var r=arguments.length,o=Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return e.produceWithPatches(n,(function(e){return t.apply(void 0,[e].concat(o))}))};var r,o,i=e.produce(t,n,(function(t,e){r=t,o=e}));return"undefined"!=typeof Promise&&i instanceof Promise?i.then((function(t){return[t,r,o]})):[i,r,o]},"boolean"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),"boolean"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze)}var e=t.prototype;return e.createDraft=function(t){Kn(t)||$n(8),Gn(t)&&(t=Or(t));var e=fr(this),n=_r(this,t,void 0);return n[Rr].C=!0,dr(e),n},e.finishDraft=function(t,e){var n=(t&&t[Rr]).A;return ur(n,e),vr(void 0,n)},e.setAutoFreeze=function(t){this.F=t},e.setUseProxies=function(t){t&&!kr&&$n(20),this.g=t},e.applyPatches=function(t,e){var n;for(n=e.length-1;n>=0;n--){var r=e[n];if(0===r.path.length&&"replace"===r.op){t=r.value;break}}n>-1&&(e=e.slice(n+1));var o=cr("Patches").$;return Gn(t)?o(t,e):this.produce(t,(function(t){return o(t,e)}))},t}(),zr=new Fr,Vr=zr.produce;zr.produceWithPatches.bind(zr),zr.setAutoFreeze.bind(zr),zr.setUseProxies.bind(zr),zr.applyPatches.bind(zr),zr.createDraft.bind(zr),zr.finishDraft.bind(zr);const Wr=Vr;function Hr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Gr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$r(Object(n),!0).forEach((function(e){Hr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Kr(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var qr="function"==typeof Symbol&&Symbol.observable||"@@observable",Yr=function(){return Math.random().toString(36).substring(7).split("").join(".")},Jr={INIT:"@@redux/INIT"+Yr(),REPLACE:"@@redux/REPLACE"+Yr(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Yr()}};function Xr(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function Qr(t,e,n){var r;if("function"==typeof e&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(Kr(0));if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error(Kr(1));return n(Qr)(t,e)}if("function"!=typeof t)throw new Error(Kr(2));var o=t,i=e,a=[],c=a,s=!1;function u(){c===a&&(c=a.slice())}function l(){if(s)throw new Error(Kr(3));return i}function d(t){if("function"!=typeof t)throw new Error(Kr(4));if(s)throw new Error(Kr(5));var e=!0;return u(),c.push(t),function(){if(e){if(s)throw new Error(Kr(6));e=!1,u();var n=c.indexOf(t);c.splice(n,1),a=null}}}function f(t){if(!Xr(t))throw new Error(Kr(7));if(void 0===t.type)throw new Error(Kr(8));if(s)throw new Error(Kr(9));try{s=!0,i=o(i,t)}finally{s=!1}for(var e=a=c,n=0;n<e.length;n++)(0,e[n])();return t}function p(t){if("function"!=typeof t)throw new Error(Kr(10));o=t,f({type:Jr.REPLACE})}function v(){var t,e=d;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new Error(Kr(11));function n(){t.next&&t.next(l())}return n(),{unsubscribe:e(n)}}})[qr]=function(){return this},t}return f({type:Jr.INIT}),(r={dispatch:f,subscribe:d,getState:l,replaceReducer:p})[qr]=v,r}function Zr(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function to(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){var n=t.apply(void 0,arguments),r=function(){throw new Error(Kr(15))},o={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},i=e.map((function(t){return t(o)}));return r=Zr.apply(void 0,i)(n.dispatch),Gr(Gr({},n),{},{dispatch:r})}}}function eo(t){return function(e){var n=e.dispatch,r=e.getState;return function(e){return function(o){return"function"==typeof o?o(n,r,t):e(o)}}}}var no=eo();no.withExtraArgument=eo;const ro=no;var oo,io=(oo=function(t,e){return oo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},oo(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}oo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),ao=function(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t},co=Object.defineProperty,so=(Object.defineProperties,Object.getOwnPropertyDescriptors,Object.getOwnPropertySymbols),uo=Object.prototype.hasOwnProperty,lo=Object.prototype.propertyIsEnumerable,fo=function(t,e,n){return e in t?co(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},po=function(t,e){for(var n in e||(e={}))uo.call(e,n)&&fo(t,n,e[n]);if(so)for(var r=0,o=so(e);r<o.length;r++)n=o[r],lo.call(e,n)&&fo(t,n,e[n]);return t},vo="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?Zr:Zr.apply(null,arguments)};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var ho=function(t){function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var o=t.apply(this,n)||this;return Object.setPrototypeOf(o,e.prototype),o}return io(e,t),Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.prototype.concat.apply(this,e)},e.prototype.prepend=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return 1===t.length&&Array.isArray(t[0])?new(e.bind.apply(e,ao([void 0],t[0].concat(this)))):new(e.bind.apply(e,ao([void 0],t.concat(this))))},e}(Array);function go(t,e){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(e){var o=e.apply(void 0,n);if(!o)throw new Error("prepareAction did not return an object");return po(po({type:t,payload:o.payload},"meta"in o&&{meta:o.meta}),"error"in o&&{error:o.error})}return{type:t,payload:n[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(e){return e.type===t},n}function yo(t){var e,n={},r=[],o={addCase:function(t,e){var r="string"==typeof t?t:t.type;if(r in n)throw new Error("addCase cannot be called with two reducers for the same action type");return n[r]=e,o},addMatcher:function(t,e){return r.push({matcher:t,reducer:e}),o},addDefaultCase:function(t){return e=t,o}};return t(o),[n,r,e]}function bo(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");var n,r="function"==typeof t.initialState?t.initialState:Wr(t.initialState,(function(){})),o=t.reducers||{},i=Object.keys(o),a={},c={},s={};function u(){var e="function"==typeof t.extraReducers?yo(t.extraReducers):[t.extraReducers],n=e[0],o=void 0===n?{}:n,i=e[1],a=void 0===i?[]:i,s=e[2],u=void 0===s?void 0:s,l=po(po({},o),c);return function(t,e,n,r){void 0===n&&(n=[]);var o,i="function"==typeof e?yo(e):[e,n,r],a=i[0],c=i[1],s=i[2];if(function(t){return"function"==typeof t}(t))o=function(){return Wr(t(),(function(){}))};else{var u=Wr(t,(function(){}));o=function(){return u}}function l(t,e){void 0===t&&(t=o());var n=ao([a[e.type]],c.filter((function(t){return(0,t.matcher)(e)})).map((function(t){return t.reducer})));return 0===n.filter((function(t){return!!t})).length&&(n=[s]),n.reduce((function(t,n){if(n){var r;if(Gn(t))return void 0===(r=n(t,e))?t:r;if(Kn(t))return Wr(t,(function(t){return n(t,e)}));if(void 0===(r=n(t,e))){if(null===t)return t;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return t}),t)}return l.getInitialState=o,l}(r,l,a,u)}return i.forEach((function(t){var n,r,i=o[t],u=e+"/"+t;"reducer"in i?(n=i.reducer,r=i.prepare):n=i,a[t]=n,c[u]=n,s[t]=r?go(u,r):go(u)})),{name:e,reducer:function(t,e){return n||(n=u()),n(t,e)},actions:s,caseReducers:a,getInitialState:function(){return n||(n=u()),n.getInitialState()}}}function mo(t){setTimeout(t,1)}!function(){function t(t,e){var n=o[t];return n?n.enumerable=e:o[t]=n={configurable:!0,enumerable:e,get:function(){var e=this[Rr];return Mr.get(e,t)},set:function(e){var n=this[Rr];Mr.set(n,t,e)}},n}function e(t){for(var e=t.length-1;e>=0;e--){var o=t[e][Rr];if(!o.P)switch(o.i){case 5:r(o)&&wr(o);break;case 4:n(o)&&wr(o)}}}function n(t){for(var e=t.t,n=t.k,r=Nr(n),o=r.length-1;o>=0;o--){var i=r[o];if(i!==Rr){var a=e[i];if(void 0===a&&!Xn(e,i))return!0;var c=n[i],s=c&&c[Rr];if(s?s.t!==a:!Zn(c,a))return!0}}var u=!!e[Rr];return r.length!==Nr(e).length+(u?0:1)}function r(t){var e=t.k;if(e.length!==t.t.length)return!0;var n=Object.getOwnPropertyDescriptor(e,e.length-1);if(n&&!n.get)return!0;for(var r=0;r<e.length;r++)if(!e.hasOwnProperty(r))return!0;return!1}var o={};!function(t,e){Br[t]||(Br[t]=e)}("ES5",{J:function(e,n){var r=Array.isArray(e),o=function(e,n){if(e){for(var r=Array(n.length),o=0;o<n.length;o++)Object.defineProperty(r,""+o,t(o,!0));return r}var i=Lr(n);delete i[Rr];for(var a=Nr(i),c=0;c<a.length;c++){var s=a[c];i[s]=t(s,e||!!i[s].enumerable)}return Object.create(Object.getPrototypeOf(n),i)}(r,e),i={i:r?5:4,A:n?n.A:sr(),P:!1,I:!1,D:{},l:n,t:e,k:o,o:null,O:!1,C:!1};return Object.defineProperty(o,Rr,{value:i,writable:!0}),o},S:function(t,n,o){o?Gn(n)&&n[Rr].A===t&&e(t.p):(t.u&&function t(e){if(e&&"object"==typeof e){var n=e[Rr];if(n){var o=n.t,i=n.k,a=n.D,c=n.i;if(4===c)Yn(i,(function(e){e!==Rr&&(void 0!==o[e]||Xn(o,e)?a[e]||t(i[e]):(a[e]=!0,wr(n)))})),Yn(o,(function(t){void 0!==i[t]||Xn(i,t)||(a[t]=!1,wr(n))}));else if(5===c){if(r(n)&&(wr(n),a.length=!0),i.length<o.length)for(var s=i.length;s<o.length;s++)a[s]=!1;else for(var u=o.length;u<i.length;u++)a[u]=!0;for(var l=Math.min(i.length,o.length),d=0;d<l;d++)i.hasOwnProperty(d)||(a[d]=!0),void 0===a[d]&&t(i[d])}}}}(t.p[0]),e(t.p))},K:function(t){return 4===t.i?n(t):r(t)}})}();var wo=n(7361),So=n.n(wo),_o=n(3608),Oo=n.n(_o);const xo={[v.UNKNOWN]:[],[v.MEDIAWIKI]:["2350603","174","38969","4396","159","130814","2180","105","2237"],[v.DISCUSSIONS]:[],[v.TRIVIA]:[],[v.FANHUB]:[],[v.VIDEO]:[],[v.F2]:[]};function Eo(t){return!(t<1)||Oo()(0,100)<=100*t}var Io;function Ao(t,e){return Lt.debug(`App state changed: ${t}->${e}`),e}!function(t){t.New="new",t.Starting="starting",t.Delayed="delayed",t.Ready="ready"}(Io||(Io={}));const jo=bo({name:"AppSlice",initialState:{state:Io.New,config:{sendDebugLog:Pt()||Eo(So()(window,"_ss.sendDebugLogRate",.01)),sendGalactusRequest:Pt()||jt()||Eo(So()(window,"_ss.sendGalactusRequestRate",1)),sendTracking:function(){const t=D(),e=xo[t.product],n=null==e?void 0:e.includes(t.productId);return Eo(So()(window,"_ss.sendTrackingRate",n?1:0))}(),disableCrossdomain:kt("ss_no_crossdomain=true")||function(){var t;return!!Hn()||("www.fandom.com"===(null===(t=null===window||void 0===window?void 0:window.location)||void 0===t?void 0:t.host)?(Lt.debug("Cross domain is not needed for fandom.com"),!0):So()(window,"_ss.disableCrossdomain",!1))}(),manualPageview:jt()&&kt("ss_no_pageview=true")||function(){const t=So()(window,"_ss.manualPageview",!1),e=S.fromWindow();let n=!1;return e.isValid||(Lt.debug("Page context is not valid! Assuming lazy load (need manual PV trigger)",e),n=!0),t||n}()},clients:[]},reducers:{starting:t=>{t.state!==Io.New&&t.state!==Io.Delayed||(t.state=Ao(t.state,Io.Starting))},delayed:t=>{t.state===Io.New&&(t.state=Ao(t.state,Io.Delayed))},ready:t=>{t.state===Io.Starting&&(t.state=Ao(t.state,Io.Ready))},addClient:(t,e)=>{const n=e.payload;t.clients.push(n)},reboot(t){if(t.state===Io.Ready){const e=t.clients.map((t=>null==t?void 0:t.onReboot)).filter(Boolean);mo((()=>e.forEach((t=>t()))))}}}}),Do=jo.actions,{starting:ko,ready:Po,delayed:Co,addClient:Ro,reboot:To}=jo.actions,No=jo.reducer,Lo=bo({name:"ContextSlice",initialState:{user:g.getDefault(),page:S.getDefault(),adBlockDetected:null,adSlots:{}},reducers:{updateUser:(t,e)=>{t.user=e.payload},updatePage:(t,e)=>{t.page=e.payload},adSlotUpdate(t,e){t.adSlots[e.payload.name]=e.payload.status},adBlockDetected:(t,e)=>{t.adBlockDetected=e.payload,Lt.debug("Feature: AdBlock Detected",t.adBlockDetected)}}}),{updateUser:Bo,updatePage:Mo,adSlotUpdate:Uo,adBlockDetected:Fo}=(Lo.actions,Lo.actions),zo=Lo.reducer;var Vo,Wo,Ho;function $o(t){return{id:`${t.productId}_${t.pageId}_${t.time}`,context:t.toTransport(),time:t.time,version:"2"}}function Go(t){if("1"===(null==t?void 0:t.version)){const e=t;return S.fromTransport({p:v.MEDIAWIKI,pCat:e.vertical,pId:e.communityId,pgId:e.pageId,time:e.time})}if("2"!==(null==t?void 0:t.version))return S.getDefault();const e=t;return S.fromTransport(e.context)}(Ho=Vo||(Vo={})).Request="CrossDomain::Register::Request",Ho.Response="CrossDomain::Register::Response",function(t){t.Off="off",t.Initializing="initializing",t.Ready="ready"}(Wo||(Wo={}));const Ko=bo({name:"BrowserStorageSlice",initialState:{session:{interactions:{},actions:[],pages:[]},history:{interactions:{},actions:[],pages:[]},serviceCache:{galactusUserProfile:{},activeData:{}},local:{status:Wo.Initializing,size:{localStorageSize:-1,indexedDBSize:-1}},crossdomain:{status:Wo.Initializing,statusErrorMessage:null,size:{localStorageSize:-1,indexedDBSize:-1},pagesFinished:!1,actionsFinished:!1,interactionsFinished:!1}},reducers:{cacheGalactusUserProfile:(t,e)=>{t.serviceCache.galactusUserProfile[e.payload.beaconId]=e.payload.profile},cacheActiveData:(t,e)=>{t.serviceCache.activeData=e.payload.activeData},crossdomainStatus:(t,e)=>{var n;const r=e.payload.status;t.crossdomain.status!=Wo.Ready&&(t.crossdomain.status=r,t.crossdomain.statusErrorMessage=r===Wo.Off?null===(n=e.payload)||void 0===n?void 0:n.statusErrorMessage:"")},sessionPageViewSaved:(t,e)=>{t.session.pages.push(Go(e.payload))},sessionActionSaved:(t,e)=>{t.session.actions.push(e.payload)},sessionAddInteraction:(t,e)=>{var n;const{interactions:r}=t.session,o=null!==(n=r[e.payload])&&void 0!==n?n:0;r[e.payload]=o+1,t.session.interactions=r},updateCrossdomainInteractions:(t,e)=>{t.history.interactions=e.payload,t.crossdomain.interactionsFinished=!0,t.crossdomain.status=Wo.Ready},updateCrossdomainActions:(t,e)=>{t.history.actions=e.payload,t.crossdomain.actionsFinished=!0,t.crossdomain.status=Wo.Ready},updateCrossdomainPages:(t,e)=>{t.history.pages=e.payload.map(Go),t.crossdomain.pagesFinished=!0,t.crossdomain.status=Wo.Ready},updateCrossdomainSize:(t,e)=>{t.crossdomain.size=e.payload,t.crossdomain.status=Wo.Ready},updateLocalHistory:(t,e)=>{var n,r,o,i;t.history.interactions=e.payload.interactions,t.history.pages=null!==(r=null===(n=e.payload.pages)||void 0===n?void 0:n.map(Go))&&void 0!==r?r:[],t.history.actions=null!==(i=null===(o=e.payload)||void 0===o?void 0:o.actions)&&void 0!==i?i:[],t.local.status=Wo.Ready},updateLocalStorageSize:(t,e)=>{t.local.size=e.payload}}}),{cacheGalactusUserProfile:qo,cacheActiveData:Yo,crossdomainStatus:Jo,sessionPageViewSaved:Xo,sessionActionSaved:Qo,sessionAddInteraction:Zo,updateCrossdomainSize:ti,updateCrossdomainPages:ei,updateCrossdomainActions:ni,updateCrossdomainInteractions:ri,updateLocalHistory:oi,updateLocalStorageSize:ii}=(Ko.actions,Ko.actions),ai=function(t){var e,n=function(t){return function(t){void 0===t&&(t={});var e=t.thunk,n=void 0===e||e,r=(t.immutableCheck,t.serializableCheck,new ho);return n&&(function(t){return"boolean"==typeof t}(n)?r.push(ro):r.push(ro.withExtraArgument(n.extraArgument))),r}(t)},r=t||{},o=r.reducer,i=void 0===o?void 0:o,a=r.middleware,c=void 0===a?n():a,s=r.devTools,u=void 0===s||s,l=r.preloadedState,d=void 0===l?void 0:l,f=r.enhancers,p=void 0===f?void 0:f;if("function"==typeof i)e=i;else{if(!function(t){if("object"!=typeof t||null===t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;for(var n=e;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return e===n}(i))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');e=function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var o=e[r];"function"==typeof t[o]&&(n[o]=t[o])}var i,a=Object.keys(n);try{!function(t){Object.keys(t).forEach((function(e){var n=t[e];if(void 0===n(void 0,{type:Jr.INIT}))throw new Error(Kr(12));if(void 0===n(void 0,{type:Jr.PROBE_UNKNOWN_ACTION()}))throw new Error(Kr(13))}))}(n)}catch(t){i=t}return function(t,e){if(void 0===t&&(t={}),i)throw i;for(var r=!1,o={},c=0;c<a.length;c++){var s=a[c],u=n[s],l=t[s],d=u(l,e);if(void 0===d)throw e&&e.type,new Error(Kr(14));o[s]=d,r=r||d!==l}return(r=r||a.length!==Object.keys(t).length)?o:t}}(i)}var v=c;"function"==typeof v&&(v=v(n));var h=to.apply(void 0,v),g=Zr;u&&(g=vo(po({trace:!1},"object"==typeof u&&u)));var y=[h];return Array.isArray(p)?y=ao([h],p):"function"==typeof p&&(y=p(y)),Qr(e,d,g.apply(void 0,y))}({reducer:{App:No,Context:zo,BrowserStorage:Ko.reducer},middleware:t=>t({serializableCheck:{ignoredPaths:["App.clients","Context.user","Context.page","BrowserStorage.session.pages","BrowserStorage.history.pages"],ignoredActions:["AppSlice/addClient","ContextSlice/updateUser","ContextSlice/updatePage"]}}),devTools:{name:"SilverSurfer",trace:Pt()}}),ci=ai;var si=n(4908),ui=n.n(si),li="NOT_FOUND",di=function(t,e){return t===e};function fi(t,e){var n,r,o="object"==typeof e?e:{equalityCheck:e},i=o.equalityCheck,a=void 0===i?di:i,c=o.maxSize,s=void 0===c?1:c,u=o.resultEqualityCheck,l=function(t){return function(e,n){if(null===e||null===n||e.length!==n.length)return!1;for(var r=e.length,o=0;o<r;o++)if(!t(e[o],n[o]))return!1;return!0}}(a),d=1===s?(n=l,{get:function(t){return r&&n(r.key,t)?r.value:li},put:function(t,e){r={key:t,value:e}},getEntries:function(){return r?[r]:[]},clear:function(){r=void 0}}):function(t,e){var n=[];function r(t){var r=n.findIndex((function(n){return e(t,n.key)}));if(r>-1){var o=n[r];return r>0&&(n.splice(r,1),n.unshift(o)),o.value}return li}return{get:r,put:function(e,o){r(e)===li&&(n.unshift({key:e,value:o}),n.length>t&&n.pop())},getEntries:function(){return n},clear:function(){n=[]}}}(s,l);function f(){var e=d.get(arguments);if(e===li){if(e=t.apply(null,arguments),u){var n=d.getEntries(),r=n.find((function(t){return u(t.value,e)}));r&&(e=r.value)}d.put(arguments,e)}return e}return f.clearCache=function(){return d.clear()},f}function pi(t){var e=Array.isArray(t[0])?t[0]:t;if(!e.every((function(t){return"function"==typeof t}))){var n=e.map((function(t){return"function"==typeof t?"function "+(t.name||"unnamed")+"()":typeof t})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return e}function vi(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var o=function(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];var i,a=0,c={memoizeOptions:void 0},s=r.pop();if("object"==typeof s&&(c=s,s=r.pop()),"function"!=typeof s)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof s+"]");var u=c,l=u.memoizeOptions,d=void 0===l?n:l,f=Array.isArray(d)?d:[d],p=pi(r),v=t.apply(void 0,[function(){return a++,s.apply(null,arguments)}].concat(f)),h=t((function(){for(var t=[],e=p.length,n=0;n<e;n++)t.push(p[n].apply(null,arguments));return i=v.apply(null,t)}));return Object.assign(h,{resultFunc:s,memoizedResultFunc:v,dependencies:p,lastResult:function(){return i},recomputations:function(){return a},resetRecomputations:function(){return a=0}}),h};return o}var hi=vi(fi);function gi(t){return 0===Object.keys(t||{}).length}function yi(t){try{return t.reduce(((t,e)=>t+Object.keys(e).length),0)}catch(t){return 0}}var bi=n(5578),mi=n.n(bi);function wi(t){const{onReboot:e}=t;return J(t,["onReboot"])}function Si(t,e){return(null==t?void 0:t.name)===(null==e?void 0:e.name)}const _i=t=>t.App.state===Io.Ready,Oi=t=>t.App.clients,xi=t=>t.App.config.sendDebugLog,Ei=t=>t.App.config.manualPageview,Ii=t=>t.Context.user,Ai=t=>t.Context.page,ji=t=>t.Context.adSlots,Di=t=>t.BrowserStorage.crossdomain.status,ki=hi(Di,(t=>"initializing"!==t)),Pi=hi(Di,(t=>t===Wo.Ready)),Ci=hi((t=>t.BrowserStorage.local.status),(t=>t===Wo.Ready)),Ri=hi(Pi,Ci,((t,e)=>t||e)),Ti=hi(Ai,(t=>t.BrowserStorage.session.pages),(t=>t.BrowserStorage.history.pages),((t,e,n)=>{return r=[t].concat(e).concat(n).filter(Boolean),s(r,(function(t){return t.time})).sort((function(t,e){return e.time-t.time}));var r})),Ni=hi((t=>t.BrowserStorage.session.actions),(t=>t.BrowserStorage.history.actions),((t,e)=>{return n=t.concat(e).filter(Boolean),mi()(n,(t=>t.action.time)).sort(((t,e)=>e.action.time-t.action.time));var n})),Li=t=>t.BrowserStorage.history.interactions,Bi=t=>t.BrowserStorage.session.interactions,Mi=hi(Bi,Li,((t,e)=>function(t){const e={};return t.forEach((t=>{for(const[n,r]of Object.entries(t))e[n]?e[n]+=r:e[n]=r})),e}([t,e]))),Ui=hi(Bi,Li,((t,e)=>{const n=Object.keys(t),r=Object.keys(e),o=[].concat(n,r).filter(Boolean);return ui()(o)})),Fi=hi([Ti],(t=>{const e={};return t.forEach((t=>{if(t.isValid){const{product:n,productId:r}=t,o=e[n]||{};o[r]=(o[r]||0)+1,e[n]=o}})),e})),zi=hi((t=>t.BrowserStorage.crossdomain.pagesFinished),(t=>t.BrowserStorage.crossdomain.actionsFinished),(t=>t.BrowserStorage.crossdomain.interactionsFinished),((t,e,n)=>t&&e&&n)),Vi=hi((t=>t.App.state===Io.Starting),Ci,Ai,((t,e,n)=>t&&e&&!!n)),Wi=V({event:"silversurfer",category:W("silversurfer"),isDebug:function(){const t=Object.values(At);for(let e=0;e<t.length;e++)if(kt(t[e]))return!0;return!1}()}),Hi=Wi,$i=window.requestIdleCallback||function(t){let e=Date.now();return window.setTimeout((function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})}),1)},Gi=window.cancelIdleCallback||function(t){window.clearTimeout(t)};let Ki=!1;function qi(t){return X(this,void 0,void 0,(function*(){const e=t||j();let n;var r;if(n=(r=e,t=>{var e;return null===(e=t.BrowserStorage.serviceCache.galactusUserProfile)||void 0===e?void 0:e[r]})(ci.getState()),n)Lt.debug("getGalactusUserProfile: Profile read from cache",n);else{const e=yield function(t){return X(this,void 0,void 0,(function*(){return Zt()?yield function(t){return X(this,void 0,void 0,(function*(){const e=yield Kt(),n=yield null==e?void 0:e.get(Ht,qt(t));return n&&4===n.apiVersion?et()(n,"apiVersion"):null}))}(t):Qt()?yield function(t){return X(this,void 0,void 0,(function*(){const e=localStorage.getItem(at(t));if(e){const t=JSON.parse(e);if(t&&4===t.apiVersion)return et()(t,"apiVersion")}return null}))}(t):null}))}(t);e&&(n=de()(nt,e)),Lt.debug("getGalactusUserProfile: Profile read from storage",n)}return!Ki&&ci.getState().App.config.sendGalactusRequest&&(Ki=!0,mo((()=>function(t){return X(this,void 0,void 0,(function*(){let e=null;const n=$i((()=>X(this,void 0,void 0,(function*(){if(!(Date.now()-0<6e4))try{const n=yield function(t){return X(this,void 0,void 0,(function*(){if(Hn())return null;try{yield Wn()}catch(t){return Lt.debug("Consent not given, cannot contact Galactus"),null}try{const e=yield ue(`galactus-user-profile/profiles/${t}`);if(200===e.status){const t=yield e.json(),n=function(t){return de()(nt,t)}(t);return Lt.debug("Galactus API response",n),B({event:"custom-galactus-api-response-full",category:"custom-galactus-api-response-full",label:"custom-galactus-api-response-full",galactusResponse:t,skipValidation:!0}),n}}catch(t){Lt.error("Failed to fetch profile",t)}return null}))}(t);if(n&&(null==n?void 0:n.profileId)){const r=JSON.stringify(n);r!==e&&(Lt.debug("getGalactusUserProfile: Profile updated from Galactus",n),ci.dispatch(qo({beaconId:t,profile:n})),function(t,e){X(this,void 0,void 0,(function*(){const n=!!Zt()&&(yield function(t,e){return X(this,void 0,void 0,(function*(){const n=yield Kt(),r=qt(t),o=Object.assign(Object.assign({},e),{apiVersion:4});return(yield null==n?void 0:n.put(Ht,o,r))===r}))}(t,e)),r=!!Qt()&&(yield function(t,e){return X(this,void 0,void 0,(function*(){try{localStorage.setItem(at(t),JSON.stringify(Object.assign(Object.assign({},e),{apiVersion:4})))}catch(t){return!1}return!0}))}(t,e)),o=n||r;return o||Lt.error("Failed to cache Galactus response",t,e),o}))}(t,n),e=r)}}catch(t){Lt.error("Fail to fetch data from Galactus",t),Gi(n)}}))))}))}(e)))),n}))}function Yi(t,e){var n,r,o,i;return ui()([].concat(Object.keys(null!==(o=null===(r=null===(n=null==e?void 0:e.namespaces)||void 0===n?void 0:n.adTags)||void 0===r?void 0:r.pform)&&void 0!==o?o:[]),Object.keys(null!==(i=null==t?void 0:t.pform)&&void 0!==i?i:[])).filter(Boolean))}function Ji(t){var e,n,r;return(null!==(r=null===(n=null===(e=null==t?void 0:t.namespaces)||void 0===e?void 0:e.devices)||void 0===n?void 0:n.set)&&void 0!==r?r:[]).map((t=>({type:Xi(t),platform:Qi(t),browser:Zi(t)})))}function Xi(t){return t.type.toLowerCase().replace("unknown","other")}function Qi(t){const e=t.os.toLowerCase(),n=t.make.toLowerCase();let r="other";return e.includes("android")&&(r="android"),n.includes("apple")&&(r="apple"),r}function Zi(t){return t.browser.toLowerCase().replace("unknown","other")}function ta(t){var e,n,r,o;const i=null!==(r=null===(n=null===(e=null==t?void 0:t.namespaces)||void 0===e?void 0:e.locations)||void 0===n?void 0:n.set)&&void 0!==r?r:[],a=null===(o=null!=(c=function(t){try{var e,n=decodeURIComponent(null!=(e=A("Geo"))?e:"{}");return n?JSON.parse(n):void 0}catch(t){return}}())?c:{})||void 0===o?void 0:o.country;var c;return ui()([].concat(i.map((t=>t.country)),[a]).filter(Boolean).map((t=>t.toUpperCase())))}function ea(t){var e,n,r,o,i,a,c,s;const u=null!==(r=null===(n=null===(e=null==t?void 0:t.namespaces)||void 0===e?void 0:e.languages)||void 0===n?void 0:n.contentLanguages)&&void 0!==r?r:[],l=null!==(a=null===(i=null===(o=null==t?void 0:t.namespaces)||void 0===o?void 0:o.languages)||void 0===i?void 0:i.acceptLanguages)&&void 0!==a?a:[],d=[null===(c=Ai(ci.getState()))||void 0===c?void 0:c.pageLanguage,null===(s=Ii(ci.getState()))||void 0===s?void 0:s.lang],f=[window.navigator.language.split("-")[0]],p=Ti(ci.getState());return ui()([].concat(u.map((t=>t.languageCode)),l.map((t=>t.languageCode)),p.map((t=>null==t?void 0:t.pageLanguage)),d,f).filter(Boolean).map((t=>t.toLowerCase())))}var na,ra,oa,ia;function aa(t){return 1===t?ia.FIRST_TIME_VISITOR:t<=5?ia.RETURNING_VISITOR:ia.FREQUENT_VISITOR}function ca(t){const e=Ti(ci.getState()).length;if(e>0)return aa(e);const n=[];return Object.values(t).forEach((t=>{n.push(Math.max.apply(null,Object.values(t)))})),aa(Math.max.apply(null,n))}function sa(t){return[ca(t)]}function ua(t,e){var n,r,o,i;return ui()([].concat(Object.keys(null!==(o=null===(r=null===(n=null==e?void 0:e.namespaces)||void 0===n?void 0:n.adTags)||void 0===r?void 0:r.tv)&&void 0!==o?o:[]),Object.keys(null!==(i=null==t?void 0:t.tv)&&void 0!==i?i:[])).filter(Boolean))}function la(t){if(t){const{media:e,gnre:n,theme:r}=t;return ui()([].concat(e?Object.keys(e):void 0,n?Object.keys(n):void 0,r?Object.keys(r):void 0).filter(Boolean))}return[]}!function(t){t.DELAYED="silver-surfer:delayed",t.READY="silver-surfer:ready"}(na||(na={})),function(t){t.LOADED="loaded",t.COLLAPSED="collapsed",t.BLOCKED="blocked"}(ra||(ra={})),function(t){t.WIKI_CONTENT="wiki content",t.FEATURED_VIDEO="featured video",t.DISCUSSIONS="discussions",t.ADS="ads"}(oa||(oa={})),function(t){t.FIRST_TIME_VISITOR="1st time visitor",t.RETURNING_VISITOR="returning visitor",t.FREQUENT_VISITOR="frequent visitor"}(ia||(ia={})),re("pathfinder",Dt);const da=oe("pathfinder",Dt);ce(da);const fa=se(da),pa="active-data-management-service";var va=n(1609),ha=n.n(va);let ga=0;function ya(){var t,e;return X(this,void 0,void 0,(function*(){const n=yield function(){return X(this,void 0,void 0,(function*(){const t=j();let e=nt;return t?(e=yield qi(t),Hi.loaded({category:"galactus-user-profile-loaded",label:"galactus-user-profile-loaded |  "+((null==e?void 0:e.profileId)?"true":"false")})):Hi.loaded({category:"galactus-user-profile-failed-loaded",label:"no-beacon"}),e}))}(),r=yield function(){return X(this,void 0,void 0,(function*(){const t=ci.getState().BrowserStorage.serviceCache.activeData;if(!ha()(t)&&Date.now()-ga<6e4)return t;const e=yield function(){return X(this,void 0,void 0,(function*(){if(Hn())return{};try{yield Wn()}catch(t){return Lt.debug("Consent not given, cannot contact active-data-management-system"),{}}try{const t=yield ue(`${pa}/profiles?cb=${Date.now()}`);if(200===t.status){const e=yield t.json();return Lt.debug("active-data-management-system API response",e),e}}catch(t){Lt.error("Failed to fetch active-data",t)}return{}}))}();return Lt.debug("getActiveData: read from ADMS",e),ga=Date.now(),ci.dispatch(Yo({activeData:e})),e}))}(),o=function(t){var e,n,r;let o=null!==(n=null===(e=null==t?void 0:t.namespaces)||void 0===e?void 0:e.adTags)&&void 0!==n?n:{};if(!gi(o)){Lt.debug("getUserProfile: Galactus AdTags are empty, fallback to history");const t=null!==(r=Ti(ci.getState()).map((({adTags:t})=>t)))&&void 0!==r?r:[];i=t.filter(Boolean).map(I),a={},i.forEach((function(t){for(var e=0,n=Object.entries(t);e<n.length;e++){var r,o=n[e],i=o[0],c=o[1],s=i,u=null!=(r=a[s])?r:{};if(c)for(var l=0,d=Object.entries(c);l<d.length;l++){var f,p=d[l],v=p[0],h=p[1];u[v]=(null!=(f=u[v])?f:0)+h}a[s]=u}})),o=a}var i,a;return gi(o)&&(Lt.debug("getUserProfile: History is empty, fallback to current page"),o=I(Ai(ci.getState()).adTags)),o}(n),i={beaconId:j(),gender:Object.keys(null!==(t=null==o?void 0:o.sex)&&void 0!==t?t:{}),affiliation:sa(o),interactions:Ui(ci.getState()),ageBrackets:Object.keys(null!==(e=null==o?void 0:o.age)&&void 0!==e?e:{}),devices:Ji(n),language:ea(n),country:ta(n),interests:la(o),consoles:Yi(o,n),streaming:ua(o,n),adTags:o,activeData:r,visitedProducts:Fi(ci.getState())};return Lt.debug("getUserProfile: Profile complete",i),i}))}function ba(t){if((null==t?void 0:t.name)&&(null==t?void 0:t.state)){let e;"collapse"===t.state&&(e=ra.COLLAPSED),"success"===t.state&&(e=ra.LOADED),"blocked"===t.state&&(e=ra.BLOCKED),e&&ci.dispatch(Uo({name:t.name,status:e}))}}function ma(t){ci.dispatch(Uo({name:"uap",status:t.isLoaded?ra.LOADED:ra.COLLAPSED}))}function wa(){ci.dispatch(Zo(oa.ADS))}function Sa(t){ci.dispatch(Fo(t.detected))}function _a(){const t=zn();t&&(Lt.debug("Start listening for Ad events"),Pt()&&t.actions.subscribe((t=>Lt.debug("AdEngine event",t))),t.actions.pipe(Vn("[AdEngine] Ad Slot loaded")).subscribe(ba),t.actions.pipe(Vn("[AdEngine] UAP Load status")).subscribe(ma),t.actions.pipe(Vn("[AdEngine] Ad clicked")).subscribe(wa),t.actions.pipe(Vn("[AdEngine] BAB detection finished")).subscribe(Sa))}function Oa(){const t=k();return!t.isUnknown&&(Lt.debug("Updating user context from window",t.toTransport()),ci.dispatch(Bo(t)),t)}function xa(){!function(){const t=k();t.isUnknown?(Lt.debug("Reading user context from window failed, trying fallback..."),function(){return E.apply(this,arguments)}().then((t=>{Oa()||t.isUnknown||(Lt.debug("Reading user context from fallback",t.toTransport()),ci.dispatch(Bo(t)))})).catch((t=>{Oa()||Lt.error("Reading user context from fallback failed",t)}))):(Lt.debug("Reading user context from window",t.toTransport()),ci.dispatch(Bo(t)));const e=D();Lt.debug("Reading page context from window",e.toTransport()),ci.dispatch(Mo(e))}(),mo(_a)}function Ea(){let t=Ai(ci.getState());t.isValid||(t=D(),t.isValid&&(Lt.debug("Updated page context from window",t.toTransport()),ci.dispatch(Mo(t))));let e=Ii(ci.getState());if(e.isUnknown){const t=Oa();t&&(e=t)}return{current:t,pages:Ti(ci.getState()),features:{adBlockDetected:(n=ci.getState(),n.Context.adBlockDetected)},slots:ji(ci.getState()),user:e};var n}function Ia(t){return X(this,void 0,void 0,(function*(){if(!function(t){return!(!t||"string"!=typeof t.name||(null==t?void 0:t.onReboot)&&"function"!=typeof t.onReboot)}(t))return Lt.debug("registerClient: Invalid client",t),Hi({label:"client-registration",action:"invalid",client:t}),null;const e=Oi(ci.getState());if(function(t,e){var n;return null!==(n=null==e?void 0:e.findIndex((e=>Si(e,t))))&&void 0!==n?n:-1}(t,e)>-1)return Lt.debug("registerClient: Already registered client",t),Hi({label:"client-registration",action:"already-registered",client:t}),null;const n=function(t){return Object.assign(Object.assign({},t),{time:Date.now(),token:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),ssVersion:Dt})}(t);return ci.dispatch(Ro(n)),Lt.debug("registerClient: Client registered",n),n.token}))}const Aa=Dt;function ja(t,e){return{type:t,timestamp:Date.now(),payload:e,xv:Aa}}var Da;!function(t){t.PageviewRequest="SilverSurfer::Pageview::Request",t.PageviewResponse="SilverSurfer::Pageview::Response",t.AddActionRequest="SilverSurfer::AddAction::Request",t.AddActionResponse="SilverSurfer::AddAction::Response",t.AddInteractionRequest="SilverSurfer::AddInteraction::Request",t.AddInteractionResponse="SilverSurfer::AddInteraction::Response",t.HistorySizeResponse="SilverSurfer::HistorySize::Response",t.HistoryPagesResponse="SilverSurfer::HistoryPages::Response",t.HistoryActionsResponse="SilverSurfer::HistoryActions::Response",t.HistoryInteractionsResponse="SilverSurfer::HistoryInteractions::Response"}(Da||(Da={}));class ka{constructor(t,e,n,r){this._sending=!1,this._queue=[],this._options={},this._onMessageCallback=n,this._origin=t,this._options=r,this._initialize(e)}get status(){return this._status}_log(t,...e){var n;(null===(n=this._options)||void 0===n?void 0:n.debug)&&console.log(`CrossDomainSender::${t}`,...e)}_initialize(t){this._log("_initialize"),this._status=Wo.Initializing;const e=document.createElement("iframe");e.style.display="none",e.sandbox="allow-same-origin allow-scripts",e.addEventListener("load",this._onIframeLoad.bind(this)),e.addEventListener("error",this._onIframeLoadError.bind(this)),e.src=t,document.body.appendChild(e),this._iframe=e}_onIframeLoadError(t){var e;this._log("_onIframeLoadError",t.error),this._status=Wo.Off,"function"==typeof(null===(e=this._options)||void 0===e?void 0:e.onIframeError)&&this._options.onIframeError(t)}_onIframeLoad(){this._log("_onIframeLoad");const t=new MessageChannel;t.port1.onmessage=this._onMessage.bind(this),this._sendMessage(ja(Vo.Request),[t.port2])}_onMessage(t){var e;"string"==typeof(e=t.data).xv&&"number"==typeof e.timestamp&&e.timestamp>0&&"string"==typeof e.type?(this._log("_onMessage",t),t.data.type===Vo.Response&&(this._status=Wo.Ready),"function"==typeof this._onMessageCallback&&this._onMessageCallback(t.data)):this._log("_onMessage - invalid message",t)}_sendMessage(t,e){this._log("_sendMessage",t),this._iframe.contentWindow.postMessage(t,this._origin,e)}_flushQueue(){if(this._status===Wo.Ready&&!this._sending){let t;for(this._sending=!0;t=this._queue.shift(),void 0!==t;)this._sendMessage(t);this._sending=!1}}send(t){this._queue.push(t),this._flushQueue()}}function Pa(){return""!==window.location.port&&"80"!==window.location.port?null:"https://www.fandom.com"}let Ca;const Ra=jt()?500:14e3;function Ta(){if(!Ca){if(ci.getState().App.config.disableCrossdomain)return Lt.debug("Cross domain connection disabled (on purpose)"),void ci.dispatch(Jo({status:Wo.Off,statusErrorMessage:"disabled"}));if(!Pa())return Lt.debug("Cross domain connection disabled (unsupported origin)"),void ci.dispatch(Jo({status:Wo.Off,statusErrorMessage:"incorrect-origin"}));Lt.debug("Initializing cross domain connection"),Ca=new ka(Pa(),function(){let t=window.location.search;return xi(ci.getState())&&(t+=`${t.length?"&":"?"}cb=${Date.now()}`),`${Pa()}/silver-surfer.html${t}`}(),Na,{debug:xi(ci.getState()),onIframeError:t=>{ci.dispatch(Jo({status:Wo.Off,statusErrorMessage:"iframe-error"})),Lt.error("Cross domain frame error")}}),setTimeout((()=>{ci.dispatch(Jo({status:Wo.Off,statusErrorMessage:"timeout"})),Lt.error("Cross domain timeout")}),Ra)}}function Na(t){switch(t.type){case Vo.Response:return ci.dispatch(Jo({status:Wo.Ready})),void Lt.debug("Cross domain connected");case Da.HistorySizeResponse:{const e=t.payload;return ci.dispatch(ti(e)),void Lt.debug("Cross domain sent storage size",e)}case Da.HistoryInteractionsResponse:{const e=t.payload;return ci.dispatch(ri(e)),void Lt.debug("Cross domain sent history interactions",e)}case Da.HistoryPagesResponse:{const e=t.payload;return ci.dispatch(ei(e)),void Lt.debug("Cross domain sent history pages",e)}case Da.HistoryActionsResponse:{const e=t.payload;return ci.dispatch(ni(e)),void Lt.debug("Cross domain sent history actions",e)}case Da.PageviewResponse:return void Lt.debug("Cross domain pageview ack");case Da.AddActionResponse:return void Lt.debug("Cross domain action ack");case Da.AddInteractionResponse:return void Lt.debug("Cross domain interaction ack");default:return void Lt.error("Unknown message type",t)}}function La(t){return X(this,void 0,void 0,(function*(){Lt.debug("New interaction",t),ci.dispatch(Zo(t)),function(t){Ca&&Ca.status===Wo.Ready?(Lt.debug("Sending cross domain interaction",t),Ca.send(function(t){return ja(Da.AddInteractionRequest,t)}(t))):Lt.debug("Cross domain not ready on interaction")}(t)}))}const Ba=function(t){let e=0;const n="function"==typeof(null==t?void 0:t.onResolve)?t.onResolve:()=>{},r="function"==typeof(null==t?void 0:t.onReject)?t.onReject:()=>{};return()=>new Promise(((o,i)=>{const a=setInterval((()=>{t.eventCheck()&&(clearInterval(a),o(n())),t.intervalTime*e>t.maxWaitTime&&(clearInterval(a),i(r())),e++}),t.intervalTime)}))}({eventCheck:()=>Ri(ci.getState()),intervalTime:100,maxWaitTime:5e3,onReject:()=>Ni(ci.getState()),onResolve:()=>Ni(ci.getState())});function Ma(){return X(this,void 0,void 0,(function*(){try{return yield Ba()}catch(t){if(Array.isArray(t))return t;Lt.error("Error getting actions",t)}return[]}))}function Ua(t){const e=(t=>hi(Oi,(e=>e.find((e=>e.token===t)))))(t)(ci.getState());if(!e)throw new Error("Incorrect token");return e}function Fa(t,e){return X(this,void 0,void 0,(function*(){const n=Ua(t);return function(t,e,n){let r=t.filter((t=>Si(t.client,e))).map((t=>t.action));return"string"==typeof n&&n.length>0&&(r=r.filter((t=>t.type===n))),r}(yield Ma(),n,e)}))}function za(t){return X(this,void 0,void 0,(function*(){return jt()||Ua(t),yield Ma()}))}function Va(t,e,n,r){return X(this,void 0,void 0,(function*(){const o=function(t,e,n,r){return{client:wi(t),action:{time:Date.now(),name:e,type:n,payload:r}}}(Ua(t),e,n,r);Lt.debug("New action",o),ci.dispatch(Qo(o)),function(t){Ca&&Ca.status===Wo.Ready?(Lt.debug("Sending cross domain action",t),Ca.send(function(t){return ja(Da.AddActionRequest,t)}(t))):Lt.debug("Cross domain not ready on action")}(o)}))}var Wa;!function(t){t.ADD="add",t.CLICK="click",t.CLOSE="close",t.CONFIRM="confirm",t.CREATE="create",t.DISABLE="disable",t.ENABLE="enable",t.ERROR="error",t.HOVER="hover",t.IMPRESSION="impression",t.IDENTITY="identity",t.KEYPRESS="keypress",t.NO_IMPRESSION="no-impression",t.OPEN="open",t.PLAY_VIDEO="play-video",t.QUIZ="quiz",t.REACTION="reaction",t.REMOVE="remove",t.SELECT="select",t.SHARE="share",t.SUBMIT="submit",t.SUCCESS="success",t.SWIPE="swipe",t.VIEW="view",t.REACTION_COUNT="reaction-count",t.HEALTH="health",t.HIGHLIGHT="highlight",t.MYFANDOM="myfandom",t.CALENDAR_EVENTS="calendarevents",t.COLLECTIONITEM="collectionitem"}(Wa||(Wa={}));var Ha=n(8446),$a=n.n(Ha);function Ga(t,e,n){let r;function o(){const o=e(t.getState());$a()(o,r)||(r=o,n(r))}const i=t.subscribe(o);return o(),i}function Ka(){return X(this,void 0,void 0,(function*(){var t,e;t=$o(Ai(ci.getState())),Ca&&Ca.status===Wo.Ready?(Lt.debug("Tracking cross domain page",t),Ca.send((e=t,ja(Da.PageviewRequest,e)))):Lt.debug("Cross domain not ready on pageview")}))}function qa(){return X(this,void 0,void 0,(function*(){const t=Ai(ci.getState()),e=$o(t);Lt.debug("Tracking local page",e),ci.dispatch(Xo(e));try{if(yield Wn(),![v.MEDIAWIKI,v.DISCUSSIONS].includes(t.product))return void Lt.debug("Fallback for visited wikis DISABLED - not MW or Discussions",t.product);let e=(function(t){const e=document.cookie.match(RegExp("(?:^|;\\s*)"+function(t){return t.replace(/([.*+?\^$(){}|\[\]\/\\])/g,"\\$1")}("fan_visited_wikis")+"=([^;]*)"));return e?e[1]:null}()||"").split(",");e.includes(t.productId)||(e=e.slice(-50),e.push(t.productId));const n=31536e3;document.cookie=`fan_visited_wikis=${e.filter(Boolean).join(",")};path=/;domain=.fandom.com;max-age=${n};SameSite=None;Secure`,Lt.debug("Fallback for visited wikis enabled, new values",e)}catch(t){Lt.debug("Consent not given, fallback cookie not set",t)}}))}function Ya(t,e){const n=new CustomEvent(t,{detail:e});window.dispatchEvent(n)}function Ja(){return document.cookie.includes("ss_galactus_enabled")}let Xa=null;function Qa(){return X(this,void 0,void 0,(function*(){const t=ci.getState().App.state===Io.Delayed,e=_i(ci.getState());if(!t&&!e)return Lt.error("trackPageview cannot be triggered until SilverSurfer is bootstrapped"),!1;const n=S.fromWindow();return function(t,e){return t instanceof S&&e instanceof S&&t.product===e.product&&t.productId===e.productId&&t.page===e.page&&t.pageId===e.pageId}(n,Xa)?(Lt.info("Page context did not change, skipping pageview"),!1):(Lt.debug("Firing manual pageview"),xa(),qa().catch(Lt.error),e&&(Pi(ci.getState())&&Ka().catch(Lt.error),ci.dispatch(Do.reboot())),t&&ci.dispatch(Do.starting()),Xa=n,!0)}))}const Za={trackPageview:Qa,getContext:Ea,registerClient:Ia,getUserProfile:ya,addInteraction:La,ACTION:Wa,addActiveDataAction:rc,addAction:Va,getAllActions:za,getActions:Fa,getGalactusUserProfile:qi,isCrossdomainFinished:uc,isCrossdomainDisabled:lc,isInitialized:dc,isReady:fc,getVersionHash:pc},tc=Wa;function ec(){return Qa()}function nc(t){return Ia(t)}function rc(t,e,n,r){return function(t,e,n,r){return X(this,void 0,void 0,(function*(){const o={time:Date.now(),name:e,type:n,payload:Object.assign(Object.assign({},r||{}),{_type:n})};(yield function(t){return X(this,void 0,void 0,(function*(){if(Hn())return!0;try{if(200===(yield fa(`${pa}/validate/`,Object.assign({},t))).status)return!0}catch(t){Lt.error("Failed to post active data action",t)}return!1}))}(o))?yield Va(t,e,n,r):Lt.error("Error posting active data action",o)}))}(t,e,n,r)}function oc(t,e,n,r){return Va(t,e,n,r)}function ic(t,e){return Fa(t,e)}function ac(t){return za(t)}function cc(){return ya()}function sc(t){return La(t)}function uc(){return zi(ci.getState())}function lc(){return(t=ci.getState()).App.config.disableCrossdomain||t.BrowserStorage.crossdomain.status===Wo.Off;var t}function dc(){return _i(ci.getState())}function fc(){return dc()&&(uc()||lc())}function pc(){return Dt}function vc(t){return qi(t||j())}function hc(){return Ea()}try{Y(b.SS_PRE_BOOTSTRAP),ci.getState().App.state===Io.New&&(Lt.debug(`Booting SilverSurfer #${Dt}`,ci.getState().App.config),function(){const t=Ga(ci,Vi,(e=>X(this,void 0,void 0,(function*(){e&&(t(),Lt.debug("Booted, running post-boot actions"),Ga(ci,Ti,(t=>{(function(t){return X(this,void 0,void 0,(function*(){const e=!!Zt()&&(yield function(t){return X(this,void 0,void 0,(function*(){const e=yield Kt(),n=null==e?void 0:e.transaction(Ft,"readwrite",{durability:"strict"});if(!(null==n?void 0:n.store))return!1;yield n.store.clear();let r=!0;return Z()(t,Jt[Yt.IndexedDB]).forEach((t=>X(this,void 0,void 0,(function*(){const{id:e}=t,o=J(t,["id"]),i=yield n.store.put(o,e);r&&(r=i===e)})))),yield n.done,r}))}(t)),n=!!Qt()&&(yield function(t){return X(this,void 0,void 0,(function*(){try{localStorage.setItem(rt,JSON.stringify(Z()(t,Jt[Yt.LocalStorage])))}catch(t){return!1}return!0}))}(t)),r=e||n;return r?Lt.debug("Local pages updated from cross domain"):Lt.error("Failed to update local pages"),r}))})(t.map($o)).then((()=>{Lt.debug("LocalStorage pages saved",t)}))})),Ga(ci,Ni,(t=>{(function(t){return X(this,void 0,void 0,(function*(){const e=!!Zt()&&(yield function(t){return X(this,void 0,void 0,(function*(){const e=yield Kt(),n=null==e?void 0:e.transaction(zt,"readwrite",{durability:"strict"});if(!(null==n?void 0:n.store))return!1;yield n.store.clear();let r=!0;return Z()(t,Xt[Yt.IndexedDB]).forEach((t=>X(this,void 0,void 0,(function*(){const e=yield n.store.put(t);r&&(r=!!e)})))),yield n.done,r}))}(t)),n=!!Qt()&&(yield function(t){return X(this,void 0,void 0,(function*(){try{localStorage.setItem(ot,JSON.stringify(Z()(t,Xt[Yt.LocalStorage])))}catch(t){return!1}return!0}))}(t)),r=e||n;return r?Lt.debug("Local actions updated from cross domain"):Lt.error("Failed to update local actions"),r}))})(t).then((()=>{Lt.debug("LocalStorage actions saved",t)}))})),Ga(ci,Mi,(t=>{te(t).then((()=>{Lt.debug("LocalStorage interactions saved",t)}))})),qa().catch(Lt.error),ya().catch(Lt.error),(ci.getState().App.config.sendTracking||Ja())&&(Ja()||function(){const t=new Date;t.setMonth(t.getMonth()+12),document.cookie="ss_galactus_enabled=true;expires="+t+";domain=.fandom.com;path=/"}()),ci.dispatch(Do.ready()),Y(b.SS_SDK_READY),Ya(na.READY),mo(Ta))}))))}(),function(){const t=Ga(ci,ki,(e=>{e&&(Y(b.SS_CROSS_DOMAIN_READY),t(),Lt.debug("Cross domain initialized:",Di(ci.getState()),ci.getState().BrowserStorage.crossdomain.statusErrorMessage),Ei(ci.getState())||Ka().catch(Lt.error))})),e=Ga(ci,zi,(t=>{t&&(e(),Lt.debug("Cross domain finished"))}))}(),function(){return X(this,void 0,void 0,(function*(){const t=yield function(){return X(this,void 0,void 0,(function*(){return Zt()?yield function(){var t;return X(this,void 0,void 0,(function*(){const e=yield Kt(),n=null!==(t=yield null==e?void 0:e.getAllKeys(Ft))&&void 0!==t?t:[],r=yield null==e?void 0:e.getAll(Ft);return n.map(((t,e)=>Object.assign({id:t},r[e])))}))}():Qt()?yield st():[]}))}(),e=yield function(){return X(this,void 0,void 0,(function*(){return Zt()?yield function(){return X(this,void 0,void 0,(function*(){const t=yield Kt();return yield null==t?void 0:t.getAll(zt)}))}():Qt()?yield ut():[]}))}(),n=yield function(){return X(this,void 0,void 0,(function*(){return Zt()?yield function(){var t;return X(this,void 0,void 0,(function*(){const e=yield Kt();return null!==(t=yield null==e?void 0:e.get(Vt,Wt))&&void 0!==t?t:{}}))}():Qt()?yield ct():{}}))}(),r={interactions:n,actions:e,pages:t};Lt.debug("Read from local domain",r),ci.dispatch(oi(r));const o=yield ee();ci.dispatch(ii(o));const i=yi(t)+yi(e)+yi([n]);Ut("sdk-read-pages",t.length,.02,yi(t).toString()),Ut("sdk-total-objects",i,.02,e.length.toString()),Ut("sdk-storage-size",o.indexedDBSize,.02,o.localStorageSize.toString());try{if(navigator&&navigator.storage&&navigator.storage.estimate){const t=yield window.navigator.storage.estimate(),e=t.quota;Ut("sdk-navigator-estimate",t.usage,.02,e.toString()),t.usageDetails&&t.usageDetails.indexedDB&&Ut("sdk-navigator-estimate-indexeddb",t.usageDetails.indexedDB,.02)}}catch(t){}}))}().catch(Lt.error),Ei(ci.getState())?(Lt.info("Manual pageview is enabled"),ci.dispatch(Do.delayed()),Ya(na.DELAYED)):(xa(),qa().catch(Lt.error),ci.dispatch(Do.starting())))}catch(qn){Lt.error("SilverSurfer bootstrap failed",qn)}const gc=Za})(),r})()}));
//# sourceMappingURL=sdk.js.map