/*! For license information please see main.bundle.js.LICENSE.txt */
(()=>{var e,t,i={4492:e=>{function t(e,t){return Object.keys(t).forEach((function(i){"default"===i||"__esModule"===i||e.hasOwnProperty(i)||Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[i]}})})),e}function i(e,t,i,n){Object.defineProperty(e,t,{get:i,set:n,enumerable:!0,configurable:!0})}i(e.exports,"utils",(()=>n));var n={},s={};function o(e){return new Promise((t=>setTimeout((()=>t()),e)))}i(s,"delay",(()=>o));var r={};function a(){const e=new URLSearchParams(window.location.search.substring(1));return Boolean(e.get("adengine_debug"))?e.get("adengine_debug"):e.get("identity_debug")}i(r,"getDebugGroup",(()=>a));var d={};i(d,"localStorageHelper",(()=>l));class l{constructor(e,t=6e4){this.key=e,this.ttlInMilliseconds=t}expired(e){return!e||e<Date.now()}getObjectToStore(e){return{data:e,ttl:Date.now()+this.ttlInMilliseconds}}parseStoredValue(e){const t=JSON.parse(e);return this.expired(t?.ttl)?null:t.data}get(){const e=localStorage.getItem(this.key);return e?this.parseStoredValue(e):null}set(e){const t=this.getObjectToStore(e);localStorage.setItem(this.key,JSON.stringify(t))}}var c={};i(c,"lock",(()=>p)),i(c,"release",(()=>h));const u=new l("instant-config-lock",1e3);function p(){return"lock"===u.get()||(u.set("lock"),!1)}function h(){u.set(null)}var g={};i(g,"getTimeDelta",(()=>b)),i(g,"logger",(()=>y)),i(g,"warner",(()=>_));const m=a()||"",f=m.split(","),v=Date.now();function b(){return((Date.now()-(window.performance?.timeOrigin??v))/1e3).toFixed(4)}function y(e,...t){""!==m&&("1"!==m&&-1===f.indexOf(e)||window.console.info(`${b()}s\t\t ${e}`,t))}function _(e,...t){""!==m&&("1"!==m&&-1===f.indexOf(e)||window.console.warn(e,t))}t(n,s),t(n,r),t(n,d),t(n,c),t(n,g);var S={},w={};i(w,"EmptyInstantConfigCacheStorage",(()=>E));class E{get(e){}set(e){}}var I={};i(I,"InstantConfigInterpreter",(()=>H));var T={},A={};i(A,"BrowserMatcher",(()=>R));var C={};i(C,"extractNegation",(()=>x));var O={},N={};i(N,"negativePrefix",(()=>P)),i(N,"cacheSuffix",(()=>k)),i(N,"samplingSeparator",(()=>D)),i(N,"worldWide",(()=>L)),i(N,"precision",(()=>z));const P="non-",k="-cached",D="/",L="XX",z=10**6;function x(e){return e.startsWith(P)?{value:e.replace(P,""),negated:!0}:{value:e,negated:!1}}t(O,{}),t(O,{}),t(O,{}),t(O,{}),t(O,{}),t(O,{}),t(O,{}),t(O,{}),t(O,{}),t(O,N);class R{constructor(e){this.currentBrowser=e?.toLowerCase()}isValid(e=[]){const t=e.map((e=>e.toLowerCase())).map((e=>x(e)));return 0===e.length||!this.currentBrowser||!this.isCurrentNegated(this.currentBrowser,t)&&t.some((e=>this.currentBrowser.includes(e.value)!==e.negated))}isCurrentNegated(e,t){return t.some((t=>e.includes(t.value)&&t.negated))}}var j={};i(j,"DeviceMatcher",(()=>V));class V{constructor(e){this.currentDevice=e}isValid(e=[]){const t=e.map((e=>e.toLowerCase())).map((e=>x(e)));return 0===t.length||!this.currentDevice||!this.isCurrentNegated(this.currentDevice,t)&&t.some((e=>e.value===this.currentDevice!==e.negated))}isCurrentNegated(e,t){return t.some((t=>e.includes(t.value)&&t.negated))}}var M={};i(M,"DomainMatcher",(()=>U));class U{isValid(e=[]){return 0===e.length||e.some((e=>window.location.hostname.includes(e)))}}var B={};i(B,"RegionMatcher",(()=>$));class ${constructor(e){this.geo=e}isValid(e=[],t){const i=this.filterOutInvalidRegions(e);return t?t(i):this.isProperGeo(i)}getCountryCode(){return this.geo?.country}getRegionCode(){return this.geo?.region}getContinentCode(){return this.geo?.continent}isProperGeo(e=[]){return!(!e||!e.indexOf||this.isGeoExcluded(e)||!(this.isProperContinent(e)||this.isProperCountry(e)||this.isProperRegion(e)))}filterOutInvalidRegions(e){return e.filter((e=>!e.includes(D))).filter((e=>!e.includes(k)))}isProperCountry(e){return!!(e&&e.indexOf&&(e.indexOf(this.getCountryCode())>-1||this.isSampledForGeo(e,this.getCountryCode())))}isProperRegion(e){const t=`${this.getCountryCode()}-${this.getRegionCode()}`;return!!(e&&e.indexOf&&(e.indexOf(t)>-1||this.isSampledForGeo(e,t)))}containsContinent(e){const t=`${L}-${this.getContinentCode()}`;return e.indexOf(t)>-1||this.isSampledForGeo(e,t)}containsWorldWide(e){return e.indexOf(L)>-1||this.isSampledForGeo(e,L)}isProperContinent(e){return!(!e||!e.indexOf||!this.containsWorldWide(e)&&!this.containsContinent(e))}isGeoExcluded(e){return!!(e.indexOf(`${P}${this.getCountryCode()}`)>-1||e.indexOf(`${P}${this.getCountryCode()}-${this.getRegionCode()}`)>-1||e.indexOf(`${P}${L}-${this.getContinentCode()}`)>-1)}hasSampling(e){return t=>0!==t.indexOf(P)&&t.indexOf(e+D)>-1}getSamplingLimits(e){let[,t]=e.split(D);return t=t.replace(k,""),Math.round(parseFloat(t)*z)||0}isSampledForGeo(e,t){const i=e.filter(this.hasSampling(t));if(0===i.length)return!1;const n=Math.round(Math.random()*(100*z))||0;return i.map((e=>this.getSamplingLimits(e))).some((e=>n<e))}}var F={};i(F,"SamplingCacheManager",(()=>G));class G{constructor(e){this.cacheStorage=e,this.precision=10**6}apply(e,t,i){const n=this.cacheStorage.get(e);if(void 0!==n)return n.result;const s=i();if("number"!=typeof t.sampling||!1===s)return s;const o=this.getSamplingResult(t.sampling),r={name:e,result:o,withCookie:Boolean(t.samplingCache),group:o?"B":"A",limit:+(o?t.sampling:100-t.sampling).toFixed(6)};return this.cacheStorage.set(r),o}getSamplingResult(e){const t=Math.round(100*Math.random()*this.precision);return Math.round(e*this.precision)>t}}t(T,A),t(T,j),t(T,M),t(T,C),t(T,B),t(T,F);class H{constructor(e=new R,t=new V,i=new U,n=new $,s=new E){this.browserMatcher=e,this.deviceMatcher=t,this.domainMatcher=i,this.regionMatcher=n,this.instantConfigCacheService=s,this.logGroup="instant-config-interpreter",this.configResponse={},this.samplingCache=new G(s)}init(e,t={},i){return this.configResponse={...t,...e},this.regionValidationPredicate=i,this}getValues(){return n.logger(this.logGroup,"get values called with",this.configResponse),Object.keys(this.configResponse).map((e=>({key:e,value:this.configResponse[e]}))).map((({key:e,value:t})=>Array.isArray(t)?{key:e,value:this.getValue(e,t)}:{key:e,value:t})).reduce(((e,t)=>({...e,[t.key]:t.value})),{})}getValue(e,t){const i=t.find(((t,i)=>this.samplingCache.apply(`${e}-${i}`,t,this.getPredicate(t))));if(void 0!==i)return i.value}getPredicate(e){return()=>this.browserMatcher.isValid(e.browsers)&&this.deviceMatcher.isValid(e.devices)&&this.domainMatcher.isValid(e.domains)&&this.regionMatcher.isValid(e.regions,this.regionValidationPredicate)}}var W={};async function q(e,t=2e3){const i=new AbortController,n=setTimeout((()=>i.abort()),t),s=await fetch(e,{signal:i.signal});return clearTimeout(n),s}i(W,"InstantConfigLoader",(()=>X));const K="instant-config-loader",Y={b:"browsers",d:"devices",s:"sampling",c:"samplingCache",r:"regions",v:"value"};class X{constructor(e,t=window){this.params=e,this.configPromise=null,this.storage=new n.localStorageHelper(`instant-config-${e.appName}`,6e4),this.instantConfig=this.fromContainer(t)}async getConfig(){return this.instantConfig?this.instantConfig:(this.configPromise||(this.configPromise=this.fetchInstantConfig().then((e=>e??this.fetchFallbackConfig()))),this.configPromise.then((e=>e)))}async fetchInstantConfig(e=!1){if(n.lock()&&!e)return await o(500),this.fetchInstantConfig(!0);const t=`${this.params.instantConfigEndpoint??"https://services.fandom.com"}/${this.params.instantConfigVariant??"icbm"}/api/config?app=${this.params.appName}`;try{const e=this.storage.get();if(e)return n.logger(K,"instant config pulled from local storage",e),JSON.parse(e);const i=await q(t,this.params.requestTimeout);if(!i.ok)return;const s=await i.json();return this.storage.set(JSON.stringify(s)),n.release(),n.logger(K,"instant config fetched",s),s}catch(e){return n.warner(K,"could not fetch instant config",e),void n.release()}}async fetchFallbackConfig(){n.logger(K,"Fetching fallback config");const e=this.params.instantConfigFallbackEndpoint;if(void 0===e)return{};try{n.logger(K,e);const t=await q(e,this.params.requestTimeout);if(!t.ok)return{};const i=await t.json();return n.logger(K,"fallback config fetched",i),i}catch(e){return n.warner(K,"could not fetch fallback config",e),{}}}fromContainer(e){let t=e.instantConfig;return"object"!=typeof t||t._ready||(Object.keys(t).forEach((e=>{const i=t[e];Array.isArray(i)&&(t[e]=i.map((e=>Object.fromEntries(Object.entries(e).map((([e,t])=>[Y[e]?Y[e]:e,t]))))))})),t._ready=!0,e.instantConfig=t),t}}var J={};i(J,"InstantConfigOverrider",(()=>Z));const Q=["InstantGlobals","icbm"];class Z{override(e,t){return[...e.keys()].filter((e=>{return t=e,Q.some((e=>t.startsWith(`${e}.`)||t.startsWith(`${e}__`)));var t})).map((e=>{const[,t]=e.split(".").map((e=>e.split("__"))).flat();return{paramKey:e,key:t}})).map((({paramKey:t,key:i})=>({key:i,value:this.parseValue(e.get(t))}))).map((({key:e,value:t})=>({key:e,value:e.startsWith("wg")?t:this.wrapValueInXXRegions(t)}))).reduce(((e,{key:t,value:i})=>({...e,[t]:i})),t)}parseValue(e){if("true"===e||"false"===e)return"true"===e;const t=parseInt(e,10);if(e===`${t}`)return t;try{return JSON.parse(e)}catch(t){return e||null}}wrapValueInXXRegions(e){return[{value:e,regions:["XX"]}]}}t(S,w),t(S,I),t(S,W),t(S,J),t(S,T),t(e.exports,S),t(e.exports,O)},5787:()=>{!function(e){var t=function(t){this._options={checkOnLoad:!1,resetOnEnd:!1,loopCheckTime:50,loopMaxNumber:5,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",baitStyle:"width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;",debug:!1},this._var={version:"3.2.1",bait:null,checking:!1,loop:null,loopNumber:0,event:{detected:[],notDetected:[]}},void 0!==t&&this.setOption(t);var i=this,n=function(){setTimeout((function(){!0===i._options.checkOnLoad&&(!0===i._options.debug&&i._log("onload->eventCallback","A check loading is launched"),null===i._var.bait&&i._creatBait(),setTimeout((function(){i.check()}),1))}),1)};void 0!==e.addEventListener?e.addEventListener("load",n,!1):e.attachEvent("onload",n)};t.prototype._options=null,t.prototype._var=null,t.prototype._bait=null,t.prototype._log=function(e,t){console.log("[BlockAdBlock]["+e+"] "+t)},t.prototype.setOption=function(e,t){if(void 0!==t){var i=e;(e={})[i]=t}for(var n in e)this._options[n]=e[n],!0===this._options.debug&&this._log("setOption",'The option "'+n+'" he was assigned to "'+e[n]+'"');return this},t.prototype._creatBait=function(){var t=document.createElement("div");t.setAttribute("class",this._options.baitClass),t.setAttribute("style",this._options.baitStyle),this._var.bait=e.document.body.appendChild(t),this._var.bait.offsetParent,this._var.bait.offsetHeight,this._var.bait.offsetLeft,this._var.bait.offsetTop,this._var.bait.offsetWidth,this._var.bait.clientHeight,this._var.bait.clientWidth,!0===this._options.debug&&this._log("_creatBait","Bait has been created")},t.prototype._destroyBait=function(){e.document.body.removeChild(this._var.bait),this._var.bait=null,!0===this._options.debug&&this._log("_destroyBait","Bait has been removed")},t.prototype.check=function(e){if(void 0===e&&(e=!0),!0===this._options.debug&&this._log("check","An audit was requested "+(!0===e?"with a":"without")+" loop"),!0===this._var.checking)return!0===this._options.debug&&this._log("check","A check was canceled because there is already an ongoing"),!1;this._var.checking=!0,null===this._var.bait&&this._creatBait();var t=this;return this._var.loopNumber=0,!0===e&&(this._var.loop=setInterval((function(){t._checkBait(e)}),this._options.loopCheckTime)),setTimeout((function(){t._checkBait(e)}),1),!0===this._options.debug&&this._log("check","A check is in progress ..."),!0},t.prototype._checkBait=function(t){var i=!1;if(null===this._var.bait&&this._creatBait(),null===e.document.body.getAttribute("abp")&&null!==this._var.bait.offsetParent&&0!=this._var.bait.offsetHeight&&0!=this._var.bait.offsetLeft&&0!=this._var.bait.offsetTop&&0!=this._var.bait.offsetWidth&&0!=this._var.bait.clientHeight&&0!=this._var.bait.clientWidth||(i=!0),void 0!==e.getComputedStyle){var n=e.getComputedStyle(this._var.bait,null);!n||"none"!=n.getPropertyValue("display")&&"hidden"!=n.getPropertyValue("visibility")||(i=!0)}!0===this._options.debug&&this._log("_checkBait","A check ("+(this._var.loopNumber+1)+"/"+this._options.loopMaxNumber+" ~"+(1+this._var.loopNumber*this._options.loopCheckTime)+"ms) was conducted and detection is "+(!0===i?"positive":"negative")),!0===t&&(this._var.loopNumber++,this._var.loopNumber>=this._options.loopMaxNumber&&this._stopLoop()),!0===i?(this._stopLoop(),this._destroyBait(),this.emitEvent(!0),!0===t&&(this._var.checking=!1)):null!==this._var.loop&&!1!==t||(this._destroyBait(),this.emitEvent(!1),!0===t&&(this._var.checking=!1))},t.prototype._stopLoop=function(e){clearInterval(this._var.loop),this._var.loop=null,this._var.loopNumber=0,!0===this._options.debug&&this._log("_stopLoop","A loop has been stopped")},t.prototype.emitEvent=function(e){!0===this._options.debug&&this._log("emitEvent","An event with a "+(!0===e?"positive":"negative")+" detection was called");var t=this._var.event[!0===e?"detected":"notDetected"];for(var i in t)!0===this._options.debug&&this._log("emitEvent","Call function "+(parseInt(i)+1)+"/"+t.length),t.hasOwnProperty(i)&&t[i]();return!0===this._options.resetOnEnd&&this.clearEvent(),this},t.prototype.clearEvent=function(){this._var.event.detected=[],this._var.event.notDetected=[],!0===this._options.debug&&this._log("clearEvent","The event list has been cleared")},t.prototype.on=function(e,t){return this._var.event[!0===e?"detected":"notDetected"].push(t),!0===this._options.debug&&this._log("on",'A type of event "'+(!0===e?"detected":"notDetected")+'" was added'),this},t.prototype.onDetected=function(e){return this.on(!0,e)},t.prototype.onNotDetected=function(e){return this.on(!1,e)},e.BlockAdBlock=t,void 0===e.blockAdBlock&&(e.blockAdBlock=new t({checkOnLoad:!0,resetOnEnd:!0}))}(window)},8552:(e,t,i)=>{var n=i(852)(i(5639),"DataView");e.exports=n},1989:(e,t,i)=>{var n=i(1789),s=i(401),o=i(7667),r=i(1327),a=i(1866);function d(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}d.prototype.clear=n,d.prototype.delete=s,d.prototype.get=o,d.prototype.has=r,d.prototype.set=a,e.exports=d},8407:(e,t,i)=>{var n=i(7040),s=i(4125),o=i(2117),r=i(7518),a=i(4705);function d(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}d.prototype.clear=n,d.prototype.delete=s,d.prototype.get=o,d.prototype.has=r,d.prototype.set=a,e.exports=d},7071:(e,t,i)=>{var n=i(852)(i(5639),"Map");e.exports=n},3369:(e,t,i)=>{var n=i(4785),s=i(1285),o=i(6e3),r=i(9916),a=i(5265);function d(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}d.prototype.clear=n,d.prototype.delete=s,d.prototype.get=o,d.prototype.has=r,d.prototype.set=a,e.exports=d},3818:(e,t,i)=>{var n=i(852)(i(5639),"Promise");e.exports=n},8525:(e,t,i)=>{var n=i(852)(i(5639),"Set");e.exports=n},8668:(e,t,i)=>{var n=i(3369),s=i(619),o=i(2385);function r(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new n;++t<i;)this.add(e[t])}r.prototype.add=r.prototype.push=s,r.prototype.has=o,e.exports=r},6384:(e,t,i)=>{var n=i(8407),s=i(7465),o=i(3779),r=i(7599),a=i(4758),d=i(4309);function l(e){var t=this.__data__=new n(e);this.size=t.size}l.prototype.clear=s,l.prototype.delete=o,l.prototype.get=r,l.prototype.has=a,l.prototype.set=d,e.exports=l},2705:(e,t,i)=>{var n=i(5639).Symbol;e.exports=n},1149:(e,t,i)=>{var n=i(5639).Uint8Array;e.exports=n},577:(e,t,i)=>{var n=i(852)(i(5639),"WeakMap");e.exports=n},4963:e=>{e.exports=function(e,t){for(var i=-1,n=null==e?0:e.length,s=0,o=[];++i<n;){var r=e[i];t(r,i,e)&&(o[s++]=r)}return o}},4636:(e,t,i)=>{var n=i(2545),s=i(5694),o=i(1469),r=i(4144),a=i(5776),d=i(6719),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var i=o(e),c=!i&&s(e),u=!i&&!c&&r(e),p=!i&&!c&&!u&&d(e),h=i||c||u||p,g=h?n(e.length,String):[],m=g.length;for(var f in e)!t&&!l.call(e,f)||h&&("length"==f||u&&("offset"==f||"parent"==f)||p&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||a(f,m))||g.push(f);return g}},2488:e=>{e.exports=function(e,t){for(var i=-1,n=t.length,s=e.length;++i<n;)e[s+i]=t[i];return e}},2908:e=>{e.exports=function(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}},8470:(e,t,i)=>{var n=i(7813);e.exports=function(e,t){for(var i=e.length;i--;)if(n(e[i][0],t))return i;return-1}},8866:(e,t,i)=>{var n=i(2488),s=i(1469);e.exports=function(e,t,i){var o=t(e);return s(e)?o:n(o,i(e))}},4239:(e,t,i)=>{var n=i(2705),s=i(9607),o=i(2333),r=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":r&&r in Object(e)?s(e):o(e)}},9454:(e,t,i)=>{var n=i(4239),s=i(7005);e.exports=function(e){return s(e)&&"[object Arguments]"==n(e)}},939:(e,t,i)=>{var n=i(2492),s=i(7005);e.exports=function e(t,i,o,r,a){return t===i||(null==t||null==i||!s(t)&&!s(i)?t!=t&&i!=i:n(t,i,o,r,e,a))}},2492:(e,t,i)=>{var n=i(6384),s=i(7114),o=i(8351),r=i(6096),a=i(4160),d=i(1469),l=i(4144),c=i(6719),u="[object Arguments]",p="[object Array]",h="[object Object]",g=Object.prototype.hasOwnProperty;e.exports=function(e,t,i,m,f,v){var b=d(e),y=d(t),_=b?p:a(e),S=y?p:a(t),w=(_=_==u?h:_)==h,E=(S=S==u?h:S)==h,I=_==S;if(I&&l(e)){if(!l(t))return!1;b=!0,w=!1}if(I&&!w)return v||(v=new n),b||c(e)?s(e,t,i,m,f,v):o(e,t,_,i,m,f,v);if(!(1&i)){var T=w&&g.call(e,"__wrapped__"),A=E&&g.call(t,"__wrapped__");if(T||A){var C=T?e.value():e,O=A?t.value():t;return v||(v=new n),f(C,O,i,m,v)}}return!!I&&(v||(v=new n),r(e,t,i,m,f,v))}},2958:(e,t,i)=>{var n=i(6384),s=i(939);e.exports=function(e,t,i,o){var r=i.length,a=r,d=!o;if(null==e)return!a;for(e=Object(e);r--;){var l=i[r];if(d&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++r<a;){var c=(l=i[r])[0],u=e[c],p=l[1];if(d&&l[2]){if(void 0===u&&!(c in e))return!1}else{var h=new n;if(o)var g=o(u,p,c,e,t,h);if(!(void 0===g?s(p,u,3,o,h):g))return!1}}return!0}},8458:(e,t,i)=>{var n=i(3560),s=i(5346),o=i(3218),r=i(346),a=/^\[object .+?Constructor\]$/,d=Function.prototype,l=Object.prototype,c=d.toString,u=l.hasOwnProperty,p=RegExp("^"+c.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||s(e))&&(n(e)?p:a).test(r(e))}},8749:(e,t,i)=>{var n=i(4239),s=i(1780),o=i(7005),r={};r["[object Float32Array]"]=r["[object Float64Array]"]=r["[object Int8Array]"]=r["[object Int16Array]"]=r["[object Int32Array]"]=r["[object Uint8Array]"]=r["[object Uint8ClampedArray]"]=r["[object Uint16Array]"]=r["[object Uint32Array]"]=!0,r["[object Arguments]"]=r["[object Array]"]=r["[object ArrayBuffer]"]=r["[object Boolean]"]=r["[object DataView]"]=r["[object Date]"]=r["[object Error]"]=r["[object Function]"]=r["[object Map]"]=r["[object Number]"]=r["[object Object]"]=r["[object RegExp]"]=r["[object Set]"]=r["[object String]"]=r["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&s(e.length)&&!!r[n(e)]}},280:(e,t,i)=>{var n=i(5726),s=i(6916),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return s(e);var t=[];for(var i in Object(e))o.call(e,i)&&"constructor"!=i&&t.push(i);return t}},2545:e=>{e.exports=function(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}},1717:e=>{e.exports=function(e){return function(t){return e(t)}}},4757:e=>{e.exports=function(e,t){return e.has(t)}},4429:(e,t,i)=>{var n=i(5639)["__core-js_shared__"];e.exports=n},7114:(e,t,i)=>{var n=i(8668),s=i(2908),o=i(4757);e.exports=function(e,t,i,r,a,d){var l=1&i,c=e.length,u=t.length;if(c!=u&&!(l&&u>c))return!1;var p=d.get(e),h=d.get(t);if(p&&h)return p==t&&h==e;var g=-1,m=!0,f=2&i?new n:void 0;for(d.set(e,t),d.set(t,e);++g<c;){var v=e[g],b=t[g];if(r)var y=l?r(b,v,g,t,e,d):r(v,b,g,e,t,d);if(void 0!==y){if(y)continue;m=!1;break}if(f){if(!s(t,(function(e,t){if(!o(f,t)&&(v===e||a(v,e,i,r,d)))return f.push(t)}))){m=!1;break}}else if(v!==b&&!a(v,b,i,r,d)){m=!1;break}}return d.delete(e),d.delete(t),m}},8351:(e,t,i)=>{var n=i(2705),s=i(1149),o=i(7813),r=i(7114),a=i(8776),d=i(1814),l=n?n.prototype:void 0,c=l?l.valueOf:void 0;e.exports=function(e,t,i,n,l,u,p){switch(i){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!u(new s(e),new s(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var h=a;case"[object Set]":var g=1&n;if(h||(h=d),e.size!=t.size&&!g)return!1;var m=p.get(e);if(m)return m==t;n|=2,p.set(e,t);var f=r(h(e),h(t),n,l,u,p);return p.delete(e),f;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},6096:(e,t,i)=>{var n=i(8234),s=Object.prototype.hasOwnProperty;e.exports=function(e,t,i,o,r,a){var d=1&i,l=n(e),c=l.length;if(c!=n(t).length&&!d)return!1;for(var u=c;u--;){var p=l[u];if(!(d?p in t:s.call(t,p)))return!1}var h=a.get(e),g=a.get(t);if(h&&g)return h==t&&g==e;var m=!0;a.set(e,t),a.set(t,e);for(var f=d;++u<c;){var v=e[p=l[u]],b=t[p];if(o)var y=d?o(b,v,p,t,e,a):o(v,b,p,e,t,a);if(!(void 0===y?v===b||r(v,b,i,o,a):y)){m=!1;break}f||(f="constructor"==p)}if(m&&!f){var _=e.constructor,S=t.constructor;_==S||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof S&&S instanceof S||(m=!1)}return a.delete(e),a.delete(t),m}},1957:(e,t,i)=>{var n="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g;e.exports=n},8234:(e,t,i)=>{var n=i(8866),s=i(9551),o=i(3674);e.exports=function(e){return n(e,o,s)}},5050:(e,t,i)=>{var n=i(7019);e.exports=function(e,t){var i=e.__data__;return n(t)?i["string"==typeof t?"string":"hash"]:i.map}},1499:(e,t,i)=>{var n=i(9162),s=i(3674);e.exports=function(e){for(var t=s(e),i=t.length;i--;){var o=t[i],r=e[o];t[i]=[o,r,n(r)]}return t}},852:(e,t,i)=>{var n=i(8458),s=i(7801);e.exports=function(e,t){var i=s(e,t);return n(i)?i:void 0}},9607:(e,t,i)=>{var n=i(2705),s=Object.prototype,o=s.hasOwnProperty,r=s.toString,a=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,a),i=e[a];try{e[a]=void 0;var n=!0}catch(e){}var s=r.call(e);return n&&(t?e[a]=i:delete e[a]),s}},9551:(e,t,i)=>{var n=i(4963),s=i(479),o=Object.prototype.propertyIsEnumerable,r=Object.getOwnPropertySymbols,a=r?function(e){return null==e?[]:(e=Object(e),n(r(e),(function(t){return o.call(e,t)})))}:s;e.exports=a},4160:(e,t,i)=>{var n=i(8552),s=i(7071),o=i(3818),r=i(8525),a=i(577),d=i(4239),l=i(346),c="[object Map]",u="[object Promise]",p="[object Set]",h="[object WeakMap]",g="[object DataView]",m=l(n),f=l(s),v=l(o),b=l(r),y=l(a),_=d;(n&&_(new n(new ArrayBuffer(1)))!=g||s&&_(new s)!=c||o&&_(o.resolve())!=u||r&&_(new r)!=p||a&&_(new a)!=h)&&(_=function(e){var t=d(e),i="[object Object]"==t?e.constructor:void 0,n=i?l(i):"";if(n)switch(n){case m:return g;case f:return c;case v:return u;case b:return p;case y:return h}return t}),e.exports=_},7801:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},1789:(e,t,i)=>{var n=i(4536);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},401:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},7667:(e,t,i)=>{var n=i(4536),s=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i}return s.call(t,e)?t[e]:void 0}},1327:(e,t,i)=>{var n=i(4536),s=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:s.call(t,e)}},1866:(e,t,i)=>{var n=i(4536);e.exports=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},5776:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,i){var n=typeof e;return!!(i=null==i?9007199254740991:i)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<i}},7019:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5346:(e,t,i)=>{var n,s=i(4429),o=(n=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!o&&o in e}},5726:e=>{var t=Object.prototype;e.exports=function(e){var i=e&&e.constructor;return e===("function"==typeof i&&i.prototype||t)}},9162:(e,t,i)=>{var n=i(3218);e.exports=function(e){return e==e&&!n(e)}},7040:e=>{e.exports=function(){this.__data__=[],this.size=0}},4125:(e,t,i)=>{var n=i(8470),s=Array.prototype.splice;e.exports=function(e){var t=this.__data__,i=n(t,e);return!(i<0||(i==t.length-1?t.pop():s.call(t,i,1),--this.size,0))}},2117:(e,t,i)=>{var n=i(8470);e.exports=function(e){var t=this.__data__,i=n(t,e);return i<0?void 0:t[i][1]}},7518:(e,t,i)=>{var n=i(8470);e.exports=function(e){return n(this.__data__,e)>-1}},4705:(e,t,i)=>{var n=i(8470);e.exports=function(e,t){var i=this.__data__,s=n(i,e);return s<0?(++this.size,i.push([e,t])):i[s][1]=t,this}},4785:(e,t,i)=>{var n=i(1989),s=i(8407),o=i(7071);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(o||s),string:new n}}},1285:(e,t,i)=>{var n=i(5050);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},6e3:(e,t,i)=>{var n=i(5050);e.exports=function(e){return n(this,e).get(e)}},9916:(e,t,i)=>{var n=i(5050);e.exports=function(e){return n(this,e).has(e)}},5265:(e,t,i)=>{var n=i(5050);e.exports=function(e,t){var i=n(this,e),s=i.size;return i.set(e,t),this.size+=i.size==s?0:1,this}},8776:e=>{e.exports=function(e){var t=-1,i=Array(e.size);return e.forEach((function(e,n){i[++t]=[n,e]})),i}},4536:(e,t,i)=>{var n=i(852)(Object,"create");e.exports=n},6916:(e,t,i)=>{var n=i(5569)(Object.keys,Object);e.exports=n},1167:(e,t,i)=>{e=i.nmd(e);var n=i(1957),s=t&&!t.nodeType&&t,o=s&&e&&!e.nodeType&&e,r=o&&o.exports===s&&n.process,a=function(){try{return o&&o.require&&o.require("util").types||r&&r.binding&&r.binding("util")}catch(e){}}();e.exports=a},2333:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5569:e=>{e.exports=function(e,t){return function(i){return e(t(i))}}},5639:(e,t,i)=>{var n=i(1957),s="object"==typeof self&&self&&self.Object===Object&&self,o=n||s||Function("return this")();e.exports=o},619:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},2385:e=>{e.exports=function(e){return this.__data__.has(e)}},1814:e=>{e.exports=function(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=e})),i}},7465:(e,t,i)=>{var n=i(8407);e.exports=function(){this.__data__=new n,this.size=0}},3779:e=>{e.exports=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}},7599:e=>{e.exports=function(e){return this.__data__.get(e)}},4758:e=>{e.exports=function(e){return this.__data__.has(e)}},4309:(e,t,i)=>{var n=i(8407),s=i(7071),o=i(3369);e.exports=function(e,t){var i=this.__data__;if(i instanceof n){var r=i.__data__;if(!s||r.length<199)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new o(r)}return i.set(e,t),this.size=i.size,this}},346:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},7813:e=>{e.exports=function(e,t){return e===t||e!=e&&t!=t}},5694:(e,t,i)=>{var n=i(9454),s=i(7005),o=Object.prototype,r=o.hasOwnProperty,a=o.propertyIsEnumerable,d=n(function(){return arguments}())?n:function(e){return s(e)&&r.call(e,"callee")&&!a.call(e,"callee")};e.exports=d},1469:e=>{var t=Array.isArray;e.exports=t},8612:(e,t,i)=>{var n=i(3560),s=i(1780);e.exports=function(e){return null!=e&&s(e.length)&&!n(e)}},4144:(e,t,i)=>{e=i.nmd(e);var n=i(5639),s=i(5062),o=t&&!t.nodeType&&t,r=o&&e&&!e.nodeType&&e,a=r&&r.exports===o?n.Buffer:void 0,d=(a?a.isBuffer:void 0)||s;e.exports=d},3560:(e,t,i)=>{var n=i(4239),s=i(3218);e.exports=function(e){if(!s(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1780:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},6379:(e,t,i)=>{var n=i(2958),s=i(1499);e.exports=function(e,t){return e===t||n(e,t,s(t))}},3218:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},7005:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},6719:(e,t,i)=>{var n=i(8749),s=i(1717),o=i(1167),r=o&&o.isTypedArray,a=r?s(r):n;e.exports=a},3674:(e,t,i)=>{var n=i(4636),s=i(280),o=i(8612);e.exports=function(e){return o(e)?n(e):s(e)}},479:e=>{e.exports=function(){return[]}},5062:e=>{e.exports=function(){return!1}},4155:e=>{var t,i,n=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(e){if(t===setTimeout)return setTimeout(e,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(i){try{return t.call(null,e,0)}catch(i){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch(e){t=s}try{i="function"==typeof clearTimeout?clearTimeout:o}catch(e){i=o}}();var a,d=[],l=!1,c=-1;function u(){l&&a&&(l=!1,a.length?d=a.concat(d):c=-1,d.length&&p())}function p(){if(!l){var e=r(u);l=!0;for(var t=d.length;t;){for(a=d,d=[];++c<t;)a&&a[c].run();c=-1,t=d.length}a=null,l=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===o||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];d.push(new h(e,t)),1!==d.length||l||r(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},8660:(e,t,i)=>{var n,s=i(4155);!function(e){!function(t){var n="object"==typeof i.g?i.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),o=r(e);function r(e,t){return function(i,n){"function"!=typeof e[i]&&Object.defineProperty(e,i,{configurable:!0,writable:!0,value:n}),t&&t(i,n)}}void 0===n.Reflect?n.Reflect=e:o=r(n.Reflect,o),function(e){var t=Object.prototype.hasOwnProperty,i="function"==typeof Symbol,n=i&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",o=i&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",r="function"==typeof Object.create,a={__proto__:[]}instanceof Array,d=!r&&!a,l={create:r?function(){return R(Object.create(null))}:a?function(){return R({__proto__:null})}:function(){return R({})},has:d?function(e,i){return t.call(e,i)}:function(e,t){return t in e},get:d?function(e,i){return t.call(e,i)?e[i]:void 0}:function(e,t){return e[t]}},c=Object.getPrototypeOf(Function),u="object"==typeof s&&s.env&&"true"===s.env.REFLECT_METADATA_USE_MAP_POLYFILL,p=u||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],i=function(){function e(e,t,i){this._index=0,this._keys=e,this._values=t,this._selector=i}return e.prototype["@@iterator"]=function(){return this},e.prototype[o]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var i=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:i,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var i=this._find(e,!0);return this._values[i]=t,this},t.prototype.delete=function(t){var i=this._find(t,!1);if(i>=0){for(var n=this._keys.length,s=i+1;s<n;s++)this._keys[s-1]=this._keys[s],this._values[s-1]=this._values[s];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new i(this._keys,this._values,n)},t.prototype.values=function(){return new i(this._keys,this._values,s)},t.prototype.entries=function(){return new i(this._keys,this._values,r)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[o]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function n(e,t){return e}function s(e,t){return t}function r(e,t){return[e,t]}}():Map,h=u||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new p}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[o]=function(){return this.keys()},e}():Set,g=new(u||"function"!=typeof WeakMap?function(){var e=l.create(),i=n();return function(){function e(){this._key=n()}return e.prototype.has=function(e){var t=s(e,!1);return void 0!==t&&l.has(t,this._key)},e.prototype.get=function(e){var t=s(e,!1);return void 0!==t?l.get(t,this._key):void 0},e.prototype.set=function(e,t){return s(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=s(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=n()},e}();function n(){var t;do{t="@@WeakMap@@"+r()}while(l.has(e,t));return e[t]=!0,t}function s(e,n){if(!t.call(e,i)){if(!n)return;Object.defineProperty(e,i,{value:l.create()})}return e[i]}function o(e,t){for(var i=0;i<t;++i)e[i]=255*Math.random()|0;return e}function r(){var e,t=(e=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):o(new Uint8Array(e),e):o(new Array(e),e));t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var i="",n=0;n<16;++n){var s=t[n];4!==n&&6!==n&&8!==n||(i+="-"),s<16&&(i+="0"),i+=s.toString(16).toLowerCase()}return i}}():WeakMap);function m(e,t,i){var n=g.get(e);if(I(n)){if(!i)return;n=new p,g.set(e,n)}var s=n.get(t);if(I(s)){if(!i)return;s=new p,n.set(t,s)}return s}function f(e,t,i){if(v(e,t,i))return!0;var n=x(t);return!T(n)&&f(e,n,i)}function v(e,t,i){var n=m(t,i,!1);return!I(n)&&!!n.has(e)}function b(e,t,i){if(v(e,t,i))return y(e,t,i);var n=x(t);return T(n)?void 0:b(e,n,i)}function y(e,t,i){var n=m(t,i,!1);if(!I(n))return n.get(e)}function _(e,t,i,n){m(i,n,!0).set(e,t)}function S(e,t){var i=w(e,t),n=x(e);if(null===n)return i;var s=S(n,t);if(s.length<=0)return i;if(i.length<=0)return s;for(var o=new h,r=[],a=0,d=i;a<d.length;a++){var l=d[a];o.has(l)||(o.add(l),r.push(l))}for(var c=0,u=s;c<u.length;c++)l=u[c],o.has(l)||(o.add(l),r.push(l));return r}function w(e,t){var i=[],n=m(e,t,!1);if(I(n))return i;for(var s=function(e){var t=D(e,o);if(!P(t))throw new TypeError;var i=t.call(e);if(!A(i))throw new TypeError;return i}(n.keys()),r=0;;){var a=L(s);if(!a)return i.length=r,i;var d=a.value;try{i[r]=d}catch(e){try{z(s)}finally{throw e}}r++}}function E(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function I(e){return void 0===e}function T(e){return null===e}function A(e){return"object"==typeof e?null!==e:"function"==typeof e}function C(e,t){switch(E(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var i=3===t?"string":5===t?"number":"default",s=D(e,n);if(void 0!==s){var o=s.call(e,i);if(A(o))throw new TypeError;return o}return function(e,t){if("string"===t){var i=e.toString;if(P(i)&&!A(s=i.call(e)))return s;if(P(n=e.valueOf)&&!A(s=n.call(e)))return s}else{var n;if(P(n=e.valueOf)&&!A(s=n.call(e)))return s;var s,o=e.toString;if(P(o)&&!A(s=o.call(e)))return s}throw new TypeError}(e,"default"===i?"number":i)}function O(e){var t=C(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function N(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function P(e){return"function"==typeof e}function k(e){return"function"==typeof e}function D(e,t){var i=e[t];if(null!=i){if(!P(i))throw new TypeError;return i}}function L(e){var t=e.next();return!t.done&&t}function z(e){var t=e.return;t&&t.call(e)}function x(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===c)return t;if(t!==c)return t;var i=e.prototype,n=i&&Object.getPrototypeOf(i);if(null==n||n===Object.prototype)return t;var s=n.constructor;return"function"!=typeof s||s===e?t:s}function R(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,i,n){if(I(i)){if(!N(e))throw new TypeError;if(!k(t))throw new TypeError;return function(e,t){for(var i=e.length-1;i>=0;--i){var n=(0,e[i])(t);if(!I(n)&&!T(n)){if(!k(n))throw new TypeError;t=n}}return t}(e,t)}if(!N(e))throw new TypeError;if(!A(t))throw new TypeError;if(!A(n)&&!I(n)&&!T(n))throw new TypeError;return T(n)&&(n=void 0),function(e,t,i,n){for(var s=e.length-1;s>=0;--s){var o=(0,e[s])(t,i,n);if(!I(o)&&!T(o)){if(!A(o))throw new TypeError;n=o}}return n}(e,t,i=O(i),n)})),e("metadata",(function(e,t){return function(i,n){if(!A(i))throw new TypeError;if(!I(n)&&!function(e){switch(E(e)){case 3:case 4:return!0;default:return!1}}(n))throw new TypeError;_(e,t,i,n)}})),e("defineMetadata",(function(e,t,i,n){if(!A(i))throw new TypeError;return I(n)||(n=O(n)),_(e,t,i,n)})),e("hasMetadata",(function(e,t,i){if(!A(t))throw new TypeError;return I(i)||(i=O(i)),f(e,t,i)})),e("hasOwnMetadata",(function(e,t,i){if(!A(t))throw new TypeError;return I(i)||(i=O(i)),v(e,t,i)})),e("getMetadata",(function(e,t,i){if(!A(t))throw new TypeError;return I(i)||(i=O(i)),b(e,t,i)})),e("getOwnMetadata",(function(e,t,i){if(!A(t))throw new TypeError;return I(i)||(i=O(i)),y(e,t,i)})),e("getMetadataKeys",(function(e,t){if(!A(e))throw new TypeError;return I(t)||(t=O(t)),S(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!A(e))throw new TypeError;return I(t)||(t=O(t)),w(e,t)})),e("deleteMetadata",(function(e,t,i){if(!A(t))throw new TypeError;I(i)||(i=O(i));var n=m(t,i,!1);if(I(n))return!1;if(!n.delete(e))return!1;if(n.size>0)return!0;var s=g.get(t);return s.delete(i),s.size>0||g.delete(t),!0}))}(o)}()}(n||(n={}))}},n={};function s(e){var t=n[e];if(void 0!==t)return t.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return i[e](o,o.exports,s),o.loaded=!0,o.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,s.t=function(i,n){if(1&n&&(i=this(i)),8&n)return i;if("object"==typeof i&&i){if(4&n&&i.__esModule)return i;if(16&n&&"function"==typeof i.then)return i}var o=Object.create(null);s.r(o);var r={};e=e||[null,t({}),t([]),t(t)];for(var a=2&n&&i;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>r[e]=()=>i[e]));return r.default=()=>i,s.d(o,r),o},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";var e={};s.r(e),s.d(e,{AD_LABEL_CLASS:()=>zn,Document:()=>Hi,FetchTimeout:()=>us,IframeBuilder:()=>Vn,LazyQueue:()=>ei,WaitFor:()=>Pi,buildPromisedTimeout:()=>so,buildTaglessRequestUrl:()=>co,buildVastUrl:()=>lo,client:()=>Ai,createExtendedPromise:()=>gn,createWithTimeout:()=>hn,decorate:()=>bn,defer:()=>cn,generateUniqueId:()=>Li,geoService:()=>Xt,getElementOffset:()=>Ri,getGlobalValue:()=>gs,getHeight:()=>xi,getLeftOffset:()=>Vi,getServicesBaseURL:()=>ds,getTimeDelta:()=>H,getTimeDeltaFixed:()=>W,getTimeOrigin:()=>G,getTopOffset:()=>ji,getTranslation:()=>io,getViewportHeight:()=>Mi,getViewportWidth:()=>Ui,getWidth:()=>zi,isCoppaSubject:()=>vn,isIframe:()=>Fi,isInTheSameViewport:()=>$i,isInViewport:()=>Bi,logger:()=>q,makeLazyQueue:()=>Zt,once:()=>un,outboundTrafficRestrict:()=>Wn,pageInIframe:()=>Gi,queryString:()=>L,sampler:()=>oo,scriptLoader:()=>Oi,stringBuilder:()=>Ln,targeting:()=>po,timeoutReject:()=>pn,translateLabels:()=>no,tryProperty:()=>go,uuid:()=>So,viewportObserver:()=>wo,wait:()=>ln,warner:()=>K,whichProperty:()=>ho});var t={};s.r(t),s.d(t,{BFAA_UNSTICK_DELAY:()=>ta,CSS_TIMING_EASE_IN_CUBIC:()=>Yr,DEFAULT_UAP_ID:()=>Jr,DEFAULT_UAP_TYPE:()=>Qr,FAN_TAKEOVER_TYPES:()=>Zr,SLIDE_OUT_TIME:()=>Xr,SLOT_FORCE_UNSTICK:()=>na,SLOT_STICKED_STATE:()=>oa,SLOT_STICKINESS_DISABLED:()=>da,SLOT_STICKY_READY_STATE:()=>ra,SLOT_STICKY_STATE_SKIPPED:()=>aa,SLOT_UNSTICKED_STATE:()=>sa,SLOT_VIDEO_DONE:()=>la,SPECIAL_VIDEO_AD_UNIT:()=>ea,TLB_UNSTICK_DELAY:()=>ia,UAP_ADDITIONAL_SIZES:()=>ca});var i={};s.r(i);var n=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},e(t,i)};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o="Singleton",r=function(){function e(){}return e.prototype.reset=function(e){},e}(),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.resolve=function(e,t){return e()},t}(r),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.instances=new Map,t}return n(t,e),t.prototype.resolve=function(e,t){var i=this.instances.get(t);return i||(i=e(),this.instances.set(t,i)),i},t.prototype.reset=function(e){this.instances.delete(e)},t}(r),l="wikia-ioc:paramtypes",c="wikia-ioc:taggedtypes",u="wikia-ioc:autobind",p="wikia-ioc:scope";function h(e){return void 0===e&&(e={}),function(t){if(Reflect.hasOwnMetadata(l,t))throw new Error("Cannot apply @Injectable decorator multiple times.");var i=Reflect.getMetadata("design:paramtypes",t)||[];return Reflect.defineMetadata(l,i,t),"boolean"==typeof e.autobind&&Reflect.defineMetadata(u,e.autobind,t),"string"==typeof e.scope&&Reflect.defineMetadata(p,e.scope,t),t}}function g(e){return function(t,i,n){if(i||"number"!=typeof n)throw new Error("Cannot apply @Inject decorator to a property.");var s=Reflect.getMetadata(c,t)||{};if(s[n.toString()])throw new Error("Cannot apply @Inject decorator multiple times on the same parameter.");return s[n.toString()]=e,Reflect.defineMetadata(c,s,t),t}}function m(e,t){return"value"in t?e.value(t.value):"to"in t?e.to(t.to):"provider"in t?e.provider(t.provider):e}function f(e){var t=typeof e;return v(e)||"symbol"===t||"string"===t}function v(e){return"function"==typeof e}s(8660);var b=function(){function e(e,t,i,n){var s,o;if(this.sourceType=e,this.container=t,this.scopes=i,this.paramTypes=[],!v(this.sourceType))return this.scope(n.defaultScope);this.scope(null!==(s=Reflect.getMetadata(p,this.sourceType))&&void 0!==s?s:n.defaultScope),(null!==(o=Reflect.getMetadata(u,this.sourceType))&&void 0!==o?o:n.defaultAutobind)&&this.to(this.sourceType)}return e.prototype.to=function(e){return function(e){if(!v(e))throw new TypeError("Invalid type requested to IoC container. Type must be Class.")}(e),this.targetType=e,this.paramTypes=this.getMetadataParamTypes(),this.sourceType===this.targetType?this.provideSourceType(e):this.provideTargetType(e),this},e.prototype.getMetadataParamTypes=function(){var e=Reflect.getMetadata(l,this.targetType)||[],t=Reflect.getMetadata(c,this.targetType)||{};return e.map((function(e,i){return t[i]||e}))},e.prototype.provideSourceType=function(e){var t=this;this.provider((function(){var i=t.getParameters();return new(e.bind.apply(e,function(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var n=Array(e),s=0;for(t=0;t<i;t++)for(var o=arguments[t],r=0,a=o.length;r<a;r++,s++)n[s]=o[r];return n}([void 0],i)))}))},e.prototype.getParameters=function(){var e=this;return this.paramTypes.map((function(t){return e.container.get(t)}))},e.prototype.provideTargetType=function(e){var t=this;this.provider((function(){return t.container.get(e)}))},e.prototype.value=function(e){return this.provider((function(){return e}))},e.prototype.provider=function(e){return this._provider=e,this._scope.reset(this.sourceType),this},e.prototype.scope=function(e){return this._scope=this.scopes[e],this._scope.reset(this.sourceType),this},e.prototype.withParams=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this.paramTypes=e,this},e.prototype.getInstance=function(){var e=this;if(!this._provider)throw new Error(this.sourceType.toString()+" is not bound to anything.");return this._scope.resolve((function(){return e._provider(e.container)}),this.sourceType)},e.prototype.getType=function(){return this.targetType},e}(),y=function(){return y=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},y.apply(this,arguments)},_=function(){function e(t){void 0===t&&(t={}),this.bindings=new Map,this.scopes={Singleton:new d,Transient:new a},this.containerOptions=y({defaultScope:o,defaultAutobind:!0},t),this.bind(e).scope(o).value(this)}return e.prototype.bind=function(e){var t=f(e)?e:null==e?void 0:e.bind;return this.bindings.has(t)?this.bindings.get(t):v(e)?m(this.ensureBinding(t),{bind:e,to:e}):f(e)?this.ensureBinding(t):m(this.ensureBinding(t),e)},e.prototype.unbind=function(e){var t=f(e)?e:null==e?void 0:e.bind;this.bindings.delete(t)},e.prototype.get=function(e){return this.ensureBinding(e).getInstance()},e.prototype.getType=function(e){return this.ensureBinding(e).getType()},e.prototype.ensureBinding=function(e){!function(e){if(!f(e))throw new TypeError("Invalid type requested to IoC container. TypeKey must be Class, symbol or string.")}(e);var t=this.bindings.get(e);return t||(t=new b(e,this,this.scopes,this.containerOptions),this.bindings.set(e,t)),t},e}(),S=function(e,t){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},S(e,t)};function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}S(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}function E(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r}function I(e,t){return function(i,n){t(i,n,e)}}function T(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function A(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{d(n.next(e))}catch(e){o(e)}}function a(e){try{d(n.throw(e))}catch(e){o(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((n=n.apply(e,t||[])).next())}))}function C(e,t){var i,n,s,o,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(d){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(r=0)),r;)try{if(i=1,n&&(s=2&a[0]?n.return:a[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,a[1])).done)return s;switch(n=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((s=(s=r.trys).length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){r.label=a[1];break}if(6===a[0]&&r.label<s[1]){r.label=s[1],s=a;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(a);break}s[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],n=0}finally{i=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,d])}}}function O(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function N(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var n,s,o=i.call(e),r=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)r.push(n.value)}catch(e){s={error:e}}finally{try{n&&!n.done&&(i=o.return)&&i.call(o)}finally{if(s)throw s.error}}return r}function P(e,t,i){if(i||2===arguments.length)for(var n,s=0,o=t.length;s<o;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))}function k(e){return this instanceof k?(this.v=e,this):new k(e)}function D(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,s=i.apply(e,t||[]),o=[];return n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n;function r(e){s[e]&&(n[e]=function(t){return new Promise((function(i,n){o.push([e,t,i,n])>1||a(e,t)}))})}function a(e,t){try{(i=s[e](t)).value instanceof k?Promise.resolve(i.value.v).then(d,l):c(o[0][2],i)}catch(e){c(o[0][3],e)}var i}function d(e){a("next",e)}function l(e){a("throw",e)}function c(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}Object.create,Object.create;const L=new class{getValues(e){const t=(e||window.location.search.substring(1)).split("&"),i={};return t.forEach((e=>{const[t,n]=e.split("=");n&&(i[t]=decodeURIComponent(n.replace(/\+/g," ")))})),i}getURLSearchParams(e){const t=e||window.location.search.substring(1);return new URLSearchParams(t)}get(e){return this.getValues()[e]}isUrlParamSet(e){return!!parseInt(this.get(e),10)}parseValue(e){if("true"===e||"false"===e)return"true"===e;const t=parseInt(e,10);if(e===`${t}`)return t;try{return JSON.parse(e)}catch(t){return e||null}}stringify(e){const t=new URLSearchParams(e);return t.sort(),t.toString()}};function z(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)e[n]=i[n]}return e}const x=function e(t,i){function n(e,n,s){if("undefined"!=typeof document){"number"==typeof(s=z({},i,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var o="";for(var r in s)s[r]&&(o+="; "+r,!0!==s[r]&&(o+="="+s[r].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+o}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var i=document.cookie?document.cookie.split("; "):[],n={},s=0;s<i.length;s++){var o=i[s].split("="),r=o.slice(1).join("=");try{var a=decodeURIComponent(o[0]);if(n[a]=t.read(r,a),e===a)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",z({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,z({},this.attributes,t))},withConverter:function(t){return e(z({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});class R{constructor(){this.cacheMaxAge=18e5,this.keysSeen=new Set}getItem(e){return x.get(e)}setItem(e,t,i){const n=i||this.cacheMaxAge,s={expires:new Date((new Date).getTime()+n),path:"/",domain:this.getCookieDomain(),overwrite:!0};this.keysSeen.add(e),x.set(e,t,s)}removeItem(e){this.keysSeen.delete(e),x.remove(e,{path:"/",domain:this.getCookieDomain()})}clear(){this.keysSeen.forEach((e=>{this.removeItem(e)}))}getCookieDomain(){const e=window.location.hostname.split(".");return e.length>1?`.${e[e.length-2]}.${e[e.length-1]}`:void 0}}const j=new R;function V(){return L.get("adengine_debug")||j.getItem("adengine_debug")}function M(e){null!==e?j.setItem("adengine_debug",e||"1"):j.removeItem("adengine_debug")}const U={isDebugMode:function(){return Boolean(V())},getDebugGroup:V,setDebugMode:M};window.ads=window.ads||{},window.ads.debug=M;const B=U.getDebugGroup()||"",$=B.split(",");""!==B&&window.console.info("AdEngine debug mode - groups:","1"===B?"all":$);const F=Date.now();function G(){var e,t;return null!==(t=null===(e=window.performance)||void 0===e?void 0:e.timeOrigin)&&void 0!==t?t:F}function H(){return Date.now()-G()}function W(){return(H()/1e3).toFixed(4)}function q(e,...t){""!==B&&("1"!==B&&-1===$.indexOf(e)||window.console.info(`${W()}s\t\t [AE] ${e}`,t))}function K(e,...t){""!==B&&("1"!==B&&-1===$.indexOf(e)||window.console.warn(`${W()}s\t\t [AE] ${e}`,t))}const Y={adUnitId:"",bidders:{enabled:!1,timeout:2e3,a9:{enabled:!1,videoEnabled:!1,amazonId:"3115",bidsRefreshing:{slots:[]}},prebid:{enabled:!1,bidsRefreshing:{slots:[]}}},events:{},listeners:{porvata:[]},options:{customAdLoader:{globalMethodName:"loadCustomAd"},maxDelayTimeout:2e3,optOutSale:!1,trackingOptIn:!1,isSubjectToCcpa:!1},services:{},slots:{},src:["gpt"],state:{adStack:[],isMobile:!1},targeting:{},vast:{size:[640,480],adUnitId:""}},X={};function J(e,t,i){let n="";t.forEach((t=>{n+=(""===n?"":".")+t,function(e,t,i){X[e]&&X[e].forEach((e=>{e(t,i)}))}(n,e,i)}))}function Q(e,t,i=!1){const n=e.split("."),s=n.length;let o=Y,r=null;for(let e=0;e<s;e+=1)r=n[e],e<s-1&&(o[r]=o[r]||{},o=o[r]);return i?(delete o[r],J(e,n,null),null):(void 0!==t&&(o[r]=t,J(e,n,t)),o[r])}const Z=new class{constructor(){window.ads=window.ads||{},window.ads.adContext=U.isDebugMode()?Y:{}}extend(e){Object.assign(Y,e)}set(e,t){Q(e,t)}get(e){return Q(e)}remove(e){Q(e,null,!0)}push(e,t){const i=Q(e);i&&i.push(t)}onChange(e,t){X[e]=X[e]||[],X[e].push(t)}removeListeners(e){Object.keys(X).forEach((t=>{t!==e&&0!==t.indexOf(`${e}.`)||delete X[t]}))}};var ee=function(){return ee=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},ee.apply(this,arguments)},te={channelId:"default",host:window,coordinatorHost:window.top},ie={connect:"connect",connected:"connected"},ne="@wikia/post-quecast";function se(e){return e.channelId&&e.libId===ne&&e.action&&function(e){return"string"==typeof e.type&&"number"==typeof e.timestamp}(e.action)}function oe(e){return!e.data.private}function re(e,t){return e.data.channelId===t}function ae(e){return e.data.action}var de=function(){function e(){}return e.make=function(e){return function(e){var t;return e.host===e.coordinatorHost&&!!(null===(t=e.coordinatorHost[ne])||void 0===t?void 0:t.callbackConnector)}(e)?e.coordinatorHost[ne].callbackConnector:new ce({senderHost:e.coordinatorHost,listenerHost:e.host})},e}(),le=function(){function e(e){this.coordinatorHost=e,this.callbacks=[]}return e.prototype.dispatch=function(e){var t=this;if(!se(e))throw new Error("Incorrect object type. Expected PostMessageData, but got "+e);this.callbacks.forEach((function(i){return i({data:e,source:t.coordinatorHost})}))},e.prototype.addListener=function(e){this.callbacks.push(e)},e.prototype.removeListener=function(e){this.callbacks=this.callbacks.filter((function(t){return t!==e}))},e}(),ce=function(){function e(e){this.options=e,this.map=new Map}return e.prototype.dispatch=function(e){if(!se(e))throw new Error("Incorrect object type. Expected PostMessageData, but got "+e);this.options.senderHost.postMessage(e,"*")},e.prototype.addListener=function(e){var t=function(t){var i;(i=t)&&i.source&&i.data&&se(i.data)&&e(t)};this.map.set(e,t),this.options.listenerHost.addEventListener("message",t)},e.prototype.removeListener=function(e){var t=this.map.get(e);this.options.listenerHost.removeEventListener("message",t),this.map.delete(e)},e}(),ue=function(){function e(e){this.callbacks=[],this.history=[],this.channelId=e.channelId,this.connector=de.make(e),this.setupActions(),this.setupConnection()}return e.prototype.setupActions=function(){this.getHistory(),this.listenEvent()},e.prototype.getHistory=function(){var e=this,t=function(i){if(re(i,e.channelId)&&function(e){return!!e.data.private}(i)){var n=ae(i);(function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return t.some((function(t){return e.type===t}))})(n,ie.connected)&&(e.connector.removeListener(t),e.handleActions.apply(e,n.history))}};this.connector.addListener(t)},e.prototype.listenEvent=function(){var e=this;this.connector.addListener((function(t){if(re(t,e.channelId)&&oe(t)){var i=ae(t);e.handleActions(i)}}))},e.prototype.handleActions=function(){for(var e,t=this,i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];(e=this.history).push.apply(e,i),i.forEach((function(e){return t.callbacks.forEach((function(t){return t(e)}))}))},e.prototype.setupConnection=function(){this.connector.dispatch({action:{type:ie.connect,timestamp:Date.now()},channelId:this.channelId,private:!0,libId:ne})},e.prototype.addListener=function(e){this.history.forEach((function(t){return e(t)})),this.callbacks.push(e)},e.prototype.removeListener=function(e){this.callbacks=this.callbacks.filter((function(t){return t!==e}))},e}(),pe=function(){function e(e){void 0===e&&(e={});var t=ee(ee({},te),e);this.channelId=t.channelId,this.connector=de.make(t)}return e.prototype.dispatch=function(e){this.connector.dispatch({action:ee(ee({},e),{timestamp:Date.now()}),channelId:this.channelId,private:!0,libId:ne})},e}(),he=function(){function e(e){void 0===e&&(e={});var t=ee(ee({},te),e);this.transmitter=new pe(t),this.receiver=new ue(t)}return e.prototype.dispatch=function(e){this.transmitter.dispatch(e)},e.prototype.addListener=function(e){this.receiver.addListener(e)},e.prototype.removeListener=function(e){this.receiver.removeListener(e)},e}(),ge=function(){function e(e,t){this.channelId=e,this.connectors=new Map,this.history=[],this.connectors.set(t,t[ne].callbackConnector)}return e.prototype.addConnection=function(e){this.ensureConnector(e).dispatch({action:this.createConnectedAction(),private:!0,channelId:this.channelId,libId:ne})},e.prototype.createConnectedAction=function(){return{type:ie.connected,history:this.history,timestamp:Date.now()}},e.prototype.broadcast=function(e){var t=this;this.history.push(e),this.connectors.forEach((function(i){i.dispatch({action:e,channelId:t.channelId,libId:ne})}))},e.prototype.ensureConnector=function(e){return this.connectors.has(e)||this.connectors.set(e,new ce({senderHost:e,listenerHost:e})),this.connectors.get(e)},e}(),me=function(){function e(e){this.coordinatorHost=e,this.channels=new Map,this.callbackConnector=new le(e),this.postMessageConnector=new ce({senderHost:e,listenerHost:e})}return e.prototype.init=function(){var e=this,t=function(t){oe(t)||(e.handleConnect(t),e.handleBroadcast(t))};this.callbackConnector.addListener(t),this.postMessageConnector.addListener(t)},e.prototype.handleConnect=function(e){(function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return t.some((function(t){return e.data.action.type===t}))})(e,ie.connect)&&this.ensureChannel(e.data.channelId).addConnection(e.source)},e.prototype.handleBroadcast=function(e){(function(e){return!Object.values(ie).some((function(t){return e.data.action.type===t}))})(e)&&this.ensureChannel(e.data.channelId).broadcast(e.data.action)},e.prototype.ensureChannel=function(e){return this.channels.has(e)||this.channels.set(e,new ge(e,this.coordinatorHost)),this.channels.get(e)},e}();function fe(e){return"function"==typeof e}function ve(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var be=ve((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function ye(e,t){if(e){var i=e.indexOf(t);0<=i&&e.splice(i,1)}}var _e=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,i,n,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var r=O(o),a=r.next();!a.done;a=r.next())a.value.remove(this)}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}else o.remove(this);var d=this.initialTeardown;if(fe(d))try{d()}catch(e){s=e instanceof be?e.errors:[e]}var l=this._finalizers;if(l){this._finalizers=null;try{for(var c=O(l),u=c.next();!u.done;u=c.next()){var p=u.value;try{Ee(p)}catch(e){s=null!=s?s:[],e instanceof be?s=P(P([],N(s)),N(e.errors)):s.push(e)}}}catch(e){i={error:e}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(i)throw i.error}}}if(s)throw new be(s)}},e.prototype.add=function(t){var i;if(t&&t!==this)if(this.closed)Ee(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(i=this._finalizers)&&void 0!==i?i:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&ye(t,e)},e.prototype.remove=function(t){var i=this._finalizers;i&&ye(i,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e;var t}(),Se=_e.EMPTY;function we(e){return e instanceof _e||e&&"closed"in e&&fe(e.remove)&&fe(e.add)&&fe(e.unsubscribe)}function Ee(e){fe(e)?e():e.unsubscribe()}var Ie=null,Te=null,Ae=void 0,Ce=!1,Oe=!1,Ne={setTimeout:function(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var s=Ne.delegate;return(null==s?void 0:s.setTimeout)?s.setTimeout.apply(s,P([e,t],N(i))):setTimeout.apply(void 0,P([e,t],N(i)))},clearTimeout:function(e){var t=Ne.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function Pe(e){Ne.setTimeout((function(){if(!Ie)throw e;Ie(e)}))}function ke(){}var De=Le("C",void 0,void 0);function Le(e,t,i){return{kind:e,value:t,error:i}}var ze=null;function xe(e){if(Ce){var t=!ze;if(t&&(ze={errorThrown:!1,error:null}),e(),t){var i=ze,n=i.errorThrown,s=i.error;if(ze=null,n)throw s}}else e()}var Re=function(e){function t(t){var i=e.call(this)||this;return i.isStopped=!1,t?(i.destination=t,we(t)&&t.add(i)):i.destination=Fe,i}return w(t,e),t.create=function(e,t,i){return new Ue(e,t,i)},t.prototype.next=function(e){this.isStopped?$e(function(e){return Le("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?$e(Le("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?$e(De,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(_e),je=Function.prototype.bind;function Ve(e,t){return je.call(e,t)}var Me=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){Be(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){Be(e)}else Be(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){Be(e)}},e}(),Ue=function(e){function t(t,i,n){var s,o,r=e.call(this)||this;return fe(t)||!t?s={next:null!=t?t:void 0,error:null!=i?i:void 0,complete:null!=n?n:void 0}:r&&Oe?((o=Object.create(t)).unsubscribe=function(){return r.unsubscribe()},s={next:t.next&&Ve(t.next,o),error:t.error&&Ve(t.error,o),complete:t.complete&&Ve(t.complete,o)}):s=t,r.destination=new Me(s),r}return w(t,e),t}(Re);function Be(e){var t;Ce?(t=e,Ce&&ze&&(ze.errorThrown=!0,ze.error=t)):Pe(e)}function $e(e,t){var i=Te;i&&Ne.setTimeout((function(){return i(e,t)}))}var Fe={closed:!0,next:ke,error:function(e){throw e},complete:ke},Ge="function"==typeof Symbol&&Symbol.observable||"@@observable";function He(e){return e}function We(e){return 0===e.length?He:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var qe=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var i=new e;return i.source=this,i.operator=t,i},e.prototype.subscribe=function(e,t,i){var n,s=this,o=(n=e)&&n instanceof Re||function(e){return e&&fe(e.next)&&fe(e.error)&&fe(e.complete)}(n)&&we(n)?e:new Ue(e,t,i);return xe((function(){var e=s,t=e.operator,i=e.source;o.add(t?t.call(o,i):i?s._subscribe(o):s._trySubscribe(o))})),o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var i=this;return new(t=Ke(t))((function(t,n){var s=new Ue({next:function(t){try{e(t)}catch(e){n(e),s.unsubscribe()}},error:n,complete:t});i.subscribe(s)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[Ge]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return We(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Ke(e))((function(e,i){var n;t.subscribe((function(e){return n=e}),(function(e){return i(e)}),(function(){return e(n)}))}))},e.create=function(t){return new e(t)},e}();function Ke(e){var t;return null!==(t=null!=e?e:Ae)&&void 0!==t?t:Promise}function Ye(e){return fe(null==e?void 0:e.lift)}function Xe(e){return function(t){if(Ye(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function Je(e,t,i,n,s){return new Qe(e,t,i,n,s)}var Qe=function(e){function t(t,i,n,s,o,r){var a=e.call(this,t)||this;return a.onFinalize=o,a.shouldUnsubscribe=r,a._next=i?function(e){try{i(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=s?function(e){try{s(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=n?function(){try{n()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return w(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var i=this.closed;e.prototype.unsubscribe.call(this),!i&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(Re);function Ze(e,t){return Xe((function(i,n){var s=0;i.subscribe(Je(n,(function(i){n.next(e.call(t,i,s++))})))}))}var et=Array.isArray;function tt(e){return Ze((function(t){return function(e,t){return et(t)?e.apply(void 0,P([],N(t))):e(t)}(e,t)}))}function it(e,t,i){return i?it(e,t).pipe(tt(i)):new qe((function(i){var n=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i.next(1===e.length?e[0]:e)},s=e(n);return fe(t)?function(){return t(n,s)}:void 0}))}var nt=ve((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),st=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return w(t,e),t.prototype.lift=function(e){var t=new ot(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new nt},t.prototype.next=function(e){var t=this;xe((function(){var i,n;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var s=O(t.currentObservers),o=s.next();!o.done;o=s.next())o.value.next(e)}catch(e){i={error:e}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}}}))},t.prototype.error=function(e){var t=this;xe((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var i=t.observers;i.length;)i.shift().error(e)}}))},t.prototype.complete=function(){var e=this;xe((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,i=this,n=i.hasError,s=i.isStopped,o=i.observers;return n||s?Se:(this.currentObservers=null,o.push(e),new _e((function(){t.currentObservers=null,ye(o,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,i=t.hasError,n=t.thrownError,s=t.isStopped;i?e.error(n):s&&e.complete()},t.prototype.asObservable=function(){var e=new qe;return e.source=this,e},t.create=function(e,t){return new ot(e,t)},t}(qe),ot=function(e){function t(t,i){var n=e.call(this)||this;return n.destination=t,n.source=i,n}return w(t,e),t.prototype.next=function(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===i||i.call(t,e)},t.prototype.error=function(e){var t,i;null===(i=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===i||i.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,i;return null!==(i=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==i?i:Se},t}(st),rt=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function at(e){return fe(null==e?void 0:e.then)}function dt(e){return fe(e[Ge])}function lt(e){return Symbol.asyncIterator&&fe(null==e?void 0:e[Symbol.asyncIterator])}function ct(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var ut="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function pt(e){return fe(null==e?void 0:e[ut])}function ht(e){return D(this,arguments,(function(){var t,i,n;return C(this,(function(s){switch(s.label){case 0:t=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,k(t.read())];case 3:return i=s.sent(),n=i.value,i.done?[4,k(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,k(n)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function gt(e){return fe(null==e?void 0:e.getReader)}function mt(e){if(e instanceof qe)return e;if(null!=e){if(dt(e))return s=e,new qe((function(e){var t=s[Ge]();if(fe(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(rt(e))return n=e,new qe((function(e){for(var t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()}));if(at(e))return i=e,new qe((function(e){i.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,Pe)}));if(lt(e))return ft(e);if(pt(e))return t=e,new qe((function(e){var i,n;try{for(var s=O(t),o=s.next();!o.done;o=s.next()){var r=o.value;if(e.next(r),e.closed)return}}catch(e){i={error:e}}finally{try{o&&!o.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}e.complete()}));if(gt(e))return ft(ht(e))}var t,i,n,s;throw ct(e)}function ft(e){return new qe((function(t){(function(e,t){var i,n,s,o;return A(this,void 0,void 0,(function(){var r,a;return C(this,(function(d){switch(d.label){case 0:d.trys.push([0,5,6,11]),i=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=O(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(i){t[i]=e[i]&&function(t){return new Promise((function(n,s){!function(e,t,i,n){Promise.resolve(n).then((function(t){e({value:t,done:i})}),t)}(n,s,(t=e[i](t)).done,t.value)}))}}}(e),d.label=1;case 1:return[4,i.next()];case 2:if((n=d.sent()).done)return[3,4];if(r=n.value,t.next(r),t.closed)return[2];d.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=d.sent(),s={error:a},[3,11];case 6:return d.trys.push([6,,9,10]),n&&!n.done&&(o=i.return)?[4,o.call(i)]:[3,8];case 7:d.sent(),d.label=8;case 8:return[3,10];case 9:if(s)throw s.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function vt(e,t,i,n,s){void 0===n&&(n=0),void 0===s&&(s=!1);var o=t.schedule((function(){i(),s?e.add(this.schedule(null,n)):this.unsubscribe()}),n);if(e.add(o),!s)return o}function bt(e,t,i){return void 0===i&&(i=1/0),fe(t)?bt((function(i,n){return Ze((function(e,s){return t(i,e,n,s)}))(mt(e(i,n)))}),i):("number"==typeof t&&(i=t),Xe((function(t,n){return function(e,t,i,n,s,o,r,a){var d=[],l=0,c=0,u=!1,p=function(){!u||d.length||l||t.complete()},h=function(e){return l<n?g(e):d.push(e)},g=function(e){l++;var s=!1;mt(i(e,c++)).subscribe(Je(t,(function(e){t.next(e)}),(function(){s=!0}),void 0,(function(){if(s)try{l--;for(;d.length&&l<n;)e=void 0,e=d.shift(),g(e);p()}catch(e){t.error(e)}var e})))};return e.subscribe(Je(t,h,(function(){u=!0,p()}))),function(){}}(t,n,e,i)})))}function yt(e){return void 0===e&&(e=1/0),bt(He,e)}var _t=new qe((function(e){return e.complete()}));function St(e){return e&&fe(e.schedule)}function wt(e){return e[e.length-1]}function Et(e){return fe(wt(e))?e.pop():void 0}function It(e){return St(wt(e))?e.pop():void 0}function Tt(e,t){return"number"==typeof wt(e)?e.pop():t}function At(e,t){return void 0===t&&(t=0),Xe((function(i,n){i.subscribe(Je(n,(function(i){return vt(n,e,(function(){return n.next(i)}),t)}),(function(){return vt(n,e,(function(){return n.complete()}),t)}),(function(i){return vt(n,e,(function(){return n.error(i)}),t)})))}))}function Ct(e,t){return void 0===t&&(t=0),Xe((function(i,n){n.add(e.schedule((function(){return i.subscribe(n)}),t))}))}function Ot(e,t){if(!e)throw new Error("Iterable cannot be null");return new qe((function(i){vt(i,t,(function(){var n=e[Symbol.asyncIterator]();vt(i,t,(function(){n.next().then((function(e){e.done?i.complete():i.next(e.value)}))}),0,!0)}))}))}function Nt(e,t){return t?function(e,t){if(null!=e){if(dt(e))return function(e,t){return mt(e).pipe(Ct(t),At(t))}(e,t);if(rt(e))return function(e,t){return new qe((function(i){var n=0;return t.schedule((function(){n===e.length?i.complete():(i.next(e[n++]),i.closed||this.schedule())}))}))}(e,t);if(at(e))return function(e,t){return mt(e).pipe(Ct(t),At(t))}(e,t);if(lt(e))return Ot(e,t);if(pt(e))return function(e,t){return new qe((function(i){var n;return vt(i,t,(function(){n=e[ut](),vt(i,t,(function(){var e,t,s;try{t=(e=n.next()).value,s=e.done}catch(e){return void i.error(e)}s?i.complete():i.next(t)}),0,!0)})),function(){return fe(null==n?void 0:n.return)&&n.return()}}))}(e,t);if(gt(e))return function(e,t){return Ot(ht(e),t)}(e,t)}throw ct(e)}(e,t):mt(e)}function Pt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=It(e),n=Tt(e,1/0),s=e;return s.length?1===s.length?mt(s[0]):yt(n)(Nt(s,i)):_t}var kt={now:function(){return(kt.delegate||Date).now()},delegate:void 0},Dt=function(e){function t(t,i,n){void 0===t&&(t=1/0),void 0===i&&(i=1/0),void 0===n&&(n=kt);var s=e.call(this)||this;return s._bufferSize=t,s._windowTime=i,s._timestampProvider=n,s._buffer=[],s._infiniteTimeWindow=!0,s._infiniteTimeWindow=i===1/0,s._bufferSize=Math.max(1,t),s._windowTime=Math.max(1,i),s}return w(t,e),t.prototype.next=function(t){var i=this,n=i.isStopped,s=i._buffer,o=i._infiniteTimeWindow,r=i._timestampProvider,a=i._windowTime;n||(s.push(t),!o&&s.push(r.now()+a)),this._trimBuffer(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var t=this._innerSubscribe(e),i=this._infiniteTimeWindow,n=this._buffer.slice(),s=0;s<n.length&&!e.closed;s+=i?1:2)e.next(n[s]);return this._checkFinalizedStatuses(e),t},t.prototype._trimBuffer=function(){var e=this,t=e._bufferSize,i=e._timestampProvider,n=e._buffer,s=e._infiniteTimeWindow,o=(s?1:2)*t;if(t<1/0&&o<n.length&&n.splice(0,n.length-o),!s){for(var r=i.now(),a=0,d=1;d<n.length&&n[d]<=r;d+=2)a=d;a&&n.splice(0,a+1)}},t}(st);function Lt(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];if(!0!==t){if(!1!==t){var s=new Ue({next:function(){s.unsubscribe(),e()}});return mt(t.apply(void 0,P([],N(i)))).subscribe(s)}}else e()}function zt(e,t,i){var n,s,o,r,a=!1;return e&&"object"==typeof e?(n=e.bufferSize,r=void 0===n?1/0:n,s=e.windowTime,t=void 0===s?1/0:s,a=void 0!==(o=e.refCount)&&o,i=e.scheduler):r=null!=e?e:1/0,function(e){void 0===e&&(e={});var t=e.connector,i=void 0===t?function(){return new st}:t,n=e.resetOnError,s=void 0===n||n,o=e.resetOnComplete,r=void 0===o||o,a=e.resetOnRefCountZero,d=void 0===a||a;return function(e){var t,n,o,a=0,l=!1,c=!1,u=function(){null==n||n.unsubscribe(),n=void 0},p=function(){u(),t=o=void 0,l=c=!1},h=function(){var e=t;p(),null==e||e.unsubscribe()};return Xe((function(e,g){a++,c||l||u();var m=o=null!=o?o:i();g.add((function(){0!=--a||c||l||(n=Lt(h,d))})),m.subscribe(g),!t&&a>0&&(t=new Ue({next:function(e){return m.next(e)},error:function(e){c=!0,u(),n=Lt(p,s,e),m.error(e)},complete:function(){l=!0,u(),n=Lt(p,r),m.complete()}}),mt(e).subscribe(t))}))(e)}}({connector:function(){return new Dt(r,t,i)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}function xt(e,t){return Xe((function(i,n){var s=0;i.subscribe(Je(n,(function(i){return e.call(t,i,s++)&&n.next(i)})))}))}function Rt(e){return e<=0?function(){return _t}:Xe((function(t,i){var n=0;t.subscribe(Je(i,(function(t){++n<=e&&(i.next(t),e<=n&&i.complete())})))}))}function jt(e){return xt((function(t,i){return e<=i}))}var Vt=function(){return Vt=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},Vt.apply(this,arguments)};function Mt(e,t){return Object.defineProperty(t,"type",{value:e,writable:!1})}const Ut={AD_ENGINE_BAB_DETECTION:{category:"[Ad Engine]",name:"BAB detection finished",payload:{_as:"props",_p:void 0}},AD_ENGINE_CONFIGURED:{name:"Configured"},AD_ENGINE_CONSENT_READY:{category:"[AdEngine OptIn]",name:"set opt in",payload:{_as:"props",_p:void 0}},AD_ENGINE_INSTANT_CONFIG_CACHE_RESET:{name:"Instant Config cache reset"},AD_ENGINE_INTERSTITIAL_DISPLAYED:{name:"Interstitial displayed"},AD_ENGINE_LOAD_TIME_INIT:{name:"Ad engine load time init"},AD_ENGINE_MESSAGE_BOX_EVENT:{name:"MessageBox event",payload:{_as:"props",_p:void 0}},AD_ENGINE_PARTNERS_READY:{name:"Partners Ready"},AD_ENGINE_STACK_START:{name:"Ad Stack started"},AD_ENGINE_TEMPLATE_LOADED:{name:"Template loaded",payload:{_as:"props",_p:void 0}},AD_ENGINE_UAP_DOM_CHANGED:{name:"UAP DOM changed",payload:{_as:"props",_p:void 0}},AD_ENGINE_UAP_LOAD_STATUS:{name:"UAP Load status",payload:{_as:"props",_p:void 0}},AD_ENGINE_UAP_NTC_LOADED:{name:"UAP NTC loaded"},AD_ENGINE_INVALIDATE_SLOT_TARGETING:{name:"Invalidate slot targeting",payload:{_as:"props",_p:void 0}},AD_ENGINE_VIDEO_OVERLAY_CLICKED:{name:"Video overlay added",payload:{_as:"props",_p:void 0}},AD_ENGINE_VIDEO_TOGGLE_UI_OVERLAY_CLICKED:{name:"Video toggle ui overlay clicked",payload:{_as:"props",_p:void 0}},AD_ENGINE_VIDEO_LEARN_MORE_CLICKED:{name:"Video learn more displayed",payload:{_as:"props",_p:void 0}},AD_ENGINE_SLOT_ADDED:{name:"Ad Slot added",payload:{_as:"props",_p:void 0}},AD_ENGINE_SLOT_EVENT:{name:"Ad Slot event",payload:{_as:"props",_p:void 0}},AD_ENGINE_SLOT_LOADED:{name:"Ad Slot loaded",payload:{_as:"props",_p:void 0}},AD_ENGINE_AD_RESIZED:{name:"Ad slot resized",payload:{_as:"props",_p:void 0}},AD_ENGINE_AD_CLICKED:{name:"Ad clicked",payload:{_as:"props",_p:void 0}},ANYCLIP_LATE_INJECT:{name:"Anyclip late inject"},AUDIGENT_SEGMENT_LIBRARY_LOADED:{name:"Audigent segment library loaded"},AUDIGENT_MATCHES_LIBRARY_LOADED:{name:"Audigent matches library loaded"},AUDIGENT_SEGMENTS_READY:{name:"Audigent segments ready"},CAPTIFY_LOADED:{name:"Captify loaded"},EYEOTA_STARTED:{name:"Eyeota started"},EYEOTA_FAILED:{name:"Eyeota loading failed"},IDENTITY_ENGINE_READY:{category:"[IdentityEngine]",name:"Identity ready"},IDENTITY_PARTNER_DATA_OBTAINED:{name:"Identity partner data obtained",payload:{_as:"payload",_p:void 0}},INTENTIQ_PPID_NOT_SET_ON_TIME:{name:"IntentIQ PPID not set on time"},LIVE_CONNECT_STARTED:{name:"LiveConnect started"},LIVE_CONNECT_CACHED:{name:"LiveConnect data cached"},LIVE_CONNECT_RESPONDED_UUID:{name:"LiveConnect responded with UUID"},NATIVO_LOADED:{name:"Nativo loaded",payload:{_as:"props",_p:void 0}},NO_NATIVE_PREBID_AD:{name:"No native prebid ad",payload:{_as:"props",_p:void 0}},NO_NATIVO_AD:{name:"No nativo ad",payload:{_as:"props",_p:void 0}},TIMESTAMP_EVENT:{name:"Timestamp event",payload:{_as:"props",_p:void 0}},BINGEBOT_AD_SLOT_INJECTED:{category:"[BingeBot]",name:"ad slot injected",payload:{_as:"props",_p:void 0}},BINGEBOT_BEFORE_VIEW_CHANGE:{category:"[BingeBot]",name:"before view change"},BINGEBOT_DESTROY_AD_SLOT:{category:"[BingeBot]",name:"destroy ad slot",payload:{_as:"props",_p:void 0}},BINGEBOT_VIEW_RENDERED:{category:"[BingeBot]",name:"view rendered",payload:{_as:"props",_p:void 0}},F2_HIDE_SMART_BANNER:{category:"[AdEngine F2 Templates]",name:"hide smart banner"},FAN_FEED_READY:{category:"[FanFeed]",name:"Ready"},QUIZ_AD_INJECTED:{category:"[quizConsumption]",name:"ad slot injected",payload:{_as:"props",_p:void 0}},PLATFORM_BEFORE_PAGE_CHANGE:{category:"[Platform]",name:"Before page change"},PLATFORM_PAGE_CHANGED:{category:"[Platform]",name:"Page changed"},PLATFORM_PAGE_EXTENDED:{category:"[Platform]",name:"Page extended"},PLATFORM_AD_PLACEMENT_READY:{category:"[Platform]",name:"Ad placement ready",payload:{_as:"props",_p:void 0}},PLATFORM_LIGHTBOX_READY:{category:"[Platform]",name:"Lightbox ready",payload:{_as:"props",_p:void 0}},PLATFORM_LIGHTBOX_CLOSED:{category:"[Platform]",name:"Lightbox closed",payload:{_as:"props",_p:void 0}},PLATFORM_LIGHTBOX_IMAGE_CHANGE:{category:"[Platform]",name:"Lightbox image change",payload:{_as:"props",_p:void 0}},RAIL_READY:{category:"[Rail]",name:"Ready"},BIDDERS_BIDDING_DONE:{category:"[Prebid]",name:"Bidding done",payload:{_as:"props",_p:void 0}},BIDDERS_BIDS_CALLED:{category:"[Prebid]",name:"Bids called"},BIDDERS_BIDS_REFRESH:{category:"[Prebid]",name:"Bids refresh",payload:{_as:"props",_p:void 0}},BIDDERS_BIDS_RESPONSE:{category:"[Prebid]",name:"Bids response",payload:{_as:"props",_p:void 0}},BIDDERS_AUCTION_DONE:{category:"[Prebid]",name:"Auction done"},VIDEO_EVENT:{category:"[Video]",name:"Video event",payload:{_as:"props",_p:void 0}},VIDEO_PLAYER_TRACKING:{category:"[Video]",name:"Video player tracking",payload:{_as:"props",_p:void 0}},GAM_AD_INTERVENTION:{category:"[GAM iframe]",name:"Ad intervention",payload:{_as:"props",_p:void 0}},GAM_AD_DELAYED_COLLAPSE:{category:"[GAM iframe]",name:"Delayed collapse",payload:{_as:"props",_p:void 0}},GAM_INTERSTITIAL_LOADED:{category:"[GAM iframe]",name:"Interstitial loaded"},GAM_LOAD_TEMPLATE:{category:"[GAM iframe]",name:"Load template",payload:{_as:"payload",_p:void 0}}};function Bt(e){return!0===e.__global}function $t(e,t){const i=function(e,t){if("function"==typeof t)return Mt(e,(function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return Vt(Vt({},t.apply(void 0,i)),{type:e})}));switch(t?t._as:"empty"){case"empty":return Mt(e,(function(){return{type:e}}));case"fsa":return Mt(e,(function(t,i){return t instanceof Error?{error:!0,meta:i,payload:t,type:e}:{error:!1,meta:i,payload:t,type:e}}));case"payload":return Mt(e,(function(t){return{payload:t,type:e}}));case"props":return Mt(e,(function(t){return Vt(Vt({},t),{type:e})}));default:throw new Error("Unexpected config.")}}(e,t),n=(...e)=>{const t=i(...e);return Object.assign(Object.assign({},t),{__global:!0})};return Object.defineProperty(n,"type",{value:e,writable:!1}),Object.defineProperty(n,"__global",{value:!0,writable:!1}),n}function Ft(...e){return t=>t.pipe(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return xt((function(t){var i=t.type;return e.some((function(e){return e.type===i}))}))}(...e),xt((t=>e.some((e=>!0===e.__global?Bt(t):!Bt(t))))))}const Gt=new class{constructor(){const{channelId:e,coordinatorName:t,reduxDevtoolsName:i}=this.getSettings();!function(e){if(void 0===e&&(e=window),!e[ne]){var t=new me(e);t.init(),e[ne]=t}}(),this.communicator=new he({channelId:e||"default",coordinatorHost:window[t]||top});const n=it((e=>this.communicator.addListener(e)),(e=>this.communicator.removeListener(e))).pipe(zt({refCount:!0}));this.subject=new st,this.action$=Pt(n.pipe(xt((e=>Bt(e)))),this.subject.asObservable().pipe(xt((e=>!Bt(e))))),this.connectReduxDevtools(i)}emit(e,t){this.dispatch(this.getGlobalAction(e)(t))}on(e,t,i=!0){this.action$.pipe(Ft(this.getGlobalAction(e)),i?Rt(1):jt(0)).subscribe(t)}onSlotEvent(e,t,i="",n=!1){this.action$.pipe(Ft(this.getGlobalAction(Ut.AD_ENGINE_SLOT_EVENT)),xt((t=>t.event===e.toString()&&(!i||t.adSlotName===i))),n?Rt(1):jt(0)).subscribe(t)}dispatch(e){Bt(e)?this.communicator.dispatch(e):this.subject.next(e)}getGlobalAction(e){return e.action||(e.action=e.payload?$t(`${e.category||"[AdEngine]"} ${e.name}`,e.payload):$t(`${e.category||"[AdEngine]"} ${e.name}`)),e.action}getSettings(){return window["@wikia/post-quecast-settings"]||{}}connectReduxDevtools(e){const t=class{static connect(e="AdEngine"){if(this.devtools)throw new Error("Trying to initialize ReduxDevtools second time");const t=window.__REDUX_DEVTOOLS_EXTENSION__;if(t)return this.devtools=t.connect({name:e})}}.connect(e);t&&(t.subscribe((e=>{try{if("@devtools-extension"===e.source&&"ACTION"===e.type){const t=new Function(`return ${e.payload}`)();this.dispatch(t)}}catch(e){t.error(e.message)}})),this.action$.subscribe((e=>t.send(e,{}))))}};class Ht{constructor(e=window.localStorage){this.provider=e,this.fallbackStorage={}}isAvailable(){try{return this.provider.setItem("ae3-provider-storage-test","1"),this.provider.getItem("ae3-provider-storage-test"),this.provider.removeItem("ae3-provider-storage-test"),!0}catch(e){return!1}}getItem(e){try{let t=this.provider.getItem(e);try{t=JSON.parse(t)}catch(e){return t}return t}catch(t){return this.fallbackStorage[e]}}setItem(e,t,i){const n=t instanceof Object?JSON.stringify(t):t;try{this.provider.setItem(e,n,i)}catch(t){console.warn(`Item ${e} wasn't set in the storage`,t),this.fallbackStorage[e]=n}return!0}removeItem(e){try{return this.provider.removeItem(e)}catch(t){delete this.fallbackStorage[e]}}clear(){try{this.provider.clear()}catch(e){this.fallbackStorage={}}}}class Wt{static make(){return Wt.instance||(Wt.instance=new Wt),Wt.instance}constructor(){this.storage=new Ht(new R),this.sessionCookieDefault="tracking_session_id",this.prefix="",this.prefix=this.readSessionId()}readSessionId(){const e=Z.get("options.session.cookieName")||this.sessionCookieDefault,t=x.get(e)||Z.get("options.session.id")||"ae3";return this.setSessionId(t),t}setSessionId(e){this.prefix=e,Z.set("options.session.id",e)}getItem(e){return this.storage.getItem(`${this.prefix}_${e}`)}setItem(e,t,i){this.storage.setItem(e,t,i)}removeItem(e){this.storage.removeItem(`${this.prefix}_${e}`)}clear(){this.storage.clear()}}class qt{static make(){return qt.instance||(qt.instance=new qt),qt.instance}constructor(){this.sessionCookie=Wt.make(),this.resetCache()}resetCache(){this.sessionCookie.readSessionId();const e=this.sessionCookie.getItem("basset")||"";var t;this.cacheStorage=""===(t=e)||"string"!=typeof t?{}:t.split("|").reduce(((e,t)=>Object.assign(Object.assign({},e),function(e){const[t,i]=e.split(":"),n="true"===i,[s,o,r]=t.split("_");return{[s]:{name:s,group:o,limit:parseFloat(r)||void 0,result:n}}}(t))),{}),Gt.emit(Ut.AD_ENGINE_INSTANT_CONFIG_CACHE_RESET)}get(e){return this.cacheStorage[e]}set(e){this.cacheStorage[e.name]=e,e.withCookie&&Gt.on(Ut.AD_ENGINE_CONSENT_READY,(({gdprConsent:e})=>{e&&this.synchronizeCookie()}))}synchronizeCookie(){const e=(t=Object.keys(this.cacheStorage).map((e=>({key:e,value:this.cacheStorage[e]}))).filter((({value:e})=>e.withCookie)).reduce(((e,{key:t,value:i})=>Object.assign(Object.assign({},e),{[t]:i})),{}),Object.keys(t).slice(0,5).map(function(e){return t=>{const{name:i,group:n,limit:s,result:o}=e[t];return`${i}_${n}_${s}:${o}`}}(t)).join("|"));var t;this.sessionCookie.setItem("basset",e)}mapSamplingResults(e=[]){if(!e||!e.length)return[];const t=this.getSamplingResults();return e.map((e=>e.split(":"))).filter((([e])=>t.includes(e))).map((([,e])=>e))}getSamplingResults(){return Object.keys(this.cacheStorage).map((e=>this.getResultLog(e)))}getResultLog(e){const t=this.cacheStorage[e];return`${this.removeIndexSuffix(t.name)}_${t.group}_${t.limit}`}removeIndexSuffix(e){const t=e.lastIndexOf("-");return-1!==t?e.substring(0,t):e}}const Kt="-cached",Yt=Math.pow(10,6),Xt={setUpGeoData:function(){const e=x.get("Geo");if(!e)return;const t=decodeURIComponent(e);try{const e=JSON.parse(t)||{};Z.set("geo.region",e.region),Z.set("geo.country",e.country),Z.set("geo.continent",e.continent)}catch(e){throw new Error("Invalid JSON in the cookie")}return Z.get("geo")||{}},isProperContinent:function(e=[],t){return!(!e||!e.indexOf||!function(e,t){return e.indexOf("XX")>-1||Qt(e,"XX",t)}(e,t)&&!function(e=[],t){const i=`XX-${Xt.getContinentCode()}`;return e.indexOf(i)>-1||Qt(e,i,t)}(e,t))},isProperCountry:function(e=[],t){return!!(e&&e.indexOf&&(e.indexOf(Xt.getCountryCode())>-1||Qt(e,Xt.getCountryCode(),t)))},isProperRegion:function(e=[],t){const i=`${Xt.getCountryCode()}-${Xt.getRegionCode()}`;return!!(e&&e.indexOf&&(e.indexOf(i)>-1||Qt(e,i,t)))},getContinentCode:function(){return Z.get("geo.continent")},getCountryCode:function(){return Z.get("geo.country")},getRegionCode:function(){return Z.get("geo.region")},isProperGeo:function(e=[],t){const i=qt.make();return void 0!==t&&void 0!==i.get(t)?i.get(t).result:!(!e||!e.indexOf||function(e=[]){return!!(e.indexOf(`non-${Xt.getCountryCode()}`)>-1||e.indexOf(`non-${Xt.getCountryCode()}-${Xt.getRegionCode()}`)>-1||e.indexOf(`non-XX-${Xt.getContinentCode()}`)>-1)}(e)||!(Xt.isProperContinent(e,t)||Xt.isProperCountry(e,t)||Xt.isProperRegion(e,t)))}};function Jt(e){let[,t]=e.split("/");return t=t.replace(Kt,""),Math.round(parseFloat(t)*Yt)||0}function Qt(e,t,i){const n=e.filter(function(e){return t=>0!==t.indexOf("non-")&&t.indexOf(e+"/")>-1}(t)),s=function(e){return e.some((e=>-1!==e.indexOf(Kt)))}(e);return 0!==n.length&&function(e,t,i){const n=Math.round(Math.random()*(100*Yt))||0,s=e.some((e=>n<e));return t&&function(e,t,i,n){const s=qt.make(),[o]=i,r={name:e,result:t,withCookie:n,group:t?"B":"A",limit:(t?o:100*Yt-o)/Yt};s.set(r)}(t,s,e,i),s}(n.map(Jt),i,s)}function Zt(e,t){if("function"!=typeof t)throw new Error("LazyQueue used with callback not being a function");if(!(e instanceof Array))throw new Error("LazyQueue requires an array as the first parameter");e.start=()=>{for(;e.length>0;)t(e.shift());e.push=e=>{t(e)}}}class ei{get length(){return this.items.length}constructor(...e){this.itemFlushCallbacks=[],this.items=[],this.items=[...e],this.setPreFlushPush()}flush(){for(;this.items.length>0;)this.emit(this.items.shift());this.setPostFlushPush()}push(...e){this.pushCommand(...e)}onItemFlush(e){if("function"!=typeof e)throw new Error("onItemFlush used with callback not being a function");this.itemFlushCallbacks.push(e)}setPreFlushPush(){this.pushCommand=(...e)=>{this.items.push(...e)}}setPostFlushPush(){this.pushCommand=(...e)=>{e.forEach((e=>{this.emit(e)}))}}emit(e){this.itemFlushCallbacks.forEach((t=>{t(e)}))}}const ti="tracking-opt-in-wrapper",ii=new class{constructor(){window.ads=window.ads||{},this.installConsentQueue()}init(){return A(this,void 0,void 0,(function*(){return new Promise((e=>{q(ti,"Waiting for consents"),Gt.on(Ut.AD_ENGINE_CONSENT_READY,(t=>{this.setConsents(t),e()}))}))}))}setConsents(e){q(ti,"TrackingOptIn consents",e),Z.set("options.trackingOptIn",e.gdprConsent),Z.set("options.geoRequiresConsent",e.geoRequiresConsent),Z.set("options.optOutSale",e.ccpaSignal),Z.set("options.geoRequiresSignal",e.geoRequiresSignal)}installConsentQueue(){window.ads.consentQueue=new ei(...window.ads.consentQueue||[]),window.ads.pushToConsentQueue=window.ads.pushToConsentQueue||(e=>{window.ads.consentQueue.push(e)}),Gt.on(Ut.AD_ENGINE_CONSENT_READY,(e=>{window.ads.consentQueue.onItemFlush((t=>{console.warn('[AdEngine] You are using deprecated API to get consent.\nPlease use PostQuecast action "[AdEngine OptIn] set opt in" instead.'),t(e)})),window.ads.consentQueue.flush()}))}};var ni=s(4492),si=(s(5787),"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e}),oi=window.device,ri={},ai=[];window.device=ri;var di=window.document.documentElement,li=window.navigator.userAgent.toLowerCase(),ci=["googletv","viera","smarttv","internet.tv","netcast","nettv","appletv","boxee","kylo","roku","dlnadoc","pov_tv","hbbtv","ce-html"];function ui(e,t){return-1!==e.indexOf(t)}function pi(e){return ui(li,e)}function hi(e){return di.className.match(new RegExp(e,"i"))}function gi(e){var t=null;hi(e)||(t=di.className.replace(/^\s+|\s+$/g,""),di.className=t+" "+e)}function mi(e){hi(e)&&(di.className=di.className.replace(" "+e,""))}function fi(){ri.landscape()?(mi("portrait"),gi("landscape"),vi("landscape")):(mi("landscape"),gi("portrait"),vi("portrait")),_i()}function vi(e){for(var t=0;t<ai.length;t++)ai[t](e)}ri.macos=function(){return pi("mac")},ri.ios=function(){return ri.iphone()||ri.ipod()||ri.ipad()},ri.iphone=function(){return!ri.windows()&&pi("iphone")},ri.ipod=function(){return pi("ipod")},ri.ipad=function(){var e="MacIntel"===navigator.platform&&navigator.maxTouchPoints>1;return pi("ipad")||e},ri.android=function(){return!ri.windows()&&pi("android")},ri.androidPhone=function(){return ri.android()&&pi("mobile")},ri.androidTablet=function(){return ri.android()&&!pi("mobile")},ri.blackberry=function(){return pi("blackberry")||pi("bb10")},ri.blackberryPhone=function(){return ri.blackberry()&&!pi("tablet")},ri.blackberryTablet=function(){return ri.blackberry()&&pi("tablet")},ri.windows=function(){return pi("windows")},ri.windowsPhone=function(){return ri.windows()&&pi("phone")},ri.windowsTablet=function(){return ri.windows()&&pi("touch")&&!ri.windowsPhone()},ri.fxos=function(){return(pi("(mobile")||pi("(tablet"))&&pi(" rv:")},ri.fxosPhone=function(){return ri.fxos()&&pi("mobile")},ri.fxosTablet=function(){return ri.fxos()&&pi("tablet")},ri.meego=function(){return pi("meego")},ri.cordova=function(){return window.cordova&&"file:"===location.protocol},ri.nodeWebkit=function(){return"object"===si(window.process)},ri.mobile=function(){return ri.androidPhone()||ri.iphone()||ri.ipod()||ri.windowsPhone()||ri.blackberryPhone()||ri.fxosPhone()||ri.meego()},ri.tablet=function(){return ri.ipad()||ri.androidTablet()||ri.blackberryTablet()||ri.windowsTablet()||ri.fxosTablet()},ri.desktop=function(){return!ri.tablet()&&!ri.mobile()},ri.television=function(){for(var e=0;e<ci.length;){if(pi(ci[e]))return!0;e++}return!1},ri.portrait=function(){return screen.orientation&&Object.prototype.hasOwnProperty.call(window,"onorientationchange")?ui(screen.orientation.type,"portrait"):ri.ios()&&Object.prototype.hasOwnProperty.call(window,"orientation")?90!==Math.abs(window.orientation):window.innerHeight/window.innerWidth>1},ri.landscape=function(){return screen.orientation&&Object.prototype.hasOwnProperty.call(window,"onorientationchange")?ui(screen.orientation.type,"landscape"):ri.ios()&&Object.prototype.hasOwnProperty.call(window,"orientation")?90===Math.abs(window.orientation):window.innerHeight/window.innerWidth<1},ri.noConflict=function(){return window.device=oi,this},ri.ios()?ri.ipad()?gi("ios ipad tablet"):ri.iphone()?gi("ios iphone mobile"):ri.ipod()&&gi("ios ipod mobile"):ri.macos()?gi("macos desktop"):ri.android()?ri.androidTablet()?gi("android tablet"):gi("android mobile"):ri.blackberry()?ri.blackberryTablet()?gi("blackberry tablet"):gi("blackberry mobile"):ri.windows()?ri.windowsTablet()?gi("windows tablet"):ri.windowsPhone()?gi("windows mobile"):gi("windows desktop"):ri.fxos()?ri.fxosTablet()?gi("fxos tablet"):gi("fxos mobile"):ri.meego()?gi("meego mobile"):ri.nodeWebkit()?gi("node-webkit"):ri.television()?gi("television"):ri.desktop()&&gi("desktop"),ri.cordova()&&gi("cordova"),ri.onChangeOrientation=function(e){"function"==typeof e&&ai.push(e)};var bi="resize";function yi(e){for(var t=0;t<e.length;t++)if(ri[e[t]]())return e[t];return"unknown"}function _i(){ri.orientation=yi(["portrait","landscape"])}Object.prototype.hasOwnProperty.call(window,"onorientationchange")&&(bi="orientationchange"),window.addEventListener?window.addEventListener(bi,fi,!1):window.attachEvent?window.attachEvent(bi,fi):window[bi]=fi,fi(),ri.type=yi(["mobile","tablet","desktop"]),ri.os=yi(["ios","iphone","ipad","ipod","android","blackberry","macos","windows","fxos","meego","television"]),_i();const Si=ri;let wi,Ei=null,Ii=!1,Ti=null;const Ai=new class{isSmartphone(){return Si.mobile()}isTablet(){return Si.tablet()}isDesktop(){return!this.isSmartphone()&&!this.isTablet()}checkBlocking(e=(()=>{}),t=(()=>{})){return new Promise((e=>{if(!Ii){if("undefined"==typeof BlockAdBlock)return void e(!0);wi=new BlockAdBlock({checkOnLoad:!1,resetOnEnd:!0,loopCheckTime:50,loopMaxNumber:5}),Ii=!0}wi.onDetected((()=>e(!0))),wi.onNotDetected((()=>e(!1))),wi.check(!0)})).then((i=>(i?e():t(),i)))}getDeviceType(){return this.isTablet()?"tablet":this.isSmartphone()?"smartphone":"desktop"}getDeviceMode(){return window.matchMedia("(max-width: 840px)").matches?"mobile":"desktop"}getOperatingSystem(){if(null!==Ti)return Ti;const{userAgent:e}=window.navigator;return Ti="unknown",-1!==e.indexOf("Win")&&(Ti="Windows"),-1!==e.indexOf("Mac")&&(Ti="OSX"),-1!==e.indexOf("Linux")&&(Ti="Linux"),-1!==e.indexOf("Android")&&(Ti="Android"),-1!==e.indexOf("like Mac")&&(Ti="iOS"),Ti}getBrowser(){if(null!==Ei)return Ei;const{appName:e,appVersion:t,userAgent:i}=window.navigator;let n,s=i.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(s[1])?(n=/\brv[ :]+(\d+)/g.exec(i)||[""],Ei=`IE ${n[1]||""}`,Ei):"Chrome"===s[1]&&(n=i.match(/\b(OPR|Edge)\/(\d+)/),null!==n)?(Ei=n.slice(1).join(" ").replace("OPR","Opera"),Ei):(s=s[2]?[s[1],s[2]]:[e,t,"-?"],n=i.match(/version\/(\d+)/i),null!==n&&s.splice(1,1,n[1]),Ei=s.join(" "),Ei)}isSteamPlatform(){const{userAgent:e}=window.navigator;return e.toLowerCase().indexOf("steam")>-1}};class Ci{init(e={}){return A(this,void 0,void 0,(function*(){const t=new ni.InstantConfigLoader({appName:Z.get("services.instantConfig.appName"),instantConfigEndpoint:Z.get("services.instantConfig.endpoint"),instantConfigVariant:Z.get("wiki.services_instantConfig_variant"),instantConfigFallbackEndpoint:Z.get("services.instantConfig.fallback")}),i=new ni.InstantConfigInterpreter(new ni.BrowserMatcher(Ai.getBrowser()),new ni.DeviceMatcher(Ai.getDeviceType()),new ni.DomainMatcher,new ni.RegionMatcher,qt.make());return this.interpreter=yield t.getConfig().then((e=>(new ni.InstantConfigOverrider).override(L.getURLSearchParams(),e))).then((t=>i.init(t,e,Xt.isProperGeo))),this.repository=this.interpreter.getValues(),q("instant-config-service","instantiated with",this.repository),Gt.on(Ut.AD_ENGINE_INSTANT_CONFIG_CACHE_RESET,(()=>{this.repository=this.interpreter.getValues()}),!1),this}))}get(e,t){return e in this.repository&&void 0!==this.repository[e]?this.repository[e]:t}}const Oi=new class{createScript(e,t=!0,i=null,n={},s={}){const o=document.createElement("script");if(o.async=t,o.defer=!t,o.src=e,Object.keys(n).forEach((e=>{o.setAttribute(e,n[e])})),Object.keys(s).forEach((e=>{o.dataset[e]=s[e]})),"string"==typeof i){const e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(o,e)}else(i||document.body).appendChild(o);return o}loadScript(e,t=!0,i=null,n={},s={}){return new Promise(((o,r)=>{const a=this.createScript(e,t,i,n,s);a.onload=o,a.onerror=r}))}loadAsset(e,t="json"){const i=new XMLHttpRequest;return i.open("GET",e,!0),i.responseType=t,new Promise((e=>{i.addEventListener("timeout",(()=>{e(null)})),i.addEventListener("error",(()=>{e(null)})),i.onreadystatechange=function(){this.readyState===this.DONE&&(200===this.status?e(this.response):e(null))},i.send()}))}loadSync(e){try{const t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),200===t.status&&0!==t.responseText.length&&t.responseText}catch(e){return!1}}};window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[];const Ni=new class{init(){if(!this.instancePromise){const e=Z.get("bidders.prebid.libraryUrl");Oi.loadScript(e,!0,"first"),this.instancePromise=new Promise((e=>window.pbjs.que.push((()=>{q("pbjs-factory","Prebid library loaded"),e(window.pbjs)}))))}return this.instancePromise}};class Pi{constructor(e,t=100,i=0,n=0){this.condition=e,this.noTries=t,this.growingTimeout=i,this.fixedTimeout=n}until(){return A(this,void 0,void 0,(function*(){let e=0,t=this.growingTimeout||this.fixedTimeout,i=this.condition();for(;!i&&e<this.noTries;)yield this.delay(t),i=this.condition(),this.growingTimeout&&(t*=2),e++;return Promise.resolve(i)}))}delay(e){return new Promise((t=>{this.timeoutId=setTimeout(t,e)}))}reset(){this.timeoutId&&window.clearTimeout(this.timeoutId)}}var ki;!function(e){e.CUSTOM_EVENT="customEvent",e.SLOT_ADDED_EVENT="slotAdded",e.SLOT_REQUESTED_EVENT="slotRequested",e.SLOT_LOADED_EVENT="slotLoaded",e.SLOT_VIEWED_EVENT="slotViewed",e.SLOT_RENDERED_EVENT="slotRendered",e.SLOT_VISIBILITY_CHANGED="slotVisibilityChanged",e.SLOT_BACK_TO_VIEWPORT="slotBackToViewport",e.SLOT_LEFT_VIEWPORT="slotLeftViewport",e.SLOT_STATUS_CHANGED="slotStatusChanged",e.DESTROYED_EVENT="slotDestroyed",e.DESTROY_EVENT="slotDestroy",e.HIDDEN_EVENT="slotHidden",e.SHOWED_EVENT="slotShowed",e.VIDEO_VIEWED_EVENT="videoViewed",e.VIDEO_AD_REQUESTED="videoAdRequested",e.VIDEO_AD_ERROR="videoAdError",e.VIDEO_AD_IMPRESSION="videoAdImpression",e.VIDEO_AD_USED="videoAdUsed",e.TEMPLATES_LOADED="Templates Loaded"}(ki||(ki={}));const Di=new class{constructor(){this.adTargeting={},this.onChangeCallbacks=[],this.pageTargetingGroupName="PAGE_TARGETING",U.isDebugMode()&&(window.ads.adTargeting=this.adTargeting)}clear(e=null){const t=e||this.pageTargetingGroupName;this.adTargeting[t]={}}extend(e,t=null){const i=t||this.pageTargetingGroupName;this.adTargeting[i]=this.adTargeting[i]||{},this.adTargeting[i]=Object.assign(this.adTargeting[i],e)}dump(e=null){const t=e||this.pageTargetingGroupName;return this.adTargeting[t]=this.adTargeting[t]||{},this.adTargeting[t]}get(e,t=null){const i=t||this.pageTargetingGroupName;if(this.adTargeting[i])return this.adTargeting[i][e]}set(e,t,i=null){if(void 0!==t){const n=i||this.pageTargetingGroupName;this.adTargeting[n]=this.adTargeting[n]||{},this.adTargeting[n][e]=t,n===this.pageTargetingGroupName&&this.triggerOnChange(e,t)}}remove(e,t=null){const i=t||this.pageTargetingGroupName;this.adTargeting[i]&&this.adTargeting[i][e]&&(delete this.adTargeting[i][e],i===this.pageTargetingGroupName&&this.triggerOnChange(e,null))}onChange(e){this.onChangeCallbacks=this.onChangeCallbacks||[],this.onChangeCallbacks.push(e)}removeListeners(){this.onChangeCallbacks=[]}triggerOnChange(e,t){this.onChangeCallbacks.forEach((i=>{i(e,t)}))}};function Li(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function zi(e){return e?parseFloat(getComputedStyle(e,null).width.replace("px","")):0}function xi(e){return e?parseFloat(getComputedStyle(e,null).height.replace("px","")):0}function Ri(e){let t=!1;const i={display:"",height:""};e.classList.contains("hide")&&(t=!0,i.display=e.style.display,i.height=e.style.height,e.classList.remove("hide"),e.style.display="block",e.style.height="1px");const n=function(e){const t=e.getBoundingClientRect(),i=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop;return{top:t.top+n,left:t.left+i}}(e);return t&&(e.classList.add("hide"),e.style.display=i.display,e.style.height=i.height),n}function ji(e){return Ri(e).top}function Vi(e){return Ri(e).left}function Mi(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)}function Ui(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)}function Bi(e,{topOffset:t=0,bottomOffset:i=0,areaThreshold:n=.5}={}){const s=window.getComputedStyle(e).position;if(["fixed","sticky"].includes(s))return!0;const o=e.offsetHeight,r=ji(e),a=r+o,d=window.scrollY,l=Mi(),c=n*o;return r>=t+d-c&&a<=i+d+l+c}function $i(e,t=[]){if(null===e.offsetParent)return!1;const i=e.offsetHeight,n=ji(e),s=Mi();return t.some((t=>{if(e.previousSibling&&e.previousSibling.isSameNode(t)||e.nextSibling&&e.nextSibling.isSameNode(t))return!0;const o=t.offsetHeight,r=ji(t);return(r<n?n-r-o:r-n-i)<s}))}function Fi(e){return"IFRAME"===e.tagName}function Gi(){try{return window.self!==window.top}catch(e){return!0}}class Hi{static getFirstElementChild(e){return e.firstElementChild}}const Wi="message-bus",qi=new class{constructor(e=window){this.source=e,this.isInitialized=!1,this.callbacks=[]}init(){this.isInitialized||(q(Wi,"Register message listener"),this.source.addEventListener("message",(e=>this.onMessage(e)),!1),this.isInitialized=!0)}register(e,t){this.init(),this.callbacks.push({match:e,fn:t})}onMessage(e){let t,i=0;if(this.isAdEngineMessage(e))for(q(Wi,"Message received",e),i=0;i<this.callbacks.length;i+=1)if(t=this.callbacks[i],this.messageMatch(t.match,e))return q(Wi,"Matching message",e,t),t.fn(this.getDataFromMessage(e).AdEngine),void(t.match.infinite||this.callbacks.splice(i,1))}isAdEngineMessage(e){const t=this.getDataFromMessage(e);return!!t&&!!t.AdEngine}messageMatch(e,t){let i=!0;if(e.origin&&!e.origin.includes(t.origin))return!1;if(e.keys){const n=this.getDataFromMessage(t).AdEngine;e.keys.forEach((e=>{i=i&&n[e]}))}return i}getDataFromMessage(e){if("string"==typeof e.data)try{return JSON.parse(e.data)}catch(e){return}return e.data}},Ki="slot-tweaker";class Yi{forceRepaint(e){return e.offsetWidth}addDefaultClasses(e){const t=e.getElement(),i=e.getConfigProperty("defaultClasses")||[];t&&i.length&&i.forEach((e=>t.classList.add(e)))}collapse(e){const t=e.getElement();t.style.maxHeight=`${t.scrollHeight}px`,this.forceRepaint(t),t.classList.add("slot-animation"),t.style.maxHeight="0"}expand(e){const t=e.getElement();t.style.maxHeight=`${t.offsetHeight}px`,t.classList.remove("hide"),t.classList.add("slot-animation"),t.style.maxHeight=`${t.scrollHeight}px`}makeResponsive(e,t=null,i=!0){return A(this,void 0,void 0,(function*(){e.addClass("slot-responsive"),q(Ki,"make responsive",e.getSlotName());const n=yield this.onReady(e);return this.setPaddingBottom(n,t,i),n}))}setPaddingBottom(e,t,i=!0){let n,s=t;if(Fi(e)){if(!t){const t=e.contentWindow.document.body.scrollHeight;s=e.contentWindow.document.body.scrollWidth/t}n=e.parentElement}else n=e;i&&(n.style.paddingBottom=100/s+"%")}onReady(e){function t(){const t=e.getIframe();if(!t)throw new Error("Cannot find iframe element");return t}return e.getConfigProperty("useGptOnloadEvent")?e.loaded.then(t):new Promise((i=>{const n=t();let s=null;try{s=n.contentWindow.document}catch(t){q(Ki,e.getSlotName(),"loaded through SafeFrame")}s&&"complete"===s.readyState?i(n):n.addEventListener("load",(()=>i(n)))}))}adjustIframeByContentSize(e){return A(this,void 0,void 0,(function*(){const t=yield this.onReady(e);if(Fi(t)){const i=t.contentWindow.document.body.scrollHeight,n=t.contentWindow.document.body.scrollWidth;t.width=n.toString(),t.height=i.toString(),q(Ki,"adjust size",e.getSlotName(),n,i)}return t}))}registerMessageListener(e){qi.register({keys:["action","slotName"],infinite:!0},(t=>{if(!t.slotName)return void q(Ki,"Missing slot name");const i=e(t.slotName);switch(t.action){case"expand":this.expand(i);break;case"collapse":this.collapse(i);break;case"hide":i.hide();break;case"show":i.show();break;case"make-responsive":this.makeResponsive(i,t.aspectRatio);break;default:q(Ki,"Unknown action",t.action)}}))}setDataParam(e,t,i){const n=e.getElement();n&&(n.dataset[t]="string"==typeof i?i:JSON.stringify(i))}}Yi.SLOT_CLOSE_IMMEDIATELY="force-close";const Xi=new Yi,Ji="slot-service",Qi=new class{constructor(){this.slotStatuses={},this.slotStates={},this.slots={}}add(e){const t=e.getSlotName();this.slots[t]=e,!1===this.slotStates[t]&&e.disable(this.slotStatuses[t]),!0===this.slotStates[t]&&e.enable(),Xi.addDefaultClasses(e),Gt.emit(Ut.AD_ENGINE_SLOT_ADDED,{name:t,slot:e,state:ki.SLOT_ADDED_EVENT})}removeAll(){Object.values(this.slots).forEach((e=>this.remove(e)))}remove(e){const t=e.getSlotName();Z.removeListeners(`slots.${t}`),e.destroy(),delete this.slots[t],delete this.slotStates[t],delete this.slotStatuses[t]}get(e){if(e.includes("gpt_unit_")){const t=this.getGptAdSlot(e);return this.setGptAdSlotInsertId(t,e),t}const[t]=e.split(",");if(this.slots[t])return this.slots[t];let i=null;return this.forEach((e=>{if(null!==i)return;const n=Di.get("pos",e.getSlotName())||[];n!==t&&n[0]!==t||(i=e)})),i}getSlotId(e){let t=Z.get(`slots.${e}.uid`);return t||(t=Li(),Z.set(`slots.${e}.uid`,t)),t}forEach(e){Object.keys(this.slots).forEach((t=>{e(this.slots[t])}))}enable(e){this.setState(e,!0)}disable(e,t=null){this.setState(e,!1,t)}getState(e){return!1!==this.slotStates[e]}setState(e,t,i=null){const n=this.get(e);this.slotStates[e]=t,this.slotStatuses[e]=i,n?(n.setStatus(i),t?n.enable():n.disable()):t?Z.set(`slots.${e}.disabled`,!1):Z.set(`slots.${e}.disabled`,!0),q(Ji,"set state",e,t)}hasViewportConflict(e){if(!e.hasDefinedViewportConflicts()||null===e.getElement())return!1;const t=e.getElement().offsetHeight,i=ji(e.getElement()),n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,s=e.getViewportConflicts().some((e=>function(e,t,i,n){const s=document.getElementById(n);if(null===s.offsetParent)return!1;const o=s.offsetHeight,r=ji(s);return(r<t?t-r-o:r-t-e)<i}(t,i,n,e)));return q(Ji,"hasViewportConflict",e.getSlotName(),s),s}get slotConfigsMap(){return Z.get("slots")||{}}getFirstCallSlotNames(){return Object.entries(this.slotConfigsMap).filter((([,e])=>!!e.firstCall)).map((([e])=>e))}getNonFirstCallSlotNames(){return Object.entries(this.slotConfigsMap).filter((([,e])=>!e.firstCall)).map((([e])=>e))}getEnabledSlotNames(){return Object.entries(this.slotConfigsMap).filter((([,e])=>!e.disabled)).map((([e])=>e))}pushSlot(e){const t=Gn();t?(q(Ji,`Push slot ${e.id} to adStack.`),t.push({id:e.id})):q(Ji,`Could not push slot ${e.id} because adStack is not present.`)}getGptAdSlot(e){const t=Z.get("custom.serverPrefix"),i=new RegExp(`/${t?`${t}.`:""}[A-Z]+/(?<slotName>[a-z_]+)/`),n=e.match(i);try{return this.slots[n.groups.slotName]}catch(e){throw new Error("Unsupported GPT Template slot id format")}}setGptAdSlotInsertId(e,t){e.setConfigProperty("insertId",t)}},Zi=new class{constructor(){this.serviceName="scroll-listener",this.callbacks={}}init(){let e=!1;document.addEventListener("scroll",(t=>{e||(window.requestAnimationFrame((()=>{e=!1,Object.keys(this.callbacks).forEach((e=>{"function"==typeof this.callbacks[e]&&this.callbacks[e](t.type,e)}))})),e=!0)})),q(this.serviceName,"Service initialised.")}addSlot(e,{threshold:t,distanceFromTop:i}={}){const n=document.getElementById(e);n?void 0!==t||void 0!==i?void 0===t||void 0===i?(q(this.serviceName,`Add slot ${e}.`),this.addCallback(((e,s)=>{const o=window.scrollY||window.pageYOffset||document.documentElement.scrollTop;if(void 0!==t){const e=ji(n);o+Mi()>e-t&&(this.removeCallback(s),Qi.pushSlot(n))}else o>i&&(this.removeCallback(s),Qi.pushSlot(n))}))):q(this.serviceName,"either threshold or distanceFromTop can be initialised, not both"):q(this.serviceName,"either threshold or distanceFromTop must be initialised"):q(this.serviceName,`Node with id ${e} not found.`)}addCallback(e){const t=this.getUniqueId();return this.callbacks[t]=e,t}removeCallback(e){delete this.callbacks[e]}getUniqueId(){return(16777216*(1+Math.random())).toString(16).substring(1)}};var en;!function(e){e.STATUS_BLOCKED="blocked",e.STATUS_COLLAPSE="collapse",e.STATUS_DISABLED="disabled",e.STATUS_FORCED_COLLAPSE="forced_collapse",e.STATUS_FORCED_SUCCESS="forced_success",e.STATUS_SKIP_TEMPLATE="skip_template",e.STATUS_MANUAL="manual",e.STATUS_REQUESTED="requested",e.STATUS_ERROR="error",e.STATUS_SUCCESS="success",e.STATUS_CLICKED="clicked",e.STATUS_VIEWPORT_CONFLICT="viewport-conflict",e.STATUS_HIVI_COLLAPSE="hivi-collapse",e.STATUS_HEAVY_AD_INTERVENTION="heavy-ad-intervention",e.STATUS_UNKNOWN_INTERVENTION="unknown-intervention"}(en||(en={}));const tn="true"===L.get("tracking-opt-in-status"),nn="true"===L.get("opt-out-sale-status"),sn=function(){return tn||!!Z.get("options.trackingOptIn")},on=function(){return!!Z.get("options.isSubjectToCcpa")||nn||!!Z.get("options.optOutSale")},rn="btf-blocker",an=new class{constructor(){this.firstCallEnded=!1,this.unblockedSlotNames=[],this.resetState()}resetState(){this.firstCallEnded=!1,this.unblockedSlotNames=[],this.slotsQueue=new ei,this.slotsQueue.onItemFlush((({adSlot:e,fillInCallback:t})=>{q(rn,e.getSlotName(),"Filling delayed second call slot"),this.disableAdSlotIfHasConflict(e),this.fillInSlotIfEnabled(e,t)})),window.ads&&window.ads.runtime&&(window.ads.runtime.disableBtf=!1,window.ads.runtime.disableSecondCall=!1)}init(){Gt.onSlotEvent(ki.SLOT_RENDERED_EVENT,(({slot:e})=>{q(rn,e.getSlotName(),"Slot rendered"),!this.firstCallEnded&&e.isFirstCall()&&this.finishFirstCall()})),0===Qi.getFirstCallSlotNames().filter((e=>Qi.getEnabledSlotNames().includes(e))).length&&this.finishFirstCall()}finishFirstCall(){this.firstCallEnded=!0,q(rn,"first call queue finished"),window.ads.runtime.disableSecondCall?this.disableSecondCall([]):window.ads.runtime.disableBtf&&this.disableSecondCall([...this.unblockedSlotNames]),Gt.on(Ut.AD_ENGINE_UAP_LOAD_STATUS,(()=>{this.slotsQueue.flush()}))}disableSecondCall(e){const t=Z.get("slots")||{};q(rn,"second call queue disabled"),Object.keys(t).forEach((i=>{t[i].firstCall||-1!==e.indexOf(i)||Qi.disable(i,en.STATUS_BLOCKED)}))}push(e,t){if(!this.firstCallEnded&&!e.isFirstCall())return this.slotsQueue.push({adSlot:e,fillInCallback:t}),void q(rn,e.getSlotName(),"second call slot pushed to queue");this.disableAdSlotIfHasConflict(e),this.fillInSlotIfEnabled(e,t)}disableAdSlotIfHasConflict(e){Qi.hasViewportConflict(e)&&Qi.disable(e.getSlotName(),en.STATUS_VIEWPORT_CONFLICT)}fillInSlotIfEnabled(e,t){e.isEnabled()?(q(rn,e.getSlotName(),"Filling in slot"),t(e)):q(rn,e.getSlotName(),"Slot blocked",e.getStatus())}unblock(e){q(rn,e,"Unblocking slot"),this.unblockedSlotNames.push(e),Qi.enable(e)}},dn=new class{updateOnCreate(e){Xi.setDataParam(e,"gptPageParams",Di.dump()),Xi.setDataParam(e,"gptSlotParams",e.getTargeting())}updateOnRenderEnd(e){!function(e){const t="top_leaderboard"==e.getSlotName(),i=void 0!==window.smTracking&&"function"==typeof window.smTracking.recordRenderedAd;t&&i&&window.smTracking.recordRenderedAd(e),delete window.smTracking}(e),Xi.setDataParam(e,"gptAdvertiserId",e.advertiserId),Xi.setDataParam(e,"gptOrderId",e.orderId),Xi.setDataParam(e,"gptCreativeId",e.creativeId),Xi.setDataParam(e,"gptLineItemId",e.lineItemId),Xi.setDataParam(e,"gptCreativeSize",e.creativeSize)}},ln=(e=0)=>new Promise(((t,i)=>{"number"==typeof e?setTimeout(t,e):i(new Error("Delay value must be a number."))}));function cn(e,...t){return new Promise(((i,n)=>{"function"==typeof e?setTimeout((()=>i(e(...t))),0):n(new Error("Expected a function."))}))}function un(e,t,i={}){const n="object"==typeof e&&"function"==typeof e.addEventListener,s="boolean"==typeof i?{capture:i}:Object.assign({},i);return new Promise(((i,o)=>{n?e.addEventListener(t,i,Object.assign(Object.assign({},s),{once:!0})):o(new Error("Emitter does not have `addEventListener` nor `once` method."))}))}function pn(e){return new Promise(((t,i)=>{setTimeout(i,e)}))}function hn(e,t=2e3){return Promise.race([new Promise(e),pn(t)])}function gn(){let e,t;const i=new Promise(((i,n)=>{e=i,t=n}));return i.resolve=e,i.reject=t,i}var mn;!function(e){e.site="site",e.page="page",e.tracking="tracking",e.partners="partners"}(mn||(mn={}));const fn=new class{constructor(){this.logGroup="GlobalContextService",window.fandomContext||this.createEmptyContext()}createEmptyContext(){q(this.logGroup,"Creating empty fandomContext"),window.fandomContext={site:{},page:{},tracking:{},partners:{},targeting:{}}}isObject(e){return"object"==typeof e&&!Array.isArray(e)}merge(e,t){const i=i=>this.isObject(t[i])&&Object.prototype.hasOwnProperty.call(e,i)&&this.isObject(e[i]),n=Object.getOwnPropertyNames(t).map((n=>({[n]:i(n)?this.merge(e[n],t[n]):t[n]}))).reduce(((e,t)=>Object.assign(Object.assign({},e),t)),{});return Object.assign(Object.assign({},e),n)}setValue(e,t){window.fandomContext||this.createEmptyContext(),window.fandomContext[e]||(window.fandomContext[e]={}),window.fandomContext[e]=this.merge(window.fandomContext[e],t)}getValue(e,t){if(!window.fandomContext)return;const i=window.fandomContext[e];if(i)return i[t];q(this.logGroup,"Attempting to retrieve invalid category in context!")}};function vn(){return fn.getValue(mn.partners,"directedAtChildren")}function bn(e){return function(t,i,n){const s=n.value;return n.value=e.call(this,s),n}}const yn="gpt-size-map";class _n{constructor(e=[]){this.sizeMap=e,q(yn,this.sizeMap,"creating new size map")}addSize(e,t){q(yn,e,t,"adding new size mapping"),this.sizeMap.push({viewportSize:e,sizes:t})}build(){q(yn,this.sizeMap,"creating GPT size mapping builder");const e=window.googletag&&window.googletag.sizeMapping();return e?(this.sizeMap.forEach((({viewportSize:t,sizes:i})=>{e.addSize(t,i)})),e.build()):(q(yn,"cannot create GPT size mapping builder"),null)}isEmpty(){return!this.sizeMap.length}mapAllSizes(e){return new _n(this.sizeMap.map((({viewportSize:t,sizes:i},n)=>{const s=e(i,t,n);return q(yn,t,i,s,"mapping viewport sizes"),{viewportSize:t,sizes:s}})))}toString(){q(yn,this.sizeMap,"casting to string");const e={};return this.sizeMap.forEach((({viewportSize:t,sizes:i})=>{e[t.join("x")]=i})),JSON.stringify(e)}}var Sn;const wn="gpt-provider",En="AdX",In=["https://tpc.googlesyndication.com","https://googleads.g.doubleclick.net"],Tn=[0,0];function An(e){return function(...t){setTimeout((()=>(window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((()=>e.apply(this,t))))))}}let Cn=[],On=!1;function Nn(e){const t=e.slot.getSlotElementId();return Qi.get(t)}class Pn{constructor(){window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],this.init()}isInitialized(){return On}init(){this.isInitialized()||(function(){const e=window.googletag.pubads();function t(t,i){null==i?e.clearTargeting(t):"function"==typeof i?e.setTargeting(t,i()):e.setTargeting(t,i)}!function(){const e=Di.dump()||{};Object.keys(e).forEach((i=>{t(i,e[i])}))}(),Di.onChange(((e,i)=>{null===e?Object.keys(i).forEach((e=>{t(e,i[e])})):t(e,i)}))}(),function(){const e=window.googletag.pubads();e.disableInitialLoad(),e.addEventListener("slotRequested",(e=>{const t=Nn(e);t.setStatus(en.STATUS_REQUESTED),t.emit(ki.SLOT_REQUESTED_EVENT)})),e.addEventListener("slotOnload",(e=>{Nn(e).emit(ki.SLOT_LOADED_EVENT)})),e.addEventListener("slotRenderEnded",(e=>{cn((()=>{const t=Nn(e),i=function(e,t){let i=!1;if(e.isEmpty)return en.STATUS_COLLAPSE;try{i=!!t.contentWindow.document.querySelector}catch(e){q(wn,"getAdType","iframe is not accessible")}return i&&t.contentWindow.AdEngine_adType?t.contentWindow.AdEngine_adType:en.STATUS_SUCCESS}(e,t.getIframe());return function(e){const t=Z.get("templates.sizeOverwritingMap"),i=e.getIframe();if(!t||!i)return;const n=`${i.width}x${i.height}`;t[n]&&(i.width=t[n].originalSize[0].toString(),i.height=t[n].originalSize[1].toString())}(t),t.emit(ki.SLOT_RENDERED_EVENT,{event:e,adType:i},!1)}))})),e.addEventListener("impressionViewable",(e=>{Nn(e).emit(ki.SLOT_VIEWED_EVENT)})),e.addEventListener("slotVisibilityChanged",(function(e){const t=Nn(e);return null==t?void 0:t.emit(ki.SLOT_VISIBILITY_CHANGED,e)})),e.addEventListener("slotVisibilityChanged",(function(e){const t=Nn(e);if(e.inViewPercentage>50)return null==t?void 0:t.emit(ki.SLOT_BACK_TO_VIEWPORT,e)})),e.addEventListener("slotVisibilityChanged",(function(e){const t=Nn(e);if(e.inViewPercentage<50)return null==t?void 0:t.emit(ki.SLOT_LEFT_VIEWPORT,e)})),window.googletag.enableServices()}(),this.setupRestrictDataProcessing(),this.setPPID(),Gt.on(Ut.PLATFORM_BEFORE_PAGE_CHANGE,(()=>this.updateCorrelator()),!1),Gt.onSlotEvent(ki.DESTROY_EVENT,(({slot:e})=>{this.destroySlot(e.getSlotName()),e.emit(ki.DESTROYED_EVENT)})),On=!0)}setupRestrictDataProcessing(){const e=window.googletag.pubads(),t={restrictDataProcessing:on()};vn()&&(t.childDirectedTreatment=!0),e.setPrivacySettings(t)}setPPID(){const e=Di.get("intent_iq_ppid","intent_iq");e||null===Di.get("intent_iq_ppid","intent_iq")||Gt.emit(Ut.INTENTIQ_PPID_NOT_SET_ON_TIME);const t=e||Di.get("ppid");t&&window.googletag.pubads().setPublisherProvidedId(t)}fillIn(e){const t=Gn()||[];an.push(e,((...e)=>{this.fillInCallback(...e)})),0===t.length&&this.flush()}fillInCallback(e){const t=e.getSlotName(),i=e.getTargeting(),n=new _n(e.getSizes()),s=this.createGptSlot(e,n);s.addService(window.googletag.pubads()).setCollapseEmptyDiv(!0),this.applyTargetingParams(s,i),dn.updateOnCreate(e),e.updateWinningPbBidderDetails(),window.googletag.display(t),Cn.push(s),e.isFirstCall()||this.flush(),q(wn,t,"slot added")}createGptSlot(e,t){return e.isOutOfPage()?e.getConfigProperty("outOfPageFormat")?window.googletag.defineOutOfPageSlot(e.getAdUnit(),window.googletag.enums.OutOfPageFormat[e.getConfigProperty("outOfPageFormat")]):window.googletag.defineOutOfPageSlot(e.getAdUnit(),e.getSlotName()):window.googletag.defineSlot(e.getAdUnit(),e.getDefaultSizes(),e.getSlotName()).defineSizeMapping(t.build())}applyTargetingParams(e,t){!function(e){const t=e.pos.constructor==Array&&"top_leaderboard"==e.pos[0]||"top_leaderboard"==e.pos,i=void 0!==window.smTracking&&window.smTracking.recordRequestTargeting;t&&i&&window.smTracking.recordRequestTargeting(e)}(t),Object.keys(t).forEach((i=>{let n=t[i];n=Array.isArray(n)?n.map((e=>e.toString())):n.toString(),e.setTargeting(i,n)}))}updateCorrelator(){window.googletag.pubads().updateCorrelator()}flush(){Cn.length&&(window.googletag.pubads().refresh(Cn,{changeCorrelator:!1}),Cn=[])}destroySlot(e){const t=window.googletag.pubads().getSlots().find((t=>e===t.getSlotElementId()));return t?(this.destroyGptSlot(t),!0):(q(wn,"destroySlot","slot doesn't return element id",e),!1)}destroyGptSlot(e){q(wn,"destroySlot",e),window.googletag.destroySlots([e])||q(wn,"destroySlot",e,"failed")}static refreshSlot(e){const t=window.googletag.pubads().getSlots().find((t=>t.getSlotElementId()===e.getSlotName()));t.clearTargeting();const i=window.googletag.sizeMapping().addSize(Tn,e.getCreativeSizeAsArray()).build();t.defineSizeMapping(i),window.googletag.pubads().refresh([t])}}function kn(e,t,i){var n=fe(e)||t||i?{next:e,error:t,complete:i}:e;return n?Xe((function(e,t){var i;null===(i=n.subscribe)||void 0===i||i.call(n);var s=!0;e.subscribe(Je(t,(function(e){var i;null===(i=n.next)||void 0===i||i.call(n,e),t.next(e)}),(function(){var e;s=!1,null===(e=n.complete)||void 0===e||e.call(n),t.complete()}),(function(e){var i;s=!1,null===(i=n.error)||void 0===i||i.call(n,e),t.error(e)}),(function(){var e,t;s&&(null===(e=n.unsubscribe)||void 0===e||e.call(n)),null===(t=n.finalize)||void 0===t||t.call(n)})))})):He}E([bn(An),T("design:type",Function),T("design:paramtypes",[]),T("design:returntype",void 0)],Pn.prototype,"init",null),E([bn(An),T("design:type",Function),T("design:paramtypes",[Object]),T("design:returntype",void 0)],Pn.prototype,"fillIn",null),E([bn(An),T("design:type",Function),T("design:paramtypes",[]),T("design:returntype",void 0)],Pn.prototype,"updateCorrelator",null),E([bn(An),T("design:type",Function),T("design:paramtypes",["function"==typeof(Sn="undefined"!=typeof googletag&&googletag.Slot)?Sn:Object]),T("design:returntype",void 0)],Pn.prototype,"destroyGptSlot",null);const Dn=new class{constructor(){this.templates={}}setInitializer(e){this.initializer=e}register(e,t=null){if("function"!=typeof e.getName)throw new Error("Template does not implement getName method.");const i=e.getName();let n=Z.get(`templates.${i}`)||{};"function"==typeof e.getDefaultConfig&&(n=Object.assign(Object.assign({},e.getDefaultConfig()),n)),t&&(n=Object.assign(Object.assign({},n),t)),Z.set(`templates.${i}`,n),this.templates[i]=e}init(e,t=null,i={}){var n;if(null===(n=this.initializer)||void 0===n?void 0:n.has(e))return this.initializer.init(e,t,i);if(q("template-service","Load template",e,t,i),!this.templates[e])throw new Error(`Template ${e} does not exist.`);return i&&("string"==typeof i.slotName||i.slotName instanceof String)&&(i.slotName=i.slotName.split(",").shift()),new this.templates[e](t).init(i)}subscribeCommunicator(){Gt.action$.pipe(Ft(Gt.getGlobalAction(Ut.GAM_LOAD_TEMPLATE)),kn((({payload:e})=>{const t=Qi.get(e.slotName);this.init(e.type,t,e)}))).subscribe()}},Ln=new class{build(e,t={}){const i=e.match(/{(.+?)}/g);let n=e;return i&&i.forEach((e=>{const i=e.replace("{","").replace("}",""),s=Z.get(i),o=i.split(".");let r,a,d=t[o[0]];if(d)for(r=1;r<o.length;r+=1){if(a=o[r],void 0===d[a]){d=void 0;break}d=d[a]}void 0===d&&i.startsWith("targeting.")&&(d=Di.get(i.replace("targeting.",""))),void 0===d&&(d=s),void 0!==d&&(n=n.replace(e,d))})),n}},zn="ae-translatable-label";class xn{constructor(e){this.customIframe=null,this.element=null,this.status=null,this.isEmpty=!0,this.advertiserId=null,this.orderId=null,this.creativeId=null,this.creativeSize=null,this.lineItemId=null,this.winningBidderDetails=null,this.trackStatusAfterRendered=!1,this.slotViewed=!1,this.requested=null,this.loaded=null,this.rendered=null,this.viewed=null,this.logger=(...e)=>q(xn.LOG_GROUP,...e),this.config=Z.get(`slots.${e.id}`)||{},this.enabled=!this.config.disabled,this.config.uid||Z.set(`slots.${e.id}.uid`,Li()),this.config.slotName=this.config.slotName||e.id,this.config.slotNameSuffix=this.config.slotNameSuffix||"",this.setUpSlotTargeting(),delete this.config.targeting,this.requested=new Promise((e=>{Gt.onSlotEvent(ki.SLOT_REQUESTED_EVENT,(()=>{this.pushTime=(new Date).getTime(),e()}),this.getSlotName())})),this.loaded=new Promise((e=>{Gt.onSlotEvent(ki.SLOT_LOADED_EVENT,(()=>{Xi.setDataParam(this,"slotLoaded",!0),e()}),this.getSlotName())})),this.rendered=new Promise((e=>{Gt.onSlotEvent(ki.SLOT_RENDERED_EVENT,(({payload:t})=>{const{event:i,adType:n}=t;this.setupSizesTracking(n),this.updateOnRenderEnd(i,n),e()}),this.getSlotName())})),this.viewed=new Promise((e=>{Gt.onSlotEvent(ki.SLOT_VIEWED_EVENT,(()=>{Xi.setDataParam(this,"slotViewed",!0),e()}),this.getSlotName())})).then((()=>{this.slotViewed=!0})),this.addClass(xn.AD_CLASS),this.enabled||this.hide()}setUpSlotTargeting(){const e=this.config.targeting||{};e.src=e.src||Z.get("src"),e.pos=e.pos||this.getSlotName(),e.rv=e.rv||"1",Di.extend(e,this.getSlotName())}getAdUnit(){return this.adUnit||(this.adUnit=Ln.build(this.config.adUnit||Z.get("adUnitId"),{slotConfig:this.config})),this.adUnit}getVideoAdUnit(){return Ln.build(this.config.videoAdUnit||Z.get("vast.adUnitId"),{slotConfig:this.config})}getElement(){return this.element||(this.element=document.getElementById(this.getSlotName())),this.element}getPlaceholder(){var e;const t=null===(e=this.getElement())||void 0===e?void 0:e.parentElement;return(null==t?void 0:t.classList.contains(xn.AD_SLOT_PLACEHOLDER_CLASS))?t:null}getAdLabel(e){var t;if(e){const t=document.querySelector(e);return null==t?void 0:t.querySelector(`.${zn}`)}return null===(t=this.getPlaceholder())||void 0===t?void 0:t.querySelector(`.${zn}`)}getAdContainer(){const e=this.getElement();return e?e.querySelector('div[id*="_container_"]'):null}getIframe(){const e=this.getElement();return e?this.customIframe?this.customIframe:e.querySelector('div[id*="_container_"] iframe'):null}overrideIframe(e){this.customIframe=e}getFrameType(){const e=this.getIframe();return e?"true"===e.dataset.isSafeframe?"safe":"regular":null}getCreativeSize(){return Array.isArray(this.creativeSize)?this.creativeSize.join("x"):this.creativeSize}getCreativeSizeAsArray(){if(!this.creativeSize)return null;const e=Array.isArray(this.creativeSize)?this.creativeSize:this.creativeSize.split("x").map(Number);return[e[0],e[1]]}getMainPositionName(){const{pos:e=""}=Di.dump(this.getSlotName());return(Array.isArray(e)?e:e.split(","))[0].toLowerCase()}getUid(){return this.config.uid}getSlotName(){return this.config.slotName}getSizes(){return this.config.sizes}get targeting(){return Di.dump(this.getSlotName())}getTargeting(){return this.parseTargetingParams(Di.dump(this.getSlotName()))}parseTargetingParams(e){const t={};return Object.keys(e).forEach((i=>{let n=e[i];"function"==typeof n&&(n=n()),null!==n&&(t[i]=n)})),t}getDefaultSizes(){return this.config.defaultSizes}getVideoSizes(){return this.config.videoSizes}getViewportConflicts(){return this.config.viewportConflicts||[]}hasDefinedViewportConflicts(){return this.getViewportConflicts().length>0}getStatus(){return this.status}getPushTime(){return this.pushTime}setStatus(e=null){this.status=e,null!==e&&(this.emit(e),Xi.setDataParam(this,"slotResult",this.getStatus()),this.emit(ki.SLOT_STATUS_CHANGED))}isEnabled(){return this.enabled}isFirstCall(){return!!this.config.firstCall}isViewed(){return this.slotViewed}isOutOfPage(){return!!this.config.outOfPage}isVideo(){return!!this.config.isVideo}getCopy(){return JSON.parse(JSON.stringify(this.config))}getTopOffset(){const e=this.getElement();return e?ji(e):null}enable(){this.enabled=!0}disable(e=null){this.enabled=!1,this.setStatus(e),this.hide()}destroy(){this.disable(),this.emit(ki.DESTROY_EVENT)}getConfigProperty(e){return Z.get(`slots.${this.config.slotName}.${e}`)}getTargetingProperty(e){return Di.get(e,this.getSlotName())}setConfigProperty(e,t){Z.set(`slots.${this.config.slotName}.${e}`,t)}setTargetingConfigProperty(e,t){Di.set(e,t,this.config.slotName)}success(e=en.STATUS_SUCCESS){this.getConfigProperty("showManually")||this.show(),this.setStatus(e);const t=this.getConfigProperty("skipTemplates")?[]:this.getConfigProperty("defaultTemplates")||[];t&&t.length&&t.forEach((e=>Dn.init(e,this))),this.emit(ki.TEMPLATES_LOADED,t),Gt.emit(Ut.AD_ENGINE_SLOT_LOADED,{name:this.getSlotName(),state:en.STATUS_SUCCESS}),this.setupDelayedCollapse()}setupDelayedCollapse(){Gt.on(Ut.GAM_AD_DELAYED_COLLAPSE,(e=>{e.source.includes(this.getSlotName())&&this.collapse()}),!1)}collapse(e=en.STATUS_COLLAPSE){Gt.emit(Ut.AD_ENGINE_SLOT_LOADED,{name:this.getSlotName(),state:en.STATUS_COLLAPSE}),this.hide(),this.setStatus(e)}updateWinningPbBidderDetails(){this.getTargetingProperty("hb_bidder")&&this.getTargetingProperty("hb_pb")?this.winningBidderDetails={name:this.getTargetingProperty("hb_bidder"),price:this.getTargetingProperty("hb_pb")}:this.winningBidderDetails=null}updateWinningA9BidderDetails(){this.getTargetingProperty("amznbid")?this.winningBidderDetails={name:"a9",price:this.getTargetingProperty("amznbid")}:this.winningBidderDetails=null}updateOnRenderEnd(e,t){if(!e)return;let i=e.creativeId,n=e.lineItemId;if(this.isEmpty=e.isEmpty,!e.isEmpty&&e.slot){const t=e.slot.getResponseInformation();t&&(this.orderId=t.campaignId,this.advertiserId=t.advertiserId,e.sourceAgnosticCreativeId&&e.sourceAgnosticLineItemId?(this.logger("set line item and creative id to source agnostic values"),i=e.sourceAgnosticCreativeId,n=e.sourceAgnosticLineItemId):null===t.creativeId&&null===t.lineItemId&&(i=En,n=En))}switch(this.creativeId=i,this.lineItemId=n,this.creativeSize=this.isOutOfPage()?"out-of-page":e.size,dn.updateOnRenderEnd(this),t){case en.STATUS_COLLAPSE:case en.STATUS_FORCED_COLLAPSE:this.collapse(t);break;case en.STATUS_MANUAL:this.setStatus(t);break;case en.STATUS_SKIP_TEMPLATE:this.setConfigProperty("skipTemplates",!0),this.success();break;default:this.success()}}addClass(e){const t=this.getElement();return!!t&&(t.classList.add(e),!0)}removeClass(e){const t=this.getElement();return!!t&&(t.classList.remove(e),!0)}hide(){this.addClass(xn.HIDDEN_CLASS)&&this.emit(ki.HIDDEN_EVENT)}show(){this.removeClass(xn.HIDDEN_CLASS)&&this.emit(ki.SHOWED_EVENT)}emit(e,t={},i=!0){Gt.emit(Ut.AD_ENGINE_SLOT_EVENT,{event:e.toString(),slot:this,adSlotName:this.getSlotName(),payload:i?JSON.parse(JSON.stringify(t)):t}),this.logger(this.getSlotName(),e,t)}emitEvent(e=null){null!==e&&this.emit(ki.CUSTOM_EVENT,{status:e})}setupSizesTracking(e){const t=this.getIframe();if(t&&e.includes("success")&&window.ResizeObserver){const e=new ResizeObserver((t=>{for(const i of t){const t=Math.floor(i.target.clientWidth),n=Math.floor(i.target.clientHeight);t>0&&n>0&&(1!=t||1!=n)&&(Gt.emit(Ut.AD_ENGINE_AD_RESIZED,{slot:this,sizes:{width:t,height:n}}),e.unobserve(i.target))}}));e.observe(t)}}}xn.LOG_GROUP="AdSlot",xn.AD_CLASS="gpt-ad",xn.AD_SLOT_PLACEHOLDER_CLASS="ad-slot-placeholder",xn.HIDDEN_CLASS="hide";const Rn="nativo";class jn{constructor(e){this.context=e}isEnabled(){const e=this.context.get("services.nativo.enabled")&&this.context.get("wiki.opts.enableNativeAds");return jn.log("Is Nativo enabled?",e),e}load(){jn.log("Loading Nativo API..."),Oi.loadScript("//s.ntv.io/serve/load.js",!0,null,{},{ntvSetNoAutoStart:""}).then((()=>{jn.log("Nativo API loaded."),this.watchNtvEvents(),this.watchPrebidNativeEvents()}))}scrollTriggerCallback(e,t){if(e.isLoaded)jn.log(Rn,"Fan Takeover on the page");else{if(!1!==e.isLoaded||"ruap"!==e.adProduct||!this.context.get("custom.hasFeaturedVideo"))return this.isDisabledInNoAdsExperiment(t)?(jn.log(Rn,`Slot disabled due to the experiment: ${t}`),void("ucp_mobile"!==Di.get("skin")&&document.getElementById(t)?document.getElementById(t).id="":document.getElementById(t)&&document.getElementById(t).remove())):void this.context.push("state.adStack",{id:t});jn.log(Rn,'"Fan Takeover" on the featured page')}}replaceAndShowSponsoredFanAd(){const e=document.getElementById(jn.FEED_AD_SLOT_NAME),t=document.querySelector(".recirculation-prefooter__item.is-sponsored.can-nativo-replace");e&&t?(t.replaceWith(e),jn.log("Replacing sponsored element with Nativo feed ad")):jn.log("Could not replace sponsored element with Nativo feed ad")}static log(...e){q(Rn,...e)}replaceWithAffiliateUnit(){this.sendNativoStatus(en.STATUS_DISABLED)}sendNativoStatus(e){const t={event:e,adSlotName:"",payload:{adLocation:"",provider:"nativo"}};Gt.dispatch(Gt.getGlobalAction(Ut.AD_ENGINE_SLOT_EVENT)(t))}isDisabledInNoAdsExperiment(e){return this.context.get("state.noAdsExperiment.unitName")===e}watchNtvEvents(){var e,t,i,n;null===(t=null===(e=window.ntv.Events)||void 0===e?void 0:e.PubSub)||void 0===t||t.subscribe("noad",(e=>{const t=jn.AD_SLOT_MAP[e.data[0].id];this.handleNtvNativeEvent(e,t,en.STATUS_COLLAPSE),t==jn.INCONTENT_AD_SLOT_NAME&&Gt.emit(Ut.NO_NATIVO_AD,{slotName:t})})),null===(n=null===(i=window.ntv.Events)||void 0===i?void 0:i.PubSub)||void 0===n||n.subscribe("adRenderingComplete",(e=>{const t=jn.extractSlotIdFromNativoCompleteEventData(e);this.handleNtvNativeEvent(e,t,en.STATUS_SUCCESS)}))}watchPrebidNativeEvents(){Gt.on(Ut.NO_NATIVE_PREBID_AD,(e=>{e.slotName==jn.INCONTENT_AD_SLOT_NAME&&this.replaceWithAffiliateUnit()}))}static extractSlotIdFromNativoNoAdEventData(e){var t;return(null===(t=e.data[0])||void 0===t?void 0:t.adLocation)?e.data[0].adLocation.substring(1):jn.AD_SLOT_MAP[e.data[0].id]}static extractSlotIdFromNativoCompleteEventData(e){return e.data.placement?jn.AD_SLOT_MAP[e.data.placement]:jn.AD_SLOT_MAP[e.data.id]}handleNtvNativeEvent(e,t,i){if(jn.log("Nativo native event fired",e,t,i),!t)return;const n=Qi.get(t);jn.log("Handling Nativo native event",t,n),n&&n.getSlotName()===t&&(i===en.STATUS_COLLAPSE&&(n.hide(),t===jn.INCONTENT_AD_SLOT_NAME&&this.replaceWithAffiliateUnit()),i===en.STATUS_SUCCESS&&t===jn.FEED_AD_SLOT_NAME&&this.replaceAndShowSponsoredFanAd(),n.getStatus()!==i?n.setStatus(i):jn.log("Slot status already tracked",n.getSlotName(),i))}}jn.INCONTENT_AD_SLOT_NAME="ntv_ad",jn.FEED_AD_SLOT_NAME="ntv_feed_ad",jn.AD_SLOT_MAP={1139703:jn.INCONTENT_AD_SLOT_NAME,1142863:jn.INCONTENT_AD_SLOT_NAME,1142668:jn.FEED_AD_SLOT_NAME,1142669:jn.FEED_AD_SLOT_NAME,456441:jn.FEED_AD_SLOT_NAME};class Vn{create(e,t){const i=this.createEmptyIframe();return e.appendChild(i),t&&(i.contentWindow.document.open(),i.contentWindow.document.write(t),i.contentWindow.document.close()),i}createEmptyIframe(){const e=document.createElement("iframe");return e.height="0",e.width="0",e.border="0px",e.hspace="0",e.vspace="0",e.marginWidth="0",e.marginHeight="0",e.style.border="0",e.scrolling="no",e.frameBorder="0",e.src="about:blank",e.style.display="inline",e.style.overflow="hidden",e}}class Mn{constructor(){this.iframeBuilder=new Vn}fillIn(e){return A(this,void 0,void 0,(function*(){const t=yield Ni.init();Gt.action$.pipe(Ft(Gt.getGlobalAction(Ut.BIDDERS_BIDDING_DONE)),xt((t=>"prebid"===t.provider&&t.slotName===e.getSlotName())),Rt(1)).subscribe((()=>{var i,n;const s=this.getIframeDoc(e),o=this.getAdId(e);s&&o&&(t.renderAd(s,o),null===(n=null===(i=e.getElement())||void 0===i?void 0:i.classList)||void 0===n||n.remove("hide"),e.success(),q("prebidium-provider",e.getSlotName(),"slot added"))}))}))}getIframeDoc(e){return this.iframeBuilder.create(e.getElement()).contentWindow.document}getAdId(e){return Di.get("hb_adid",e.getSlotName())}}class Un{constructor(e){this.ntvApi=e||{},this.ntvApi.cmd=this.ntvApi.cmd||[]}fillIn(e){return q("nativo",`Filling ${e.getSlotName()} by pushing Nativo's command queue`),this.getQueue().push((()=>{window.PostRelease.Start()})),!0}getQueue(){return this.ntvApi.cmd}}const Bn="slot-refresher",$n={timeoutMS:3e4,slots:[]},Fn=new class{constructor(){this.slotsInTheViewport=[]}log(...e){q(Bn,...e)}refreshSlot(e){this.config.slots.includes(e.getSlotName())&&setTimeout((()=>{if(e.isEnabled()){if(this.log(`${e.getSlotName()} will be refreshed.`),this.slotsInTheViewport.includes(e.getSlotName()))return this.log(`refreshing ${e.getSlotName()}`),void Pn.refreshSlot(e);this.log(`${e.getSlotName()} waiting for being in viewport.`),function(e){window.googletag.pubads().addEventListener("slotVisibilityChanged",(function t(i){i.slot.getSlotElementId()===e.getSlotName()&&(q(Bn,`${e.getSlotName()} back in the viewport, refreshing.`,i),Pn.refreshSlot(e),window.googletag.pubads().removeEventListener("slotVisibilityChanged",t))}))}(e)}}),this.config.timeoutMS)}setupSlotRefresher(e,t,i){this.config=Object.assign(Object.assign({},$n),e),this.config.slots.length<1||t?i("disabled"):(Gt.onSlotEvent(ki.SLOT_VIEWED_EVENT,(({adSlotName:e,slot:t})=>{i(`${e} viewed`),this.refreshSlot(t)})),Gt.onSlotEvent(ki.SLOT_BACK_TO_VIEWPORT,(({adSlotName:e})=>{this.slotsInTheViewport.push(e)})),Gt.onSlotEvent(ki.SLOT_LEFT_VIEWPORT,(({adSlotName:e})=>{this.slotsInTheViewport=this.slotsInTheViewport.filter((t=>t!==e))})),i("enabled",this.config))}init(){return A(this,void 0,void 0,(function*(){this.setupSlotRefresher(Z.get("services.slotRefresher.config"),yield function(){return A(this,void 0,void 0,(function*(){return new Promise((e=>{Gt.on(Ut.AD_ENGINE_UAP_LOAD_STATUS,(t=>{const i=t.isLoaded||"ruap"===t.adProduct;e(i)}))}))}))}(),this.log)}))}};function Gn(){const e=Z.get("state.adStack");return q("ad-engine","getting adStack: ",...e),e}class Hn{constructor(e=null){this.started=!1,Z.extend(e),window.ads=window.ads||{},window.ads.runtime=window.ads.runtime||{},Gt.on(Ut.PLATFORM_BEFORE_PAGE_CHANGE,(()=>{Qi.removeAll()}),!1)}init(){return A(this,void 0,void 0,(function*(){var e;this.setupProviders(),this.setupAdStack(),an.init(),e=Z.get("options.customAdLoader.globalMethodName"),window[e]=e=>{const t=e.slotName?Qi.get(e.slotName):null;Dn.init(e.type,t,e)},qi.init(),Dn.subscribeCommunicator(),Xi.registerMessageListener(Qi.get.bind(Qi)),this.runAdQueue(),Zi.init(),Fn.init(),this.setupPushOnScrollQueue()}))}setupProviders(){const e=Z.get("state.provider");this.defaultProvider=this.createProvider(e);const t=new jn(Z);t.isEnabled()?t.load():t.replaceWithAffiliateUnit()}setupAdStack(){this.adStack=Gn(),this.adStack.start||Zt(this.adStack,(e=>{const t=new xn(e);this.pushSlot(t)}))}pushSlot(e){const t=Z.get(`slots.${e.getSlotName()}.providers`)||[];if(Qi.add(e),t.length>0){const i=t.shift();this.createProvider(i).fillIn(e)}else this.defaultProvider.fillIn(e)}createProvider(e){switch(e){case"prebidium":return new Mn;case"nativo":return new Un(window.ntv);default:return new Pn}}setupPushOnScrollQueue(){if(Z.get("events.pushOnScroll")){const e=Z.get("events.pushOnScroll.ids")||[],t=new ei(...e);t.onItemFlush((e=>{Zi.addSlot(e,{threshold:Z.get("events.pushOnScroll.threshold")||0})})),Z.set("events.pushOnScroll.ids",t),t.flush()}}runAdQueue(){Gt.on(Ut.AD_ENGINE_PARTNERS_READY,(()=>{this.started||(Gt.emit(Ut.AD_ENGINE_STACK_START),this.started=!0,this.adStack.start())}))}}const Wn=new class{constructor(){this.MAX=100,this.ALWAYS_ALLOWED_THRESHOLD=100}isOutboundTrafficAllowed(e="default"){const t=Z.get(`services.${e}.allowed`);if("boolean"==typeof t)return t;const i=Z.get(`services.${e}.threshold`),n=i>=0&&i<=100?i:this.ALWAYS_ALLOWED_THRESHOLD;let s=!0;return n!==this.ALWAYS_ALLOWED_THRESHOLD&&(s=this.getSeed()<n),n<1&&(s=!1),q("outbound-traffic-restrict",`Outbound traffic for: "${e}" is allowed: ${s}`,`Threshold: ${n}`),Z.set(`services.${e}.allowed`,s),s}getSeed(){return Math.random()*this.MAX}},qn=new class{constructor(){Z.get("services.externalLogger.threshold")||Z.set("services.externalLogger.threshold",1),this.isActive=Wn.isOutboundTrafficAllowed("externalLogger")}log(e,t={}){if(!this.isActive)return;const i=Z.get("services.externalLogger.endpoint");if(!i)return;const n=new FormData;n.set("message",e),Object.keys(t).forEach((e=>{n.set(e,t[e])}));const s=new XMLHttpRequest;s.open("POST",i,!0),s.send(n)}},Kn="IntentIQ",Yn=new class{constructor(){this.loaded=!1,this.fandomId=1187275693,this.intentIQScriptUrl="//script.wikia.nocookie.net/fandom-ae-assets/intentiq/5.4/IIQUniversalID.js"}preloadScript(){if(this.loadPromise)return this.loadPromise;this.loadPromise=Oi.loadScript(this.intentIQScriptUrl,!0,"first").then((()=>{this.loaded=!0,q(Kn,"loaded")}))}initialize(e){return A(this,void 0,void 0,(function*(){if(this.isEnabled()){if(this.loaded||(yield this.preloadScript(),yield new Pi((()=>void 0!==window.IntentIqObject),10,10).until()),!this.intentIqObject){const t=window.location.hostname.includes(".fandom.com")?"fandom.com":window.location.hostname;return new Promise((i=>{this.intentIqObject=new window.IntentIqObject({partner:this.fandomId,pbjs:e,timeoutInMillis:2e3,ABTestingConfigurationSource:"percentage",abPercentage:97,manualWinReportEnabled:!0,browserBlackList:"Chrome",domainName:t,callback:e=>{q(Kn,"got data",e),i(),this.setupPpid(e)}}),Di.set("intent_iq_group",this.intentIqObject.intentIqConfig.abTesting.currentTestGroup||"U")}))}}else q(Kn,"disabled")}))}reportPrebidWin(e){return A(this,void 0,void 0,(function*(){if(!this.isEnabled()||!this.intentIqObject)return;const t={biddingPlatformId:1,bidderCode:e.bidderCode,prebidAuctionId:e.auctionId,cpm:e.cpm,currency:e.currency,originalCpm:e.originalCpm,originalCurrency:e.originalCurrency,status:e.status,placementId:e.adUnitCode};q(Kn,"reporting prebid win",t),this.intentIqObject.reportExternalWin(t),qn.log("intentiq report",{report:JSON.stringify(t)})}))}setupPpid(e){if(!this.isEnabled())return;if(!function(e){return!!e&&void 0!==e.eids}(e))return void q(Kn,"no data received");const t=this.getPpid(e);q(Kn,"ppid",t),Z.get("services.intentIq.ppid.enabled")&&this.setPpid(t),Z.get("services.intentIq.ppid.tracking.enabled")&&this.trackPpid(t)}isEnabled(){return Z.get("bidders.prebid.intentIQ")&&Z.get("options.trackingOptIn")&&!Z.get("options.optOutSale")&&!vn()}getPpid(e){try{return this.extractId(e)}catch(e){return K(Kn,"error setting ppid",e),null}}setPpid(e){Di.set("intent_iq_ppid",e,"intent_iq"),q(Kn,"set ppid ",e)}extractId(e){var t,i;return null!==(i=null===(t=e.eids.filter((e=>"intentiq.com"===e.source)).map((e=>e.uids.find((e=>"ppuid"===e.ext.stype))))[0])||void 0===t?void 0:t.id)&&void 0!==i?i:null}trackPpid(e){e&&(Gt.emit(Ut.IDENTITY_PARTNER_DATA_OBTAINED,{partnerName:"intentiq",partnerIdentityId:e}),q(Kn,"track ppid"))}};var Xn;let Jn=class{constructor(e=null){this.instantConfig=e,this.resetInitialized()}getContextVariablesValue(e){return"string"==typeof e?Z.get(e):e.map((e=>Z.get(e))).reduce(((e,t)=>e&&t),!0)}isEnabled(e,t=!0){const i="string"==typeof e&&e.startsWith("ic")?this.instantConfig.get(e):this.getContextVariablesValue(e);return t?i&&Z.get("options.trackingOptIn")&&!Z.get("options.optOutSale")&&!vn():i}setOptions(e){return this.options=e,this}setInitialized(){this.resolve(),clearTimeout(this.initializationTimeout)}resetInitialized(){this.initialized=new Promise((e=>{this.resolve=e}))}getDelayTimeoutInMs(){return Z.get("options.maxDelayTimeout")}call(){}execute(){var e,t;return A(this,void 0,void 0,(function*(){const i=(null===(e=this.options)||void 0===e?void 0:e.timeout)||this.getDelayTimeoutInMs();(null===(t=this.options)||void 0===t?void 0:t.dependencies)?Promise.race([new Promise((e=>setTimeout(e,i))),Promise.all(this.options.dependencies)]).then((()=>A(this,void 0,void 0,(function*(){yield this.call(),this.setInitialized()})))):(this.initializationTimeout=setTimeout((()=>{this.setInitialized()}),i),yield this.call(),this.setInitialized())}))}};Jn=E([h(),T("design:paramtypes",["function"==typeof(Xn=void 0!==Ci&&Ci)?Xn:Object])],Jn);const Qn="audigent",Zn=()=>void 0!==window.au_seg;window.au=window.au||[];class es extends Jn{constructor(){super(...arguments),this.isLoaded=!1}static loadSegmentLibrary(){es.segmentsScriptLoader=Oi.loadScript("https://seg.ad.gt/api/v1/s/158",!0,"first").then((()=>{Gt.emit(Ut.AUDIGENT_SEGMENT_LIBRARY_LOADED)}))}loadMatchesLibrary(){this.matchesTagScriptLoader=Oi.loadScript("https://a.ad.gt/api/v1/u/matches/158",!0,"first").then((()=>{Gt.emit(Ut.AUDIGENT_MATCHES_LIBRARY_LOADED)}))}call(){return A(this,void 0,void 0,(function*(){this.isEnabled("icAudigent")&&!this.isEnabled("icIdentityPartners",!1)?(Di.set("AU_SEG","-1"),es.sampling=this.instantConfig.get("icAudigentTrackingSampling"),es.segmentLimit=this.instantConfig.get("icAudigentSegmentLimit"),!es.segmentsScriptLoader&&es.loadSegmentLibrary(),!this.matchesTagScriptLoader&&this.loadMatchesLibrary(),this.setupSegmentsListener(),this.isLoaded||(q(Qn,"loading..."),this.matchesTagScriptLoader.then((()=>{q(Qn,"audience tag script loaded")})),es.segmentsScriptLoader.then((()=>{q(Qn,"segment tag script loaded"),this.setup()})),this.isLoaded=!0),yield this.waitForAuSegGlobalSet().then((e=>{q(Qn,"Audigent global variable set",e,window.au_seg),this.setup()}))):q(Qn,"disabled")}))}setup(){Zn()&&es.sliceAndSetSegmentsInTargeting()}setupSegmentsListener(){q(Qn,"setting up auSegReady event listener"),document.addEventListener("auSegReady",(function(e){q(Qn,"auSegReady event received",e),Gt.emit(Ut.AUDIGENT_SEGMENTS_READY),es.sliceAndSetSegmentsInTargeting()}))}static sliceAndSetSegmentsInTargeting(){const e=es.sliceSegments();es.trackWithExternalLoggerIfEnabled(e),es.setSegmentsInTargeting(e)}resetLoadedState(){this.isLoaded=!1,this.matchesTagScriptLoader=null,es.segmentsScriptLoader=null}static sliceSegments(){const e=window.au_seg.segments||[],t=es.segmentLimit||0;let i=e.length?e:"no_segments";return es.canSliceSegments(i,t)&&(i=i.slice(0,t)),q(Qn,"Sliced segments",i,t,e),i}static setSegmentsInTargeting(e){q(Qn,"Setting segments in the targeting",e),Di.set("AU_SEG",e)}static canSliceSegments(e,t){return t>0&&"string"!=typeof e}static trackWithExternalLoggerIfEnabled(e){const t=100*Math.random(),i=es.sampling||0;i>0&&t<=i&&"string"!=typeof e&&qn.log("Audigent segments",{segmentsNo:e.length,segments:e})}waitForAuSegGlobalSet(e=5){const t=Z.get("services.audigent.numberOfTries")||e;return new Pi(Zn,t,250).until()}}var ts;const is=$t("[AdEngine] set InstantConfig",{_as:"props",_p:void 0});let ns=class{constructor(e){this.container=e}execute(){return A(this,void 0,void 0,(function*(){const e=yield(new Ci).init();this.container.bind(Ci).value(e),this.container.bind(qt).value(qt.make()),Gt.dispatch(is({instantConfig:e})),this.preloadLibraries(e)}))}preloadLibraries(e){e.get("icPrebid")&&(Z.set("bidders.prebid.libraryUrl",e.get("icPrebidVersion")),Ni.init().then((()=>{if(e.get("icPrebidIntentIQ"))return Yn.preloadScript()}))),e.get("icAudigent")&&es.loadSegmentLibrary()}};function ss(e){return window.mw&&window.mw.config?window.mw.config.get(e):null}ns=E([h(),T("design:paramtypes",["function"==typeof(ts=void 0!==_&&_)?ts:Object])],ns);const os={AD_ENG_LOAD_TIMES:{name:"AdEngLoadTimes",icbmName:"loadTimes",url:"https://beacon.wikia-services.com/__track/special/adengloadtimes",allowed:{sampling:!0,aggregation:!0,aggregationLimit:5}},AD_ENG_BIDDERS:{name:"AdEngBidders",icbmName:"bidders",url:"https://beacon.wikia-services.com/__track/special/adengbidders",allowed:{sampling:!1,aggregation:!1}},AD_ENG_VIEWABILITY:{name:"AdEngViewability",icbmName:"viewability",url:"https://beacon.wikia-services.com/__track/special/adengviewability",allowed:{sampling:!1,aggregation:!1}},AD_ENG_PLAYER_INFO:{name:"AdEngPlayerInfo",icbmName:"playerInfo",url:"https://beacon.wikia-services.com/__track/special/adengplayerinfo",allowed:{sampling:!1,aggregation:!1}},KEY_VALS:{name:"KeyVals",icbmName:"kvs",url:"https://beacon.wikia-services.com/__track/special/keyvals",allowed:{sampling:!1,aggregation:!1}},AD_ENG_AD_SIZE_INFO:{name:"AdEngAdSizeInfo",icbmName:"adSizeInfo",url:"https://beacon.wikia-services.com/__track/special/adengadsizeinfo",allowed:{sampling:!1,aggregation:!1}},AD_ENG_LABRADOR_INFO:{name:"AdEngLabradorInfo",icbmName:"labrador",url:"https://beacon.wikia-services.com/__track/special/adenglabradorinfo",allowed:{sampling:!1,aggregation:!1}},AD_ENG_AD_INFO:{name:"AdEngAdInfo",icbmName:"adInfo",url:"https://beacon.wikia-services.com/__track/special/adengadinfo",allowed:{sampling:!1,aggregation:!1}},IDENTITY_INFO:{name:"IdentityInfo",icbmName:"idInfo",url:"https://beacon.wikia-services.com/__track/special/identityinfo",allowed:{sampling:!1,aggregation:!1}},TRACKING_EVENT:{name:"TrackingEvent",icbmName:"trackingEvent",url:"https://beacon.wikia-services.com/__track/special/trackingevent",allowed:{sampling:!1,aggregation:!1}},VIDEO_PLAYER_EVENT:{name:"VideoPlayerEvent",icbmName:"videoPlayerEvent",url:"https://beacon.wikia-services.com/__track/special/videoplayerevent",allowed:{sampling:!1,aggregation:!1}}};var rs;let as=class{constructor(e){this.instantConfig=e}getPvUniqueId(){return ss("pvUID")||window.pvUID||window.fandomContext.tracking.pvUID}getLegacyTrackingParameters(){const e=x.get();return{beaconId:ss("beaconId")||window.beaconId||window.beacon_id||e.wikia_beacon_id,pvNumber:ss("pvNumber")||window.pvNumber||e.pv_number,pvNumberGlobal:ss("pvNumberGlobal")||window.pvNumberGlobal||e.pv_number_global,pvUID:this.getPvUniqueId(),sessionId:ss("sessionId")||window.sessionId||window.session_id||e.tracking_session_id}}getNewTrackingParameters(){return A(this,void 0,void 0,(function*(){return yield new Pi((()=>{var e;return!!(null===(e=window.fandomContext)||void 0===e?void 0:e.tracking)}),10,100).until(),Object.assign({},window.fandomContext.tracking)}))}getTrackingParameters(e){return A(this,void 0,void 0,(function*(){return e?this.getLegacyTrackingParameters():yield this.getNewTrackingParameters()}))}execute(){return A(this,void 0,void 0,(function*(){const e=!this.instantConfig.get("icDisableLegacyTrackingParameters",!1),t=yield this.getTrackingParameters(e);Z.set("wiki",Object.assign(Object.assign({},Z.get("wiki")),t)),Z.set("services.dw-tracker.compression",this.instantConfig.get("dwTrafficCompression",!1)),Object.values(os).forEach((e=>{var t,i;const n=e.name.toLowerCase();e.allowed.sampling&&Z.set(`services.dw-tracker-${n}.threshold`,null===(t=this.instantConfig.get("dwTrafficLimits",{})[e.icbmName])||void 0===t?void 0:t.sample),Z.set(`services.dw-tracker-${n}.aggregate`,!!e.allowed.aggregation&&(null===(i=this.instantConfig.get("dwTrafficLimits",{})[e.icbmName])||void 0===i?void 0:i.agg))}))}))}};function ds(){return["fandom.com","muthead.com","futhead.com"].find((e=>window.location.hostname.includes(e)))?"https://services.fandom.com/":"https://services.fandom-dev."+(location.hostname.match(/(?!\.)(pl|us)$/)||["us"])[0]+"/"}var ls;as=E([h(),T("design:paramtypes",["function"==typeof(rs=void 0!==Ci&&Ci)?rs:Object])],as);let cs=class{constructor(e){this.instantConfig=e}execute(){return A(this,void 0,void 0,(function*(){const e=ds()||"";Z.set("services.monitoring.endpoint",e.replace(/\/+$/,"")),Z.set("services.monitoring.service","adeng");const t=this.instantConfig.get("icMonitorTrafficThreshold",{default:0}),i="number"==typeof t?{default:t}:t;Object.keys(i).forEach((e=>{Z.set(`services.monitoring-${e}.threshold`,i[e])}))}))}};cs=E([h(),T("design:paramtypes",["function"==typeof(ls=void 0!==Ci&&Ci)?ls:Object])],cs);class us{fetch(e,t=2e3,i){return A(this,void 0,void 0,(function*(){const n=new AbortController,s=setTimeout((()=>n.abort()),t),o=yield fetch(e,Object.assign({signal:n.signal},i));return clearTimeout(s),o}))}}const ps={stateMetric:["top_leaderboard"],timingMetric:["top_leaderboard"]};class hs{constructor(){this.slotTimeDiffRequestToRender=new Map,this.isActive=Wn.isOutboundTrafficAllowed("monitoring-default")}execute(){var e;this.isActive&&(this.trackLibInitialization(),this.trackGamSlotRequest(),this.trackGamSlotRendered(),e=e=>this.sendToMeteringSystem(e),window.addEventListener("blur",(()=>{var t,i;const n=document.activeElement;if(!n)return;const s=null!==(i=null===(t=n.closest('div[id][data-slot-loaded=true]:not([id*="/"])'))||void 0===t?void 0:t.id)&&void 0!==i?i:null;s&&void 0!==s&&(q("metering-reporter-click-detector",`Click! on slot='${s}' is detected.`),e({slot:s,state:"click"}),setTimeout((()=>{document.activeElement.blur()}),100))})))}sendToMeteringSystem(e){const t=this.getEndpointInfoFromContext();let i="";this.isMetricSlotData(e)&&(i=this.getEndpointUrlFor("slot",t)),this.isMetricTimeData(e)&&(i=this.getEndpointUrlFor("time",t));const n=[];Object.entries(e).forEach((([e,t])=>{n.push(`${e}=${encodeURIComponent(t)}`)})),(new us).fetch(`${i}?app=${t.appName}&${n.join("&")}`,2e3,{mode:"no-cors"})}isMetricSlotData(e){return e.slot&&e.state}isMetricTimeData(e){return e.action&&e.duration}trackLibInitialization(){this.sendToMeteringSystem({action:"init",duration:Math.round(H())})}trackGamSlotRequest(){Gt.onSlotEvent(ki.SLOT_REQUESTED_EVENT,(({slot:e})=>{this.sendSlotInfoToMeteringSystem(e,"request"),this.slotTimeDiffRequestToRender.set(e.getSlotName(),Math.round(H()))}))}trackGamSlotRendered(){Gt.onSlotEvent(ki.SLOT_RENDERED_EVENT,(({slot:e})=>{this.sendSlotInfoToMeteringSystem(e,"render"),this.sendSlotLoadTimeDiffToMeteringSystem(e)}))}sendSlotInfoToMeteringSystem(e,t){ps.stateMetric.includes(e.getSlotName())&&this.sendToMeteringSystem({slot:e.getSlotName(),state:t})}sendSlotLoadTimeDiffToMeteringSystem(e){if(!ps.timingMetric.includes(e.getSlotName())||!this.slotTimeDiffRequestToRender.has(e.getSlotName()))return;const t=this.slotTimeDiffRequestToRender.get(e.getSlotName()),i=Math.round(H())-t;this.sendToMeteringSystem({action:`${e.getSlotName()}_ratio`,duration:i})}getEndpointInfoFromContext(){return{baseUrl:Z.get("services.monitoring.endpoint"),service:Z.get("services.monitoring.service"),appName:Z.get("services.instantConfig.appName")}}getEndpointUrlFor(e,{baseUrl:t,service:i}){return[t,i,"api","adengine","meter",e].filter((e=>!!e)).join("/")}}function gs(e){const t="undefined"!=typeof window&&window||"undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==s.g&&s.g||void 0;let i;return void 0!==t&&(i=t[e]),i}class ms{constructor(){this.contentEncoding="gzip"}compressionSupported(){return void 0!==this.browserSupportsCompression||(this.browserSupportsCompression="function"==typeof gs("CompressionStream")&&"function"==typeof gs("TextEncoder"),this.browserSupportsCompression||q("dw_gzip_compressor_debug","DwAggregatedDataGzipCompressor","Compression API not supported")),this.browserSupportsCompression}compress(e){return A(this,void 0,void 0,(function*(){try{if(!this.compressionSupported())return{compressed:e};const t=this.buildStream(e),i=this.gzipStream(t),n=yield this.readStream(i);return q("dw_gzip_compressor_debug","DwAggregatedDataGzipCompressor",{uncompressedStringLen:e.length,compressedBytesLen:n.byteLength}),{compressed:n,contentEncoding:this.contentEncoding}}catch(t){return q("dw_gzip_compressor_debug","DwAggregatedDataGzipCompressor","Error while compressing data, returning uncompressed data instead.",{error:t}),{compressed:e}}}))}buildStream(e){const t=(new TextEncoder).encode(e);return new ReadableStream({start(e){e.enqueue(t),e.close()}})}gzipStream(e){return e.pipeThrough(new CompressionStream("gzip"))}readStream(e){return A(this,void 0,void 0,(function*(){const t=[],i=e.getReader();let n;for(;!n;){const{done:e,value:s}=yield i.read();e||t.push(s),n=e}const s=new Uint8Array(t.reduce(((e,t)=>e+t.byteLength),0));let o=0;for(const e of t)s.set(new Uint8Array(e.buffer),o),o+=e.byteLength;return s}))}}const fs="dw-track-sender";class vs{constructor(e=new ms){this.dataCompressor=e}sendTrackData(e,t){const i=`${e}_v2`;this.isCompressionEnabled()?this.dataCompressor.compress(JSON.stringify(t)).then((e=>{this.sendRequest(i+e.contentEncoding||"",e.compressed)})):this.sendRequest(i,JSON.stringify(t))}isCompressionEnabled(){return Z.get("services.dw-tracker.compression")&&this.dataCompressor.compressionSupported()}sendRequest(e,t){fetch(e,{method:"POST",body:t}).then((t=>{200===t.status?q(fs,{status:"success",url:e}):q(fs,{status:"failed",url:e})}))}}const bs=new class{constructor(){this.AGGREGATION_SECONDS_OFF=5,this.SEND_DATA_INTERVAL=1e3,this.AGGREGATION_LIMIT_PER_TRACK=5,this.sender=new vs,this.tracksQueues={},this.enabled=!0,this.count=0,this.start()}isAggregatorActive(){return this.enabled}push(e,t){this.tracksQueues[e.name]||(this.tracksQueues[e.name]={track:e,params:[]}),this.tracksQueues[e.name].params.push(t),this.tracksQueues[e.name].params.length>=this.getAggregationLimit(e)&&this.fireAggregatedQueueByTrack(e)}getAggregationLimit(e){var t;return null!==(t=e.allowed.aggregationLimit)&&void 0!==t?t:this.AGGREGATION_LIMIT_PER_TRACK}fireAggregatedQueue(){Object.keys(this.tracksQueues).forEach((e=>{this.fireAggregatedQueueByTrack(this.tracksQueues[e].track)}))}fireAggregatedQueueByTrack(e){var t,i;const n=[];null===(i=null===(t=this.tracksQueues[e.name])||void 0===t?void 0:t.params)||void 0===i||i.forEach((e=>n.push(e))),0!==n.length&&(this.sender.sendTrackData(this.tracksQueues[e.name].track.url,n),this.tracksQueues[e.name]={track:e,params:[]})}start(){const e=setInterval((()=>{this.fireAggregatedQueue(),this.count++,this.count>=this.AGGREGATION_SECONDS_OFF&&(this.enabled=!1,clearInterval(e))}),this.SEND_DATA_INTERVAL);window.addEventListener("visibilitychange",(()=>{document.hidden&&this.fireAggregatedQueue()}))}},ys=os.TRACKING_EVENT.url,_s=os.VIDEO_PLAYER_EVENT.url;let Ss=class{track(e,t){if(t&&!Wn.isOutboundTrafficAllowed(`dw-tracker-${t.name.toLowerCase()}`))return;const i=Object.assign(Object.assign({},this.getDataWarehouseParams()),e);t?this.sendCustomEvent(i,t):this.sendTrackEvent(i)}getDataWarehouseParams(){return{session_id:Z.get("wiki.sessionId")||"unknown",pv_number:Z.get("wiki.pvNumber"),pv_number_global:Z.get("wiki.pvNumberGlobal"),pv_unique_id:Z.get("wiki.pvUID"),beacon:Z.get("wiki.beaconId")||"unknown",c:Z.get("wiki.wgCityId")||"unknown",ck:Z.get("wiki.dsSiteKey")||"unknown",lc:Z.get("wiki.wgUserLanguage")||"unknown",s:Di.get("skin")||"unknown",ua:window.navigator.userAgent,u:sn()?Z.get("options.userId")||0:-1,a:parseInt(Di.get("artid")||-1),x:Z.get("wiki.wgDBname")||"unknown",n:Z.get("wiki.wgNamespaceNumber")||-1}}sendCustomEvent(e,t){const i=Object.assign(Object.assign({},e),this.getTimeBasedParams());Z.get(`services.dw-tracker-${t.name.toLowerCase()}.aggregate`)&&bs.isAggregatorActive()&&bs.push(t,i);const n=this.buildDataWarehouseUrl(i,t.url);this.sendRequest(n,i)}sendTrackEvent(e,t="Event"){const i=Object.assign(Object.assign({},e),this.getTimeBasedParams());i.ga_category=i.category||"",i.ga_label=i.label||"",i.ga_action=i.action||"",i.ga_value=i.value||"",delete i.category,delete i.label,delete i.action,delete i.value;let n=this.buildDataWarehouseUrl(i,ys);this.sendRequest(n,i,t),"videoplayerevent"===i.eventName&&(n=this.buildDataWarehouseUrl(i,_s),this.sendRequest(n,i,t))}getTimeBasedParams(){return{cb:Math.floor(99999*Math.random()),url:document.URL}}buildDataWarehouseUrl(e,t){if(!t){const e="Error building DW tracking URL";throw q("data-warehouse-trackingParams",e),new Error(e)}return`${t}?${L.stringify(e)}`}sendRequest(e,t,i="Event"){const n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="json",n.addEventListener("load",(()=>q(`DW - Track ${i} Success`,{url:e,params:t}))),n.addEventListener("error",(n=>q(`DW - Track ${i} Failed`,{url:e,params:t,err:n}))),n.send()}};Ss=E([h()],Ss);const ws={ad_engine_configured:Ut.AD_ENGINE_CONFIGURED,ad_engine_stack_start:Ut.AD_ENGINE_STACK_START,prebid_auction_started:Ut.BIDDERS_BIDS_CALLED,prebid_auction_ended:Ut.BIDDERS_AUCTION_DONE,live_connect_cached:Ut.LIVE_CONNECT_CACHED,live_connect_started:Ut.LIVE_CONNECT_STARTED,live_connect_responded_uuid:Ut.LIVE_CONNECT_RESPONDED_UUID,audigent_matches_library_loaded:Ut.AUDIGENT_MATCHES_LIBRARY_LOADED,audigent_segment_library_loaded:Ut.AUDIGENT_SEGMENT_LIBRARY_LOADED,audigent_segments_ready:Ut.AUDIGENT_SEGMENTS_READY,captify_loaded:Ut.CAPTIFY_LOADED,eyeota_started:Ut.EYEOTA_STARTED,eyeota_failed:Ut.EYEOTA_FAILED,intentiq_ppid_not_set_on_time:Ut.INTENTIQ_PPID_NOT_SET_ON_TIME};class Es{constructor(){this.initStartTime(),this.initLoadTimesTracker()}static make(){return Es.instance||(Es.instance=new Es),Es.instance}initStartTime(){const e=new Date;this.startTime||(this.startTime=G(),this.tzOffset=e.getTimezoneOffset()),Gt.emit(Ut.AD_ENGINE_LOAD_TIME_INIT,{timestamp:this.startTime})}getStartTime(){return this.startTime}getTimezoneOffset(){return this.tzOffset}initLoadTimesTracker(){Gt.on(Ut.AD_ENGINE_LOAD_TIME_INIT,(e=>{this.trackLoadTime("load_time_init",e.timestamp)})),Object.keys(ws).forEach((e=>{Gt.on(ws[e],(()=>{this.trackLoadTime(e,Date.now())}))})),Gt.on(Ut.AD_ENGINE_SLOT_LOADED,(e=>{"top_leaderboard"==e.name&&this.trackLoadTime("top_leaderboard_loaded",Date.now())}))}trackLoadTime(e,t){(new Ss).track({event_name:e,browser_ts:t,load_time:t-this.getStartTime(),tz_offset:this.getTimezoneOffset(),country:Xt.getCountryCode()||""},os.AD_ENG_LOAD_TIMES)}}let Is=class{execute(){Es.make()}};var Ts;Is=E([h()],Is);let As=class{constructor(e){this.instantConfig=e,this.prebidBidders={appnexus:"icPrebidAppNexus",appnexusAst:"icPrebidAppNexusAst",appnexusNative:"icPrebidAppNexusNative",criteo:"icPrebidCriteo",freewheel:"icPrebidFreewheel",gumgum:"icPrebidGumGum",indexExchange:"icPrebidIndexExchange",kargo:"icPrebidKargo",medianet:"icPrebidMedianet",nobid:"icPrebidNobid",ogury:"icPrebidOgury",openx:"icPrebidOpenX",pubmatic:"icPrebidPubmatic",rubicon_display:"icPrebidRubiconDisplay",roundel:"icPrebidRoundel",rubicon:"icPrebidRubicon",triplelift:"icPrebidTriplelift",verizon:"icPrebidVerizon",yahoossp:"icPrebidYahooSsp"},this.notCoppaCompliantBidders=["kargo","verizon"],this.selectedBidder=L.get("select_bidder")||""}execute(){this.setupBidders()}setupBidders(){const e=Z.get("custom.hasFeaturedVideo");if(this.instantConfig.get("icA9Bidder")&&(Z.set("bidders.a9.enabled",!0),Z.set("bidders.a9.videoEnabled",this.instantConfig.get("icA9VideoBidder")&&e)),this.instantConfig.get("icPrebid")){Z.set("bidders.prebid.enabled",!0);for(const[e,t]of Object.entries(this.prebidBidders))this.enableIfApplicable(e,t);const e=this.instantConfig.get("icPrebidTestBidder");e&&(Z.set("bidders.prebid.testBidder",{name:e.name,slots:e.slots}),this.enableIfApplicable("testBidder","icPrebidTestBidder")),Z.set("bidders.prebid.intentIQ",this.instantConfig.get("icPrebidIntentIQ",!1))}Z.set("bidders.enabled",Z.get("bidders.prebid.enabled")||Z.get("bidders.a9.enabled"))}enableIfApplicable(e,t){this.selectedBidder&&e!==this.selectedBidder?Z.set(`bidders.prebid.${e}.enabled`,!1):!vn()||this.isBidderCoppaCompliant(e)?Z.set(`bidders.prebid.${e}.enabled`,!!this.instantConfig.get(t)):Z.set(`bidders.prebid.${e}.enabled`,!1)}isBidderCoppaCompliant(e){return!this.notCoppaCompliantBidders.includes(e)}};As=E([h(),T("design:paramtypes",["function"==typeof(Ts=void 0!==Ci&&Ci)?Ts:Object])],As);class Cs{static getEventData(e){const t=new Date,i=Qi.get(e.position);if(!i)throw new Error(`Slot ${e.position} is not registered.`);return{ad_error_code:e.ad_error_code,ad_product:e.ad_product,audio:e.audio?1:0,browser:`${Ai.getOperatingSystem()} ${Ai.getBrowser()}`,content_type:e.content_type||"",country:Xt.getCountryCode()||"",creative_id:e.creative_id||"",ctp:e.ctp?1:0,event_name:e.event_name,line_item_id:e.line_item_id||"",player:e.player,position:i.getSlotName().toLowerCase(),pv_number:Z.get("wiki.pvNumber"),rv:i.getTargetingProperty("rv")||"",skin:Di.get("skin")||"",timestamp:t.getTime(),tz_offset:t.getTimezoneOffset(),user_block_autoplay:e.user_block_autoplay,video_id:e.video_id||"",video_number:e.video_number||""}}static emit(e){e.ad_product&&e.player&&e.event_name&&Gt.emit(Ut.VIDEO_PLAYER_TRACKING,{eventInfo:e})}static emitVideoEvent(e){Gt.emit(Ut.VIDEO_EVENT,{videoEvent:e})}}const Os=new class{register(){const e={onEvent(e,t,i){const n=Cs.getEventData(i);Cs.emit(n)}};Z.push("listeners.porvata",e)}};class Ns{constructor(){this.disabled=!1,this.compilers=[]}disable(){this.disabled=!0}addCompiler(e){this.compilers.push(e)}compileData(e=null,t=null,i={}){let n={bid:t,slot:e,data:i};return this.compilers.forEach((e=>{n=e(n)})),n}}const Ps=({data:e,slot:t})=>({slot:t,data:Object.assign(Object.assign({},e),{ad_status:e.ad_status||t.getStatus(),advertiser_id:t.advertiserId||"",creative_id:t.creativeId||"",kv_pos:t.getMainPositionName(),kv_rv:t.getTargetingProperty("rv")||"",order_id:t.orderId||"",product_lineitem_id:t.lineItemId||"",slot_id:t.getUid()||"",slot_size:t.getCreativeSize()||""})}),ks=({data:e,slot:t})=>{const i=qt.make(),n=new Date,s=n.getTime(),o=t.getTargetingProperty("uap")&&"none"!==t.getTargetingProperty("uap"),r=Di.dump(),a=(null==r?void 0:r.experiment_groups)||[];return{slot:t,data:Object.assign(Object.assign({},e),{timestamp:s,browser:`${Ai.getOperatingSystem()} ${Ai.getBrowser()}`,country:(Xt.getCountryCode()||"").toUpperCase(),device:Ai.getDeviceType(),is_uap:o?1:0,kv_ah:window.document.body.scrollHeight,kv_lang:r.lang||"",kv_s0v:r.s0v||"",kv_s1:r.s1||"",kv_s2:r.s2||"",kv_skin:r.skin||"",labrador:[...i.getSamplingResults(),...a].join(";"),opt_in:Z.get("options.geoRequiresConsent")?Z.get("options.trackingOptIn")?"yes":"no":"",opt_out_sale:Z.get("options.geoRequiresSignal")?Z.get("options.optOutSale")?"yes":"no":"",page_width:window.document.body.scrollWidth&&window.document.body.scrollWidth.toString()||"",ppid:r.ppid,pv:Z.get("wiki.pvNumber")||window.pvNumber||"",pv_unique_id:Z.get("wiki.pvUID")||window.pvUID||"",scroll_y:window.scrollY||window.pageYOffset,tz_offset:n.getTimezoneOffset(),viewport_height:window.innerHeight||0})}},Ds=({data:e,slot:t})=>{var i;return{slot:t,data:Object.assign(Object.assign({},e),{word_count:Di.get("word_count")||-1,short_page:null!==(i=Z.get("custom.short_page"))&&void 0!==i&&i})}};function Ls(e,t){return A(this,void 0,void 0,(function*(){const i=t.getDfpSlotPrices(e),n=yield t.getCurrentSlotPrices(e);function s(e){return i&&i[e]?i[e]:n&&n[e]?`${n[e]}not_used`:""}return{bidder_0:s("wikia"),bidder_1:s("indexExchange"),bidder_2:s("appnexus"),bidder_4:s("rubicon"),bidder_8:s("wikiaVideo"),bidder_9:s("openx"),bidder_10:s("appnexusAst"),bidder_11:s("rubicon_display"),bidder_12:s("a9"),bidder_14:s("pubmatic"),bidder_17:s("kargo"),bidder_19:s("gumgum"),bidder_21:s("triplelift"),bidder_25:s("nobid"),bidder_28:s("verizon"),bidder_30:s("medianet"),bidder_31:s("roundel"),bidder_32:s("ogury"),bidder_33:s("criteo"),bidder_34:s("yahoossp"),bidder_35:s("freewheel")}}))}const zs=({data:e,slot:t},i)=>A(void 0,void 0,void 0,(function*(){return i?{slot:t,data:Object.assign(Object.assign(Object.assign({},e),{bidder_won:t.winningBidderDetails?t.winningBidderDetails.name:"",bidder_won_price:t.winningBidderDetails?t.winningBidderDetails.price:""}),yield Ls(t.getSlotName(),i))}:{slot:t,data:e}})),xs=new class extends Ns{constructor(){super(...arguments),this.onRenderEndedStatusToTrack=[en.STATUS_COLLAPSE,en.STATUS_FORCED_COLLAPSE,en.STATUS_MANUAL,en.STATUS_SUCCESS],this.onChangeStatusToTrack=[en.STATUS_BLOCKED,en.STATUS_REQUESTED,en.STATUS_CLICKED,en.STATUS_ERROR,en.STATUS_VIEWPORT_CONFLICT,en.STATUS_HIVI_COLLAPSE,en.STATUS_HEAVY_AD_INTERVENTION,en.STATUS_UNKNOWN_INTERVENTION],this.compilers=[Ps,ks,Ds]}isEnabled(){return!0}register(e,{bidders:t}){this.isEnabled()&&(Gt.onSlotEvent(ki.SLOT_RENDERED_EVENT,(({slot:e})=>{e.trackStatusAfterRendered=!0})),Gt.onSlotEvent(ki.SLOT_STATUS_CHANGED,(({slot:i})=>A(this,void 0,void 0,(function*(){const n=i.getStatus();(i.trackStatusAfterRendered&&(delete i.trackStatusAfterRendered,this.onRenderEndedStatusToTrack.includes(n)||i.getConfigProperty("trackEachStatus"))||this.onChangeStatusToTrack.includes(n)||i.getConfigProperty("trackEachStatus"))&&e(yield zs(this.compileData(i),t))})))),Gt.onSlotEvent(ki.CUSTOM_EVENT,(({slot:i,payload:n})=>A(this,void 0,void 0,(function*(){e(yield zs(this.compileData(i,null,{ad_status:null==n?void 0:n.status}),t))})))))}},Rs=({data:e,slot:t})=>{const i=new Date;return{slot:t,data:Object.assign(Object.assign({},e),{timestamp:i.getTime(),tz_offset:i.getTimezoneOffset()})}},js=({data:e,slot:t})=>({slot:t,data:Object.assign(Object.assign({},e),{creative_id:t.creativeId||"",line_item_id:t.lineItemId||"",rv:t.getTargetingProperty("rv")||"",slot_id:t.getUid()||""})}),Vs=new class extends Ns{constructor(){super(...arguments),this.compilers=[Rs,js]}isEnabled(){return!0}register(e){this.isEnabled()&&Gt.onSlotEvent(ki.SLOT_VIEWED_EVENT,(({slot:t})=>{e(this.compileData(t))}))}},Ms=new class extends Ns{constructor(){super(...arguments),this.compilers=[ks]}register(e){Gt.on(Ut.AD_ENGINE_MESSAGE_BOX_EVENT,(({adSlotName:t,ad_status:i})=>{e(this.compileData(Qi.get(t),null,{ad_status:i}))}),!1)}},Us=new class extends Ns{constructor(){super(...arguments),this.eventsToRegister=[Ut.AD_ENGINE_VIDEO_LEARN_MORE_CLICKED,Ut.AD_ENGINE_VIDEO_OVERLAY_CLICKED,Ut.AD_ENGINE_VIDEO_TOGGLE_UI_OVERLAY_CLICKED],this.compilers=[ks,Ps]}register(e){Gt.onSlotEvent(ki.SLOT_RENDERED_EVENT,(({adSlotName:t})=>{this.addClickTrackingListeners(e,t)})),this.eventsToRegister.map((t=>this.addToTracking(t,e)))}addToTracking(e,t){Gt.on(e,(({adSlotName:e,ad_status:i})=>{t(this.compileData(Qi.get(e),null,{ad_status:i}))}),!1)}addClickTrackingListeners(e,t){this.clickDetection(t,e)}clickDetection(e,t){window.addEventListener("blur",(()=>{const i=document.activeElement;if(!i)return;if(null===i.closest(`div#${e}`))return;q("ad-click-tracker",`Click! on slot='${e}' is detected.`);const n=Qi.get(e);this.handleClickEvent(t,n),setTimeout((()=>{document.activeElement.blur()}),100)}))}handleClickEvent(e,t){const i={ad_status:en.STATUS_CLICKED};e(this.compileData(t,null,i))}};function Bs(e,t){const i=Qi.get(e);return!i||!i.getPushTime()||i.getPushTime()>t}const $s=({bid:e,data:t})=>{const i=(new Date).getTime(),n=Qi.getSlotId(e.slotName),s=[];return e.buyerId&&s.push(`buyer_id=${e.buyerId}`),{bid:e,data:Object.assign(Object.assign({},t),{timestamp:i,slot_id:n,name:e.bidderName,size:e.size,price:e.price,response_time:e.timeToRespond,status:Bs(e.slotName,e.responseTimestamp)?"on_time":"too_late",additional_flags:s.join(";")})}},Fs=new class extends Ns{constructor(){super(...arguments),this.compilers=[$s]}isEnabled(){return!0}register(e){this.isEnabled()&&Gt.on(Ut.BIDDERS_BIDS_RESPONSE,(({bidResponse:t})=>{e(this.compileData(null,t))}),!1)}};class Gs{constructor(e){this.adapter=e,this.steps=[]}add(...e){return this.steps.push(...e),this}execute(e,t){const i=this.createFinalNext(t);return this.createExecutor(i)(e)}createFinalNext(e){return e?t=>this.adapter.execute(e,t):e=>A(this,void 0,void 0,(function*(){return e}))}createExecutor(e){return this.steps.reduceRight(((e,t)=>i=>this.adapter.execute(t,i,e)),e)}}class Hs{execute(e,t,i){return A(this,void 0,void 0,(function*(){return e(t,i)}))}}class Ws extends Gs{constructor(){super(new Hs)}}const qs={DataWarehouse:"DW",GoogleAnalytics:"GA"},Ks=(e,t)=>{if(Object.values(qs).includes(e.target)&&e.payload)return t({payload:e.payload,target:e.target})};class Ys{constructor(e){this.requiredKeys=e,this.pipeline=new Ws,this.pipeline.add(Ks)}register(e,t){if(this.isEnabled())return qi.register({origin:t,keys:this.requiredKeys,infinite:!0},(t=>{this.pipeline.execute(Object.assign({},t),e)})),this}isEnabled(){return!0}}const Xs="intervention-tracker",Js=new class{register(){Z.get("services.interventionTracker.enabled")?Gt.action$.pipe(Ft(Gt.getGlobalAction(Ut.GAM_AD_INTERVENTION)),kn((e=>this.handleIntervention(e)))).subscribe():q(Xs,"Intervention tracker is disabled")}handleIntervention(e){const t=Qi.get(e.slotName);q(Xs,e),t&&(t.setStatus(this.getInterventionStatus(e.id)),qn.log("Ad intervention",{interventionId:e.id,interventionMessage:e.message,lineItemId:t.lineItemId,slotName:e.slotName}))}getInterventionStatus(e){return"HeavyAdIntervention"===e?en.STATUS_HEAVY_AD_INTERVENTION:en.STATUS_UNKNOWN_INTERVENTION}},Qs=new class{get exists(){return!!window.__uspapi}getSignalData(e){return new Promise((t=>{window.__uspapi("getUSPData",e,(e=>t(e)))}))}override(e){window.__uspapi=e}};function Zs(e){let t=e;return 0!==Object.entries(Z.get(`slots.${t}`)||{}).length||(t=(i=e,Object.entries(Qi.slotConfigsMap).filter((([,e])=>e.bidderAlias===i)).map((([e])=>e))).shift(),t)?t:"";var i}class eo{constructor(e,t,i=2e3){this.name=e,this.bidderConfig=t,this.timeout=i,this.called=!1,this.response=!1,this.logGroup=`${e}-bidder`,this.resetState(),q(this.logGroup,"created")}resetState(){this.called=!1,this.response=!1,this.onResponseCallbacks=new ei,this.onResponseCallbacks.onItemFlush((e=>{e(this.name)}))}call(){this.response=!1,this.called=!0,this.callBids((()=>this.onBidResponse())),q(this.logGroup,"called")}onBidResponse(){this.response=!0,this.calculatePrices(),this.onResponseCallbacks.flush(),q(this.logGroup,"respond")}getSlotAlias(e){return Z.get(`slots.${e}.bidderAlias`)||e}getSlotBestPrice(e){return this.getBestPrice(e)}getSlotTargetingParams(e){return this.called&&this.isSlotSupported(e)?this.getTargetingParams(e):Promise.resolve({})}isSlotSupported(e){return this.isSupported(e)}waitForResponse(){return hn((e=>{this.hasResponse()?e():this.addResponseListener(e)}),this.timeout)}hasResponse(){return this.response}addResponseListener(e){this.onResponseCallbacks.push(e)}wasCalled(){return this.called}}const to={en:{advertisement:"Advertisement","learn-more":"Learn More"},ar:{advertisement:""},bn:{advertisement:""},br:{advertisement:"Bomm bruderezh"},ca:{advertisement:"Anunci"},cs:{advertisement:"Reklama"},de:{advertisement:"Anzeige","learn-more":"Erfahre mehr"},es:{advertisement:"Anuncio","learn-more":"Conoce ms"},eu:{advertisement:"Iragarkia"},fa:{advertisement:""},fo:{advertisement:"Lsing"},fr:{advertisement:"Publicit","learn-more":"En savoir plus"},fy:{advertisement:"Advertinsje"},gl:{advertisement:"Anuncio"},gv:{advertisement:"Soilsheen"},he:{advertisement:""},hu:{advertisement:"Hirdets"},id:{advertisement:"Iklan","learn-more":"Baca Selengkapnya"},inh:{advertisement:""},it:{advertisement:"Pubblicit","learn-more":"Ulteriori informazioni"},ja:{advertisement:"","learn-more":""},ko:{advertisement:""},krc:{advertisement:"P"},lb:{advertisement:"Reklamm"},mk:{advertisement:"P"},mr:{advertisement:""},ms:{advertisement:"Iklan"},nl:{advertisement:"Advertentie","learn-more":"Meer te weten komen"},no:{advertisement:"Reklame"},pl:{advertisement:"Reklama","learn-more":"Czytaj wicej"},ps:{advertisement:""},pt:{advertisement:"Anncio","learn-more":"Saiba Mais"},"roa-tara":{advertisement:"Pubblecet"},ru:{advertisement:"P","learn-more":" "},si:{advertisement:" "},sl:{advertisement:"Oglas"},"sr-ec":{advertisement:"P"},sv:{advertisement:"Annons"},te:{advertisement:" "},th:{advertisement:""},tr:{advertisement:"Reklam"},"tt-cyrl":{advertisement:"P"},uk:{advertisement:"P"},vi:{advertisement:"Qung co"},"zh-hans":{advertisement:"","learn-more":""},"zh-hant":{advertisement:"","learn-more":""}};function io(e){const t=Z.get("wiki.targeting.wikiLanguage");return to[t&&void 0!==to[t]?t:"en"][e]||to.en[e]}function no(){document.querySelectorAll(".ae-translatable-label").forEach((e=>{const t=io(e.dataset.key);t&&(e.innerText=t)}))}function so(e){let t;return{cancel(){clearTimeout(t)},promise:new Promise((i=>{t=setTimeout((()=>i(e)),e)}))}}const oo=new class{sample(e,t,i=100){return!!function(e){return-1!==(L.get("ignored_samplers")||"").split(",").indexOf(e)}(e)||function(e,t){return Math.floor(Math.random()*(t-0))+0}(0,i)<t}},ro=["preroll","midroll","postroll"];function ao(){return Math.round(1e10*Math.random())}function lo(e,t,i={}){const n=["output=vast","env=vp","gdfp_req=1","impl=s","unviewed_position_start=1",`url=${encodeURIComponent(window.location.href)}`,`description_url=${encodeURIComponent(window.location.href)}`,`correlator=${ao()}`],s=Qi.get(t),o=Di.get("ppid"),r=Di.get("over18");if(r&&n.push(`over_18=${r}`),o&&n.push(`ppid=${o}`),vn()&&n.push("tfcd=1"),s)n.push(`iu=${s.getVideoAdUnit()}`),n.push(`sz=${function(e){const t=e.getVideoSizes();return t?t.map((e=>e.join("x"))).join("|"):"640x480"}(s)}`),n.push(`cust_params=${function(e,t={}){const i=Di.dump()||{},n={};Object.keys(i).forEach((e=>{!function(e,t){"function"==typeof t?n[e]=t():"undefined"!==t&&null!==t&&(n[e]=t)}(e,i[e])})),Gt.emit(Ut.AD_ENGINE_INVALIDATE_SLOT_TARGETING,{slot:e});const s=Object.assign(Object.assign(Object.assign({},n),e.getTargeting()),t);return encodeURIComponent(Object.keys(s).filter((e=>s[e])).map((e=>`${e}=${s[e]}`)).join("&"))}(s,i.targeting)}`);else{if(!i.videoAdUnitId||!i.customParams)throw Error("Slot does not exist!");n.push(`iu=${i.videoAdUnitId}`),n.push("sz=640x480"),n.push(`cust_params=${encodeURIComponent(i.customParams)}`)}return i.contentSourceId&&i.videoId&&(n.push(`cmsid=${i.contentSourceId}`),n.push(`vid=${i.videoId}`)),i.vpos&&ro.indexOf(i.vpos)>-1&&n.push(`vpos=${i.vpos}`),void 0!==i.numberOfAds&&n.push(`pmad=${i.numberOfAds}`),n.push("rdp="+(on()?1:0)),"https://pubads.g.doubleclick.net/gampad/ads?"+n.join("&")}function co(e={}){const t=Di.get("ppid"),i=Di.get("over18"),n=[`c=${ao()}`,"tile=1","d_imp=1"];return n.push(`iu=${e.adUnit}`),n.push(`sz=${e.size}`),i&&n.push(`over_18=${i}`),t&&n.push(`ppid=${t}`),vn()&&n.push("tfcd=1"),e.targeting&&n.push(`t=${encodeURIComponent(Object.keys(e.targeting).filter((t=>e.targeting[t])).map((t=>`${t}=${e.targeting[t]}`)).join("&"))}`),n.push("rdp="+(on()?1:0)),"https://securepubads.g.doubleclick.net/gampad/adx?"+n.join("&")}class uo{static containsValue(e,t){const i=t.toUpperCase();return e.some((e=>e.toUpperCase()===i))}getHostnamePrefix(){const e=window.location.hostname.toLowerCase(),t=/(^|.)(showcase|externaltest|preview|verify|stable|sandbox-[^.]+)\./.exec(e);if(t&&t.length>2)return t[2];const i=e.split(".");return i.length?i[0]:void 0}getRawDbName(e){return`_${e||"wikia"}`.replace("/[^0-9A-Z_a-z]/","_")}getTargetingBundles(e){const t=Di.get("bundles")||[];try{const i=[];Object.keys(e).forEach((t=>{this.matchesTargetingBundle(e[t])&&i.push(t)})),i.forEach((e=>{uo.containsValue(t,e)||t.push(e)}))}catch(e){q("targeting-bundles","Invalid input data!")}return this.applyCodeLevelBundles(t)}applyCodeLevelBundles(e){(new R).getItem("_ae_intrsttl_imp")&&e.push("interstitial_disabled");const t=Di.get("skin");t&&t.includes("ucp_")&&!uo.containsValue(e,"VIDEO_TIER_1_AND_2_BUNDLE")&&e.push("VIDEO_TIER_3_BUNDLE");const i=Di.get("word_count")||-1;return i>-1&&i<=100&&(e.push("short_page"),Z.set("custom.short_page",!0)),e}matchesTargetingBundle(e){return!Object.keys(e).some((t=>{const i=Di.get(t);if(!i)return!0;if(Array.isArray(i)){if(!e[t].some((e=>i.includes(e))))return!0}else if(!e[t].includes(i))return!0;return!1}))}}const po=new uo;function ho(e={},t=[]){if(e)return t.find((t=>{if("string"!=typeof t)throw new Error("property name must be a string");return t in e}))}function go(e,t=[]){const i=ho(e,t);if(i){const t=e[i];return"function"==typeof t?t.bind(e):t}}const mo={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let fo;const vo=new Uint8Array(16);function bo(){if(!fo&&(fo="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!fo))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return fo(vo)}const yo=[];for(let e=0;e<256;++e)yo.push((e+256).toString(16).slice(1));const _o=function(e,t,i){if(mo.randomUUID&&!t&&!e)return mo.randomUUID();const n=(e=e||{}).random||(e.rng||bo)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){i=i||0;for(let e=0;e<16;++e)t[i+e]=n[e];return t}return function(e,t=0){return(yo[e[t+0]]+yo[e[t+1]]+yo[e[t+2]]+yo[e[t+3]]+"-"+yo[e[t+4]]+yo[e[t+5]]+"-"+yo[e[t+6]]+yo[e[t+7]]+"-"+yo[e[t+8]]+yo[e[t+9]]+"-"+yo[e[t+10]]+yo[e[t+11]]+yo[e[t+12]]+yo[e[t+13]]+yo[e[t+14]]+yo[e[t+15]]).toLowerCase()}(n)},So=new class{v4(){return _o()}},wo={addListener:function(e,t,i={}){const n={element:e,callback:t,offsetTop:i.offsetTop||0,offsetBottom:i.offsetBottom||0,areaThreshold:i.areaThreshold,inViewport:!1},s=()=>{!function(e){const t=Bi(e.element,{topOffset:e.offsetTop,bottomOffset:e.offsetBottom,areaThreshold:e.areaThreshold});t!==e.inViewport&&(e.callback(t),e.inViewport=t)}(n)};return n.id=Zi.addCallback(s),s(),n.id},removeListener:function(e){Zi.removeCallback(e)}};class Eo{static make(){return Eo.instance||(Eo.instance=new Eo),Eo.instance}constructor(){this.renderImpEndCallbacks=[],this.utils=e,this.insertScript(),this.configure(),this.addRenderImpHook()}insertScript(){this.script=this.utils.scriptLoader.loadScript("//c.amazon-adsystem.com/aax2/apstag.js",!0,"first")}configure(){window.apstag=window.apstag||{_Q:[]},void 0===window.apstag.init&&(window.apstag.init=(...e)=>{this.configureCommand("i",e)}),void 0===window.apstag.fetchBids&&(window.apstag.fetchBids=(...e)=>{this.configureCommand("f",e)})}addRenderImpHook(){return A(this,void 0,void 0,(function*(){yield this.script;const e=window.apstag.renderImp;window.apstag.renderImp=(...t)=>{e(...t);const[i,n]=t;this.renderImpEndCallbacks.forEach((e=>e(i,n)))}}))}configureCommand(e,t){window.apstag._Q.push([e,t])}init(e){return A(this,void 0,void 0,(function*(){yield this.script,window.apstag.init(e)}))}fetchBids(e){return A(this,void 0,void 0,(function*(){return yield this.script,new Promise((t=>{window.apstag.fetchBids(e,(e=>t(e)))}))}))}targetingKeys(){return A(this,void 0,void 0,(function*(){return yield this.script,window.apstag.targetingKeys()}))}enableDebug(){return A(this,void 0,void 0,(function*(){yield this.script,window.apstag.debug("enable")}))}disableDebug(){return A(this,void 0,void 0,(function*(){yield this.script,window.apstag.debug("disable")}))}onRenderImpEnd(e){return A(this,void 0,void 0,(function*(){if("function"!=typeof e)throw new Error("onRenderImpEnd used with callback not being a function");this.renderImpEndCallbacks.push(e)}))}}const Io="A9Provider";class To extends eo{static getCcpaIfApplicable(e){return e&&e.uspString?{params:{us_privacy:e.uspString}}:{}}static mapResponseToTrackingBidDefinition(e,t,i,n){return{responseTimestamp:i,timeToRespond:n,bidderName:"a9",buyerId:t.amznp,price:t.amznbid,size:t.amznsz,slotName:Zs(e)}}static isEnabled(){return Z.get("bidders.a9.enabled")&&!vn()}constructor(e,t=2e3){super("a9",e,t),this.bidderConfig=e,this.timeout=t,this.loaded=!1,this.apstag=Eo.make(),this.bids={},this.usp=Qs,this.priceMap={},this.targetingKeys=[],this.amazonId=this.bidderConfig.amazonId,this.slots=this.bidderConfig.slots,this.slotsNames=Object.keys(this.slots),this.bidsRefreshing=Z.get("bidders.a9.bidsRefreshing")||{}}getTargetingKeys(){return this.targetingKeys}init(e={}){this.initIfNotLoaded(e),this.bids={},this.priceMap={};const t=this.getA9SlotsDefinitions(this.slotsNames);this.fetchBids(t)}initIfNotLoaded(e){this.loaded||(Z.get("custom.hasFeaturedVideo")&&(Gt.onSlotEvent(ki.VIDEO_AD_IMPRESSION,(({slot:e})=>this.removeBids(e))),Gt.onSlotEvent(ki.VIDEO_AD_ERROR,(({slot:e})=>this.removeBids(e))),Gt.on(Ut.AD_ENGINE_INVALIDATE_SLOT_TARGETING,(({slot:e})=>this.invalidateSlotTargeting(e)),!1)),this.apstag.init(this.getApstagConfig(e)),this.loaded=!0)}removeBids(e){const t=this.getSlotAlias(e.getSlotName());delete this.bids[t],e.isVideo()&&e.emit(ki.VIDEO_AD_USED)}invalidateSlotTargeting(e){if(Date.parse(Di.get("amznExpirationDate",e.getSlotName()))<(new Date).getTime()){const t=this.getSlotAlias(e.getSlotName());delete this.bids[t],this.targetingKeys.forEach((t=>{Di.remove(t,e.getSlotName())}))}}getApstagConfig(e){const t=Di.get("openrtb2","openrtb2");return qn.log("openrtb2 signals",{signals:JSON.stringify(t)}),Object.assign(Object.assign({pubID:this.amazonId,videoAdServer:"DFP",deals:!0},To.getCcpaIfApplicable(e)),{signals:{ortb2:t}})}getA9SlotsDefinitions(e){return e.map((e=>this.getSlotAlias(e))).filter((e=>this.isSlotEnabled(e))).map((e=>this.createSlotDefinition(e))).filter((e=>null!==e))}fetchBids(e,t=!1){return A(this,void 0,void 0,(function*(){if(q(Io,"fetching bids for slots",e),!e||0===e.length)return void q(Io,"there is no slots to fetch bids");const i=(new Date).getTime(),n=yield this.apstag.fetchBids({slots:e,timeout:this.timeout}),s=(new Date).getTime(),o=new Date(s+To.VIDEO_TTL);if(q(Io,"bids fetched for slots",e,"bids",n),this.configureApstagOnce(),yield Promise.all(n.map((e=>A(this,void 0,void 0,(function*(){const t=e.slotID,{keys:n,bidTargeting:r}=yield this.getBidTargetingWithKeys(e);this.updateBidSlot(t,n,r,o),Gt.emit(Ut.BIDDERS_BIDS_RESPONSE,{bidResponse:To.mapResponseToTrackingBidDefinition(e.slotID,r,s,s-i)})}))))),this.onBidResponse(),t){const t=e.map((e=>e.slotName));Gt.emit(Ut.BIDDERS_BIDS_REFRESH,{refreshedSlotNames:t})}}))}configureApstagOnce(){To.isApstagConfigured||(To.isApstagConfigured=!0,this.addApstagRenderImpHook(),this.registerVideoBidsRefreshing())}addApstagRenderImpHook(){q(Io,"overwriting window.apstag.renderImp"),this.apstag.onRenderImpEnd(((e,t)=>{if(!t)return void q(Io,"apstag.renderImp() called with 1 argument only");const i=this.getRenderedSlot(t),n=i.getSlotName();i.addClass(To.A9_CLASS),q(Io,`bid used for slot ${n}`),delete this.bids[this.getSlotAlias(n)],this.refreshBid(i),i.updateWinningA9BidderDetails()}))}getRenderedSlot(e){return Object.values(Qi.slots).filter((t=>t.getTargeting().amzniid===e))[0]}refreshBid(e){if(!this.shouldRefreshSlot(e))return;const t=this.createSlotDefinition(this.getSlotAlias(e.getSlotName()));t&&(q(Io,"refresh bids for slot",t),this.fetchBids([t],!0))}shouldRefreshSlot(e){return this.bidsRefreshing.slots.includes(this.getSlotAlias(e.getSlotName()))}createSlotDefinition(e){const t=this.slots[e],i={slotName:e,slotID:e};return!t||!this.bidderConfig.videoEnabled&&"video"===t.type?null:("video"===t.type?i.mediaType="video":i.sizes=t.sizes,i)}registerVideoBidsRefreshing(){Gt.onSlotEvent(ki.VIDEO_AD_IMPRESSION,(({slot:e})=>this.refreshVideoBids(e))),Gt.onSlotEvent(ki.VIDEO_AD_ERROR,(({slot:e})=>this.refreshVideoBids(e)))}refreshVideoBids(e){this.shouldRefreshSlot(e)&&(this.removeBids(e),this.refreshBid(e))}getBidTargetingWithKeys(e){return A(this,void 0,void 0,(function*(){return yield this.apstag.targetingKeys(),{keys:e.helpers.targetingKeys,bidTargeting:e.targeting}}))}updateBidSlot(e,t,i,n){this.bids[e]={},t.forEach((t=>{-1===this.targetingKeys.indexOf(t)&&this.targetingKeys.push(t),this.bids[e][t]=i[t]})),Z.get(`slots.${e}.isVideo`)&&(this.bids[e].amznExpirationDate=n.toString(),this.targetingKeys.push("amznExpirationDate"))}callBids(){return A(this,void 0,void 0,(function*(){let e=null;this.usp.exists&&(e=yield this.usp.getSignalData()),this.init(e)}))}calculatePrices(){Object.keys(this.bids).forEach((e=>{this.priceMap[e]=this.bids[e].amznbid}))}getBestPrice(e){return A(this,void 0,void 0,(function*(){const t=this.getSlotAlias(e);return this.priceMap[t]?{a9:this.priceMap[t]}:{}}))}getTargetingParams(e){return A(this,void 0,void 0,(function*(){return this.bids[this.getSlotAlias(e)]||{}}))}isSupported(e){return!!this.slots[this.getSlotAlias(e)]}isSlotEnabled(e){const t=Object.keys(Z.get("slots")).some((t=>Z.get(`slots.${t}.bidderAlias`)===e&&Qi.getState(t))),i=Z.get(`slots.${e}`);return i&&Object.keys(i).length>0?Qi.getState(e):t}}To.A9_CLASS="a9-ad",To.VIDEO_TTL=6e5,To.isApstagConfigured=!1;const Ao=new class{constructor(){this.defaultVersion=2}get exists(){return!!window.__tcfapi}getTCData(e){return new Promise((t=>{window.__tcfapi("getTCData",e||this.defaultVersion,(e=>t(e)))}))}override(e){window.__tcfapi=e}};class Co{static getPrebidNativeMediaTypes(e){return{sendTargetingKeys:!1,adTemplate:Co.getPrebidNativeTemplate(),title:{required:!0,len:Co.getMaxTitleLength(e)},body:{required:!0,len:Co.getMaxBodyLength(e)},clickUrl:{required:!0},displayUrl:{required:!1},image:{required:!1,aspect_ratios:[{min_width:Co.getMinImageSize(e),min_height:Co.getMinImageSize(e),ratio_width:1,ratio_height:1}]}}}static getPrebidNativeTemplate(){return'<div id="native-prebid-ad" class="ntv-ad">\n\t\t\t\t\t<div class="ntv-wrapper">\n\t\t\t\t\t\t<a href="##hb_native_linkurl##" class="ntv-link" style="flex-shrink: 0;">\n\t\t\t\t\t\t\t<img src="##hb_native_image##" id="ntv-img" class="ntv-img">\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<div class="ntv-content">\n\t\t\t\t\t\t\t<p class="ntv-ad-label">Ad</p>\n\t\t\t\t\t\t\t<a href="##hb_native_linkurl##" class="ntv-link">\n\t\t\t\t\t\t\t\t<p class="ntv-ad-title ntv-headline">##hb_native_title##</p>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<p class="ntv-ad-offer">##hb_native_body##</p>\n\t\t\t\t\t\t\t<a href="##hb_native_linkurl##" class="ntv-link">\n\t\t\t\t\t\t\t\t<button class="ntv-ad-button">##hb_native_displayUrl##</button>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>'}static getMinImageSize(e){return"mobile"==e?Ui()<=320?90:120:126}static getMaxTitleLength(e){return"mobile"==e?40:60}static getMaxBodyLength(e){return"mobile"==e?30:120}}Co.assetsMap={title:"hb_native_title",body:"hb_native_body",image:"hb_native_image",clickUrl:"hb_native_linkurl",displayUrl:"hb_native_displayUrl"};class Oo{constructor({enabled:e,slots:t}){this.isCustomBidAdapter=!1,this.enabled=e,this.slots=t,this.pageTargeting=Object.assign({},Di.dump()||{}),Object.keys(this.pageTargeting).forEach((e=>{Array.isArray(this.pageTargeting[e])||(this.pageTargeting[e]=[this.pageTargeting[e]])}))}prepareAdUnits(){return Object.keys(this.slots).map((e=>this.prepareConfigForAdUnit(e,this.slots[e])))}getTargeting(e,t={}){return Object.assign(Object.assign(Object.assign({},this.pageTargeting),{src:Z.get("src")||[""],pos:[e]}),t)}}class No extends Oo{constructor(e){super(e),this.placements=e.placements}get bidderName(){return No.bidderName}isNativeModeOn(){return Z.get("bidders.prebid.appnexusNative.enabled")}prepareConfigForAdUnit(e,{sizes:t,placementId:i,position:n="mobile"}){return Z.get(`slots.${e}.isNative`)&&Z.get("bidders.prebid.native.enabled")&&this.isNativeModeOn()?this.prepareNativeConfig(e,{sizes:t,placementId:i,position:n}):this.prepareStandardConfig(e,{sizes:t,placementId:i,position:n})}prepareStandardConfig(e,{sizes:t,placementId:i,position:n}){return{code:e,mediaTypes:{banner:{sizes:t}},bids:this.getBids(e,{sizes:t,placementId:i,position:n})}}prepareNativeConfig(e,{sizes:t,placementId:i,position:n}){return{code:e,mediaTypes:{native:Co.getPrebidNativeMediaTypes(n)},bids:this.getBids(e,{sizes:t,placementId:i,position:n})}}getBids(e,{placementId:t,position:i="mobile"}){return Array.isArray(t)&&t.length>0?t.map((t=>({bidder:this.bidderName,params:{placementId:t,keywords:Object.assign({},this.getTargeting(e))}}))):[{bidder:this.bidderName,params:{placementId:t||this.getPlacement(i),keywords:Object.assign({},this.getTargeting(e))}}]}getPlacement(e){let t=e;if("mobile"===e){const e=Di.get("mappedVerticalName");t=e&&this.placements[e]?e:"other"}return this.placements[t]}}No.bidderName="appnexus";class Po extends Oo{constructor(e){super(e),this.aliases={appnexus:[Po.bidderName]},this.debugPlacementId=e.debugPlacementId,this.isDebugMode="1"===L.get("appnexusast_debug_mode")}get bidderName(){return Po.bidderName}prepareConfigForAdUnit(e,{placementId:t}){return{code:e,mediaTypes:{video:{context:"instream",playerSize:[640,480]}},bids:[{bidder:this.bidderName,params:{placementId:this.isDebugMode?this.debugPlacementId:t,keywords:Object.assign({},this.getTargeting(e)),video:{skippable:!1,playback_method:["auto_play_sound_off"],plcmt:2}}}]}}}Po.bidderName="appnexusAst";class ko extends Oo{constructor(e){super(e),this.networkId=e.networkId}get bidderName(){return ko.bidderName}prepareConfigForAdUnit(e,{sizes:t}){return this.getStandardConfig(e,t)}getStandardConfig(e,t){return{code:e,mediaTypes:{banner:{sizes:t}},bids:[{bidder:this.bidderName,params:{networkId:this.networkId}}]}}}ko.bidderName="criteo";class Do extends Oo{constructor(e){super(e),this.aliases={"freewheel-ssp":[Do.bidderName]}}get bidderName(){return Do.bidderName}prepareConfigForAdUnit(e,{zoneId:t}){return{code:e,mediaTypes:{video:{playerSize:[640,480]}},bids:[{bidder:this.bidderName,params:{format:"instream",zoneId:t,vastUrlParams:{protocolVersion:"4.2"}}}]}}}Do.bidderName="freewheel";class Lo extends Oo{constructor(e){super(e)}get bidderName(){return Lo.bidderName}prepareConfigForAdUnit(e,{sizes:t,inScreen:i}){return{code:e,mediaTypes:{banner:{sizes:t}},bids:[{bidder:this.bidderName,params:{inScreen:i}}]}}}Lo.bidderName="gumgum";class zo extends Oo{constructor(e){super(e),this.aliases={ix:[zo.bidderName]}}get bidderName(){return zo.bidderName}prepareConfigForAdUnit(e,{sizes:t,siteId:i}){return Z.get(`slots.${e}.isVideo`)?this.getVideoConfig(e,i):this.getStandardConfig(e,{sizes:t,siteId:i})}getGPIDValue(e){return Ln.build(Z.get("adUnitId"),{slotConfig:{adProduct:e,group:"PB",slotNameSuffix:""}})}getVideoConfig(e,t){return{code:e,mediaTypes:{video:{context:"instream",playerSize:[640,480],plcmt:[2]}},ortb2Imp:{ext:{gpid:this.getGPIDValue(e)}},bids:[{bidder:this.bidderName,params:{siteId:t,size:[640,480],video:{mimes:["video/mp4","video/x-flv","video/webm","video/ogg","application/javascript"],minduration:1,maxduration:30,protocols:[2,3,5,6],api:[2]}}}]}}getStandardConfig(e,{sizes:t,siteId:i}){return{code:e,mediaTypes:{banner:{sizes:t}},ortb2Imp:{ext:{gpid:this.getGPIDValue(e)}},bids:this.getBids(t,i)}}getBids(e,t){return Array.isArray(t)&&t.length>0?this.getBidsForMultipleSiteIds(e,t):e.map((e=>({bidder:this.bidderName,params:{siteId:t,size:e}})))}getBidsForMultipleSiteIds(e,t){return t.map(((t,i)=>({bidder:this.bidderName,params:{size:e[i],siteId:t}})))}}zo.bidderName="indexExchange";class xo extends Oo{constructor(e){super(e)}get bidderName(){return xo.bidderName}prepareConfigForAdUnit(e,{sizes:t,placementId:i}){return{code:e,mediaTypes:{banner:{sizes:t}},bids:this.getBids(i)}}getBids(e){return Array.isArray(e)&&e.length>0?e.map((e=>({bidder:this.bidderName,params:{placementId:e}}))):[{bidder:this.bidderName,params:{placementId:e}}]}}xo.bidderName="kargo";class Ro extends Oo{constructor(e){super(e)}get bidderName(){return Ro.bidderName}prepareConfigForAdUnit(e,{sizes:t,cid:i,crid:n}){return Z.get(`slots.${e}.isVideo`)?this.getVideoConfig(e,i,n):this.getStandardConfig(e,t,i,n)}getVideoConfig(e,t,i){return{code:e,mediaTypes:{video:{playerSize:[640,480],context:"instream",api:[2],linearity:1,mimes:["video/mp4","video/x-flv","video/webm","video/ogg"],maxduration:30,protocols:[2,3,5,6],playbackmethod:[2,3]}},bids:[{bidder:this.bidderName,params:{cid:t,crid:i,video:{w:"640",h:"480",mimes:["video/mp4","video/x-flv","video/webm","video/ogg"],playbackmethod:[2,3],maxduration:30,minduration:1,startdelay:0}}}]}}getStandardConfig(e,t,i,n){return{code:e,mediaTypes:{banner:{sizes:t}},bids:[{bidder:this.bidderName,params:{cid:i,crid:n}}]}}}Ro.bidderName="medianet";class jo extends Oo{constructor(e){super(e)}get bidderName(){return jo.bidderName}prepareConfigForAdUnit(e,{sizes:t,siteId:i}){return{code:e,mediaTypes:{banner:{sizes:t}},bids:[{bidder:this.bidderName,params:{siteId:i}}]}}}jo.bidderName="nobid";class Vo extends Oo{constructor(e){super(e)}get bidderName(){return Vo.bidderName}prepareConfigForAdUnit(e,{adUnitId:t,assetKey:i,sizes:n}){return{code:e,mediaTypes:{banner:{sizes:n}},bids:[{bidder:this.bidderName,params:{assetKey:i,adUnitId:t,skipSizeCheck:!0}}]}}}Vo.bidderName="ogury";class Mo extends Oo{constructor(e){super(e),this.delDomain=e.delDomain}get bidderName(){return Mo.bidderName}prepareConfigForAdUnit(e,{sizes:t,unit:i}){return Z.get(`slots.${e}.isVideo`)?this.getVideoConfig(e,i):this.getStandardConfig(e,t,i)}getVideoConfig(e,t){return{code:e,mediaTypes:{video:{playerSize:[640,480],context:"instream",mimes:["video/mp4","video/x-flv"]}},bids:[{bidder:this.bidderName,params:{unit:t,delDomain:this.delDomain}}]}}getStandardConfig(e,t,i){return{code:e,mediaTypes:{banner:{sizes:t}},bids:[{bidder:this.bidderName,params:{unit:i,delDomain:this.delDomain}}]}}}Mo.bidderName="openx";class Uo extends Oo{constructor(e){super(e),this.publisherId=e.publisherId}get bidderName(){return Uo.bidderName}prepareConfigForAdUnit(e,{sizes:t,ids:i}){return Z.get(`slots.${e}.isVideo`)?this.getVideoConfig(e,i):this.getStandardConfig(e,t,i)}getVideoConfig(e,t){return{code:e,mediaTypes:{video:{playerSize:[640,480],context:"instream"}},bids:this.getBids(t,{video:{mimes:["video/mp4","video/x-flv","video/webm","video/ogg"],skippable:!0,minduration:1,maxduration:30,startdelay:0,playbackmethod:[2,3],api:[2],protocols:[2,3,5,6],linearity:1,placement:1,plcmt:2}})}}getStandardConfig(e,t,i){return{code:e,mediaTypes:{banner:{sizes:t}},bids:this.getBids(i)}}getBids(e,t={}){return e.map((e=>({bidder:this.bidderName,params:Object.assign({adSlot:e,publisherId:this.publisherId},t)})))}}Uo.bidderName="pubmatic";class Bo extends Oo{constructor(e){super(e),this.aliases={ix:[Bo.bidderName]}}get bidderName(){return Bo.bidderName}prepareConfigForAdUnit(e,{sizes:t,siteId:i}){return Z.get(`slots.${e}.isVideo`)?this.getVideoConfig(e,i):this.getStandardConfig(e,{sizes:t,siteId:i})}getVideoConfig(e,t){return{code:e,mediaTypes:{video:{context:"instream",playerSize:[640,480]}},bids:[{bidder:this.bidderName,params:{siteId:t,size:[640,480],video:{mimes:["video/mp4","video/x-flv","video/webm","video/ogg","application/javascript"],minduration:1,maxduration:30,protocols:[2,3,5,6],api:[2]}}}]}}getStandardConfig(e,{sizes:t,siteId:i}){return{code:e,mediaTypes:{banner:{sizes:t}},bids:t.map((e=>({bidder:this.bidderName,params:{siteId:i,size:e}})))}}}Bo.bidderName="roundel";class $o extends Oo{constructor(e){super(e),this.accountId=e.accountId,this.customTargeting={s1:[Z.get("wiki.targeting.wikiIsTop1000")?Di.get("s1")||"":"not a top1k wiki"],lang:[Di.get("wikiLanguage")||Di.get("lang")||"en"]}}get bidderName(){return $o.bidderName}prepareConfigForAdUnit(e,{siteId:t,zoneId:i,sizeId:n,position:s}){return"featured"!==e||Z.get("custom.hasFeaturedVideo")?{code:e,mediaTypes:{video:{playerSize:[640,480],context:"instream",api:[2],linearity:1,mimes:["video/mp4","video/x-flv","video/webm","video/ogg"],maxduration:30,protocols:[2,3,5,6]}},bids:[{bidder:this.bidderName,params:{position:s,siteId:t,zoneId:i,accountId:this.accountId,name:e,inventory:Object.assign({},this.getTargeting(e,this.customTargeting)),video:{playerWidth:"640",playerHeight:"480",size_id:n,language:this.customTargeting.lang[0]}}}]}:null}}$o.bidderName="rubicon";class Fo extends Oo{constructor(e){super(e),this.aliases={rubicon:[Fo.bidderName]},this.accountId=e.accountId,this.customTargeting={s1:[Z.get("wiki.targeting.wikiIsTop1000")?Di.get("s1")||"":"not a top1k wiki"],lang:[Di.get("wikiLanguage")||Di.get("lang")||"en"]}}get bidderName(){return Fo.bidderName}prepareConfigForAdUnit(e,{siteId:t,zoneId:i,sizes:n,position:s,targeting:o}){return{code:e,mediaTypes:{banner:{sizes:n}},bids:this.getBids(e,s,t,i,o)}}getBids(e,t,i,n,s){return Array.isArray(n)&&n.length>0?n.map((n=>({bidder:this.bidderName,params:{position:t,siteId:i,zoneId:n,accountId:this.accountId,name:e,keywords:["rp.fastlane"],inventory:Object.assign({},this.getTargeting(e,Object.assign(Object.assign({},s||{}),this.customTargeting)))}}))):[{bidder:this.bidderName,params:{position:t,siteId:i,zoneId:n,accountId:this.accountId,name:e,keywords:["rp.fastlane"],inventory:Object.assign({},this.getTargeting(e,Object.assign(Object.assign({},s||{}),this.customTargeting)))}}]}}Fo.bidderName="rubicon_display";class Go extends Oo{constructor(e){super(e),this.aliases={},this.aliases[Z.get("bidders.prebid.testBidder.name")]=[Go.bidderName]}get bidderName(){return Go.bidderName}prepareConfigForAdUnit(e,{sizes:t,parameters:i}){return Z.get(`slots.${e}.isVideo`)?this.getVideoConfig(e,i):this.getStandardConfig(e,{sizes:t,parameters:i})}getVideoConfig(e,t){return{code:e,mediaTypes:{video:{context:"instream",playerSize:[640,480]}},bids:[{bidder:this.bidderName,params:Object.assign({},t)}]}}getStandardConfig(e,{sizes:t,parameters:i}){return{code:e,mediaTypes:{banner:{sizes:t}},bids:[{bidder:this.bidderName,params:Object.assign({},i)}]}}}Go.bidderName="testBidder";class Ho extends Oo{constructor(e){super(e)}get bidderName(){return Ho.bidderName}prepareConfigForAdUnit(e,{sizes:t,inventoryCodes:i}){return{code:e,mediaTypes:{banner:{sizes:t}},bids:i.map((e=>({bidder:this.bidderName,params:{inventoryCode:e}})))}}}Ho.bidderName="triplelift";class Wo extends Oo{constructor(e){super(e),this.dcn=e.dcn}get bidderName(){return Wo.bidderName}prepareConfigForAdUnit(e,{sizes:t,pos:i}){return{code:e,mediaTypes:{banner:{sizes:t}},bids:[{bidder:this.bidderName,params:{pos:i,dcn:this.dcn}}]}}}Wo.bidderName="verizon";const qo=L.get("wikia_adapter"),Ko=parseInt(L.get("wikia_adapter_limit"),10)||99,Yo=parseInt(L.get("wikia_adapter_timeout"),10)||100,Xo="1"===L.get("wikia_adapter_random");class Jo extends Oo{constructor(e){super(e),this.enabled=!!qo,this.limit=Ko,this.timeout=Yo,this.useRandomPrice=Xo,this.isCustomBidAdapter=!0}static getCreative(e,t){const i=document.createElement("div");i.style.background="#00b7e0",i.style.color="#fff",i.style.fontFamily="sans-serif",i.style.width=`${e[0]}px`,i.style.height=`${e[1]}px`,i.style.textAlign="center";const n=document.createElement("p");n.innerText="Wikia Creative",n.style.fontWeight="bold",n.style.margin="0",n.style.paddingTop="10px";const s=document.createElement("small");return s.innerText=`cpm: ${t}, size: ${e.join("x")}`,i.appendChild(n),i.appendChild(s),i.outerHTML}get bidderName(){return Jo.bidderName}prepareConfigForAdUnit(e,{sizes:t}){return Z.get(`slots.${e}.isNative`)?this.prepareNativeConfig(Co.getPrebidNativeTemplate(),e):this.prepareStandardConfig(e,{sizes:t})}prepareNativeConfig(e,t){return{code:t,mediaTypes:{native:{sendTargetingKeys:!1,adTemplate:e,title:{required:!0},body:{required:!0},clickUrl:{required:!0},displayUrl:{required:!1},image:{required:!1,aspect_ratios:[{min_width:100,min_height:100,ratio_width:1,ratio_height:1}]}}},bids:[{bidder:this.bidderName,params:{}}]}}prepareStandardConfig(e,{sizes:t}){return{code:e,mediaTypes:{banner:{sizes:t}},bids:[{bidder:this.bidderName,params:{}}]}}getSpec(){return{code:this.bidderName,supportedMediaTypes:["banner","native"]}}getPrice(){return this.useRandomPrice?Math.floor(2e3*Math.random())/100:parseInt(qo,10)/100}callBids(e,t,i){this.addBids(e,t,i)}addBids(e,t,i){setTimeout((()=>A(this,void 0,void 0,(function*(){const n=yield Ni.init();e.bids.map((i=>{0!==this.limit&&(t(i.adUnitCode,i.mediaTypes.native?this.createNativeBidResponse(n,i,e):this.createStandardBidResponse(n,i,e)),this.limit-=1)})),i()}))),this.timeout)}createNativeBidResponse(e,t,i){const n=e.createBid(1),s=this.getPrice();return n.auctionId=i.auctionId,n.bidderCode=i.bidderCode,n.bidderRequestId=i.bidderRequestId,n.transactionId=t.transactionId,n.cpm=s,n.ttl=300,n.mediaType="native",n.native={body:"Wikia is an old name of Fandom. Haven't heard of Fandom?",clickTrackers:["https://track-click.url"],clickUrl:"https://fandom.com",url:"https://fandom.com",image:{url:"https://placekitten.com/100/100",height:100,width:100},impressionTrackers:["https://track-impression.url"],title:"Wikia Native Creative"},n}createStandardBidResponse(e,t,i){const n=e.createBid(1),[s,o]=t.sizes[0],r=this.getPrice();return n.ad=Jo.getCreative(t.sizes[0],r),n.auctionId=i.auctionId,n.bidderCode=i.bidderCode,n.bidderRequestId=i.bidderRequestId,n.transactionId=t.transactionId,n.cpm=r,n.ttl=300,n.mediaType="banner",n.width=s,n.height=o,n}}Jo.bidderName="wikia";const Qo=L.get("wikia_video_adapter"),Zo=parseInt(L.get("wikia_adapter_limit"),10)||99,er=parseInt(L.get("wikia_adapter_timeout"),10)||100,tr="1"===L.get("wikia_adapter_random");class ir extends Oo{constructor(e){super(e),this.enabled=!!Qo,this.limit=Zo,this.timeout=er,this.useRandomPrice=tr,this.isCustomBidAdapter=!0}static getVastUrl(e,t,i){return lo(0,i,{videoAdUnitId:Z.get(`bidders.prebid.wikiaVideo.slots.${i}.videoAdUnitId`),customParams:Z.get(`bidders.prebid.wikiaVideo.slots.${i}.customParams`)})}get bidderName(){return ir.bidderName}prepareConfigForAdUnit(e){return{code:e,mediaTypes:{video:{context:"outstream",playerSize:[640,480]}},bids:[{bidder:this.bidderName,params:{}}]}}getSpec(){return{code:this.bidderName,supportedMediaTypes:["video"]}}getPrice(){return this.useRandomPrice?Math.floor(20*Math.random()):parseInt(Qo,10)/100}callBids(e,t,i){this.addBids(e,t,i)}addBids(e,t,i){setTimeout((()=>A(this,void 0,void 0,(function*(){const n=yield Ni.init();e.bids.forEach((i=>{if(0===this.limit)return;const s=n.createBid(1),[o,r]=i.sizes[0],a=i.adUnitCode;s.auctionId=e.auctionId,s.bidderCode=e.bidderCode,s.bidderRequestId=e.bidderRequestId,s.cpm=this.getPrice(),s.creativeId="foo123_wikiaVideoCreativeId",s.ttl=300,s.mediaType="video",s.width=o,s.height=r,s.transactionId=i.transactionId,s.vastUrl=ir.getVastUrl(o,r,a),s.videoCacheKey="123foo_wikiaVideoCacheKey",t(i.adUnitCode,s),this.limit-=1})),i()}))),this.timeout)}}ir.bidderName="wikiaVideo";class nr extends Oo{constructor(e){super(e)}get bidderName(){return nr.bidderName}prepareConfigForAdUnit(e,{sizes:t,pubId:i}){return this.getStandardConfig(e,t,i)}getStandardConfig(e,t,i){return{code:e,mediaTypes:{banner:{sizes:t}},bids:this.getBids(i)}}getBids(e){return e.map((e=>({bidder:this.bidderName,params:{pubId:e}})))}}function sr(e,t=null){return A(this,void 0,void 0,(function*(){let i={};const n=Z.get("bidders.prebid.priceFloor"),s=yield function(e){return A(this,void 0,void 0,(function*(){return((yield Ni.init()).getBidResponsesForAdUnitCode(e).bids||[]).filter((e=>function(e){return e.getStatusCode&&1===e.getStatusCode()}(e)&&"rendered"!==e.status))}))}(e);if(s.length){let e=null;s.forEach((i=>{t&&t!==i.bidderCode||n&&"object"==typeof n&&n[`${i.width}x${i.height}`]&&i.cpm<parseFloat(n[`${i.width}x${i.height}`])||(e=e?e.cpm===i.cpm?e.timeToRespond>i.timeToRespond?i:e:e.cpm<i.cpm?i:e:i)})),e&&(i=e.adserverTargeting)}const{hb_adid:o}=i;if(o){const t=yield function(e,t){return A(this,void 0,void 0,(function*(){const i=yield function(e,t){return A(this,void 0,void 0,(function*(){const i=yield Ni.init(),{bids:n}=i.getBidResponsesForAdUnitCode(e),s=n.filter((e=>t===e.adId));return s.length?s[0]:null}))}(e,t);return i&&"video"===i.mediaType?i.videoCacheKey:"disabled"}))}(e,o);t&&(i.hb_uuid=t)}return i||{}}))}nr.bidderName="yahoossp";const or=new class{constructor(){this.adapters=new Map,this.availableAdapters=[No,Po,ko,Do,Lo,zo,xo,Ro,jo,Vo,Mo,Uo,Bo,$o,Fo,Go,Ho,Wo,Jo,ir,nr]}getAdapter(e){return this.getAdapters().get(e)}getAdapters(){if(!this.adapters.size){const e=Z.get("bidders.prebid");this.availableAdapters.forEach((t=>{const i=e[t.bidderName];(function(e){if("object"!=typeof e)return!1;const t="boolean"==typeof e.enabled,i="object"==typeof e.slots;return t&&i})(i)&&this.adapters.set(t.bidderName,new t(i))}))}return this.adapters}configureAdapters(){this.getAdapters().forEach((e=>{const t=e.aliases;t&&this.configureAliases(t),e.isCustomBidAdapter&&this.configureCustomAdapter(e.bidderName,e)}))}setupAdUnits(){const e=[];return or.getAdapters().forEach((t=>{t&&t.enabled&&t.prepareAdUnits().forEach((t=>{t&&function(e){const t=Z.get(`slots.${e}`)?Qi.getState(e):function(e){return Object.keys(Z.get("slots")).some((t=>Z.get(`slots.${t}.bidderAlias`)===e&&Qi.getState(t)))}(e);return("static"!==Z.get("bidders.prebid.filter")||e.includes("video")||null!==document.querySelector(`div[id="${e}"]`))&&t}(t.code)&&e.push(t)}))})),e}configureAliases(e){return A(this,void 0,void 0,(function*(){const t=yield Ni.init();Object.keys(e).forEach((i=>e[i].forEach((e=>t.aliasBidder(i,e)))))}))}configureCustomAdapter(e,t){return A(this,void 0,void 0,(function*(){return(yield Ni.init()).registerBidAdapter((()=>t),e)}))}},rr="ATS";class ar extends Jn{constructor(){super(...arguments),this.isLoaded=!1,this.launchpadScriptUrl="https://launchpad-wrapper.privacymanager.io/2f928425-1fbe-4680-b67a-c5f5ad831378/launchpad-liveramp.js",this.launchpadBundleScriptUrl="https://launchpad.privacymanager.io/latest/launchpad.bundle.js"}call(){if(!this.isEnabled("bidders.liveRampATS.enabled"))return void q(rr,"disabled");if(q(rr,"enabled"),this.isLoaded)return;const e=Z.get("wiki.opts.userEmailHashes");if(!Array.isArray(e)||3!==(null==e?void 0:e.length))return;const[t,i,n]=e,s=Oi.loadScript(this.launchpadScriptUrl),o=Oi.loadScript(this.launchpadBundleScriptUrl);return Promise.all([s,o]).then((()=>this.waitForAts())).then((()=>{const e=Z.get("options.geoRequiresConsent")?"gdpr":"ccpa",s="gdpr"===e?x.get("euconsent-v2"):x.get("usprivacy");window.ats.setAdditionalData({consentType:e,consentString:s,type:"emailHashes",id:[i,n,t]}),q(rr,"additional data set"),this.isLoaded=!0}))}waitForAts(){return new Pi((()=>void 0!==window.ats),10,50).until()}}ar.PLACEMENT_ID="2161",ar.ENVELOPE_STORAGE_NAME="_lr_env";const dr="LiveRamp",lr=new class{getConfig(){return this.isEnabled()?(q(dr,"enabled"),{userSync:{userIds:[{name:"identityLink",params:{pid:ar.PLACEMENT_ID},storage:{type:"html5",name:ar.ENVELOPE_STORAGE_NAME,expires:1,refreshInSeconds:1800}}],syncDelay:3e3}}):(q(dr,"disabled"),{})}isEnabled(){return Z.get("bidders.liveRampId.enabled")&&!Z.get("options.optOutSale")&&!vn()}};function cr(e){return 0===e?0:e<1?1:Math.floor(e)}function ur(e){return e?parseFloat(e).toFixed(2):""}const pr="prebid",hr={buckets:[{max:5,increment:.01},{max:10,increment:.1},{max:20,increment:.5},{max:50,increment:1}]},gr={buckets:[{max:10,increment:.01},{max:20,increment:.5},{max:50,increment:1}]};function mr(e){return A(this,void 0,void 0,(function*(){const t=Di.get("hb_adid",e.getSlotName());t&&((yield Ni.init()).markWinningBidAsUsed({adId:t}),e.emit(ki.VIDEO_AD_USED))}))}Gt.onSlotEvent(ki.VIDEO_AD_IMPRESSION,(({slot:e})=>mr(e))),Gt.onSlotEvent(ki.VIDEO_AD_ERROR,(({slot:e})=>mr(e)));class fr extends eo{constructor(e,t=2e3){super("prebid",e,t),this.bidderConfig=e,this.timeout=t,this.tcf=Ao,or.configureAdapters(),this.adUnits=or.setupAdUnits(),this.bidsRefreshing=Z.get("bidders.prebid.bidsRefreshing")||{},this.prebidConfig={bidderSequence:"random",bidderTimeout:this.timeout,cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},debug:["1","true"].includes(L.get("pbjs_debug")),cpmRoundingFunction:cr,mediaTypePriceGranularity:{banner:hr,video:gr,"video-outstream":gr},rubicon:{singleRequest:!0},userSync:{filterSettings:{iframe:{bidders:"*",filter:"include"},image:{bidders:"*",filter:"include"}},syncsPerBidder:3,syncDelay:6e3}},vn()&&(this.prebidConfig.coppa=!0),this.prebidConfig=Object.assign(Object.assign(Object.assign(Object.assign({},this.prebidConfig),this.configureTargeting()),this.configureLiveRamp()),this.configureTCF()),this.applyConfig(this.prebidConfig),this.configureAdUnits(),this.registerBidsRefreshing(),this.registerBidsTracking(),this.enableATSAnalytics(),q(pr,"prebid created",this.prebidConfig)}configureTargeting(){return Z.get("bidders.prebid.disableSendAllBids")?{enableSendAllBids:!1,targetingControls:{alwaysIncludeDeals:!0,allowTargetingKeys:["AD_ID","BIDDER","DEAL","PRICE_BUCKET","SIZE","UUID"]}}:{enableSendAllBids:!0,sendBidsControl:{bidLimit:2,dealPrioritization:!0},targetingControls:{alwaysIncludeDeals:!0,allowTargetingKeys:["AD_ID","BIDDER","PRICE_BUCKET","UUID","SIZE","DEAL"],allowSendAllBidsTargetingKeys:["AD_ID","PRICE_BUCKET","UUID","SIZE","DEAL"]}}}configureLiveRamp(){return lr.getConfig()}configureTCF(){return this.tcf.exists?{consentManagement:{gdpr:{cmpApi:"iab",timeout:this.timeout,allowAuctionWithoutConsent:!1,defaultGdprScope:!1},usp:{cmpApi:"iab",timeout:100}}}:{}}configureAdUnits(e=[]){return A(this,void 0,void 0,(function*(){yield Ni.init(),e.length?this.adUnits=e:this.adUnits||(this.adUnits=or.setupAdUnits())}))}applyConfig(e){return A(this,void 0,void 0,(function*(){return(yield Ni.init()).setConfig(e)}))}applySettings(){return A(this,void 0,void 0,(function*(){(yield Ni.init()).bidderSettings=Object.assign({standard:{suppressEmptyKeys:!0,allowZeroCpmBids:!0}},function(e){const t={};return e.forEach((({bidderName:e})=>{e&&(t[e]={adserverTargeting:[{key:`hb_deal_${e}`,val:({dealId:e})=>e}],suppressEmptyKeys:!0,allowZeroCpmBids:!0})})),t}(or.getAdapters()))}))}callBids(e){this.adUnits||(this.adUnits=or.setupAdUnits()),0!==this.adUnits.length&&(this.applySettings(),this.removeAdUnits(),this.requestBids(this.adUnits,(()=>{e(),Gt.emit(Ut.BIDDERS_AUCTION_DONE)})),Gt.emit(Ut.BIDDERS_BIDS_CALLED))}removeAdUnits(){return A(this,void 0,void 0,(function*(){const e=yield Ni.init();(e.adUnits||[]).forEach((t=>e.removeAdUnit(t.code)))}))}getBestPrice(e){return function(e){return A(this,void 0,void 0,(function*(){const t={},i=or.getAdapters();for(const n of Array.from(i.entries())){const i=yield sr(e,n[1].bidderName),{hb_pb:s}=i;t[n[1].bidderName]=ur(s)}return t}))}(this.getSlotAlias(e))}getTargetingKeys(e){return Object.keys(Di.dump(e)||{}).filter((e=>0===e.indexOf("hb_")))}getTargetingParams(e){return A(this,void 0,void 0,(function*(){const t=yield Ni.init(),i=this.getSlotAlias(e);return t.getAdserverTargeting()[i]}))}isSupported(e){const t=this.getSlotAlias(e);return this.adUnits&&this.adUnits.some((e=>e.code===t))}registerBidsRefreshing(){return A(this,void 0,void 0,(function*(){const e=yield Ni.init();this.bidsRefreshing=Z.get("bidders.prebid.bidsRefreshing")||{},e.onEvent("bidWon",(e=>{if(-1!==this.bidsRefreshing.slots.indexOf(e.adUnitCode)){Gt.emit(Ut.BIDDERS_BIDS_REFRESH,{refreshedSlotNames:[e.adUnitCode]});const t=this.adUnits.filter((t=>t.code===e.adUnitCode&&t.bids&&t.bids[0]&&t.bids[0].bidder===e.bidderCode));this.requestBids(t,this.bidsRefreshing.bidsBackHandler)}}))}))}registerBidsTracking(){return A(this,void 0,void 0,(function*(){const e=yield Ni.init();e.onEvent("bidResponse",(e=>{Gt.emit(Ut.BIDDERS_BIDS_RESPONSE,{bidResponse:this.mapResponseToTrackingBidDefinition(e)})})),e.onEvent("adRenderSucceeded",(e=>Yn.reportPrebidWin(e.bid)))}))}mapResponseToTrackingBidDefinition(e){return{bidderName:e.bidderCode,price:e.cpm.toString(),responseTimestamp:e.responseTimestamp,slotName:Zs(e.adUnitCode),size:e.size,timeToRespond:e.timeToRespond}}requestBids(e,t,i=this.timeout){return A(this,void 0,void 0,(function*(){const n=yield Ni.init();yield Yn.initialize(n),n.requestBids({adUnits:e,bidsBackHandler:t,timeout:i})}))}enableATSAnalytics(){Z.get("bidders.liveRampATSAnalytics.enabled")&&(q(pr,"prebid enabling ATS Analytics"),window.pbjs.que.push((()=>{window.pbjs.enableAnalytics([{provider:"atsAnalytics",options:{pid:ar.PLACEMENT_ID}}])})))}calculatePrices(){}}const vr="bidders";class br extends Jn{constructor(){super(),this.biddersProviders={},this.realSlotPrices={},Gt.onSlotEvent(ki.VIDEO_AD_REQUESTED,(({slot:e})=>{e.updateWinningPbBidderDetails()})),Gt.onSlotEvent(ki.VIDEO_AD_USED,(({slot:e})=>{this.updateSlotTargeting(e.getSlotName())})),Gt.on(Ut.BIDDERS_BIDS_REFRESH,(({refreshedSlotNames:e})=>{e.forEach((e=>this.updateSlotTargeting(e)))}),!1)}getName(){return"bidders"}isEnabled(){return Z.get("bidders.prebid.enabled")||Z.get("bidders.a9.enabled")}applyTargetingParams(e,t){Object.keys(t).forEach((i=>Di.set(i,t[i],e)))}getBiddersProviders(){return Object.values(this.biddersProviders)}getBidParameters(e){return A(this,void 0,void 0,(function*(){const t={};return yield Promise.all(this.getBiddersProviders().map((i=>A(this,void 0,void 0,(function*(){if(i&&i.wasCalled()){const n=yield i.getSlotTargetingParams(e);Object.assign(t,n)}}))))),t}))}getCurrentSlotPrices(e){return A(this,void 0,void 0,(function*(){const t={};return yield Promise.all(this.getBiddersProviders().map((i=>A(this,void 0,void 0,(function*(){if(i&&i.isSlotSupported(e)){const n=yield i.getSlotBestPrice(e);Object.keys(n).forEach((e=>{t[e]=n[e]}))}}))))),t}))}getDfpSlotPrices(e){return this.realSlotPrices[e]||{}}resetTargetingKeys(e){this.getBiddersProviders().forEach((t=>{t.getTargetingKeys(e).forEach((t=>{Di.remove(t,e)}))})),q(vr,"resetTargetingKeys",e)}call(){const e=Z.get("bidders")||{},t=gn();return e.prebid&&e.prebid.enabled&&(this.biddersProviders.prebid=new fr(e.prebid,e.timeout)),To.isEnabled()?this.biddersProviders.a9=new To(e.a9,e.timeout):q(vr,"A9 has been disabled"),this.getBiddersProviders().length?(this.getBiddersProviders().forEach((e=>{e.addResponseListener((()=>{this.hasAllResponses()&&(q(vr,"resolving call() promise because of having all responses"),t.resolve(null))})),e.call()})),q(vr,"returning call() promise"),t):(q(vr,"resolving call() promise because of no bidder providers"),Promise.resolve())}storeRealSlotPrices(e){return A(this,void 0,void 0,(function*(){this.realSlotPrices[e]=yield this.getCurrentSlotPrices(e)}))}updateSlotTargeting(e){return A(this,void 0,void 0,(function*(){const t=yield this.getBidParameters(e);return yield this.storeRealSlotPrices(e),this.resetTargetingKeys(e),this.applyTargetingParams(e,t),q(vr,"updateSlotTargeting",e,t),Gt.emit(Ut.BIDDERS_BIDDING_DONE,{slotName:e,provider:"prebid"}),t}))}hasAllResponses(){return 0===Object.keys(this.biddersProviders).filter((e=>!this.biddersProviders[e].hasResponse())).length}}var yr;let _r=class{constructor(e){this.dwTracker=e}init(){Gt.on(Ut.AD_ENGINE_AD_RESIZED,(({slot:e,sizes:t})=>{this.track(e,t.width,t.height)}),!1)}track(e,t,i){this.dwTracker.track({ad_width:t,ad_height:i,slot_id:e.getUid()||"",creative_id:e.creativeId||"",line_item_id:e.lineItemId||"",rv:e.getTargetingProperty("rv")||"",position:e.getMainPositionName(),slot_size:e.getCreativeSize()||""},os.AD_ENG_AD_SIZE_INFO)}};var Sr;_r=E([h(),T("design:paramtypes",["function"==typeof(yr=void 0!==Ss&&Ss)?yr:Object])],_r);let wr=class{constructor(e){this.dwTracker=e}track(e){const t=new Date;this.dwTracker.track({prop_value:e,timestamp:t.getTime(),tz_offset:t.getTimezoneOffset()},os.AD_ENG_LABRADOR_INFO)}};var Er,Ir,Tr,Ar,Cr;wr=E([h(),T("design:paramtypes",["function"==typeof(Sr=void 0!==Ss&&Ss)?Sr:Object])],wr);const Or=$t("[AdEngine] Ad clicked",{_as:"props",_p:void 0});let Nr=class{constructor(e,t,i,n,s=null){this.labradorTracker=e,this.adSizeTracker=t,this.dwTracker=i,this.bidders=n,this.instantConfig=s}execute(){this.porvataTracker(),this.slotTracker(),this.viewabilityTracker(),this.bidderTracker(),this.postmessageTrackingTracker(),this.experimentGroupsTracker(),this.interventionTracker(),this.adClickTracker(),this.ctaTracker(),this.identityTracker(),this.keyValsTracker(),this.adSizeTracker.init()}identityTracker(){this.instantConfig.get("icIdentityPartners",!1)||Gt.on(Ut.IDENTITY_PARTNER_DATA_OBTAINED,(e=>{this.dwTracker.track({partner_name:e.payload.partnerName,partner_identity_id:e.payload.partnerIdentityId},os.IDENTITY_INFO)}),!1)}porvataTracker(){Gt.on(Ut.VIDEO_PLAYER_TRACKING,(({eventInfo:e})=>{this.dwTracker.track(e,os.AD_ENG_PLAYER_INFO)}),!1),Os.register()}slotTracker(){let e=null;(Z.get("bidders.prebid.enabled")||Z.get("bidders.a9.enabled"))&&(e=this.bidders),xs.onChangeStatusToTrack.push("top-conflict"),xs.register((({data:e})=>{this.dwTracker.track(e,os.AD_ENG_AD_INFO)}),{bidders:e})}viewabilityTracker(){Vs.register((({data:e})=>(this.dwTracker.track(e,os.AD_ENG_VIEWABILITY),e)))}ctaTracker(){Ms.register((({data:e})=>{this.dwTracker.track(e,os.AD_ENG_AD_INFO)}))}adClickTracker(){Us.register((({data:e})=>{Gt.dispatch(Or(e)),this.dwTracker.track(e,os.AD_ENG_AD_INFO)}))}bidderTracker(){(Z.get("bidders.prebid.enabled")||Z.get("bidders.a9.enabled"))&&Fs.register((({data:e})=>{this.dwTracker.track(e,os.AD_ENG_BIDDERS)}))}postmessageTrackingTracker(){new Ys(["payload","target"]).register((e=>A(this,void 0,void 0,(function*(){const{target:t,payload:i}=e;switch(t){case qs.GoogleAnalytics:window.ga("tracker1.send","event",i.category,i.action,i.label,"number"==typeof i.value?i.value.toString():i.value);break;case qs.DataWarehouse:this.dwTracker.track(i)}return e}))),[window.origin,...In])}experimentGroupsTracker(){const e=[...qt.make().getSamplingResults(),...Di.get("experiment_groups")||[]].join(";");e&&this.labradorTracker.track(e)}interventionTracker(){Js.register()}keyValsTracker(){const e=Object.assign({},Di.dump());delete e.AU_SEG,this.dwTracker.track({keyvals:JSON.stringify(e)},os.KEY_VALS)}};Nr=E([h(),T("design:paramtypes",["function"==typeof(Er=void 0!==wr&&wr)?Er:Object,"function"==typeof(Ir=void 0!==_r&&_r)?Ir:Object,"function"==typeof(Tr=void 0!==Ss&&Ss)?Tr:Object,"function"==typeof(Ar=void 0!==br&&br)?Ar:Object,"function"==typeof(Cr=void 0!==Ci&&Ci)?Cr:Object])],Nr);class Pr{constructor(){this.logGroup="identity-setup"}execute(){return A(this,void 0,void 0,(function*(){return q(this.logGroup,"initialized"),yield this.identityEngineReady(),this.setupOver18Targeting(),Promise.resolve()}))}identityEngineReady(){return A(this,void 0,void 0,(function*(){return new Promise((e=>{Gt.on(Ut.IDENTITY_ENGINE_READY,(()=>{const t=fn.getValue("tracking","ppid");if(t&&Di.set("ppid",t),Z.get("services.identityPartners")){const e=fn.getValue("targeting","AU_SEG");Di.set("AU_SEG",e)}q(this.logGroup,"ready"),e()}))}))}))}setupOver18Targeting(){Gt.on(Ut.IDENTITY_PARTNER_DATA_OBTAINED,(()=>{const e=window.fandomContext.tracking.over_18;e&&Di.set("over_18",e)}))}}var kr,Dr;let Lr=class{constructor(e){this.container=e}execute(e,t,i){return A(this,void 0,void 0,(function*(){if(this.isCompoundProcessStep(e)){const t=this.container.get(e.process);return yield t.execute(e.payload),i()}if(this.isDiProcess(e)){const t=this.container.get(e);return yield t.execute(),i()}return yield e(),i()}))}isCompoundProcessStep(e){return"object"==typeof e&&"process"in e&&"function"==typeof e.process.prototype.execute}isDiProcess(e){var t;return"function"==typeof(null===(t=e.prototype)||void 0===t?void 0:t.execute)}};Lr=E([h({scope:"Transient"}),T("design:paramtypes",["function"==typeof(kr=void 0!==_&&_)?kr:Object])],Lr);let zr=class extends Gs{constructor(e){super(e.get(Lr))}};var xr,Rr;zr=E([h({scope:"Transient"}),T("design:paramtypes",["function"==typeof(Dr=void 0!==_&&_)?Dr:Object])],zr);let jr=xr=class{constructor(e){this.instantConfig=e}execute(){const e=this.instantConfig.get("icSlotsConfig");return e&&xr.extendSlotsConfiguration(Z.get("slots"),e),Promise.resolve()}static extendSlotsConfiguration(e,t){Object.getOwnPropertyNames(t).forEach((i=>{e[i]&&xr.extendBaseSlotConfiguration(e[i],t[i])}))}static extendBaseSlotConfiguration(e,t){Array.isArray(t.defaultSizes)&&(e.defaultSizes=xr.mergeArrayOfArraysWithoutDuplicates(e.defaultSizes,t.defaultSizes)),t.targeting&&(e.targeting=e.targeting?Object.assign(e.targeting,t.targeting):t.targeting)}static mergeArrayOfArraysWithoutDuplicates(e,t){return e||(e=[]),Array.from(new Set([...e,...t].map((e=>JSON.stringify(e)))),(e=>JSON.parse(e)))}};var Vr;jr=xr=E([h(),T("design:paramtypes",["function"==typeof(Rr=void 0!==Ci&&Ci)?Rr:Object])],jr);let Mr=class{constructor(e){this.instantConfig=e}execute(){this.setBaseState(),this.setupIdentityOptions(),this.setupServicesOptions(),this.setupVideo(),this.setupStickySlotContext()}setBaseState(){Z.set("custom.device",Z.get("state.isMobile")?"m":""),Z.set("custom.dfpId",this.shouldSwitchGamToRV()?22309610186:5441),Z.set("custom.pagePath",this.getPagePath()),Z.set("src",this.shouldSwitchSrcToTest()?["test"]:Z.get("src"))}setupIdentityOptions(){Z.set("services.liveConnect.enabled",this.instantConfig.get("icLiveConnect")),Z.set("services.liveConnect.cachingStrategy",this.instantConfig.get("icLiveConnectCachingStrategy")),Z.set("services.liveRampPixel.enabled",this.instantConfig.get("icLiveRampPixel")),Z.set("services.ppid.enabled",this.instantConfig.get("icPpid")),Z.set("services.ppidRepository",this.instantConfig.get("icPpidRepository")),Z.set("services.identityTtl",this.instantConfig.get("icIdentityTtl"))}setupServicesOptions(){Z.set("bidders.prebid.disableSendAllBids",this.instantConfig.get("icPrebidDisableSendAllBids")),Z.set("services.captify.propertyId",13061),Z.set("services.confiant.propertyId","IOegabOoWb7FyEI1AmEa9Ki-5AY")}setupVideo(){var e,t,i;Z.set("vast.adUnitId",this.buildVastAdUnit()),Z.set("options.video.playAdsOnNextVideo",!!this.instantConfig.get("icFeaturedVideoAdsFrequency")),Z.set("options.video.adsOnNextVideoFrequency",this.instantConfig.get("icFeaturedVideoAdsFrequency",3)),Z.set("options.video.isMidrollEnabled",this.instantConfig.get("icFeaturedVideoMidroll")),Z.set("options.video.isPostrollEnabled",this.instantConfig.get("icFeaturedVideoPostroll")),Z.set("options.video.forceVideoAdsOnAllVideosExceptSecond",this.instantConfig.get("icFeaturedVideoForceVideoAdsEverywhereExcept2ndVideo")),Z.set("options.video.forceVideoAdsOnAllVideosExceptSponsored",this.instantConfig.get("icFeaturedVideoForceVideoAdsEverywhereExceptSponsoredVideo")),Z.set("options.video.iasTracking.enabled",this.instantConfig.get("icIASVideoTracking")),Z.set("options.video.comscoreJwpTracking",this.instantConfig.get("icComscoreJwpTracking")),Z.set("options.video.pauseJWPlayerAd",this.instantConfig.get("icPauseJWPlayerAd")),Z.set("services.anyclip.anyclipTagExists",!!(null===(e=this.getDataSettingsFromMetaTag())||void 0===e?void 0:e.anyclip)||!!(null===(i=null===(t=this.getDataSettingsFromMetaTag())||void 0===t?void 0:t.target_params)||void 0===i?void 0:i.anyclip))}setupStickySlotContext(){Z.set("templates.stickyTlb.forced",this.instantConfig.get("icForceStickyTlb"));const e=this.instantConfig.get("icStickySlotLineItemIds"),t=this.instantConfig.get("icStickySlotOrderIds");e&&e.length&&Z.set("templates.stickyTlb.lineItemIds",e),t&&t.length&&Z.set("templates.stickyTlb.ordersIds",t)}buildVastAdUnit(){return`${Z.get("custom.dfpId")}/v${Z.get("custom.region")}-${Z.get("custom.property")}/${"m"===Z.get("custom.device")?"mobile":"desktop"}${Z.get("custom.pagePath")}`}shouldSwitchGamToRV(){return"1"===L.get("switch_to_rv_gam")}shouldSwitchSrcToTest(){return"1"===L.get("switch_src_to_test")}getPagePath(){const e=this.getDataSettingsFromMetaTag(),t=(null==e?void 0:e.unit_name)?this.getPagePathFromMetaTagData(e):this.getPagePathFromUtagData();return t?"/"===t[0]?t:"/"+t:""}getPagePathFromMetaTagData(e){var t,i;const n=Z.get("custom.property"),s=null===(t=null==e?void 0:e.unit_name)||void 0===t?void 0:t.indexOf(n);return(null===(i=null==e?void 0:e.unit_name)||void 0===i?void 0:i.slice(s)).replace(n,"")}getPagePathFromUtagData(){const e=this.getUtagData();return null==e?void 0:e.siteSection}getDataSettingsFromMetaTag(){var e;const t=null===(e=document.getElementById("ad-settings"))||void 0===e?void 0:e.getAttribute("data-settings");if(this.log("Ad settings: ",t),!t)return null;try{return JSON.parse(t)}catch(e){return this.log("Could not parse JSON"),null}}getUtagData(){const e=window.utag_data;return this.log("utag data: ",e),e}log(...e){q("setup",...e)}};var Ur;Mr=E([h(),T("design:paramtypes",["function"==typeof(Vr=void 0!==Ci&&Ci)?Vr:Object])],Mr);let Br=class{constructor(e){this.instantConfig=e}execute(){const e=this.instantConfig.get("icBabDetection");Z.set("options.wad.enabled",e),e&&Z.set("options.wad.btRec.enabled",this.instantConfig.get("icBTRec")),L.get("switch_bt_loader")&&Z.set("options.wad.btRec.loaderUrl","//btloader.com/tag?o=6209001497821184&upapi=true")}};Br=E([h(),T("design:paramtypes",["function"==typeof(Ur=void 0!==Ci&&Ci)?Ur:Object])],Br);var $r=s(6379),Fr=s.n($r);class Gr{execute(){const e=Z.get("custom"),t=Object.assign(Object.assign(Object.assign(Object.assign({},this.getPageLevelTargeting()),this.getCookieBasedTargeting(e)),this.getViewGuid()),this.getForcedCampaignsTargeting());this.setSlotLevelTargeting(t,e),Di.extend(Object.assign(Object.assign(Object.assign({},Di.dump()),t),{is_mobile:Z.get("state.isMobile")?"1":"0",uap:"none",uap_c:"none"})),function(){const e=sn()?0:1;Di.set("npa",e.toString())}(),function(){const e=on()?1:0;Di.set("rdp",e.toString())}()}getPageLevelTargeting(){const e=this.getAdTags(),t=this.parseAdTags(e);return this.getMappedAdTags(t)}getAdTags(){var e;return null===(e=document.head.querySelector("[name=adtags]"))||void 0===e?void 0:e.getAttribute("content")}parseAdTags(e){if(e)return Object.fromEntries(new URLSearchParams(e))}getMappedAdTags(e){if(!e)return;const t={};for(const[i,n]of Object.entries(e))"cid"!==i?"con"!==i?"genre"!==i?"network"!==i?t[i]=n:t.tv=n:t.gnre=n:t.pform=n:t.contentid_nr=n;return t}getViewGuid(){return{vguid:this.getViewGuidFromUtagData()||this.getViewGuidFromMetaTag()}}getViewGuidFromUtagData(){var e;return null===(e=window.utag_data)||void 0===e?void 0:e.pageViewGuid}getViewGuidFromMetaTag(){const e=document.getElementById("view-guid-meta"),t="content";let i="";return e&&e.hasAttribute(t)&&(i=e.getAttribute(t)),i}getCookieBasedTargeting(e){const t=new R,i="_BB.bs",n="_BB.d",s=e.targeting.cookie.consolidate;let o=null;const r=t.getItem("surround");if(r)o=r.split("|"),s&&t.removeItem("surround");else{const t=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"].slice(0,e.targeting.seats.session);o=[t[Math.floor(Math.random()*t.length)],(Math.floor(Math.random()*e.targeting.seats.subsession)+1).toString()]}const a=[t.getItem(i),t.getItem(n)],d={session:o[0],subses:o[1]},l=["session","subses","ftag","ttag"],c=e.targeting.cookie.keyMap;for(let e=0;e<l.length;e+=1){const i=l[e];if(c[i]){const e=t.getItem(c[i]);e&&(d[i]=e,s&&t.removeItem(c[i]))}}const u=this.isJsonString(a[0])?JSON.parse(a[0]):{},p=this.isJsonString(a[1])?JSON.parse(a[1]):{},h={ttag:p.ttag||d.ttag||"",ftag:p.ftag||d.ftag||"",session:u.session||d.session,subses:u.subses||d.subses,pv:p.pv||d.pv||"0"};if(s||(t.removeItem(i),t.removeItem(n)),void 0!==h.pv){let e=parseInt(h.pv,10);e+=1,h.pv=e.toString()}if(s){const e={session:h.session,subses:h.subses},s={ttag:h.ttag,ftag:h.ftag,pv:h.pv};Fr()(a[0],e)||t.setItem(i,JSON.stringify(e)),Fr()(a[1],s)||t.setItem(n,JSON.stringify(s))}else h.session!==d.session&&t.setItem("session",h.session),h.subses!==d.subses&&t.setItem("subses",h.subses);return s||(h.ftag!==d.ftag&&t.setItem("ftag",h.ftag),h.ttag!==d.ttag&&t.setItem("ttag",h.ttag)),h}getForcedCampaignsTargeting(){return L.get("cid")?{cid:L.get("cid")}:L.get("adTargeting_campaign")?{campaign:L.get("adTargeting_campaign")}:{}}setSlotLevelTargeting(e,t){Gt.on(Ut.AD_ENGINE_SLOT_ADDED,(({slot:i})=>{i.setTargetingConfigProperty("sl",this.getSlValue(i,t)),i.setTargetingConfigProperty("iid",this.getIidValue(i,e))}),!1)}getSlValue(e,t){const i=[];return t.timeouts.bidder&&i.push(`T-${t.timeouts.bidder}`),e.getSlotName()+(i.length>0?"?"+i.join("|"):"")}getIidValue(e,t){let i=`unit=${e.getSlotName()}|`;return t.vguid&&(i+=`vguid=${t.vguid}|`),t.pv&&(i+=`pv=${t.pv}`),i}isJsonString(e){try{JSON.parse(e)}catch(e){return!1}return!0}}const Hr="slot-repeater";class Wr{repeatSlot(e,t){const i=e.getCopy(),n=Ln.build(t.slotNamePattern,{slotConfig:Object.assign(Object.assign({},i),{repeat:t})});if(i.slotName=n,null!==t.limit&&t.index>t.limit)q(Hr,`Limit reached for ${n}`);else{if(!Z.get(`slots.${n}.uid`))return Z.set(`slots.${n}`,i),Z.set(`slots.${n}.uid`,Li()),this.updateProperties(t,i),n;q(Hr,`Slot already repeated: ${n}`)}}updateProperties(e,t){e.updateProperties&&Object.keys(e.updateProperties).forEach((i=>{let n=e.updateProperties[i];"string"==typeof n&&(n=Ln.build(n,{slotConfig:Object.assign(Object.assign({},t),{repeat:e})})),Z.set(`slots.${t.slotName}.${i}`,n),i.startsWith("targeting.")&&Di.set(i.replace("targeting.",""),n,t.slotName)}))}}const qr="slot-creator";let Kr=class{constructor(e=new Wr){this.slotRepeater=e}createSlot(e,t){var i;if(!e)return null;q(qr,`Creating: ${e.slotName}`,e,t);const n=this.fillSlotConfig(e),s=this.makeSlot(n,e.anchorElement);if(n.repeat&&this.setupSlotRepeat(n),"alter"===e.insertMethod)return s;const o=this.wrapSlot(s,t);return this.getAnchorElement(n)[n.insertMethod](o),(null===(i=n.placeholderConfig)||void 0===i?void 0:i.createLabel)&&this.addAdLabel(s.parentElement,n.slotName),s}fillSlotConfig(e){var t;return Object.assign(Object.assign({},e),{anchorElement:e.anchorElement||null,anchorPosition:null!==(t=e.anchorPosition)&&void 0!==t?t:"firstViable",avoidConflictWith:e.avoidConflictWith||[],classList:e.classList||[],repeat:e.repeat,placeholderConfig:e.placeholderConfig})}getAnchorElement(e){const t=this.getAnchorElements(e),i=this.getConflictElements(e),n=t.find((e=>!$i(e,i)));return n||this.throwNoPlaceToInsertError(e.slotName),q(qr,"getAnchorElement() called",e,n),n}getAnchorElements(e){const t=Array.from(document.querySelectorAll(e.anchorSelector));switch(e.anchorPosition){case"belowFirstViewport":return t.filter((e=>ji(e)>Mi()));case"belowScrollPosition":return t.filter((e=>ji(e)>window.scrollY));case"firstViable":return t;default:{const i=t[e.anchorPosition];return i||this.throwNoPlaceToInsertError(e.slotName),[i]}}}getConflictElements(e){const t=[];return e.avoidConflictWith.forEach((e=>{const i=Array.from(document.querySelectorAll(e));t.push(...i)})),t}makeSlot(e,t=null){const i=t||document.createElement("div");if(i)return i.id=e.slotName,i.classList.add("gpt-ad",...e.classList),i}wrapSlot(e,t){if(!t)return e;const i=document.createElement("div");return t.classList&&i.classList.add(...t.classList),t.id&&(i.id=t.id),i.append(e),i}addAdLabel(e,t){const i=document.createElement("div");i.className=zn,i.innerText=io("advertisement"),i.dataset.slotName=t,e.appendChild(i)}setupSlotRepeat(e){Gt.onSlotEvent(ki.SLOT_RENDERED_EVENT,(({slot:t})=>{if(!t.isEnabled())return;q(qr,`Repeating: ${e.slotName}`),e.repeat.index+=1;const i=this.slotRepeater.repeatSlot(t,e.repeat);if(!i)return;const n=Object.assign(Object.assign(Object.assign({},e),e.repeat.updateCreator||{}),{slotName:i});try{this.createSlot(n)}catch(e){return void q(qr,`There is not enough space for ${i}`)}q(qr,"Injecting slot:",i),!0!==e.repeat.disablePushOnScroll&&Z.push("events.pushOnScroll.ids",i)}),e.slotName)}throwNoPlaceToInsertError(e){throw new Error(`No place to insert slot ${e}.`)}};Kr=E([h(),T("design:paramtypes",[Object])],Kr);const Yr="cubic-bezier(0.55, 0.055, 0.675, 0.19)",Xr=600,Jr="none",Qr="none",Zr=["uap","vuap"],ea="/5441/uap",ta=3e3,ia=2e3,na="force-unstick",sa="unsticked",oa="sticked",ra="sticky-ready",aa="sticky-skipped",da="stickiness-disabled",la="video-done",ca={bfaSize:{desktop:[3,3],mobile:[2,2],unified:[2,3]},companionSizes:{"4x4":{size:[4,4],originalSize:[300,250]},"5x5":{size:[5,5],originalSize:[300,600]}}};function ua(e){return function(e){const t=Z.get("slotGroups")||{},i=Object.keys(t).filter((i=>-1!==t[i].indexOf(e)));return 1===i.length?i[0]:null}(e.toUpperCase())||"OTHER"}function pa(e,t){return Ln.build(Z.get(`slots.${e}.videoAdUnit`)||Z.get("vast.adUnitId"),{slotConfig:t})}const ha=new class{addVariable(e,t){window.ads.runtime=window.ads.runtime||{},window.ads.runtime[e]=t}},ga=new class{addSlotSize(e,t){if(!Z.get(`slots.${e}`))throw new Error(`Requested ad slot is not defined in the ad context (${e})`);Z.push(`slots.${e}.defaultSizes`,t);const i=Z.get(`slots.${e}.sizes`);i&&i.forEach((e=>{e.sizes.push(t)}))}removeSlotSize(e,t){if(!Z.get(`slots.${e}`))throw new Error("Requested ad slot is not defined in the ad context");const i=Z.get(`slots.${e}.defaultSizes`).filter((e=>e!=t)),n=Z.get(`slots.${e}.sizes`).map((e=>e.sizes.filter((e=>e!=t))));Z.set(`slots.${e}.defaultSizes`,i),Z.set(`slots.${e}.sizes`,n)}setSlotSize(e,t){if(!Z.get(`slots.${e}`))throw new Error("Requested ad slot is not defined in the ad context");Z.set(`slots.${e}.sizes`,[]),Z.set(`slots.${e}.defaultSizes`,[t])}setupSlotVideoContext(){Gt.on(Ut.AD_ENGINE_SLOT_ADDED,(({slot:e})=>{Z.onChange(`slots.${e.getSlotName()}.audio`,(()=>this.setupSlotParameters(e))),Z.onChange(`slots.${e.getSlotName()}.videoDepth`,(()=>this.setupSlotParameters(e)))}),!1)}setupCustomPlayerAdUnit(e="incontent_player"){Gt.on(Ut.AD_ENGINE_STACK_START,(()=>{const t=pa(e,{group:"VIDEO",adProduct:"incontent_video",slotNameSuffix:""});ha.addVariable("video",{adUnit:t})}))}setupSlotVideoAdUnit(e,t){const i=function(e,t,i){let n=e;return Zr.includes(i)&&(n=`UAP_${t.toUpperCase()}`),{adGroup:ua(n),adProduct:n.toLowerCase()}}(e.getSlotName(),t.type,t.adProduct),n={group:i.adGroup,adProduct:i.adProduct},s=pa(e.getSlotName(),n);Z.set(`slots.${e.getSlotName()}.videoAdUnit`,s)}setState(e,t,i){const n=document.getElementById(e);Qi.setState(e,!!n&&t,i)}setupSlotParameters(e){const t=!0===e.config.audio?"-audio":"",i=!0===e.config.autoplay||e.config.videoDepth>1?"":"-ctp";e.setConfigProperty("slotNameSuffix",i||t||""),e.setTargetingConfigProperty("audio",t?"yes":"no"),e.setTargetingConfigProperty("ctp",i?"yes":"no")}},ma=new Kr;function fa(e){e.filter((e=>!!e)).forEach((({slotCreatorConfig:e,slotCreatorWrapperConfig:t,activator:i})=>{try{ma.createSlot(e,t),i&&i()}catch(t){q("insert-slot",t.message),(null==e?void 0:e.slotName)&&ga.setState(e.slotName,!1)}}))}let va=Jr,ba=Jr,ya=Qr;function _a(){return ba}function Sa(e,t){ba=e||Jr,va=t||Jr,Ia(ba,va)}function wa(){return ya}function Ea(e){ya=e}function Ia(e,t){const i=Z.get("slots")||{};Object.keys(i).forEach((i=>{Di.set("uap",e,i),Di.set("uap_c",t,i)}))}const Ta=Object.assign(Object.assign({},t),{init(e,t=[],i=[]){ha.addVariable("disableBtf",!0);let n="uap";this.isVideoEnabled(e)&&(n="vuap"),e.adProduct=e.adProduct||n,Sa(e.lineItemId||e.uap,e.creativeId),function(e){e.forEach((e=>{Qi.disable(e)}))}(i),function(e){e.forEach((e=>{an.unblock(e)}))}(t),Ea(e.adProduct),e.slotName&&function(e){const t=Qi.get(e.slotName);e.container=t.getElement(),e.isDarkTheme&&e.container.classList.add("is-dark"),e.isMobile&&e.container.classList.add("is-mobile-layout"),(Ai.isSmartphone()||Ai.isTablet())&&e.container.classList.add("is-mobile-device"),e.useVideoSpecialAdUnit&&t.setConfigProperty("videoAdUnit",ea)}(e)},isFanTakeoverLoaded:function(){return _a()!==Jr&&-1!==Zr.indexOf(wa())},getType:wa,getUapId:_a,isVideoEnabled:e=>e.thumbnail,reset:function(){Ea(Qr),Sa(Jr,Jr)},updateSlotsTargeting:Ia});Gt.action$.pipe(Ft(Gt.getGlobalAction(Ut.AD_ENGINE_SLOT_EVENT)),xt((e=>!!Z.get(`slots.${e.adSlotName}.firstCall`)&&[ki.TEMPLATES_LOADED,en.STATUS_COLLAPSE,en.STATUS_FORCED_COLLAPSE].map((t=>e.event===t)).some((e=>!!e)))),Rt(1)).subscribe((()=>{Gt.emit(Ut.AD_ENGINE_UAP_LOAD_STATUS,{isLoaded:Ta.isFanTakeoverLoaded(),adProduct:Ta.getType()})}));const Aa="Anyclip";class Ca{constructor(e){this.subscribeFuncName=e,this.trackingEvents={init:"init",WidgetLoad:"ready",adImpression:"impression",adSkipped:"skipped",adFirstQuartile:"first_quartile",adMidpoint:"midpoint",adThirdQuartile:"third_quartile",adComplete:"completed",adClick:"clicked"}}register(){this.setupAnyclipListeners()}setupAnyclipListeners(){const e=window[this.subscribeFuncName];"function"==typeof e?(q(Aa,"Subscribing to Anyclip events..."),Object.keys(this.trackingEvents).map((t=>{e((e=>this.track(t,e)),t)}))):q(Aa,"Given subscribe function is not a function",this.subscribeFuncName,e)}trackInit(){const e="init";this.track(e,Cs.getEventData(this.getVideoData(e)))}track(e,t){const i=Cs.getEventData(this.getVideoData(e));q(Aa,`Anyclip ${e} event data: `,t,this.getVideoData(e),i),Cs.emit(i),Cs.emitVideoEvent(i)}getVideoData(e){return{ad_error_code:0,event_name:this.trackingEvents[e],player:"anyclip",ad_product:"outstream",position:"incontent_player",line_item_id:"unknown",creative_id:"unknown"}}}const Oa="Anyclip",Na=()=>void 0!==window.lreSubscribe,Pa=(e="incontent_player")=>{const t=Qi.get(e),i=!!document.getElementById(e);return q(Oa,`Waiting for player ad slot (${e}) ready`,i,t),i&&null!==t};class ka extends Jn{get pubname(){return Z.get("services.anyclip.pubname")||"fandomcom"}get widgetname(){return Z.get("services.anyclip.widgetname")||"001w000001Y8ud2_19593"}get libraryUrl(){return Z.get("services.anyclip.libraryUrl")||"//player.anyclip.com/anyclip-widget/lre-widget/prod/v1/src/lre.js"}static isApplicable(){const e=Z.get("services.anyclip.isApplicable");return"function"!=typeof e||e()}call(){!Z.get("custom.hasFeaturedVideo")&&this.isEnabled("icAnyclipPlayer",!1)?(q(Oa,"initialized",this.pubname,this.widgetname,this.libraryUrl),this.tracker=new Ca("lreSubscribe"),Z.get("services.anyclip.loadWithoutAnchor")?Gt.on(Ut.AD_ENGINE_UAP_LOAD_STATUS,(e=>{e.isLoaded||this.loadPlayerAsset()})):Z.get("custom.hasIncontentPlayer")&&Gt.on(Ut.AD_ENGINE_UAP_LOAD_STATUS,this.loadOnUapStatus.bind(this))):q(Oa,"disabled")}reset(){var e,t;q(Oa,"Destroying Anyclip widgets"),null===(t=null===(e=null===window||void 0===window?void 0:window.anyclip)||void 0===e?void 0:e.widgets)||void 0===t||t.forEach((e=>null==e?void 0:e.destroy()))}get params(){return{pubname:this.pubname,widgetname:this.widgetname}}loadPlayerAsset(e=null){if(ka.isApplicable())return q(Oa,"loading Anyclip asset",this.libraryUrl),Oi.loadScript(this.libraryUrl,!0,e,this.params).then((()=>{null==e||e.classList.remove("hide"),q(Oa,"ready"),this.waitForSubscribeReady().then((e=>{q(Oa,"Anyclip global subscribe function set",e,window.lreSubscribe),this.waitForPlayerAdSlot().then((()=>{this.tracker.trackInit()})),e?this.tracker.register():q(Oa,"Anyclip global subscribe function not set")}))}));q(Oa,"not applicable - aborting")}loadOnUapStatus({isLoaded:e,adProduct:t}){if(!e&&"ruap"!==t){if(!Z.get("services.anyclip.latePageInject"))return void this.initIncontentPlayer();Gt.on(Ut.ANYCLIP_LATE_INJECT,(()=>{this.initIncontentPlayer()}))}}initIncontentPlayer(){const e=Qi.get("incontent_player"),t=Z.get("services.anyclip.playerElementId");e||t?t?this.waitForPlayerAdSlot(t).then((()=>{if(!Pa())return void q(Oa,"No incontent player - aborting");const e=document.getElementById(t);this.loadPlayerAsset(e),e.dataset.slotLoaded="true"})):(dn.updateOnCreate(e),this.loadPlayerAsset(e.getElement())):q(Oa,"No incontent player - aborting")}waitForSubscribeReady(){return new Pi(Na,4,250).until()}waitForPlayerAdSlot(e="incontent_player"){return new Pi((()=>Pa(e)),4,250).until()}}var Da;let La=class{constructor(e){this.instantConfig=e}getInterstitialConfig(){if(!this.isInterstitialApplicable())return;const e="interstitial";return{slotCreatorConfig:{slotName:e,anchorSelector:"body",insertMethod:"prepend",classList:["hide","ad-slot"]},activator:()=>{Z.push("state.adStack",{id:e})}}}getFloorAdhesionConfig(){const e="floor_adhesion",t=()=>{const t=this.instantConfig.get("icFloorAdhesionViewportsToStart")||0;-1===t?Z.push("state.adStack",{id:e}):Gt.on(Ut.AD_ENGINE_STACK_START,(()=>{const i=t*Mi();Zi.addSlot(e,{distanceFromTop:i})}))};return{slotCreatorConfig:{slotName:e,anchorSelector:"body",insertMethod:"append",classList:["hide","ad-slot"]},activator:()=>function(e,t=!0){Gt.on(Ut.AD_ENGINE_UAP_LOAD_STATUS,(i=>{i.isLoaded?Gt.onSlotEvent(ki.CUSTOM_EVENT,(({payload:t})=>{[Ta.SLOT_UNSTICKED_STATE,Ta.SLOT_FORCE_UNSTICK,Ta.SLOT_STICKY_STATE_SKIPPED,Ta.SLOT_VIDEO_DONE].includes(t.status)&&setTimeout((()=>e()),Ta.SLIDE_OUT_TIME)}),"top_leaderboard"):t||e()}))}(t,!this.isFloorAdhesionNonUapApplicable())}}isInterstitialApplicable(){return this.instantConfig.get("icInterstitial")&&Z.get("state.isMobile")}isFloorAdhesionNonUapApplicable(){return Z.get("state.isMobile")&&!ka.isApplicable()&&this.instantConfig.get("icFloorAdhesion")}getIncontentPlayerConfig(){if(!ka.isApplicable())return void q("dynamic-slots","Aborting insertion of incontent_player");const e="incontent_player";return{slotCreatorConfig:{slotName:e,anchorSelector:"body",insertMethod:"append",classList:["hide","ad-slot"]},activator:()=>{const{dataset:t}=document.getElementById(e);t.slotLoaded="true",t.ad=e,Z.push("state.adStack",{id:e})}}}};var za;La=E([h(),T("design:paramtypes",["function"==typeof(Da=void 0!==Ci&&Ci)?Da:Object])],La);let xa=class{constructor(e){this.slotsDefinitionRepository=e,this.logGroup="Anyclip"}execute(){const e=Di.get("pname");Z.set("services.anyclip.isApplicable",(()=>{const t=Z.get("services.anyclip.anyclipTagExists"),i=window.location.pathname.toLowerCase(),n=t||(this.isApplicable(e)?this.isApplicable(e):this.isApplicable(i));return q(this.logGroup,"isApplicable: ",n,e),n})),this.shouldPlayerBeIncontent(e)?(q(this.logGroup,"player should be in-content"),this.updateContextForIncontentAnyclip()):(this.updateContextForMiniplayerAnyclip(),q(this.logGroup,"inserting slots without DOM elements"),fa([this.slotsDefinitionRepository.getIncontentPlayerConfig()]))}shouldPlayerBeIncontent(e){return this.isApplicable(e)&&["listings/main"].includes(e)}updateContextForMiniplayerAnyclip(){Z.set("services.anyclip.widgetname",Z.get("services.anyclip.miniPlayerWidgetname")),Z.set("services.anyclip.playerElementSelector",null),Z.set("services.anyclip.loadWithoutAnchor",!0),Z.set("services.anyclip.loadOnPageLoad",!0),Z.set("services.anyclip.latePageInject",!1),Z.set("custom.hasIncontentPlayer",!1)}updateContextForIncontentAnyclip(){Z.set("services.anyclip.widgetname",Z.get("services.anyclip.incontentPlayerWidgetname")),Z.set("services.anyclip.playerElementId","incontent_player"),Z.set("services.anyclip.loadWithoutAnchor",!1),Z.set("services.anyclip.loadOnPageLoad",!1),Z.set("services.anyclip.latePageInject",!1),Z.set("custom.hasIncontentPlayer",!0)}isApplicable(e){return this.isApplicableByPnameAdTag(e)||this.isApplicableByPathname(e)}isApplicableByPnameAdTag(e){return["news","feature_hub","listings/main"].includes(e)}isApplicableByPathname(e){return["/news/"].includes(e)}};var Ra;xa=E([h(),T("design:paramtypes",["function"==typeof(za=void 0!==La&&La)?za:Object])],xa);let ja,Va=class{constructor(e){this.instantConfig=e}execute(){this.instantConfig.get("icA9Bidder")&&this.instantConfig.get("icA9VideoBidder")&&Z.set("bidders.a9.videoEnabled",!0)}};Va=E([h(),T("design:paramtypes",["function"==typeof(Ra=void 0!==Ci&&Ci)?Ra:Object])],Va);class Ma extends Jn{call(){return Gt.onSlotEvent(ki.SLOT_RENDERED_EVENT,(({slot:e})=>{e.removeClass("default-height")})),ja=new Hn,ja.init()}}class Ua extends Jn{constructor(){super(),this.options={timeout:1e4}}call(){return q("gpt-provider","loading GPT..."),Oi.loadScript("//www.googletagservices.com/tag/js/gpt.js").then((()=>{q("gpt-provider","ready")}))}}function Ba(e,t,i){return n=>Pt(n.pipe(Rt(1),kn(e,t,i),xt((()=>!1))),n)}const $a=new class{isEnabled(e){return e.isIasTrackingEnabled()}load(){return this.scriptPromise||(this.scriptPromise=Oi.loadScript("//static.adsafeprotected.com/vans-adapter-google-ima.js",!0,"first")),this.scriptPromise}init(e,t){return this.load().then((()=>{const i=Z.get("options.video.iasTracking.config"),n=t.getSlotName(),{src:s,pos:o,loc:r}=Qi.get(n).getTargeting();i.custom=s,i.custom2=o,i.custom3=r,q("ias-video-tracking","ready"),window.googleImaVansAdapter.init(window.google,e.getAdsManager(),e.dom.getVideoContainer(),i)}))}};function Fa(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Et(e);return Xe((function(t,n){for(var s=e.length,o=new Array(s),r=e.map((function(){return!1})),a=!1,d=function(t){mt(e[t]).subscribe(Je(n,(function(e){o[t]=e,a||r[t]||(r[t]=!0,(a=r.every(He))&&(r=null))}),ke))},l=0;l<s;l++)d(l);t.subscribe(Je(n,(function(e){if(a){var t=P([e],N(o));n.next(i?i.apply(void 0,P([],N(t))):t)}})))}))}const Ga=new class{getLastNumber(e){let t="";return e.forEach((e=>{isNaN(parseInt(e,10))||(t=e)})),t}getAdInfo(e){const t={lineItemId:void 0,creativeId:void 0,contentType:void 0};if(!e)return t;t.lineItemId=e.getAdId(),t.creativeId=e.getCreativeId(),t.contentType=e.getContentType();const i=e.getWrapperAdIds()||[];i&&i.length&&(t.lineItemId=this.getLastNumber(i));const n=e.getWrapperCreativeIds()||[];n&&n.length&&(t.creativeId=this.getLastNumber(n));const s=e.getWrapperAdSystems()||[];return s&&-1!==s.indexOf("AdSense/AdX")&&(t.lineItemId=En,t.creativeId=En),t}parse(e,t={}){let i,n,s;const o=L.getValues(e?e.substr(1+e.indexOf("?")):"?"),r=L.getValues(encodeURI(o.cust_params));if(t.imaAd){const e=this.getAdInfo(t.imaAd);i=e.contentType,n=e.creativeId,s=e.lineItemId}return{contentType:i,creativeId:n,customParams:r,lineItemId:s,position:o.vpos,size:o.sz}}};var Ha=Array.isArray,Wa=Object.getPrototypeOf,qa=Object.prototype,Ka=Object.keys;function Ya(e){if(1===e.length){var t=e[0];if(Ha(t))return{args:t,keys:null};if((n=t)&&"object"==typeof n&&Wa(n)===qa){var i=Ka(t);return{args:i.map((function(e){return t[e]})),keys:i}}}var n;return{args:e,keys:null}}function Xa(e,t){return e.reduce((function(e,i,n){return e[i]=t[n],e}),{})}function Ja(e,t,i){return void 0===i&&(i=He),function(n){Qa(t,(function(){for(var s=e.length,o=new Array(s),r=s,a=s,d=function(s){Qa(t,(function(){var d=Nt(e[s],t),l=!1;d.subscribe(Je(n,(function(e){o[s]=e,l||(l=!0,a--),a||n.next(i(o.slice()))}),(function(){--r||n.complete()})))}),n)},l=0;l<s;l++)d(l)}),n)}}function Qa(e,t,i){e?vt(i,e,t):t()}function Za(){return yt(1)}function ed(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Za()(Nt(e,It(e)))}function td(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=It(e);return Xe((function(t,n){(i?ed(e,t,i):ed(e,t)).subscribe(n)}))}function id(e,t,i,n,s){return function(o,r){var a=i,d=t,l=0;o.subscribe(Je(r,(function(t){var i=l++;d=a?e(d,t,i):(a=!0,t),n&&r.next(d)}),s&&function(){a&&r.next(d),r.complete()}))}}function nd(e,t){return Xe(id(e,t,arguments.length>=2,!0))}function sd(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=It(e);return Nt(e,i)}function od(){return Xe((function(e,t){var i=null;e._refCount++;var n=Je(t,void 0,void 0,void 0,(function(){if(!e||e._refCount<=0||0<--e._refCount)i=null;else{var n=e._connection,s=i;i=null,!n||s&&n!==s||n.unsubscribe(),t.unsubscribe()}}));e.subscribe(n),n.closed||(i=e.connect())}))}var rd=function(e){function t(t,i){var n=e.call(this)||this;return n.source=t,n.subjectFactory=i,n._subject=null,n._refCount=0,n._connection=null,Ye(t)&&(n.lift=t.lift),n}return w(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype._teardown=function(){this._refCount=0;var e=this._connection;this._subject=this._connection=null,null==e||e.unsubscribe()},t.prototype.connect=function(){var e=this,t=this._connection;if(!t){t=this._connection=new _e;var i=this.getSubject();t.add(this.source.subscribe(Je(i,void 0,(function(){e._teardown(),i.complete()}),(function(t){e._teardown(),i.error(t)}),(function(){return e._teardown()})))),t.closed&&(this._connection=null,t=_e.EMPTY)}return t},t.prototype.refCount=function(){return od()(this)},t}(qe),ad={connector:function(){return new st}};function dd(e,t){void 0===t&&(t=ad);var i=t.connector;return Xe((function(t,n){var s,o=i();mt(e((s=o,new qe((function(e){return s.subscribe(e)}))))).subscribe(n),n.add(t.subscribe(o))}))}function ld(e){return e?function(t){return dd(e)(t)}:function(e){return function(e,t){var i=fe(e)?e:function(){return e};return fe(t)?dd(t,{connector:i}):function(e){return new rd(e,i)}}(new st)(e)}}function cd(e,t){return e===t}function ud(...e){return t=>t.pipe(xt((({name:t})=>e.includes(t))))}function pd(e,t){return new qe((i=>{e.on(t,(e=>{i.next({name:t,payload:e})}))})).pipe(ld(),od())}function hd(e){return t=>{return t.pipe(Ze((t=>({event:t,playlistItem:e.getPlaylistItem()||{}}))),(void 0===n&&(n=He),i=null!=(i=(e,t)=>e.playlistItem.mediaid===t.playlistItem.mediaid)?i:cd,Xe((function(e,t){var s,o=!0;e.subscribe(Je(t,(function(e){var r=n(e);!o&&i(s,r)||(o=!1,s=r,t.next(e))})))}))),Ze((({event:e})=>e)));var i,n}}function gd(...e){return t=>t.pipe(xt((({name:t})=>e.includes(t))))}let md=class{handle({stream$:e}){return this.isEnabled()?e.pipe(gd("adStarted"),xt((({state:e})=>"preroll"===e.adInVideo)),kn((()=>{this.track({c1:"1",c2:6177433,c5:"09"})}))):_t}isEnabled(){return!!Z.get("options.video.comscoreJwpTracking")&&(Z.get("options.geoRequiresConsent")?Z.get("options.trackingOptIn"):!Z.get("options.geoRequiresSignal")||Z.get("options.optOutSale"))}track(e){var t;null===(t=window.COMSCORE)||void 0===t||t.beacon(e)}};md=E([h({scope:"Transient"})],md);const fd=new class{getVastAttributesFromVastParams(e,t){const i=t.customParams,n={};return Object.keys(i).forEach((e=>{let t=i[e];if("string"==typeof t){const e=t.split(",");e.length>1&&(t=e)}n[e]=t})),{"data-vast-content-type":t.contentType,"data-vast-creative-id":t.creativeId,"data-vast-line-item-id":t.lineItemId,"data-vast-position":t.position,"data-vast-size":t.size,"data-vast-status":e,"data-vast-params":JSON.stringify(n)}}getVastAttributes(e,t,i){const n=Ga.parse(e,{imaAd:i});return this.getVastAttributesFromVastParams(t,n)}};class vd{constructor(e,t,i){this.adSlot=e,this.jwplayer=t,this.targeting=i,this.calledOnce=!1}awaitIasTracking(e){return A(this,void 0,void 0,(function*(){if(!this.isIasTrackingEnabled())return e;try{yield $a.load()}catch(e){console.error(e)}return e}))}isIasTrackingEnabled(){return Z.get("options.video.iasTracking.enabled")}initIasVideoTracking({adsManager:e,videoElement:t}){const i=Z.get("options.video.iasTracking.config");window.googleImaVansAdapter.init(google,e,t,i)}setSlotParams(e){this.adSlot.lineItemId=e.lineItemId,this.adSlot.creativeId=e.creativeId,this.adSlot.creativeSize=e.size}setSlotElementAttributes(e,t){const i=fd.getVastAttributesFromVastParams(e,t),n=this.adSlot.element;Object.keys(i).forEach((e=>n.setAttribute(e,i[e])))}emitVideoAdError(e){21009===e?this.adSlot.setStatus(en.STATUS_COLLAPSE):this.adSlot.setStatus(en.STATUS_ERROR),this.adSlot.emit(ki.VIDEO_AD_ERROR)}emitVideoAdRequest(){this.adSlot.emit(ki.VIDEO_AD_REQUESTED)}emitVideoAdImpression(){this.adSlot.setStatus(en.STATUS_SUCCESS),this.adSlot.emit(ki.VIDEO_AD_IMPRESSION)}updateVideoProperties(e){this.adSlot.setConfigProperty("videoDepth",e.depth),this.adSlot.setTargetingConfigProperty("rv",e.rv)}shouldPlayPreroll(e,t=null){return this.canAdBePlayed(e,t)}shouldPlayMidroll(e,t=null){return Z.get("options.video.isMidrollEnabled")&&this.canAdBePlayed(e,t)}shouldPlayPostroll(e,t=null){return Z.get("options.video.isPostrollEnabled")&&this.canAdBePlayed(e,t)}canAdBePlayed(e,t=null){const i=e>1;return this.adSlot.isEnabled()&&(!i||i&&this.shouldPlayAdOnNextVideo(e,t))}shouldPlayAdOnNextVideo(e,t=null){const i=Z.get("options.video.adsOnNextVideoFrequency");return q(vd.LOG_GROUP_NAME,e,t),Z.get("options.video.playAdsOnNextVideo")&&i>0&&(e-1)%i==0}playVideoAd(e,t){this.adSlot.setConfigProperty("audio",!t.mute);const i=this.getVastUrl(e,t);if(Z.get("options.video.pauseJWPlayerAd")){const e=()=>{this.jwplayer.pauseAd("visible"!==document.visibilityState)};document.addEventListener("visibilitychange",e,!1)}this.jwplayer.playAd(i)}getVastUrl(e,t){return this.calledOnce?(t.rv++,this.updateVideoProperties(t)):this.calledOnce=!0,lo(0,this.adSlot.getSlotName(),{correlator:t.correlator,vpos:e,targeting:Object.assign({rv:this.getRvKeyVal(t.rv),v1:t.playlistItem.mediaid||""},this.targeting)})}getRvKeyVal(e){return 1===e?"1":[e.toString(),"2+"]}}vd.LOG_GROUP_NAME="jwplayer-helper";class bd extends vd{constructor(e,t,i,n=window.sponsoredVideos){super(e,t,i),this.adSlot=e,this.jwplayer=t,this.targeting=i,this.sponsoredVideos=n}shouldPlayPreroll(e,t){return this.canAdBePlayed(e,t)}shouldPlayMidroll(e,t){return Z.get("options.video.isMidrollEnabled")&&this.canAdBePlayed(e,t)}shouldPlayPostroll(e,t){return Z.get("options.video.isPostrollEnabled")&&this.canAdBePlayed(e,t)}canAdBePlayed(e,t){return this.adSlot.isEnabled()&&this.shouldPlayAdOnNextVideo(e,t)}shouldPlayAdOnNextVideo(e,t){q(vd.LOG_GROUP_NAME,e,t,this.sponsoredVideos);const i=L.get("force_sponsored_video");if(i&&(this.sponsoredVideos=[i],this.log("Overwritting window.sponsoredVideo!",this.sponsoredVideos)),!Array.isArray(this.sponsoredVideos)){this.log("Incorrect window.sponsoredVideos, using fallback to Pandora!",this.sponsoredVideos);const e=ds()+"article-video/jw-platform-api/get-sponsored-videos";this.sponsoredVideos=JSON.parse(Oi.loadSync(e))}return this.sponsoredVideos?Z.get("options.video.playAdsOnNextVideo")&&-1===this.sponsoredVideos.indexOf(t):(qn.log("JWPlayer - no sponsored videos",{currentMediaId:t,videoPlaysCounter:e}),!1)}log(e,t){q(vd.LOG_GROUP_NAME,e,t)}}class yd extends vd{constructor(e,t,i){super(e,t,i),this.adSlot=e,this.jwplayer=t,this.targeting=i}shouldPlayAdOnNextVideo(e){return Z.get("options.video.playAdsOnNextVideo")&&2!==e}}const _d=new class{constructor(){this.logGroup="jwp-player-inhibitor",this.maxDelayTimeoutInMs=0,this.initialized=gn()}isEnabled(){return this.videoLines||(this.videoLines=Z.get("options.video.uapJWPLineItemIds")||[]),this.maxDelayTimeoutInMs||(this.maxDelayTimeoutInMs=Z.get("options.jwpMaxDelayTimeout")||0),Z.get("custom.hasFeaturedVideo")&&Z.get("options.video.isUAPJWPEnabled")&&this.maxDelayTimeoutInMs>0&&this.videoLines.length>0}get(){return this.isEnabled()||this.initialized.resolve(null),this.initialized}isRequiredToRun(){return this.isEnabled()}getDelayTimeoutInMs(){return this.isEnabled()?this.maxDelayTimeoutInMs:0}resolve(e=null,t=null){this.isEnabled()?(e&&t&&this.videoLines.includes(e)?(Ta.updateSlotsTargeting(e,t),q(this.logGroup,"video ad is from UAP:JWP campaign - updating key-vals")):q(this.logGroup,"video ad is not from UAP:JWP campaign"),this.initialized.resolve(null)):q(this.logGroup,"is disabled")}},Sd=(...e)=>q("jwplayer-ads-factory",...e);let wd=class{handle({jwplayer:e,adSlot:t,targeting:i,stream$:n}){return this.stream$=n,this.helper=this.createHelper(t,e,i),Pt(this.adError(),this.adRequest(),this.adImpression(),this.adsManager(),this.beforePlay(),this.videoMidPoint(),this.beforeComplete())}createHelper(e,t,i){const n=Z.get("options.video.forceVideoAdsOnAllVideosExceptSecond");return Z.get("options.video.forceVideoAdsOnAllVideosExceptSponsored")?(Sd("Creating JwplayerHelperSkippingSponsoredVideo..."),new bd(e,t,i)):n?(Sd("Creating JWPlayerHelperSkippingSecondVideo..."),new yd(e,t,i)):(Sd("Creating JWPlayerHelper..."),new vd(e,t,i))}adRequest(){return this.stream$.pipe(gd("adRequest"),kn((({state:e})=>{this.helper.emitVideoAdRequest(),this.helper.updateVideoProperties(e)})))}adImpression(){return this.stream$.pipe(gd("adImpression"),kn((({state:e})=>{this.helper.setSlotParams(e.vastParams),this.helper.setSlotElementAttributes("success",e.vastParams),this.helper.emitVideoAdImpression(),_d.resolve(e.vastParams.lineItemId,e.vastParams.creativeId)})))}adError(){return this.stream$.pipe(gd("adError"),kn((({payload:e,state:t})=>{Sd(`ad error message: ${e.message}`),this.helper.setSlotParams(t.vastParams),this.helper.setSlotElementAttributes("error",t.vastParams),this.helper.emitVideoAdError(e.adErrorCode),_d.resolve()})))}adsManager(){return this.stream$.pipe(gd("adsManager"),xt((()=>this.helper.isIasTrackingEnabled())),kn((({payload:e})=>this.helper.initIasVideoTracking(e))))}beforePlay(){return this.stream$.pipe(gd("beforePlay"),kn((({state:e})=>this.helper.updateVideoProperties(e))),xt((({state:e})=>{var t;return this.helper.shouldPlayPreroll(e.depth,null===(t=null==e?void 0:e.playlistItem)||void 0===t?void 0:t.mediaid)})),bt((e=>this.helper.awaitIasTracking(e))),kn((({state:e})=>this.helper.playVideoAd("preroll",e))))}videoMidPoint(){return this.stream$.pipe(gd("videoMidPoint"),xt((({state:e})=>{var t;return this.helper.shouldPlayMidroll(e.depth,null===(t=null==e?void 0:e.playlistItem)||void 0===t?void 0:t.mediaid)})),kn((({state:e})=>this.helper.playVideoAd("midroll",e))))}beforeComplete(){return this.stream$.pipe(gd("beforeComplete"),xt((({state:e})=>{var t;return this.helper.shouldPlayPostroll(e.depth,null===(t=null==e?void 0:e.playlistItem)||void 0===t?void 0:t.mediaid)})),kn((({state:e})=>this.helper.playVideoAd("postroll",e))))}};wd=E([h({scope:"Transient"})],wd);const Ed={init:"init",lateReady:"late_ready",ready:"ready",adBlock:"blocked",adClick:"clicked",adRequest:"loaded",adError:"error",adImpression:"impression",adStarted:"started",adViewableImpression:"viewable_impression",adFirstQuartile:"first_quartile",adMidPoint:"midpoint",adThirdQuartile:"third_quartile",adComplete:"completed",adSkipped:"skipped",videoStart:"content_started",complete:"content_completed",error:"content_error"};let Id=class{constructor(){this.lastKnownAdData={contentType:"",creativeId:"",lineItemId:""}}handle({adSlot:e,stream$:t}){return this.adSlot=e,t.pipe(xt((e=>this.isTrackingEvent(e))),kn((e=>this.track(e))))}track(e){const t=this.getVideoData(e),i=Cs.getEventData(t);Cs.emit(i),Cs.emitVideoEvent(e)}isTrackingEvent(e){return Object.keys(Ed).includes(e.name)}getVideoData(e){return this.lastKnownAdData.contentType=e.state.vastParams.contentType||this.lastKnownAdData.contentType,this.lastKnownAdData.creativeId=e.state.vastParams.creativeId||this.lastKnownAdData.creativeId,this.lastKnownAdData.lineItemId=e.state.vastParams.lineItemId||this.lastKnownAdData.lineItemId,{ad_error_code:this.getErrorCode(e),ad_product:this.getAdProduct(e),audio:e.state.mute?0:1,ctp:this.getCtp(e),content_type:this.lastKnownAdData.contentType,creative_id:this.lastKnownAdData.creativeId,line_item_id:this.lastKnownAdData.lineItemId,event_name:Ed[e.name],player:"jwplayer",position:this.adSlot.config.slotName,user_block_autoplay:this.getUserBlockAutoplay(),video_id:e.state.playlistItem.mediaid||"",video_number:e.state.depth||""}}getErrorCode(e){return["adError","error"].includes(e.name)?e.payload&&e.payload.code:0}getAdProduct(e){switch(e.state.adInVideo){case"none":return this.adSlot.config.slotName;case"midroll":case"postroll":case"preroll":return`${this.adSlot.config.trackingKey}-${e.state.adInVideo}`;default:return this.adSlot.config.trackingKey}}getCtp(e){return e.state.depth>1||e.state.config.autostart?0:1}getUserBlockAutoplay(){switch(x.get("featuredVideoAutoplay")||"-1"){case"1":return 1;case"0":return 0;default:return-1}}};Id=E([h({scope:"Transient"})],Id);const Td=$t("[JWPlayer] Player Ready",{_as:"props",_p:void 0}),Ad=$t("[Ad Engine] Setup JWPlayer",{_as:"props",_p:void 0});let Cd=class{manage(){this.onPlayerReady().pipe(bt((e=>Pt((new wd).handle(e),(new Id).handle(e),(new md).handle(e))))).subscribe()}onPlayerReady(){return Gt.action$.pipe(Ft(Td),Ba((()=>{this.loadIasTrackerIfEnabled()})),Ze((({options:e,targeting:t,playerKey:i})=>{const n=window[i],s=this.createAdSlot(e,n),o=function(e){const t=function(e){const t=sd({name:"init",payload:void 0}),i=function(e){return e.getConfig().itemReady?sd({name:"lateReady",payload:void 0}):sd()}(e),n=pd(e,"adRequest"),s=pd(e,"adError").pipe(hd(e),function(e){const t=Pt(sd({payload:{tag:null}}),e.pipe(Ze((e=>e.payload))));return e=>e.pipe(Fa(t),Ze((([e,t])=>Object.assign({},t,(e=>{for(const t in e)void 0===e[t]&&delete e[t];return e})(e)))))}(n));return Pt(t,i,s,n,pd(e,"adImpression"),pd(e,"adBlock"),pd(e,"adsManager"),pd(e,"beforePlay").pipe(hd(e)),pd(e,"videoMidPoint"),pd(e,"beforeComplete"),pd(e,"complete"),pd(e,"ready"),pd(e,"adClick"),pd(e,"adStarted"),pd(e,"adViewableImpression"),pd(e,"adFirstQuartile"),pd(e,"adMidPoint"),pd(e,"adThirdQuartile"),pd(e,"adComplete"),pd(e,"adSkipped"),pd(e,"videoStart"),pd(e,"error"))}(e),i=function(e,t){const i=e.pipe(ud("beforePlay"),(e=>e.pipe(nd((e=>({correlator:Math.round(1e10*Math.random()),depth:e.depth+1})),{correlator:0,depth:0}))),td({depth:0,correlator:0})),n=Pt(e.pipe(ud("adRequest"),(e=>e.pipe(nd((e=>e+1),0))),td(1))),s=e.pipe(ud("adRequest","adError","adImpression"),(e=>e.pipe(Ze((e=>Ga.parse(e.payload.tag,{imaAd:e.payload.ima&&e.payload.ima.ad}))))),td(Ga.parse(null))),o=Pt(e.pipe(ud("beforePlay"),Ze((()=>"preroll"))),e.pipe(ud("videoMidPoint"),Ze((()=>"midroll"))),e.pipe(ud("beforeComplete"),Ze((()=>"postroll"))));return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=It(e),n=Et(e),s=Ya(e),o=s.args,r=s.keys;if(0===o.length)return Nt([],i);var a=new qe(Ja(o,i,r?function(e){return Xa(r,e)}:He));return n?a.pipe(tt(n)):a}([i,n,s,Pt(e.pipe(ud("adStarted"),Fa(o),Ze((([,e])=>e))),e.pipe(ud("complete"),Ze((()=>"none")),td("bootstrap"))),e.pipe(Ze((()=>({playlistItem:t.getPlaylistItem()||{sources:[],tracks:[],variations:[],images:[],allSources:[]},config:t.getConfig(),mute:t.getMute()}))))]).pipe(Ze((([e,t,i,n,s])=>Object.assign(Object.assign(Object.assign({},s),e),{vastParams:i,adInVideo:n,rv:t}))),zt(1))}(t,e);return t.pipe(Fa(i),Ze((([e,t])=>Object.assign(Object.assign({},e),{state:t}))))}(n);return{jwplayer:n,adSlot:s,targeting:t,stream$:o}})))}createAdSlot(e,t){const i=e.slotName||(e.featured?"featured":"video"),n=Qi.get(i)||new xn({id:i}),s=t&&t.getContainer&&t.getContainer();return n.element=s&&s.parentNode,n.setConfigProperty("audio",!t.getMute()),n.setConfigProperty("autoplay",t.getConfig().autostart),Qi.get(i)||Qi.add(n),n}loadIasTrackerIfEnabled(){Z.get("options.video.iasTracking.enabled")&&$a.load()}};Cd=E([h()],Cd);const Od="player-setup";class Nd extends Jn{call(){const e=!Z.get("options.wad.blocking");e?(q(Od,"with ads"),(new Cd).manage()):q(Od,"ad block detected, without ads"),Gt.dispatch(Ad({showAds:e,autoplayDisabled:!1}))}}const Pd="bt-loader",kd=new class{run(){return A(this,void 0,void 0,(function*(){if(!this.isEnabled())return q(Pd,"disabled"),Promise.resolve();this.insertSideUnits(),q(Pd,"loading"),yield this.loadScript().then((()=>{q(Pd,"ready")}))}))}isEnabled(){return Z.get("options.wad.btRec.enabled")&&Z.get("options.wad.blocking")}loadScript(){const e=Z.get("options.wad.btRec.loaderUrl")||"//btloader.com/tag?h=wikia-inc-com&upapi=true";return Oi.loadScript(e,!0,document.head.lastChild)}insertSideUnits(){if(Z.get("state.isMobile")||!Z.get("options.wad.btRec.sideUnits")||document.body.classList.contains("is-content-expanded")||document.documentElement.classList.contains("is-content-expanded"))return;const e=document.querySelector(".page.has-right-rail, .mainpage .page");if(!e||(window.document.body.scrollWidth||0)<1542)return;const t=document.createElement("div"),i=document.createElement("div");t.className="side-bt-container left",i.className="side-bt-container right",e.prepend(t,i);const n=document.createElement("div"),s=document.createElement("div");n.id="btbgleft",s.id="btbgright",t.append(n),i.append(s)}},Dd="bab-detection";let Ld,zd=!1;const xd=new class{getName(){return Dd}isEnabled(){return Z.get("options.wad.enabled")}isBlocking(){return Z.get("options.wad.blocking")}run(){return A(this,void 0,void 0,(function*(){let e=yield this.checkBlocking();return q(Dd,"BAB detection, AB detected:",e),e||(e=yield this.checkDomainBlocking(),q(Dd,"GAM domain blocking detection - detected:",e)),this.setBodyClass(e),this.setRuntimeParams(e),this.updateSrcParameter(e),this.dispatchDetectionEvents(e),e}))}checkBlocking(e=(()=>{}),t=(()=>{})){return new Promise((e=>{if(!zd){if(!this.blockAdBlockExists())return void e(!0);this.setupBab()}Ld.onDetected((()=>e(!0))),Ld.onNotDetected((()=>e(!1))),Ld.check(!0)})).then((i=>(i?e():t(),i)))}blockAdBlockExists(){return"undefined"!=typeof BlockAdBlock}checkDomainBlocking(){return A(this,void 0,void 0,(function*(){let e=!1;try{yield fetch("https://www.doubleclick.net",{method:"HEAD",mode:"no-cors",cache:"no-store"})}catch(t){e=!0}return e}))}setupBab(){Ld=this.createBlockAdBlock(),zd=!0}createBlockAdBlock(){return new BlockAdBlock({checkOnLoad:!1,resetOnEnd:!0,loopCheckTime:50,loopMaxNumber:5,debug:!!L.get("bt_rec_debug")||!1})}setRuntimeParams(e){window.ads.runtime=window.ads.runtime||{},window.ads.runtime.bab=window.ads.runtime.bab||{},window.ads.runtime.bab.blocking=e,Z.set("options.wad.blocking",e)}updateSrcParameter(e){const t=Z.get("options.wad.blockingSrc");e&&t&&Z.set("src",t)}dispatchDetectionEvents(e){const t=document.createEvent("Event"),i=e?"bab.blocking":"bab.not_blocking";t.initEvent(i,!0,!1),document.dispatchEvent(t),Gt.emit(Ut.AD_ENGINE_BAB_DETECTION,{detected:e})}setBodyClass(e){e&&document.body.classList.add("bab-detected")}},Rd=()=>{an.finishFirstCall(),kd.run()};class jd extends Jn{constructor(){super(...arguments),this.detector=xd,this.onDetected=Rd}call(){return A(this,void 0,void 0,(function*(){if(!this.detector.isEnabled())return Promise.resolve();const e=yield this.detector.run();Z.set("options.wad.blocking",e),function(e){(new Ss).track({category:"ads-babdetector-detection",action:"impression",label:e?"Yes":"No",value:0})}(e),e&&this.onDetected()}))}}let Vd=class{constructor(){this.steps=[]}add(...e){return this.steps=e,this}execute(e=[]){return this.steps.forEach((t=>{if("function"==typeof t){const i=t({});i.execute(),e.push(i.initialized)}else t.execute(),e.push(t.initialized)})),Promise.all(e)}};Vd=E([h({scope:"Transient"})],Vd);const Md="captify";class Ud extends Jn{constructor(){super(...arguments),this.propertyId=12974}call(){return A(this,void 0,void 0,(function*(){return this.isEnabled("icCaptify")?(this.overwritePropertyIdIfPresent(),this.createCaptifyWindowObject(),this.createAndInsertScript(),Promise.resolve()):(q(Md,"disabled"),Promise.resolve())}))}overwritePropertyIdIfPresent(){const e=Z.get("services.captify.propertyId");this.propertyId=e||this.propertyId}createCaptifyWindowObject(){window[`captify_kw_query_${this.propertyId}`]=""}createAndInsertScript(){const e=`https://p.cpx.to/p/${this.propertyId}/px.js`,t=document.getElementsByTagName("script")[0];Oi.createScript(e,!1,t).onload=()=>{Gt.emit(Ut.CAPTIFY_LOADED),q(Md,"loaded")}}}const Bd="confiant";function $d(e,t,i,n,s,o){if(o&&o.dfp){const t=o.dfp.s,i=Qi.get(t);i&&i.emitEvent(`confiant-${e}`)}}class Fd extends Jn{constructor(){super(...arguments),this.scriptDomain="cdn.confiant-integrations.net",this.propertyId="d-aIf3ibf0cYxCLB1HTWfBQOFEA"}call(){return this.isEnabled("icConfiant",!1)?(this.overwritePropertyIdIfPresent(),q(Bd,"loading"),window.confiant=window.confiant||{},window.confiant.callback=$d,this.loadScript().then((()=>{q(Bd,"ready")}))):(q(Bd,"disabled"),Promise.resolve())}overwritePropertyIdIfPresent(){const e=Z.get("services.confiant.propertyId");this.propertyId=e||this.propertyId}loadScript(){const e=`//${this.scriptDomain}/${this.propertyId}/gpt_and_prebid/config.js`;return Oi.loadScript(e,!0,"first")}}const Gd="double-verify",Hd="//pub.doubleverify.com/signals/pub.js?ctx=28150781&cmp=DV1001654&signals=ids,bsc";class Wd extends Jn{call(){return this.isEnabled("icDoubleVerify")?(window.PQ=window.PQ||{cmd:[]},this.setupSignalsLoad(),q(Gd,"loading",Hd),Oi.loadScript(Hd,!0,null,{referrerpolicy:"no-referrer-when-downgrade"}).then((()=>{q(Gd,"ready")})).catch((()=>{q(Gd,"error on loading")}))):(q(Gd,"disabled"),Promise.resolve())}setupSignalsLoad(){window.PQ.cmd.push((()=>{var e;q(Gd,"getting signals"),null===(e=window.PQ)||void 0===e||e.getTargeting({signals:["ids","bsc"]},((e,t)=>{var i;e||(q(Gd,"setting targeting",t),Di.set("ids",null===(i=t.IDS)||void 0===i?void 0:i.toString()),Di.set("bsc",t.BSC))}))}))}}const qd="duration-media";class Kd extends Jn{call(){const e=Z.get("services.durationMedia.libraryUrl");return this.isEnabled("icDurationMedia",!1)&&e?Gt.on(Ut.AD_ENGINE_SLOT_LOADED,(()=>{q(qd,"loading",e),Oi.loadScript(e,!1,null,{id:"dm-script"}).then((()=>{q(qd,"ready")}))}),!0):q(qd,"disabled"),Promise.resolve()}}const Yd="ias-publisher-optimization",Xd=["adt","alc","dlm","drg","hat","off","vio"],Jd={veryLow:1,low:2,medium:3,high:4};class Qd extends Jn{constructor(){super(...arguments),this.isLoaded=!1,this.slotList=[]}call(){return this.isEnabled("icIASPublisherOptimization")?this.isLoaded?void 0:(q(Yd,"loading..."),this.isLoaded=!0,Oi.loadScript("//cdn.adsafeprotected.com/iasPET.1.js",!0,"first").then((()=>{q(Yd,"asset loaded"),this.setup()}))):(q(Yd,"disabled"),Promise.resolve())}setup(){const e=[];this.slotList=Z.get("services.iasPublisherOptimization.slots"),this.setInitialTargeting(),this.slotList.forEach((t=>{const i=Z.get(`slots.${t}`),n={adUnitPath:Ln.build(i.adUnit||Z.get("adUnitId"),{slotConfig:i}),adSlotId:t,size:this.getSlotSize(i)};i.isVideo&&(n.type="video"),e.push(n)})),window.__iasPET=window.__iasPET||{},window.__iasPET.queue=window.__iasPET.queue||[],window.__iasPET.pubId="930616",window.__iasPET.queue.push({adSlots:e,dataHandler:this.iasDataHandler.bind(this)})}getSlotSize(e){return e.isVideo?[1,1]:e.sizes&&e.sizes.length?e.sizes[0].sizes:e.defaultSizes}setInitialTargeting(){q(Yd,"setting initial targeting..."),Di.set("fr","-1"),Di.set("b_ias","-1"),Di.set("ias-kw","-1"),Xd.forEach((e=>{Di.set(e,"-1")})),this.slotList.forEach((e=>{Di.set("vw","-1",e)}))}iasDataHandler(e){q(Yd,"handling IAS response...");const t=JSON.parse(e);Di.set("fr",t.fr),Qd.setBrandSafetyKeyValuesInTargeting(t.brandSafety),Qd.setCustomKeyValuesInTargeting(t.custom);for(const[e,i]of Object.entries(t.slots))Di.set("vw",i.vw||i.vw_vv,e);q(Yd,"Done.",this)}static setBrandSafetyKeyValuesInTargeting(e){if(!e)return void q(Yd,"no brand safety data");let t="-1";Xd.forEach((i=>{e[i]&&(Di.set(i,e[i]),("-1"===t||Jd[t]<Jd[e[i]])&&(t=e[i]))})),Di.set("b_ias",t)}static setCustomKeyValuesInTargeting(e){e["ias-kw"]?Di.set("ias-kw",e["ias-kw"]):q(Yd,"no custom data")}}const Zd=new class{constructor(){this.storage=new Ht}isAvailable(){return this.storage.isAvailable()}getItem(e){const t=this.storage.getItem(e);return!(!t||"string"==typeof t)&&(this.isExpired(t)?(this.delete(e),!1):t.data)}setItem(e,t,i){if(!this.isStorable(t))return!1;const n={data:t,expires:i?1e3*i+Date.now():void 0};return this.storage.setItem(e,n),!0}delete(e){this.storage.removeItem(e)}isStorable(e){const t=!["function","number","undefined"].some((t=>typeof e===t)),i=!("number"==typeof e&&isNaN(e));return t&&i}isExpired(e){return!!e.expires&&e.expires&&Date.now()>=e.expires}},el="liveConnect",tl=el,il=[{id:"unifiedId",name:"liveConnect-unifiedId"},{id:"sha2",name:el},{id:"md5",name:"liveConnect-md5"},{id:"sha1",name:"liveConnect-sha1"}];class nl extends Jn{constructor(){super(...arguments),this.defaultQfValue="0.3"}call(){this.isEnabled("icLiveConnect")&&this.isEnabled("icLiveConnectCachingStrategy")&&!this.isEnabled("icIdentityPartners",!1)?(this.setupStorage(),this.shouldLoadScript()?(q(tl,"loading"),Gt.emit(Ut.LIVE_CONNECT_STARTED),Oi.loadScript("https://b-code.liadm.com/a-07ev.min.js",!0,"first").then((()=>{var e;q(tl,"loaded"),this.resolveAndTrackIds();const t=null===(e=this.instantConfig.get("icLiveConnectQf"))||void 0===e?void 0:e.toString();t&&this.resolveAndTrackIds(t)}))):(Gt.emit(Ut.LIVE_CONNECT_CACHED),q(tl,`already loaded and available in ${this.storageConfig.type}Storage`))):q(tl,"disabled")}resolveAndTrackIds(e){window.liQ?window.liQ.resolve((t=>{this.trackIds(t,e)}),(e=>{console.error(e)}),{qf:e||this.defaultQfValue,resolve:il.map((e=>e.id))}):K(tl,"window.liQ not available for tracking")}trackIds(e,t){q(tl,"resolve response:",e),Object.keys(e).forEach((i=>{const n=this.getTrackingKeyName(i)+(t?`-${t}`:"");if(this.isAvailableInStorage(n))return;"unifiedId"===i&&Gt.emit(Ut.LIVE_CONNECT_RESPONDED_UUID);const s=e[i];q(tl,`${i}: ${s}`),s&&(this.storage.setItem(n,s,this.storageConfig.ttl),Gt.emit(Ut.IDENTITY_PARTNER_DATA_OBTAINED,{partnerName:n,partnerIdentityId:s}))}))}getTrackingKeyName(e){var t;return null===(t=il.find((t=>t.id===e)))||void 0===t?void 0:t.name}setupStorage(){this.storageConfig=this.instantConfig.get("icLiveConnectCachingStrategy"),"local"===this.storageConfig.type?this.storage=Zd:this.storage=new Ht(window.sessionStorage)}shouldLoadScript(){var e;if(!this.storageConfig)return!0;let t=!1;for(const i of this.storageConfig.mandatoryParams){const n=null===(e=il.find((e=>e.id===i)))||void 0===e?void 0:e.name;if(!this.isAvailableInStorage(n)){t=!0;break}}return t}isAvailableInStorage(e){return!!this.storage.getItem(e)}}class sl extends Jn{constructor(){super(...arguments),this.PIXEL_ID=712315,this.logGroup="LiveRamp pixel",this.PIXEL_URL=`https://idsync.rlcdn.com/${this.PIXEL_ID}.gif?partner_uid=`}insertLiveRampPixel(e){const t=document.createElement("img");t.src=this.PIXEL_URL+e,document.body.appendChild(t)}call(){return A(this,void 0,void 0,(function*(){this.isEnabled("icLiveRampPixel")&&!this.isEnabled("icIdentityPartners",!1)?Gt.on(Ut.IDENTITY_PARTNER_DATA_OBTAINED,(e=>{"Google"===e.payload.partnerName&&this.insertLiveRampPixel(e.payload.partnerIdentityId)})):q(this.logGroup,"pixel disabled")}))}}var ol,rl,al,dl,ll,cl,ul,pl,hl,gl,ml,fl,vl,bl,yl;let _l=class{constructor(e,t,i,n,s,o,r,a,d,l,c,u,p,h,g){this.pipeline=e,this.adEngineStackSetup=t,this.anyclip=i,this.audigent=n,this.bidders=s,this.captify=o,this.confiant=r,this.doubleVerify=a,this.durationMedia=d,this.gptSetup=l,this.iasPublisherOptimization=c,this.liveConnect=u,this.liveRampPixel=p,this.playerSetup=h,this.wadRunner=g}execute(){this.pipeline.add(this.anyclip,this.bidders,this.wadRunner,this.liveRampPixel,this.liveConnect,this.audigent,this.confiant,this.iasPublisherOptimization,this.captify,this.durationMedia,this.playerSetup.setOptions({dependencies:[this.bidders.initialized,this.wadRunner.initialized]}),this.gptSetup,this.doubleVerify.setOptions({dependencies:[this.gptSetup.initialized]}),this.adEngineStackSetup.setOptions({dependencies:[this.bidders.initialized,this.wadRunner.initialized,this.gptSetup.initialized]})).execute().then((()=>{var e,t;(null===(t=null===(e=null===window||void 0===window?void 0:window.Phoenix)||void 0===e?void 0:e.Events)||void 0===t?void 0:t.trigger)&&window.Phoenix.Events.trigger("ads_initialized"),Gt.emit(Ut.AD_ENGINE_PARTNERS_READY)}))}};_l=E([h(),T("design:paramtypes",["function"==typeof(ol=void 0!==Vd&&Vd)?ol:Object,"function"==typeof(rl=void 0!==Ma&&Ma)?rl:Object,"function"==typeof(al=void 0!==ka&&ka)?al:Object,"function"==typeof(dl=void 0!==es&&es)?dl:Object,"function"==typeof(ll=void 0!==br&&br)?ll:Object,"function"==typeof(cl=void 0!==Ud&&Ud)?cl:Object,"function"==typeof(ul=void 0!==Fd&&Fd)?ul:Object,"function"==typeof(pl=void 0!==Wd&&Wd)?pl:Object,"function"==typeof(hl=void 0!==Kd&&Kd)?hl:Object,"function"==typeof(gl=void 0!==Ua&&Ua)?gl:Object,"function"==typeof(ml=void 0!==Qd&&Qd)?ml:Object,"function"==typeof(fl=void 0!==nl&&nl)?fl:Object,"function"==typeof(vl=void 0!==sl&&sl)?vl:Object,"function"==typeof(bl=void 0!==Nd&&Nd)?bl:Object,"function"==typeof(yl=void 0!==jd&&jd)?yl:Object])],_l);const Sl={adUnitId:"/{custom.dfpId}/{custom.device}{custom.region}-{custom.property}{custom.pagePath}",custom:{dfpId:"5441",region:"aw",property:"gamespot",targeting:{seats:{session:16,subsession:4},cookie:{consolidate:!0,keyMap:{ftag:"ftag",ttag:"ttag"}}},timeouts:{bidder:1e3}},events:{pushOnScroll:{ids:[],threshold:100}},services:{durationMedia:{libraryUrl:"//tag.durationmedia.net/sites/11355/dm.js"},iasPublisherOptimization:{slots:["mpu_top"]},instantConfig:{appName:"gamespot"}},slots:{},src:["gamespot"]};let wl=class{execute(){Z.set("bidders.a9.slots",this.getA9Context())}getA9Context(){return Z.get("state.isMobile")?{"mobile-skybox-nav":{sizes:[[320,50]]},"mobile-native":{sizes:[[300,250]]},"mobile-mpu":{sizes:[[300,250]]},"mobile-incontent-ad-inc":{sizes:[[300,250],[320,50]]},"mobile-flex-inc":{sizes:[[300,250],[320,50]]},"mobile-incontent-plus":{sizes:[[300,250],[320,50]]},"mobile-incontent-plus-bottom":{sizes:[[300,250],[320,50]]},"mobile-incontent-ad":{sizes:[[300,250],[320,50]]},"mobile-mpu-bottom":{sizes:[[300,250]]},"mobile-native-plus-top":{sizes:[[300,250]]},"mobile-incontent-ad-plus-inc":{sizes:[[300,250],[320,50]]},"mobile-incontent-all":{sizes:[[300,250]]},"mobile-flex-bottom":{sizes:[[300,250],[320,50]]},"mobile-autoplay-plus":{sizes:[[300,250],[320,50]]},"mobile-highimpact-plus":{sizes:[[300,250],[320,50]]},"incontent-mobile-flex":{sizes:[[300,250],[320,50]]},"mobile-banner-plus":{sizes:[[300,250],[320,50]]},"mobile-nav-ad-plus-banner":{sizes:[[320,50]]},"mobile-banner-bottom":{sizes:[[320,50]]},"mobile-banner":{sizes:[[320,50]]},"incontent-ad-plus-inc":{sizes:[[728,90]]},"incontent-all-top":{sizes:[[728,90],[970,250]]},"incontent-narrow-all-top":{sizes:[[728,90]]},floor_adhesion:{sizes:[[300,50],[320,50],[320,100]]},video:{type:"video"}}:{"skybox-nav":{sizes:[[728,90],[970,250]]},mpu_top:{sizes:[[300,250]]},mpu_plus_top:{sizes:[[300,250],[300,600]]},mpu_middle:{sizes:[[300,250]]},mpu_bottom:{sizes:[[300,250]]},overlay_mpu_top:{sizes:[[300,250]]},"mpu-top-inc":{sizes:[[300,250]]},"mpu-bottom-inc":{sizes:[[300,250]]},"native-mpu":{sizes:[[300,250]]},"nav-ad-plus-leader":{sizes:[[728,90],[970,250]]},"leader-plus-inc":{sizes:[[728,90],[970,250]]},"leader-bottom-inc":{sizes:[[728,90]]},"leader-ad-plus-top":{sizes:[[728,90],[970,250]]},"leader-ad-plus-middle":{sizes:[[728,90],[970,250]]},"incontent-ad-plus-billboard-bottom":{sizes:[[728,90],[970,250]]},leader_plus_top:{sizes:[[728,90],[970,250]]},leader_top:{sizes:[[728,90]]},leader_bottom:{sizes:[[728,90]]},overlay_leader_top:{sizes:[[728,90]]},leader_middle:{sizes:[[728,90]]},"sky-leader-plus-top":{sizes:[[728,90],[970,250]]},"incontent-ad":{sizes:[[728,90]]},"incontent-ad-inc":{sizes:[[728,90]]},video:{type:"video"}}}};var El;wl=E([h()],wl);let Il=class{constructor(e){this.slotsDefinitionRepository=e}execute(){this.injectSlots(),fa([this.slotsDefinitionRepository.getInterstitialConfig(),this.slotsDefinitionRepository.getFloorAdhesionConfig()])}injectSlots(e=".mapped-ad,.ad",t=["skybox"]){const i=document.querySelectorAll(e);let n=!1;i&&0!==i.length?(i.forEach((e=>{let i=e.id,s=e;i||(i=e.getAttribute("data-ad-type"),s=Hi.getFirstElementChild(e)),i&&s&&"interstitial"!==i&&(t.some((e=>i.includes(e)))&&(Z.set("slots.top_leaderboard.bidderAlias",i),Z.set("slots.top_leaderboard.targeting.pos",["top_leaderboard",i]),i="top_leaderboard",n=!0),s.id=i,Z.push("state.adStack",{id:i}))})),n||Gt.on(Ut.AD_ENGINE_STACK_START,(()=>{an.finishFirstCall(),Gt.emit(Ut.AD_ENGINE_UAP_LOAD_STATUS,{isLoaded:Ta.isFanTakeoverLoaded(),adProduct:Ta.getType()})}))):console.warn("AdEngine did not find any ad placeholders")}};var Tl,Al;Il=E([h(),T("design:paramtypes",["function"==typeof(El=void 0!==La&&La)?El:Object])],Il);let Cl=class{constructor(e,t){this.slotsDefinitionRepository=e,this.dynamicSlotsSetup=t,this.stubbedSlotsCounter={}}execute(){this.dynamicSlotsSetup.injectSlots(".mapped-ad,.ad",["skybox","nav-ad-plus"]),this.restoreStubbedSlots(),fa([this.slotsDefinitionRepository.getInterstitialConfig(),this.slotsDefinitionRepository.getFloorAdhesionConfig()])}restoreStubbedSlots(){const e=document.querySelectorAll(".stub-mpu");e&&0!==e.length&&e.forEach((e=>{e.insertAdjacentHTML("beforebegin",e.innerHTML);const t=null==e?void 0:e.parentElement.querySelector(".mapped-ad"),i=null==t?void 0:t.dataset.adType;if("interstitial"!==i)if("number"!=typeof this.stubbedSlotsCounter[i])this.stubbedSlotsCounter[i]=1,t.id=i,Z.push("events.pushOnScroll.ids",i);else{this.stubbedSlotsCounter[i]++;const e=`${i}-${this.stubbedSlotsCounter[i]}`;t.id=e,this.updateSlotContext(i,e),Z.push("events.pushOnScroll.ids",e)}}))}updateSlotContext(e,t){Z.set(`slots.${t}`,Object.assign({},Z.get(`slots.${e}`))),Z.set(`slots.${t}.slotName`,t),Z.set(`slots.${t}.targeting.pos`,t)}};var Ol;Cl=E([h(),T("design:paramtypes",["function"==typeof(Tl=void 0!==La&&La)?Tl:Object,"function"==typeof(Al=void 0!==Il&&Il)?Al:Object])],Cl);let Nl=class{constructor(e){this.bidders=e}execute(){const e=!Z.get("state.isMobile");Z.set("bidders.prebid.appnexus",function(e){return{enabled:!1,slots:e?{mpu_top:{sizes:[[300,250]],placementId:["28574424"]},mpu_plus_top:{sizes:[[300,250],[300,600]],placementId:["28574425","28574432"]},mpu_middle:{sizes:[[300,250]],placementId:["28574426"]},mpu_bottom:{sizes:[[300,250]],placementId:["28574427"]},overlay_mpu_top:{sizes:[[300,250]],placementId:["28574428"]},"mpu-top-inc":{sizes:[[300,250]],placementId:["28574429"]},"mpu-bottom-inc":{sizes:[[300,250]],placementId:["28574430"]},"native-mpu":{sizes:[[300,250]],placementId:["28574431"]},"nav-ad-plus-leader":{sizes:[[728,90],[970,250]],placementId:["28574433","28574447"]},"leader-plus-inc":{sizes:[[728,90],[970,250]],placementId:["28574434","28574450"]},"leader-bottom-inc":{sizes:[[728,90]],placementId:["28574435"]},"leader-ad-plus-top":{sizes:[[728,90],[970,250]],placementId:["28574436","28574451"]},"leader-ad-plus-middle":{sizes:[[728,90],[970,250]],placementId:["28574437","28574452"]},"incontent-ad-plus-billboard-bottom":{sizes:[[728,90],[970,250]],placementId:["28574438","28574453"]},leader_plus_top:{sizes:[[728,90],[970,250]],placementId:["28574439","28574448"]},leader_top:{sizes:[[728,90]],placementId:["28574440"]},leader_bottom:{sizes:[[728,90]],placementId:["28574441"]},overlay_leader_top:{sizes:[[728,90]],placementId:["28574442"]},leader_middle:{sizes:[[728,90]],placementId:["28574443"]},"sky-leader-plus-top":{sizes:[[728,90],[970,250]],placementId:["28574444","28574449"]},"incontent-ad":{sizes:[[728,90]],placementId:["28574445"]},"incontent-ad-inc":{sizes:[[728,90]],placementId:["28574446"]},"skybox-nav":{sizes:[[728,90],[970,250]],placementId:["29779568"]}}:{"mobile-native":{sizes:[[300,250]],placementId:["28574454"]},"mobile-mpu":{sizes:[[300,250]],placementId:["28574455"]},"mobile-incontent-ad-inc":{sizes:[[300,250],[320,50]],placementId:["28574456","28574483"]},"mobile-flex-inc":{sizes:[[300,250],[320,50]],placementId:["28574457","28574471"]},"mobile-incontent-plus":{sizes:[[300,250],[320,50]],placementId:["28574458","28574473"]},"mobile-incontent-plus-bottom":{sizes:[[300,250],[320,50]],placementId:["28574459","28574474"]},"mobile-incontent-ad":{sizes:[[300,250],[320,50]],placementId:["28574460","28574470"]},"mobile-mpu-bottom":{sizes:[[300,250]],placementId:["28574461"]},"mobile-native-plus-top":{sizes:[[300,250]],placementId:["28574462"]},"mobile-incontent-ad-plus-inc":{sizes:[[300,250],[320,50]],placementId:["28574463","28574476"]},"mobile-incontent-all":{sizes:[[300,250]],placementId:["28574464"]},"mobile-flex-bottom":{sizes:[[300,250],[320,50]],placementId:["28574465","28574477"]},"mobile-autoplay-plus":{sizes:[[300,250],[320,50]],placementId:["28574466","28574478"]},"mobile-highimpact-plus":{sizes:[[300,250],[320,50]],placementId:["28574467","28574479"]},"incontent-mobile-flex":{sizes:[[300,250],[320,50]],placementId:["28574468","28574480"]},"mobile-banner-plus":{sizes:[[300,250],[320,50]],placementId:["28574469","28574482"]},"mobile-nav-ad-plus-banner":{sizes:[[320,50]],placementId:["28574472"]},"mobile-banner-bottom":{sizes:[[320,50]],placementId:["28574475"]},"mobile-banner":{sizes:[[320,50]],placementId:["28574481"]},"incontent-ad-plus-inc":{sizes:[[728,90]],placementId:["28574484"]},"incontent-all-top":{sizes:[[728,90],[970,250]],placementId:["28574485","28574487"]},"incontent-narrow-all-top":{sizes:[[728,90]],placementId:["28574486"]},"mobile-skybox-nav":{sizes:[[320,50],[320,100]],placementId:["29779629"]}}}}(e)),Z.set("bidders.prebid.appnexusAst",function(e){return{enabled:!1,slots:e?{video:{placementId:"29038722"}}:{video:{placementId:"29038735"}}}}(e)),Z.set("bidders.prebid.criteo",function(e){return{enabled:!1,networkId:3306,slots:e?{mpu_top:{sizes:[[300,250]]},mpu_plus_top:{sizes:[[300,250],[300,600]]},mpu_middle:{sizes:[[300,250]]},mpu_bottom:{sizes:[[300,250]]},overlay_mpu_top:{sizes:[[300,250]]},"mpu-top-inc":{sizes:[[300,250]]},"mpu-bottom-inc":{sizes:[[300,250]]},"native-mpu":{sizes:[[300,250]]},"nav-ad-plus-leader":{sizes:[[728,90],[970,250]]},"leader-plus-inc":{sizes:[[728,90],[970,250]]},"leader-bottom-inc":{sizes:[[728,90]]},"leader-ad-plus-top":{sizes:[[728,90],[970,250]]},"leader-ad-plus-middle":{sizes:[[728,90],[970,250]]},"incontent-ad-plus-billboard-bottom":{sizes:[[728,90],[970,250]]},leader_plus_top:{sizes:[[728,90],[970,250]]},leader_top:{sizes:[[728,90]]},leader_bottom:{sizes:[[728,90]]},overlay_leader_top:{sizes:[[728,90]]},leader_middle:{sizes:[[728,90]]},"sky-leader-plus-top":{sizes:[[728,90],[970,250]]},"incontent-ad":{sizes:[[728,90]]},"incontent-ad-inc":{sizes:[[728,90]]}}:{"mobile-native":{sizes:[[300,250]]},"mobile-mpu":{sizes:[[300,250]]},"mobile-incontent-ad-inc":{sizes:[[300,250],[320,50]]},"mobile-flex-inc":{sizes:[[300,250],[320,50]]},"mobile-incontent-plus":{sizes:[[300,250],[320,50]]},"mobile-incontent-plus-bottom":{sizes:[[300,250],[320,50]]},"mobile-incontent-ad":{sizes:[[300,250],[320,50]]},"mobile-mpu-bottom":{sizes:[[300,250]]},"mobile-native-plus-top":{sizes:[[300,250]]},"mobile-incontent-ad-plus-inc":{sizes:[[300,250],[320,50]]},"mobile-incontent-all":{sizes:[[300,250]]},"mobile-flex-bottom":{sizes:[[300,250],[320,50]]},"mobile-autoplay-plus":{sizes:[[300,250],[320,50]]},"mobile-highimpact-plus":{sizes:[[300,250],[320,50]]},"incontent-mobile-flex":{sizes:[[300,250],[320,50]]},"mobile-banner-plus":{sizes:[[300,250],[320,50]]},"mobile-nav-ad-plus-banner":{sizes:[[320,50]]},"mobile-banner-bottom":{sizes:[[320,50]]},"mobile-banner":{sizes:[[320,50]]},"incontent-ad-plus-inc":{sizes:[[728,90]]},"incontent-all-top":{sizes:[[728,90],[970,250]]},"incontent-narrow-all-top":{sizes:[[728,90]]}}}}(e)),Z.set("bidders.prebid.indexExchange",function(e){return{enabled:!1,slots:e?{mpu_top:{sizes:[[300,250]],siteId:["936160"]},mpu_plus_top:{sizes:[[300,250],[300,600]],siteId:["936161","936168"]},mpu_middle:{sizes:[[300,250]],siteId:["936162"]},mpu_bottom:{sizes:[[300,250]],siteId:["936163"]},overlay_mpu_top:{sizes:[[300,250]],siteId:["936164"]},"mpu-top-inc":{sizes:[[300,250]],siteId:["936165"]},"mpu-bottom-inc":{sizes:[[300,250]],siteId:["936166"]},"native-mpu":{sizes:[[300,250]],siteId:["936167"]},"nav-ad-plus-leader":{sizes:[[728,90],[970,250]],siteId:["936169","936183"]},"leader-plus-inc":{sizes:[[728,90],[970,250]],siteId:["936170","936186"]},"leader-bottom-inc":{sizes:[[728,90]],siteId:["936171"]},"leader-ad-plus-top":{sizes:[[728,90],[970,250]],siteId:["936172","936187"]},"leader-ad-plus-middle":{sizes:[[728,90],[970,250]],siteId:["936173","936188"]},"incontent-ad-plus-billboard-bottom":{sizes:[[728,90],[970,250]],siteId:["936174","936189"]},leader_plus_top:{sizes:[[728,90],[970,250]],siteId:["936175","936184"]},leader_top:{sizes:[[728,90]],siteId:["936176"]},leader_bottom:{sizes:[[728,90]],siteId:["936177"]},overlay_leader_top:{sizes:[[728,90]],siteId:["936178"]},leader_middle:{sizes:[[728,90]],siteId:["936179"]},"sky-leader-plus-top":{sizes:[[728,90],[970,250]],siteId:["936180","936185"]},"incontent-ad":{sizes:[[728,90]],siteId:["936181"]},"incontent-ad-inc":{sizes:[[728,90]],siteId:["936182"]},video:{siteId:"936614"},"skybox-nav":{sizes:[[728,90],[970,250]],siteId:"971590"}}:{"mobile-native":{sizes:[[300,250]],siteId:["936190"]},"mobile-mpu":{sizes:[[300,250]],siteId:["936191"]},"mobile-incontent-ad-inc":{sizes:[[300,250],[320,50]],siteId:["936192","936219"]},"mobile-flex-inc":{sizes:[[300,250],[320,50]],siteId:["936193","936207"]},"mobile-incontent-plus":{sizes:[[300,250],[320,50]],siteId:["936194","936209"]},"mobile-incontent-plus-bottom":{sizes:[[300,250],[320,50]],siteId:["936195","936210"]},"mobile-incontent-ad":{sizes:[[300,250],[320,50]],siteId:["936196","936206"]},"mobile-mpu-bottom":{sizes:[[300,250]],siteId:["936197"]},"mobile-native-plus-top":{sizes:[[300,250]],siteId:["936198"]},"mobile-incontent-ad-plus-inc":{sizes:[[300,250],[320,50]],siteId:["936199","936212"]},"mobile-incontent-all":{sizes:[[300,250]],siteId:["936200"]},"mobile-flex-bottom":{sizes:[[300,250],[320,50]],siteId:["936201","936213"]},"mobile-autoplay-plus":{sizes:[[300,250],[320,50]],siteId:["936202","936214"]},"mobile-highimpact-plus":{sizes:[[300,250],[320,50]],siteId:["936203","936215"]},"incontent-mobile-flex":{sizes:[[300,250],[320,50]],siteId:["936204","936216"]},"mobile-banner-plus":{sizes:[[300,250],[320,50]],siteId:["936205","936218"]},"mobile-nav-ad-plus-banner":{sizes:[[320,50]],siteId:["936208"]},"mobile-banner-bottom":{sizes:[[320,50]],siteId:["936211"]},"mobile-banner":{sizes:[[320,50]],siteId:["936217"]},"incontent-ad-plus-inc":{sizes:[[728,90]],siteId:["936220"]},"incontent-all-top":{sizes:[[728,90],[970,250]],siteId:["936221","936223"]},"incontent-narrow-all-top":{sizes:[[728,90]],siteId:["936222"]},video:{siteId:"936615"},"mobile-skybox-nav":{sizes:[[320,50],[320,100]],siteId:"971591"}}}}(e)),Z.set("bidders.prebid.kargo",function(e){return{enabled:!1,slots:e?{mpu_top:{sizes:[[300,250]],placementId:"_rXEPrtrFI5"},mpu_plus_top:{sizes:[[300,250],[300,600]],placementId:["_rXEPrtrFI5","_jiHQTggPyr"]},mpu_middle:{sizes:[[300,250]],placementId:"_rXEPrtrFI5"},mpu_bottom:{sizes:[[300,250]],placementId:"_rXEPrtrFI5"},overlay_mpu_top:{sizes:[[300,250]],placementId:"_rXEPrtrFI5"},"mpu-top-inc":{sizes:[[300,250]],placementId:"_rXEPrtrFI5"},"mpu-bottom-inc":{sizes:[[300,250]],placementId:"_rXEPrtrFI5"},"native-mpu":{sizes:[[300,250]],placementId:"_rXEPrtrFI5"},"leader-ad-plus-top":{sizes:[[728,90]],placementId:"_bVgnU39GXb"},leader_top:{sizes:[[728,90]],placementId:"_bVgnU39GXb"},leader_bottom:{sizes:[[728,90]],placementId:"_bVgnU39GXb"},overlay_leader_top:{sizes:[[728,90]],placementId:"_bVgnU39GXb"},"sky-leader-plus-top":{sizes:[[728,90]],placementId:"_bVgnU39GXb"}}:{"mobile-native":{sizes:[[300,250]],placementId:"_mv6ZSXDVpo"},"mobile-mpu":{sizes:[[300,250]],placementId:"_mv6ZSXDVpo"},"mobile-incontent-ad-inc":{sizes:[[300,250]],placementId:"_mv6ZSXDVpo"},"mobile-mpu-bottom":{sizes:[[300,250]],placementId:"_mv6ZSXDVpo"},"mobile-native-plus-top":{sizes:[[300,250]],placementId:"_mv6ZSXDVpo"},"mobile-flex-bottom":{sizes:[[300,250]],placementId:"_mv6ZSXDVpo"},"mobile-autoplay-plus":{sizes:[[300,250]],placementId:"_mv6ZSXDVpo"},"mobile-highimpact-plus":{sizes:[[300,250]],placementId:"_mv6ZSXDVpo"},"incontent-mobile-flex":{sizes:[[300,250]],placementId:"_mv6ZSXDVpo"},"mobile-banner-plus":{sizes:[[300,250]],placementId:"_mv6ZSXDVpo"},"incontent-ad-plus-inc":{sizes:[[728,90]],placementId:"_bVgnU39GXb"}}}}(e)),Z.set("bidders.prebid.medianet",function(e){return{enabled:!1,slots:e?{mpu_top:{sizes:[[300,250]],crid:["229365319"],cid:"8CU5JOKX4"},mpu_plus_top:{sizes:[[300,250],[300,600]],crid:["229365319","927431096"],cid:"8CU5JOKX4"},mpu_middle:{sizes:[[300,250]],crid:["229365319"],cid:"8CU5JOKX4"},mpu_bottom:{sizes:[[300,250]],crid:["229365319"],cid:"8CU5JOKX4"},overlay_mpu_top:{sizes:[[300,250]],crid:["229365319"],cid:"8CU5JOKX4"},"mpu-top-inc":{sizes:[[300,250]],crid:["229365319"],cid:"8CU5JOKX4"},"mpu-bottom-inc":{sizes:[[300,250]],crid:["229365319"],cid:"8CU5JOKX4"},"native-mpu":{sizes:[[300,250]],crid:["229365319"],cid:"8CU5JOKX4"},"nav-ad-plus-leader":{sizes:[[728,90],[970,250]],crid:["832473955","510533100"],cid:"8CU5JOKX4"},"leader-plus-inc":{sizes:[[728,90],[970,250]],crid:["832473955","510533100"],cid:"8CU5JOKX4"},"leader-bottom-inc":{sizes:[[728,90]],crid:["832473955"],cid:"8CU5JOKX4"},"leader-ad-plus-top":{sizes:[[728,90],[970,250]],crid:["832473955","510533100"],cid:"8CU5JOKX4"},"leader-ad-plus-middle":{sizes:[[728,90],[970,250]],crid:["832473955","510533100"],cid:"8CU5JOKX4"},"incontent-ad-plus-billboard-bottom":{sizes:[[728,90],[970,250]],crid:["832473955","510533100"],cid:"8CU5JOKX4"},leader_plus_top:{sizes:[[728,90],[970,250]],crid:["832473955","510533100"],cid:"8CU5JOKX4"},leader_top:{sizes:[[728,90]],crid:["832473955"],cid:"8CU5JOKX4"},leader_bottom:{sizes:[[728,90]],crid:["832473955"],cid:"8CU5JOKX4"},overlay_leader_top:{sizes:[[728,90]],crid:["832473955"],cid:"8CU5JOKX4"},leader_middle:{sizes:[[728,90]],crid:["832473955"],cid:"8CU5JOKX4"},"sky-leader-plus-top":{sizes:[[728,90],[970,250]],crid:["832473955","510533100"],cid:"8CU5JOKX4"},"incontent-ad":{sizes:[[728,90]],crid:["832473955"],cid:"8CU5JOKX4"},"incontent-ad-inc":{sizes:[[728,90]],crid:["832473955"],cid:"8CU5JOKX4"}}:{"mobile-native":{sizes:[[300,250]],crid:["125180983"],cid:"8CU5JOKX4"},"mobile-mpu":{sizes:[[300,250]],crid:["125180983"],cid:"8CU5JOKX4"},"mobile-incontent-ad-inc":{sizes:[[300,250],[320,50]],crid:["125180983","250621178"],cid:"8CU5JOKX4"},"mobile-flex-inc":{sizes:[[300,250],[320,50]],crid:["125180983","250621178"],cid:"8CU5JOKX4"},"mobile-incontent-plus":{sizes:[[300,250],[320,50]],crid:["125180983","250621178"],cid:"8CU5JOKX4"},"mobile-incontent-plus-bottom":{sizes:[[300,250],[320,50]],crid:["125180983","250621178"],cid:"8CU5JOKX4"},"mobile-incontent-ad":{sizes:[[300,250],[320,50]],crid:["125180983","250621178"],cid:"8CU5JOKX4"},"mobile-mpu-bottom":{sizes:[[300,250]],crid:["125180983"],cid:"8CU5JOKX4"},"mobile-native-plus-top":{sizes:[[300,250]],crid:["125180983"],cid:"8CU5JOKX4"},"mobile-incontent-ad-plus-inc":{sizes:[[300,250],[320,50]],crid:["125180983","250621178"],cid:"8CU5JOKX4"},"mobile-incontent-all":{sizes:[[300,250]],crid:["125180983"],cid:"8CU5JOKX4"},"mobile-flex-bottom":{sizes:[[300,250],[320,50]],crid:["125180983","250621178"],cid:"8CU5JOKX4"},"mobile-autoplay-plus":{sizes:[[300,250],[320,50]],crid:["125180983","250621178"],cid:"8CU5JOKX4"},"mobile-highimpact-plus":{sizes:[[300,250],[320,50]],crid:["125180983","250621178"],cid:"8CU5JOKX4"},"incontent-mobile-flex":{sizes:[[300,250],[320,50]],crid:["125180983","250621178"],cid:"8CU5JOKX4"},"mobile-banner-plus":{sizes:[[300,250],[320,50]],crid:["125180983","250621178"],cid:"8CU5JOKX4"},"mobile-nav-ad-plus-banner":{sizes:[[320,50]],crid:["250621178"],cid:"8CU5JOKX4"},"mobile-banner-bottom":{sizes:[[320,50]],crid:["250621178"],cid:"8CU5JOKX4"},"mobile-banner":{sizes:[[320,50]],crid:["250621178"],cid:"8CU5JOKX4"},"incontent-ad-plus-inc":{sizes:[[728,90]],crid:["524179438"],cid:"8CU5JOKX4"},"incontent-all-top":{sizes:[[728,90],[970,250]],crid:["524179438","615107631"],cid:"8CU5JOKX4"},"incontent-narrow-all-top":{sizes:[[728,90]],crid:["524179438"],cid:"8CU5JOKX4"}}}}(e)),Z.set("bidders.prebid.openx",function(e){return{enabled:!1,delDomain:"wikia-d.openx.net",slots:e?{video:{unit:"559098623"}}:{video:{unit:"559098624"}}}}(e)),Z.set("bidders.prebid.pubmatic",function(e){return{enabled:!1,publisherId:"156260",slots:e?{mpu_top:{sizes:[[300,250]],ids:["4856863"]},mpu_plus_top:{sizes:[[300,250],[300,600]],ids:["4856864","4856871"]},mpu_middle:{sizes:[[300,250]],ids:["4856865"]},mpu_bottom:{sizes:[[300,250]],ids:["4856866"]},overlay_mpu_top:{sizes:[[300,250]],ids:["4856867"]},"mpu-top-inc":{sizes:[[300,250]],ids:["4856868"]},"mpu-bottom-inc":{sizes:[[300,250]],ids:["4856869"]},"native-mpu":{sizes:[[300,250]],ids:["4856870"]},"nav-ad-plus-leader":{sizes:[[728,90],[970,250]],ids:["4856872","4856886"]},"leader-plus-inc":{sizes:[[728,90],[970,250]],ids:["4856873","4856889"]},"leader-bottom-inc":{sizes:[[728,90]],ids:["4856874"]},"leader-ad-plus-top":{sizes:[[728,90],[970,250]],ids:["4856875","4856890"]},"leader-ad-plus-middle":{sizes:[[728,90],[970,250]],ids:["4856876","4856891"]},"incontent-ad-plus-billboard-bottom":{sizes:[[728,90],[970,250]],ids:["4856877","4856892"]},leader_plus_top:{sizes:[[728,90],[970,250]],ids:["4856878","4856887"]},leader_top:{sizes:[[728,90]],ids:["4856879"]},leader_bottom:{sizes:[[728,90]],ids:["4856880"]},overlay_leader_top:{sizes:[[728,90]],ids:["4856881"]},leader_middle:{sizes:[[728,90]],ids:["4856882"]},"sky-leader-plus-top":{sizes:[[728,90],[970,250]],ids:["4856883","4856888"]},"incontent-ad":{sizes:[[728,90]],ids:["4856884"]},"incontent-ad-inc":{sizes:[[728,90]],ids:["4856885"]},video:{ids:["4923774"]},"skybox-nav":{sizes:[[728,90],[970,250]],ids:["5099300"]}}:{"mobile-native":{sizes:[[300,250]],ids:["4856893"]},"mobile-mpu":{sizes:[[300,250]],ids:["4856894"]},"mobile-incontent-ad-inc":{sizes:[[300,250],[320,50]],ids:["4856895","4856922"]},"mobile-flex-inc":{sizes:[[300,250],[320,50]],ids:["4856896","4856910"]},"mobile-incontent-plus":{sizes:[[300,250],[320,50]],ids:["4856897","4856912"]},"mobile-incontent-plus-bottom":{sizes:[[300,250],[320,50]],ids:["4856898","4856913"]},"mobile-incontent-ad":{sizes:[[300,250],[320,50]],ids:["4856899","4856909"]},"mobile-mpu-bottom":{sizes:[[300,250]],ids:["4856900"]},"mobile-native-plus-top":{sizes:[[300,250]],ids:["4856901"]},"mobile-incontent-ad-plus-inc":{sizes:[[300,250],[320,50]],ids:["4856902","4856915"]},"mobile-incontent-all":{sizes:[[300,250]],ids:["4856903"]},"mobile-flex-bottom":{sizes:[[300,250],[320,50]],ids:["4856904","4856916"]},"mobile-autoplay-plus":{sizes:[[300,250],[320,50]],ids:["4856905","4856917"]},"mobile-highimpact-plus":{sizes:[[300,250],[320,50]],ids:["4856906","4856918"]},"incontent-mobile-flex":{sizes:[[300,250],[320,50]],ids:["4856907","4856919"]},"mobile-banner-plus":{sizes:[[300,250],[320,50]],ids:["4856908","4856921"]},"mobile-nav-ad-plus-banner":{sizes:[[320,50]],ids:["4856911"]},"mobile-banner-bottom":{sizes:[[320,50]],ids:["4856914"]},"mobile-banner":{sizes:[[320,50]],ids:["4856920"]},"incontent-ad-plus-inc":{sizes:[[728,90]],ids:["4856923"]},"incontent-all-top":{sizes:[[728,90],[970,250]],ids:["4856924","4856926"]},"incontent-narrow-all-top":{sizes:[[728,90]],ids:["4856925"]},video:{ids:["4923775"]},"mobile-skybox-nav":{sizes:[[320,50],[320,100]],ids:["5099301"]}}}}(e)),Z.set("bidders.prebid.rubicon",function(e){return{enabled:!1,accountId:7450,slots:e?{video:{siteId:"462828",zoneId:"2742538"}}:{video:{siteId:"462830",zoneId:"2742540"}}}}(e)),Z.set("bidders.prebid.rubicon_display",function(e){return{enabled:!1,accountId:7450,slots:e?{mpu_top:{sizes:[[300,250]],siteId:"462802",zoneId:"2719686"},mpu_plus_top:{sizes:[[300,250],[300,600]],siteId:"462802",zoneId:"2719688"},mpu_middle:{sizes:[[300,250]],siteId:"462802",zoneId:"2719688"},mpu_bottom:{sizes:[[300,250]],siteId:"462802",zoneId:"2719690"},overlay_mpu_top:{sizes:[[300,250]],siteId:"462802",zoneId:"2719692"},"mpu-top-inc":{sizes:[[300,250]],siteId:"462802",zoneId:"2719694"},"mpu-bottom-inc":{sizes:[[300,250]],siteId:"462802",zoneId:"2719694"},"native-mpu":{sizes:[[300,250]],siteId:"462802",zoneId:"2719696"},"nav-ad-plus-leader":{sizes:[[728,90],[970,250]],siteId:"462804",zoneId:"2719700"},"leader-plus-inc":{sizes:[[728,90],[970,250]],siteId:"462804",zoneId:"2719700"},"leader-bottom-inc":{sizes:[[728,90]],siteId:"462804",zoneId:"2719702"},"leader-ad-plus-top":{sizes:[[728,90],[970,250]],siteId:"462804",zoneId:"2719702"},"leader-ad-plus-middle":{sizes:[[728,90],[970,250]],siteId:"462804",zoneId:"2719704"},"incontent-ad-plus-billboard-bottom":{sizes:[[728,90],[970,250]],siteId:"462804",zoneId:"2719704"},leader_plus_top:{sizes:[[728,90],[970,250]],siteId:"462804",zoneId:"2719706"},leader_top:{sizes:[[728,90]],siteId:"462804",zoneId:"2719706"},leader_bottom:{sizes:[[728,90]],siteId:"462804",zoneId:"2719780"},overlay_leader_top:{sizes:[[728,90]],siteId:"462804",zoneId:"2719780"},leader_middle:{sizes:[[728,90]],siteId:"462804",zoneId:"2719782"},"sky-leader-plus-top":{sizes:[[728,90],[970,250]],siteId:"462804",zoneId:"2719782"},"incontent-ad":{sizes:[[728,90]],siteId:"462804",zoneId:"2719784"},"incontent-ad-inc":{sizes:[[728,90]],siteId:"462804",zoneId:"2719786"},"skybox-nav":{sizes:[[728,90],[970,250]],siteId:"462828",zoneId:"2843716"}}:{"mobile-native":{sizes:[[300,250]],siteId:"462804",zoneId:"2719794"},"mobile-mpu":{sizes:[[300,250]],siteId:"462804",zoneId:"2719796"},"mobile-incontent-ad-inc":{sizes:[[300,250]],siteId:"462824",zoneId:"2719798"},"mobile-flex-inc":{sizes:[[300,250]],siteId:"462824",zoneId:"2719800"},"mobile-incontent-plus":{sizes:[[300,250]],siteId:"462824",zoneId:"2719802"},"mobile-incontent-plus-bottom":{sizes:[[300,250]],siteId:"462824",zoneId:"2719802"},"mobile-incontent-ad":{sizes:[[300,250]],siteId:"462824",zoneId:"2719804"},"mobile-mpu-bottom":{sizes:[[300,250]],siteId:"462824",zoneId:"2719806"},"mobile-native-plus-top":{sizes:[[300,250]],siteId:"462824",zoneId:"2719808"},"mobile-incontent-ad-plus-inc":{sizes:[[300,250]],siteId:"462824",zoneId:"2719808"},"mobile-incontent-all":{sizes:[[300,250]],siteId:"462824",zoneId:"2719810"},"mobile-flex-bottom":{sizes:[[300,250]],siteId:"462824",zoneId:"2719812"},"mobile-autoplay-plus":{sizes:[[300,250]],siteId:"462824",zoneId:"2719814"},"mobile-highimpact-plus":{sizes:[[300,250]],siteId:"462824",zoneId:"2719798"},"mobile-skybox-nav":{sizes:[[320,50],[320,100]],siteId:"462830",zoneId:"2843718"}}}}(e)),Z.set("bidders.prebid.wikia",{enabled:!1,slots:{leader_top:{sizes:[[728,90]]},leader_plus_top:{sizes:[[728,90]]},mpu_top:{sizes:[[300,250]]},mpu_bottom:{sizes:[[300,250]]},leader_bottom:{sizes:[[728,90]]},"mobile-banner":{sizes:[[320,50]]}}}),Z.set("bidders.prebid.yahoossp",function(e){return{enabled:!1,slots:e?{mpu_top:{sizes:[[300,250]],pubId:["8a969450018585a63429a7e4471900ee"]},mpu_plus_top:{sizes:[[300,250],[300,600]],pubId:["8a969450018585a63429a7e4480400ef","8a969450018585a63429a7e44eb400f6"]},mpu_middle:{sizes:[[300,250]],pubId:["8a969450018585a63429a7e448fa00f0"]},mpu_bottom:{sizes:[[300,250]],pubId:["8a969450018585a63429a7e449e300f1"]},overlay_mpu_top:{sizes:[[300,250]],pubId:["8a969450018585a63429a7e44ad500f2"]},"mpu-top-inc":{sizes:[[300,250]],pubId:["8a969450018585a63429a7e44bcc00f3"]},"mpu-bottom-inc":{sizes:[[300,250]],pubId:["8a969450018585a63429a7e44cc600f4"]},"native-mpu":{sizes:[[300,250]],pubId:["8a969450018585a63429a7e44db500f5"]},"nav-ad-plus-leader":{sizes:[[728,90],[970,250]],pubId:["8a969450018585a63429a7e44faa00f7","8a969450018585a63429a7e461500105"]},"leader-plus-inc":{sizes:[[728,90],[970,250]],pubId:["8a969450018585a63429a7e450af00f8","8a969450018585a63429a7e464be0108"]},"leader-bottom-inc":{sizes:[[728,90]],pubId:["8a969450018585a63429a7e4520500f9"]},"leader-ad-plus-top":{sizes:[[728,90],[970,250]],pubId:["8a969450018585a63429a7e4536400fa","8a969450018585a63429a7e465f00109"]},"leader-ad-plus-middle":{sizes:[[728,90],[970,250]],pubId:["8a969450018585a63429a7e4561c00fb","8a9691e7018585a630eba7e4673b00db"]},"incontent-ad-plus-billboard-bottom":{sizes:[[728,90],[970,250]],pubId:["8a969450018585a63429a7e4575800fc","8a969450018585a63429a7e4687f010a"]},leader_plus_top:{sizes:[[728,90],[970,250]],pubId:["8a969450018585a63429a7e4588500fd","8a969450018585a63429a7e4626c0106"]},leader_top:{sizes:[[728,90]],pubId:["8a969450018585a63429a7e4599600fe"]},leader_bottom:{sizes:[[728,90]],pubId:["8a969450018585a63429a7e45aab00ff"]},overlay_leader_top:{sizes:[[728,90]],pubId:["8a969450018585a63429a7e45bbc0100"]},leader_middle:{sizes:[[728,90]],pubId:["8a969450018585a63429a7e45cd80101"]},"sky-leader-plus-top":{sizes:[[728,90],[970,250]],pubId:["8a969450018585a63429a7e45df90102","8a969450018585a63429a7e463910107"]},"incontent-ad":{sizes:[[728,90]],pubId:["8a969450018585a63429a7e45f130103"]},"incontent-ad-inc":{sizes:[[728,90]],pubId:["8a969450018585a63429a7e460300104"]}}:{"mobile-native":{sizes:[[300,250]],pubId:["8a969dc9018585a62bdba7e4992200f0"]},"mobile-mpu":{sizes:[[300,250]],pubId:["8a969450018585a63429a7e49a0f0116"]},"mobile-incontent-ad-inc":{sizes:[[300,250],[320,50]],pubId:["8a9691e7018585a630eba7e49b0200e5","8a969450018585a63429a7e4ba20011c"]},"mobile-flex-inc":{sizes:[[300,250],[320,50]],pubId:["8a969dc9018585a62bdba7e49c0300f1","8a969dc9018585a62bdba7e4ab0100f7"]},"mobile-incontent-plus":{sizes:[[300,250],[320,50]],pubId:["8a969450018585a63429a7e49cf80117","8a9691e7018585a630eba7e4ad9c00ec"]},"mobile-incontent-plus-bottom":{sizes:[[300,250],[320,50]],pubId:["8a9691e7018585a630eba7e49df800e6","8a969dc9018585a62bdba7e4aed400f8"]},"mobile-incontent-ad":{sizes:[[300,250],[320,50]],pubId:["8a969dc9018585a62bdba7e49efd00f2","8a9691e7018585a630eba7e4a9d500eb"]},"mobile-mpu-bottom":{sizes:[[300,250]],pubId:["8a9691e7018585a630eba7e4a00300e7"]},"mobile-native-plus-top":{sizes:[[300,250]],pubId:["8a969dc9018585a62bdba7e4a32f00f4"]},"mobile-incontent-ad-plus-inc":{sizes:[[300,250],[320,50]],pubId:["8a969dc9018585a62bdba7e4a10a00f3","8a9691e7018585a630eba7e4b13a00ed"]},"mobile-incontent-all":{sizes:[[300,250]],pubId:["8a9691e7018585a630eba7e4a22100e8"]},"mobile-flex-bottom":{sizes:[[300,250],[320,50]],pubId:["8a9691e7018585a630eba7e4a44700e9","8a969dc9018585a62bdba7e4b27c00f9"]},"mobile-autoplay-plus":{sizes:[[300,250],[320,50]],pubId:["8a969dc9018585a62bdba7e4a55600f5","8a9691e7018585a630eba7e4b3d000ee"]},"mobile-highimpact-plus":{sizes:[[300,250],[320,50]],pubId:["8a969450018585a63429a7e4a6630118","8a969dc9018585a62bdba7e4b50100fa"]},"incontent-mobile-flex":{sizes:[[300,250],[320,50]],pubId:["8a9691e7018585a630eba7e4a79100ea","8a969450018585a63429a7e4b636011b"]},"mobile-banner-plus":{sizes:[[300,250],[320,50]],pubId:["8a969dc9018585a62bdba7e4a8b100f6","8a969dc9018585a62bdba7e4b8e300fb"]},"mobile-nav-ad-plus-banner":{sizes:[[320,50]],pubId:["8a969450018585a63429a7e4ac530119"]},"mobile-banner-bottom":{sizes:[[320,50]],pubId:["8a969450018585a63429a7e4aff4011a"]},"mobile-banner":{sizes:[[320,50]],pubId:["8a9691e7018585a630eba7e4b7a100ef"]},"incontent-ad-plus-inc":{sizes:[[728,90]],pubId:["8a9691e7018585a630eba7e4bb7e00f0"]},"incontent-all-top":{sizes:[[728,90],[970,250]],pubId:["8a969dc9018585a62bdba7e4bcbe00fc","8a9691e7018585a630eba7e4bf7700f1"]},"incontent-narrow-all-top":{sizes:[[728,90]],pubId:["8a969450018585a63429a7e4bdfe011d"]}}}}(e)),Z.set("bidders.prebid.filter","static"),this.registerListeners()}registerListeners(){Gt.on(Ut.AD_ENGINE_SLOT_ADDED,(({slot:e})=>{this.bidders.updateSlotTargeting(e.getSlotName())}),!1)}};Nl=E([h(),T("design:paramtypes",["function"==typeof(Ol=void 0!==br&&br)?Ol:Object])],Nl);let Pl=class{execute(){const e={interstitial:{adProduct:"interstitial",adUnit:"/{custom.dfpId}/{slotConfig.group}/{slotConfig.adProduct}/{custom.device}{custom.region}-{custom.property}{custom.pagePath}",group:"IU",outOfPage:!0,outOfPageFormat:"INTERSTITIAL",targeting:{loc:"hivi"}},top_leaderboard:{firstCall:!0,adProduct:"top_leaderboard",group:"LB",sizes:[{viewportSize:[970,200],sizes:[[728,90],[970,250],[970,66],Ta.UAP_ADDITIONAL_SIZES.bfaSize.desktop]},{viewportSize:[840,200],sizes:[[728,90],Ta.UAP_ADDITIONAL_SIZES.bfaSize.desktop]},{viewportSize:[320,200],sizes:[[320,50],[320,100],Ta.UAP_ADDITIONAL_SIZES.bfaSize.mobile]},{viewportSize:[0,0],sizes:[[320,50]]}],defaultSizes:[[728,90],[970,250]],defaultTemplates:["stickyTlb"],targeting:{loc:"top",pos_nr:"nav"}},floor_adhesion:{adProduct:"floor_adhesion",group:"PF",targeting:{loc:"footer"},defaultTemplates:["floorAdhesion"],defaultSizes:[[728,90]],sizes:[{viewportSize:[0,0],sizes:[[300,50],[320,50],[320,100]]},{viewportSize:[768,0],sizes:[[728,90]]}]},mpu_top:{defaultSizes:[[300,250]],targeting:{pos_nr:"top"}},mpu_plus_top:{defaultSizes:[[300,250],[300,600]],targeting:{pos_nr:"top"}},mpu_middle:{defaultSizes:[[300,250]],targeting:{pos_nr:"1"}},mpu_bottom:{defaultSizes:[[300,250]],targeting:{pos_nr:"bottom"}},leader_plus_top:{defaultSizes:[[728,90],[970,66],[970,250]],targeting:{pos_nr:"top"}},leader_top:{defaultSizes:[[728,90],[970,66]],targeting:{pos_nr:"top"}},leader_bottom:{defaultSizes:[[728,90],[970,66]],targeting:{pos_nr:"bottom"}},overlay_leader_top:{defaultSizes:[[728,90],[970,66]],targeting:{pos_nr:"top"}},overlay_mpu_top:{defaultSizes:[[300,250]],targeting:{pos_nr:"top"}},leader_middle:{defaultSizes:[[728,90],[970,66]],targeting:{pos_nr:"1"}},"sky-leader-plus-top":{defaultSizes:[[970,250],[970,66],[728,90],[5,5]],targeting:{pos_nr:"1"}},"incontent-ad":{defaultSizes:[[970,66],[728,90],[11,11],[5,5]],targeting:{pos_nr:"top"}},"incontent-ad-inc":{defaultSizes:[[970,66],[728,90],[11,11],[5,5]],targeting:{pos_nr:"1"}},"leader-plus-inc":{defaultSizes:[[970,250],[970,90],[970,66],[728,90]],targeting:{pos_nr:"1"}},"mpu-top-inc":{defaultSizes:[[300,250]],targeting:{pos_nr:"1"}},"mpu-bottom-inc":{defaultSizes:[[300,250]],targeting:{pos_nr:"1"}},"leader-bottom-inc":{defaultSizes:[[970,66],[728,90]],targeting:{pos_nr:"1"}},logo_top:{defaultSizes:[[160,70]],targeting:{pos_nr:"top"}},"native-top":{defaultSizes:[[11,11]],targeting:{pos_nr:"top"}},"mobile-native":{defaultSizes:[[300,250],[11,11]],targeting:{pos_nr:"top"}},"mobile-incontent-ad":{defaultSizes:[[300,250],[320,50],[11,11],[5,5]],targeting:{pos_nr:"top"}},"mobile-banner-bottom":{defaultSizes:[[320,50]],targeting:{pos_nr:"bottom"}},"mobile-mpu-bottom":{defaultSizes:[[300,250]],targeting:{pos_nr:"bottom"}},"mobile-native-plus-top":{defaultSizes:[[300,250],[11,11]],targeting:{pos_nr:"top"}},"mobile-flex-bottom":{defaultSizes:[[300,250],[320,50]],targeting:{pos_nr:"bottom"}},"mobile-autoplay-plus":{defaultSizes:[[300,250],[320,50],[11,11],[5,5]],targeting:{pos_nr:"plus"}},"mobile-highimpact-plus":{defaultSizes:[[300,250],[320,50],[5,5]],targeting:{pos_nr:"plus"}},"incontent-mobile-flex":{defaultSizes:[[300,250],[320,50]],targeting:{pos_nr:"1"}},"mobile-banner":{defaultSizes:[[320,50]],targeting:{pos_nr:"1"}},"mobile-mpu":{defaultSizes:[[300,250]],targeting:{pos_nr:"1"}},"mobile-incontent-ad-inc":{defaultSizes:[[300,250],[320,50],[11,11],[5,5]],targeting:{pos_nr:"1"}},"mobile-flex-inc":{defaultSizes:[[300,250],[320,50]],targeting:{pos_nr:"1"}},"mobile-logo":{defaultSizes:[[160,70]],targeting:{pos_nr:"1"}},"leader-ad-plus-top":{defaultSizes:[[728,90],[970,66],[970,250]],targeting:{pos_nr:"top"}},"leader-ad-plus-middle":{defaultSizes:[[728,90],[970,66],[970,250]],targeting:{pos_nr:"middle"}},"native-mpu":{defaultSizes:[[300,250]],targeting:{pos_nr:"native"}},"incontent-ad-plus-billboard-bottom":{defaultSizes:[[970,250],[970,66],[728,90],[5,5]],targeting:{pos_nr:"bottom"}},"mobile-incontent-plus":{defaultSizes:[[300,250],[320,50],[5,5]],targeting:{pos_nr:"increment"}},"mobile-incontent-plus-bottom":{defaultSizes:[[300,250],[320,50],[5,5]],targeting:{pos_nr:"bottom"}},"mobile-banner-plus":{defaultSizes:[[300,250],[320,50]],targeting:{pos_nr:"increment"}},"incontent-ad-plus-inc":{defaultSizes:[[728,90],[970,66],[5,5]],targeting:{pos_nr:"inc"}},"mobile-incontent-ad-plus-inc":{defaultSizes:[[300,250],[320,50],[5,5]],targeting:{pos_nr:"inc"}},"incontent-all-top":{defaultSizes:[[970,250],[970,66],[728,90],[8,8],[5,5]],targeting:{pos_nr:"top"}},"mobile-incontent-all":{defaultSizes:[[320,480],[300,250],[8,8],[5,5]],targeting:{pos_nr:"increment"}},"incontent-narrow-all-top":{defaultSizes:[[728,90],[8,8],[5,5]],targeting:{pos_nr:"top"}},video:{isVideo:!0}};Z.set("slots",e)}};Pl=E([h()],Pl);class kl{execute(){const e={s0:this.getVerticalName(),s1:"gamespot",skin:"gamespot_"+(Z.get("state.isMobile")?"mobile":"desktop"),seg:"",aamid:""};Di.extend(e)}getVerticalName(){const e=window.utag_data;return e?this.isEntertainmentSite(e["dom.pathname"])?"ent":"news"===e.siteSection||"reviews"===e.siteSection||"galleries"===e.siteSection?this.getVerticalNameBasedOnTopicName(e):"gaming":"gaming"}isEntertainmentSite(e){return!!e&&e.includes("entertainment")}getVerticalNameBasedOnTopicName(e){const t=e.topicName,i=e.contentTopicName;return Array.isArray(t)&&0!==t.length?t.includes("Games")||t.includes("Game Review")||i&&i.includes("gaming")?"gaming":"ent":"gaming"}}class Dl{constructor(){this.NOT_REQUESTED_SLOT_WRAPPER_SELECTOR=".mapped-ad > .ad-wrap:not(.gpt-ad)",this.currentPage=1,this.loadedAds={}}execute(){const e=document.getElementById("js-infinite-scroll");if(!e)return void q("pageChangeWatcher","InfiniteScrollObserver - abortted");const t=new MutationObserver((()=>this.handleMutation()));q("pageChangeWatcher","InfiniteScrollObserver setting the observer"),t.observe(e,{subtree:!0,childList:!0})}handleMutation(){q("pageChangeWatcher","InfiniteScrollObserver detected mutation",this.currentPage,this.loadedAds,location.search);const e=this.getPageFromSearchInLocation();1===this.currentPage&&0===Object.keys(this.loadedAds).length&&this.requestAdForUnfilledSlots(),this.currentPage!==e&&(q("pageChangeWatcher","page changed",e),this.currentPage=e,this.requestAdForUnfilledSlots())}requestAdForUnfilledSlots(){const e=Object.values(document.querySelectorAll(this.NOT_REQUESTED_SLOT_WRAPPER_SELECTOR)).filter((e=>{if(!e.parentElement.classList.contains("gpt-ad"))return e}));q("pageChangeWatcher","adSlotsToFill: ",e),e.forEach((e=>{const t=e.parentElement,i=null==t?void 0:t.getAttribute("data-ad-type");if("interstitial"===i)return;const n=this.calculateSeamlessSlotName(t);q("pageChangeWatcher","slot to copy: ",i,n),t.id=n,this.updateSlotContext(i,n),Z.push("state.adStack",{id:n})}))}getPageFromSearchInLocation(){const e=L.get("page")||"1";return parseInt(e,10)}calculateSeamlessSlotName(e){const t=null==e?void 0:e.getAttribute("data-ad-type");return this.loadedAds[t]=this.loadedAds[t]?this.loadedAds[t]+1:1,`${t}-${this.loadedAds[t]}`}updateSlotContext(e,t){Z.set(`slots.${t}`,Object.assign({},Z.get(`slots.${e}`))),Z.set(`slots.${t}.slotName`,t),Di.set("pos",t,t),Di.set("pos_nr",Di.get("pos_nr",e),t),q("pageChangeWatcher","new slot config: ",Z.get(`slots.${t}`),"based on: ",Z.get(`slots.${e}`))}}class Ll{constructor(){this.notRequestedSlotWrapperSelector=".mapped-ad > .ad-wrap:not(.gpt-ad)",this.elementToObserveMutationSelector="title",this.dataAdAttribute="data-ad-type",this.useParentAsAdPlaceholder=!0,this.currentPath="",this.seamlessContentLoaded={},this.seamlessAdsAdded={}}execute(){this.currentPath=location.pathname,this.seamlessContentLoaded[location.pathname]=!0;const e=document.querySelector(this.elementToObserveMutationSelector);e&&new MutationObserver((()=>this.handleMutation())).observe(e,{subtree:!1,childList:!0})}handleMutation(){if(q("pageChangeWatcher","observer init",this.currentPath,location.pathname,this.seamlessContentLoaded),this.currentPath!==location.pathname){if(q("pageChangeWatcher","url changed",location.pathname),this.currentPath=location.pathname,this.seamlessContentLoaded[location.pathname])return void q("pageChangeWatcher","ads already loaded for this content",location.href,this.seamlessContentLoaded);this.seamlessContentLoaded[location.pathname]=!0,this.requestAdForUnfilledSlots()}}requestAdForUnfilledSlots(){const e=document.querySelectorAll(this.notRequestedSlotWrapperSelector);q("pageChangeWatcher","adSlotsToFill: ",e),e.forEach((e=>{const t=this.useParentAsAdPlaceholder?e.parentElement:e,i=null==t?void 0:t.getAttribute(this.dataAdAttribute);if("interstitial"===i)return;if(!this.isSlotDefinedInContext(i))return void q("pageChangeWatcher","slot not defined in the context:",i,t,this.dataAdAttribute);const n=this.calculateSeamlessSlotName(i);q("pageChangeWatcher","slot to copy: ",i,n),t.id=n,this.updateSlotContext(i,n),Z.push("state.adStack",{id:n})}))}calculateSeamlessSlotName(e){return this.seamlessAdsAdded[e]=this.seamlessAdsAdded[e]?this.seamlessAdsAdded[e]+1:1,`${e}-${this.seamlessAdsAdded[e]}`}updateSlotContext(e,t){Z.set(`slots.${t}`,Object.assign({},Z.get(`slots.${e}`))),Z.set(`slots.${t}.slotName`,t),Di.set("pos",t,t),Di.set("pos_nr",Di.get("pos_nr",e),t),q("pageChangeWatcher","new slot config: ",Z.get(`slots.${t}`),"based on: ",Z.get(`slots.${e}`))}isSlotDefinedInContext(e){return Object.keys(Z.get("slots")).includes(e)}}const zl={SLOT:Symbol("template ad slot"),NAME:Symbol("template name"),PARAMS:Symbol("template params")};var xl;let Rl=class{constructor(e){this.container=e}provideDependencies(e,t,i,n){this.container.bind(zl.NAME).value(e),this.container.bind(zl.SLOT).value(t),this.container.bind(zl.PARAMS).value(i),n.forEach((e=>this.container.bind(e)))}resetDependencies(e){this.container.unbind(zl.PARAMS),this.container.unbind(zl.SLOT),this.container.unbind(zl.NAME),e.forEach((e=>this.container.unbind(e)))}};Rl=E([h(),T("design:paramtypes",["function"==typeof(xl=void 0!==_&&_)?xl:Object])],Rl);class jl{get currentState(){if(!this.states.has(this.currentStateKey))throw new Error(`Template ${this.templateName} - state (${this.currentStateKey}) does not exist.`);return this.states.get(this.currentStateKey)}constructor(e,t,i,n){this.templateName=e,this.states=t,this.currentStateKey=i,this.emitter$=n,this.transition=e=>A(this,void 0,void 0,(function*(){if(this.currentStateKey===e)throw new Error(`Template ${this.templateName} - already is in ${this.currentStateKey} state`);this.emit("leaving"),yield this.currentState.leave(),this.emit("left"),this.currentStateKey=e,this.emit("entering"),yield this.currentState.enter(this.transition),this.emit("entered")}))}init(){return A(this,void 0,void 0,(function*(){this.emit("initialising"),yield this.currentState.enter(this.transition),this.emit("initialised")}))}destroy(){return A(this,void 0,void 0,(function*(){this.emit("destroying"),yield this.currentState.leave(),yield Promise.all(Array.from(this.states.values()).map((e=>e.destroy()))),this.emit("destroyed")}))}emit(e){this.emitter$.next({type:e,templateName:this.templateName,stateName:this.currentStateKey})}}class Vl{constructor(e,t){this.name=e,this.handlers=t}enter(e){return A(this,void 0,void 0,(function*(){const t=gn(),i=this.useTransition(e,t);yield Promise.all(this.handlers.map((e=>A(this,void 0,void 0,(function*(){return e.onEnter(i)}))))),t.resolve(null)}))}leave(){return A(this,void 0,void 0,(function*(){yield Promise.all(this.handlers.filter((e=>"onLeave"in e)).map((e=>A(this,void 0,void 0,(function*(){return e.onLeave()})))))}))}destroy(){return A(this,void 0,void 0,(function*(){yield Promise.all(this.handlers.filter((e=>"onDestroy"in e)).map((e=>A(this,void 0,void 0,(function*(){return e.onDestroy()})))))}))}useTransition(e,t){let i=!1;return(n,{allowMulticast:s=!1}={})=>A(this,void 0,void 0,(function*(){if(yield t,i&&!s)throw new Error(`Error thrown while attempting to transition to "${n}" state. Attempting to call transition from "${this.name}" state a second time.\nThis may be caused by:\n- not cleaning up in an "onLeave" method,\n- calling transition in a different handler at the same time.\nYou may suppress this error by setting allowMulticast to true.\n`);return i=!0,e(n,{allowMulticast:s})}))}}var Ml,Ul;let Bl=class{constructor(e,t){this.container=e,this.dependenciesManager=t,this.settings=new Map,this.machines=new Map}has(e){return this.settings.has(e)}register(e,t,i,n=[]){const s=new st;return this.settings.set(e,{StateHandlerTypesDict:t,initialStateKey:i,emitter$:s,templateDependencies:n.flat(1/0)}),s.asObservable()}destroy(e){return A(this,void 0,void 0,(function*(){const t=Array.from(this.machines.get(e)||[]);yield Promise.all(t.map((e=>e.destroy()))),this.machines.delete(e)}))}destroyAll(){return A(this,void 0,void 0,(function*(){yield Promise.all(Array.from(this.machines.values()).map((e=>Promise.all(Array.from(e.values()).map((e=>e.destroy())))))),this.machines.clear()}))}init(e,t,i={}){if(!this.settings.has(e))throw new Error(`Template ${e} was not registered`);Gt.emit(Ut.AD_ENGINE_TEMPLATE_LOADED,{name:e,state:t?t.getSlotName():""});const{StateHandlerTypesDict:n,initialStateKey:s,emitter$:o,templateDependencies:r}=this.settings.get(e);this.dependenciesManager.provideDependencies(e,t,i,r);const a=this.createTemplateStateMap(n);this.dependenciesManager.resetDependencies(r);const d=new jl(e,a,s,o);d.init(),this.saveMachine(t,d)}saveMachine(e,t){var i,n;const s=this.machines.get(null!==(i=null==e?void 0:e.getSlotName())&&void 0!==i?i:"__default__")||new Set;s.add(t),this.machines.set(null!==(n=null==e?void 0:e.getSlotName())&&void 0!==n?n:"__default__",s)}createTemplateStateMap(e){const t=Object.keys(e).map((t=>[t,this.createTemplateState(e,t)]));return new Map(t)}createTemplateState(e,t){const i=e[t].map((e=>this.createStateHandler(e)));return new Vl(t,i)}createStateHandler(e){return this.container.bind(e).scope("Transient"),this.container.get(e)}};Bl=E([h(),T("design:paramtypes",["function"==typeof(Ml=void 0!==_&&_)?Ml:Object,"function"==typeof(Ul=void 0!==Rl&&Rl)?Ul:Object])],Bl);const $l=new Date;function Fl(){return`adEngine_resolvedStateCounter_${Ta.getUapId()}`}const Gl=function(){Zd.setItem(Fl(),{adId:Ta.getUapId(),lastSeenDate:$l.getTime()},86400)},Hl=function(){const e=Zd.getItem(Fl());return!!e&&$l.getTime()!==e.lastSeenDate};let Wl=!1;function ql(){return L.get("resolved_state")}const Kl=function(e){let t=!1;if(function(e){return!(!e.image1||!e.image1.resolvedStateSrc)||"vuap"===e.adProduct}(e)){const e=!([!1,"blocked","false","0"].indexOf(ql())>-1);let i=!0;e&&(i=Hl()||[!0,"true","1"].indexOf(ql())>-1||Wl),t=e&&i}return t},Yl=()=>{Gl()};var Xl,Jl;let Ql=class{constructor(e,t){this.adSlot=e,this.params=t}onEnter(e){return A(this,void 0,void 0,(function*(){this.adSlot.setConfigProperty("showManually",!0),this.adSlot.addClass("expanded-slot"),this.adSlot.addClass("bfaa-template"),this.adSlot.addClass("slot-responsive"),this.adSlot.addClass("theme-hivi"),this.adSlot.getAdContainer().classList.add("iframe-container"),yield Xi.onReady(this.adSlot),yield this.awaitVisibleDOM(),Kl(this.params)?e("sticky"):(Yl(),e("impact"))}))}awaitVisibleDOM(){return A(this,void 0,void 0,(function*(){document.hidden&&(yield un(window,"visibilitychange"))}))}onLeave(){return A(this,void 0,void 0,(function*(){this.adSlot.show(),document.body.classList.add("has-uap")}))}onDestroy(){return A(this,void 0,void 0,(function*(){document.body.classList.remove("has-uap")}))}};Ql=E([h({autobind:!1}),I(0,g(zl.SLOT)),I(1,g(zl.PARAMS)),T("design:paramtypes",["function"==typeof(Xl=void 0!==xn&&xn)?Xl:Object,"function"==typeof(Jl=void 0!==i.UapParams&&i.UapParams)?Jl:Object])],Ql);class Zl{constructor(e,t){this.className=e,this.uiElements=t,this.panelContainer=null}add(e,t,i){this.panelContainer=document.createElement("div"),this.panelContainer.className=this.className,this.uiElements.forEach((t=>{t&&t.add(e,this.panelContainer,i)})),t.appendChild(this.panelContainer)}}const ec=JSON.parse('{"CROSS":"<svg width=\\"24\\" height=\\"24\\" viewBox=\\"0 0 24 24\\" xmlns=\\"http://www.w3.org/2000/svg\\"><path d=\\"M19.707 4.293a.999.999 0 0 0-1.414 0L12 10.586 5.707 4.293a.999.999 0 1 0-1.414 1.414L10.586 12l-6.293 6.293a.999.999 0 1 0 1.414 1.414L12 13.414l6.293 6.293a.997.997 0 0 0 1.414 0 .999.999 0 0 0 0-1.414L13.414 12l6.293-6.293a.999.999 0 0 0 0-1.414\\" fill-rule=\\"evenodd\\"/></svg>","LEARN_MORE":"<svg width=\\"24\\" height=\\"24\\" viewBox=\\"0 0 24 24\\" xmlns=\\"http://www.w3.org/2000/svg\\"><g stroke=\\"none\\" stroke-width=\\"1\\" fill-rule=\\"evenodd\\"><g transform=\\"translate(-753.000000, -1764.000000)\\" fill-rule=\\"nonzero\\"><g transform=\\"translate(153.000000, 1746.000000)\\"><g transform=\\"translate(5.000000, 0.000000)\\"><g transform=\\"translate(459.000000, 0.000000)\\"><g transform=\\"translate(136.000000, 18.000000)\\"><polygon points=\\"24 0 15 0 18.4395 3.4395 9.033 12.846 11.154 14.967 20.5605 5.5605 24 9\\"></polygon><path d=\\"M19.5,24 L1.5,24 C0.672,24 0,23.328 0,22.5 L0,4.5 C0,3.672 0.672,3 1.5,3 L10.5,3 L10.5,6 L3,6 L3,21 L18,21 L18,13.5 L21,13.5 L21,22.5 C21,23.328 20.328,24 19.5,24 Z\\"></path></g></g></g></g></g></g></svg>","PAUSE":"<svg width=\\"24\\" height=\\"24\\" viewBox=\\"0 0 24 24\\" xmlns=\\"http://www.w3.org/2000/svg\\"><g fill-rule=\\"evenodd\\"><rect width=\\"7\\" height=\\"22\\" rx=\\"1\\" x=\\"3\\" y=\\"1\\"></rect><rect x=\\"14\\" width=\\"7\\" height=\\"22\\" rx=\\"1\\" y=\\"1\\"></rect></g></svg>","PLAY":"<svg width=\\"24\\" height=\\"24\\" viewBox=\\"0 0 24 24\\" xmlns=\\"http://www.w3.org/2000/svg\\"><path d=\\"M19.69 12.6L5.143 22.867a.722.722 0 0 1-.753.05.733.733 0 0 1-.391-.65V1.733c0-.274.15-.524.391-.65a.724.724 0 0 1 .753.05l14.545 10.266a.734.734 0 0 1 0 1.201z\\" fill-rule=\\"evenodd\\"></path></svg>","REPLAY":"<svg width=\\"24\\" height=\\"24\\" viewBox=\\"0 0 24 24\\" xmlns=\\"http://www.w3.org/2000/svg\\"><path d=\\"M12 23c6.065 0 11-4.863 11-10.84a.992.992 0 0 0-1-.985c-.553 0-1 .44-1 .986 0 4.89-4.037 8.868-9 8.868s-9-3.978-9-8.868c0-4.89 4.037-8.869 9-8.869a8.991 8.991 0 0 1 6.975 3.292l-3.794-.501a.996.996 0 0 0-1.124.845.987.987 0 0 0 .858 1.108l5.946.785a.996.996 0 0 0 1.124-.845l.797-5.86a.987.987 0 0 0-.858-1.107.994.994 0 0 0-1.124.846l-.446 3.28A10.997 10.997 0 0 0 12 1.322c-6.065 0-11 4.862-11 10.839C1 18.137 5.935 23 12 23\\" fill-rule=\\"evenodd\\"/></svg>","FULLSCREEN_OFF":"<svg width=\\"24\\" height=\\"24\\" viewBox=\\"0 0 24 24\\" xmlns=\\"http://www.w3.org/2000/svg\\"><path d=\\"M5.5 9H8V2H5v4H1v3h4.5zm13 0H16V2h3v4h4v3h-4.5zm-13 6H8v7H5v-4H1v-3h4.5zm13 0H16v7h3v-4h4v-3h-4.5z\\" fill-rule=\\"evenodd\\"/></svg>","FULLSCREEN_ON":"<svg width=\\"24\\" height=\\"24\\" viewBox=\\"0 0 24 24\\" xmlns=\\"http://www.w3.org/2000/svg\\"><path d=\\"M21.5 22H23v-7h-3v4h-4v3h5.5zM23 3.5V9h-3V5h-4V2h7v1.5zm-22 17V15h3v4h4v3H1v-1.5zM2.5 2H1v7h3V5h4V2H2.5z\\" fill-rule=\\"evenodd\\"/></svg>","VOLUME_OFF":"<svg viewBox=\\"0 0 28 28\\" xmlns=\\"http://www.w3.org/2000/svg\\"><defs><style>.cls-1{fill:#fff;opacity:0.4;}.cls-2{fill:#231f20;}</style></defs><title>sound_off_button</title><circle class=\\"cls-1\\" cx=\\"14.06\\" cy=\\"13.96\\" r=\\"13.74\\"/><path class=\\"cls-2\\" d=\\"M16,2.93A13.07,13.07,0,1,1,2.93,16,13.08,13.08,0,0,1,16,2.93M16,2A14,14,0,1,0,30,16,14,14,0,0,0,16,2Z\\" transform=\\"translate(-2 -2)\\"/><g id=\\"Page-1\\"><g id=\\"Video-Player-Skin\\"><g id=\\"Video-Copy\\"><g id=\\"volume-off\\"><path id=\\"Shape\\" class=\\"cls-2\\" d=\\"M14.25,9.17l-3.79,4.11H6.84c-.78,0-1,.46-1,.89V17.7a1,1,0,0,0,1,1h3.65l3.79,4.18a1.09,1.09,0,0,0,.53.14,1,1,0,0,0,.5-.14,1,1,0,0,0,.5-.9V10a1,1,0,0,0-.5-.9,1.06,1.06,0,0,0-1,.05Z\\" transform=\\"translate(-2 -2)\\"/><path id=\\"Fill-1\\" class=\\"cls-2\\" d=\\"M22.91,16.21l3-3a.92.92,0,1,0-1.3-1.3l-3,3-3-3a.92.92,0,1,0-1.3,1.3l3,3-3,3a.92.92,0,1,0,1.3,1.3l3-3,3,3a.92.92,0,1,0,1.3-1.3Z\\" transform=\\"translate(-2 -2)\\"/></g></g></g></g></svg>","VOLUME_ON":"<svg viewBox=\\"0 0 28 28\\" xmlns=\\"http://www.w3.org/2000/svg\\"><defs><style>.cls-1{fill:#fff;opacity:0.4;}.cls-2{fill:#231f20;}</style></defs><title>sound_on_button</title><circle class=\\"cls-1\\" cx=\\"13.96\\" cy=\\"14.06\\" r=\\"13.74\\"/><path class=\\"cls-2\\" d=\\"M16,2.93A13.07,13.07,0,1,1,2.93,16,13.08,13.08,0,0,1,16,2.93M16,2A14,14,0,1,0,30,16,14,14,0,0,0,16,2Z\\" transform=\\"translate(-2 -2)\\"/><g id=\\"Page-1\\"><g id=\\"Video-Player-Skin\\"><g id=\\"Video-Copy\\"><g id=\\"volume\\"><path id=\\"Shape\\" class=\\"cls-2\\" d=\\"M14.24,9.17l-3.79,4.11H6.82c-.78,0-1,.46-1,.89V17.7a1,1,0,0,0,1,1h3.65l3.79,4.18a1.09,1.09,0,0,0,.53.14,1,1,0,0,0,.5-.14,1,1,0,0,0,.5-.9V10a1,1,0,0,0-.5-.9,1.06,1.06,0,0,0-1,.05Z\\" transform=\\"translate(-2 -2)\\"/><path id=\\"Shape-2\\" data-name=\\"Shape\\" class=\\"cls-2\\" d=\\"M19.18,19.33a4.39,4.39,0,0,0,0-6.19.71.71,0,0,0-1,1,3,3,0,0,1,0,4.19.71.71,0,0,0,1,1Z\\" transform=\\"translate(-2 -2)\\"/><path id=\\"Shape-3\\" data-name=\\"Shape\\" class=\\"cls-2\\" d=\\"M23.3,16.23a6.19,6.19,0,0,0-1.81-4.39.71.71,0,1,0-1,1,4.81,4.81,0,0,1,0,6.79.71.71,0,1,0,1,1,6.19,6.19,0,0,0,1.81-4.39Z\\" transform=\\"translate(-2 -2)\\"/></g></g></g></g></svg>","HIVI_VOLUME_OFF":"<svg width=\\"24\\" height=\\"24\\" viewBox=\\"0 0 24 24\\" xmlns=\\"http://www.w3.org/2000/svg\\"><path d=\\"M6 8.007H1.347C.333 8.007 0 8.769 0 9.391v5.032C0 15.045.333 16 1.347 16H6l5.007 5.796c.215.132.454.205.693.205.24 0 .436-.063.65-.196.429-.265.65-.75.65-1.28V3.447c0-.53-.221-1.02-.65-1.284-.429-.265-.935-.187-1.365.078L6 8.007zM20.305 12l2.425-2.425a.922.922 0 1 0-1.306-1.305l-2.425 2.424-2.423-2.424a.923.923 0 0 0-1.306 1.305L17.695 12l-2.425 2.425a.922.922 0 1 0 1.306 1.304L19 13.306l2.425 2.423a.92.92 0 0 0 1.306 0 .922.922 0 0 0 0-1.304L20.305 12z\\" fill-rule=\\"evenodd\\"></path></svg>","HIVI_VOLUME_ON":"<svg width=\\"24\\" height=\\"24\\" viewBox=\\"0 0 24 24\\" xmlns=\\"http://www.w3.org/2000/svg\\"><g fill-rule=\\"evenodd\\"><path d=\\"M6 8.007H1.347C.333 8.007 0 8.769 0 9.391v5.032C0 15.045.333 16 1.347 16H6l5.007 5.796c.215.132.454.205.693.205.24 0 .436-.063.65-.196.429-.265.65-.75.65-1.28V3.447c0-.53-.221-1.02-.65-1.284-.429-.265-.935-.187-1.365.078L6 8.007zm11.612 8.524a5.858 5.858 0 0 0 0-8.253.944.944 0 0 0-1.337 1.332 3.97 3.97 0 0 1 0 5.59.943.943 0 1 0 1.337 1.331z\\"></path><path d=\\"M23.03 12.135c0-2.21-.859-4.292-2.418-5.857a.943.943 0 1 0-1.337 1.332 6.37 6.37 0 0 1 1.868 4.525 6.37 6.37 0 0 1-1.868 4.525.943.943 0 1 0 1.338 1.332 8.249 8.249 0 0 0 2.418-5.857z\\"></path></g></svg>"}');var tc=s.t(ec,2);const ic=new window.DOMParser;function nc(e,t=[]){if(tc[e]){const i=ic.parseFromString(tc[e],"image/svg+xml").documentElement;return i.setAttribute("class",t.join(" ")),i}return null}const sc=Object.keys(tc).reduce(((e,t)=>(e[t]=t,e)),{});class oc{static add(e,t){const i=document.createElement("div"),n=nc(sc.PAUSE,["play-off-icon","porvata-icon","porvata-off-icon"]),s=nc(sc.PLAY,["play-on-icon","porvata-icon","porvata-on-icon"]);i.appendChild(s),i.appendChild(n),i.className="play-pause-button porvata-switchable-icon",i.addEventListener("click",(()=>{e.isPaused()?e.resume():e.pause()})),e.addEventListener("pause",(()=>{i.classList.remove("is-on")})),e.addEventListener("resume",(()=>{i.classList.add("is-on")})),e.addEventListener("start",(()=>{i.classList.add("is-on")})),t.appendChild(i)}}class rc{static add(e,t){const i=document.createElement("div"),n=nc(sc.FULLSCREEN_OFF,["fullscreen-off-icon","porvata-icon","porvata-off-icon"]),s=nc(sc.FULLSCREEN_ON,["fullscreen-on-icon","porvata-icon","porvata-on-icon"]);i.appendChild(n),i.appendChild(s),i.className="toggle-fullscreen-button porvata-switchable-icon",i.addEventListener("click",(()=>{e.toggleFullscreen()})),e.addEventListener("wikiaFullscreenChange",(()=>{e.isFullscreen()?i.classList.add("is-on"):i.classList.remove("is-on")})),e.addEventListener("wikiaAdStop",(()=>{e.isFullscreen()&&e.toggleFullscreen()})),t.appendChild(i)}}function ac(e,t){e.isMuted()?t.classList.add("is-on"):t.classList.remove("is-on")}class dc{static add(e,t){const i=function(){const e=document.createElement("div"),t=nc(sc.HIVI_VOLUME_OFF,["volume-off-icon","porvata-icon","porvata-off-icon"]),i=nc(sc.HIVI_VOLUME_ON,["volume-on-icon","porvata-icon","porvata-on-icon"]);return e.className="volume-button porvata-switchable-icon",e.appendChild(t),e.appendChild(i),e}();e.addEventListener("wikiaVolumeChange",(()=>{ac(e,i)})),e.addEventListener("wikiaAdStarted",(()=>{ac(e,i)})),i.addEventListener("click",(t=>{e.toggleVolume(),t.preventDefault()})),t.appendChild(i)}}function lc(e){e.style.display="none";const t=e.offsetWidth;return e.style.display="",t}function cc(e,t){t.container.classList.contains("theme-hivi")||(e.style.width=e.style.width||function(e){const t=e.container.offsetWidth;return 100*e.hideWhenPlaying.offsetWidth/t+"%"}(t)),e.style.display="block"}var uc=["addListener","removeListener"],pc=["addEventListener","removeEventListener"],hc=["on","off"];function gc(e,t,i,n){if(fe(i)&&(n=i,i=void 0),n)return gc(e,t,i).pipe(tt(n));var s=N(function(e){return fe(e.addEventListener)&&fe(e.removeEventListener)}(e)?pc.map((function(n){return function(s){return e[n](t,s,i)}})):function(e){return fe(e.addListener)&&fe(e.removeListener)}(e)?uc.map(mc(e,t)):function(e){return fe(e.on)&&fe(e.off)}(e)?hc.map(mc(e,t)):[],2),o=s[0],r=s[1];if(!o&&rt(e))return bt((function(e){return gc(e,t,i)}))(mt(e));if(!o)throw new TypeError("Invalid event target");return new qe((function(e){var t=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.next(1<t.length?t:t[0])};return o(t),function(){return r(t)}}))}function mc(e,t){return function(i){return function(n){return e[i](t,n)}}}function fc(e){return Xe((function(t,i){mt(e).subscribe(Je(i,(function(){return i.complete()}),ke)),!i.closed&&t.subscribe(i)}))}var vc=function(e){function t(t,i){return e.call(this)||this}return w(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(_e),bc={setInterval:function(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var s=bc.delegate;return(null==s?void 0:s.setInterval)?s.setInterval.apply(s,P([e,t],N(i))):setInterval.apply(void 0,P([e,t],N(i)))},clearInterval:function(e){var t=bc.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},yc=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.scheduler=t,n.work=i,n.pending=!1,n}return w(t,e),t.prototype.schedule=function(e,t){var i;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,s=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(s,n,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(s,this.id,t),this},t.prototype.requestAsyncId=function(e,t,i){return void 0===i&&(i=0),bc.setInterval(e.flush.bind(e,this),i)},t.prototype.recycleAsyncId=function(e,t,i){if(void 0===i&&(i=0),null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&bc.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(e,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var i,n=!1;try{this.work(e)}catch(e){n=!0,i=e||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),i},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,i=this.scheduler,n=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,ye(n,this),null!=t&&(this.id=this.recycleAsyncId(i,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(vc),_c=function(){function e(t,i){void 0===i&&(i=e.now),this.schedulerActionCtor=t,this.now=i}return e.prototype.schedule=function(e,t,i){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(i,t)},e.now=kt.now,e}(),Sc=function(e){function t(t,i){void 0===i&&(i=_c.now);var n=e.call(this,t,i)||this;return n.actions=[],n._active=!1,n}return w(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var i;this._active=!0;do{if(i=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,i){for(;e=t.shift();)e.unsubscribe();throw i}}},t}(_c),wc=new Sc(yc),Ec=wc;class Ic{static createDisplayContainer(e,t=null){const i=new window.google.ima.AdDisplayContainer(e),n=e.querySelector("div > iframe");return t&&(Gt.onSlotEvent(ki.DESTROY_EVENT,(()=>{Ic.activeContainers.includes(t.getUid())&&(i.destroy(),Ic.activeContainers=Ic.activeContainers.filter((e=>e!==t.getUid())))}),t.getSlotName(),!0),Ic.activeContainers.push(t.getUid())),Ic.reloadIframeOnNavigation(n),i}static reloadIframeOnNavigation(e){window.performance&&window.performance.navigation&&window.performance.navigation.type===window.performance.navigation.TYPE_BACK_FORWARD&&(e.contentWindow.location.href=e.src)}static createAdsLoader(e,t){const i=new window.google.ima.AdsLoader(e);return i.getSettings().setVpaidMode(t.getVpaidMode()),i}static createAdsRequest(e){const t=new window.google.ima.AdsRequest,i=e.getWidth(),n=e.getHeight();return t.adTagUrl=e.getVastUrl()||lo(0,e.getSlotName(),{targeting:e.getVastTargeting()}),t.linearAdSlotWidth=i,t.linearAdSlotHeight=n,t.setAdWillAutoPlay(e.isAutoPlay()),t.setAdWillPlayMuted(e.isAutoPlay()),t}static getRenderingSettings(){const e=new window.google.ima.AdsRenderingSettings;return Z.get("state.isMobile")||(e.bitrate=68e3),e.loadVideoTimeout=15e3,e.enablePreloading=!0,e.uiElements=[],e}}Ic.activeContainers=[];class Tc{constructor(e){this.fullscreen=!1,this.enter=go(e,Tc.enterEvents),this.exit=go(e,Tc.exitEvents)||go(document,Tc.exitEvents),this.fullscreenChangeEvent=(ho(e,Tc.changeEvents)||"").replace(/^on/,"").replace("msfullscreenchange","MSFullscreenChange"),this.isSupported()&&this.addChangeListener((()=>{this.fullscreen=!this.fullscreen}))}addChangeListener(e){document.addEventListener(this.fullscreenChangeEvent,e)}removeChangeListener(e){document.removeEventListener(this.fullscreenChangeEvent,e)}toggle(){this.isSupported()&&(this.isFullscreen()?this.exit():this.enter())}isFullscreen(){return this.fullscreen}isSupported(){return Boolean(this.enter&&this.exit)}}Tc.enterEvents=["webkitRequestFullscreen","webkitEnterFullscreen","mozRequestFullScreen","msRequestFullscreen","requestFullscreen"],Tc.exitEvents=["webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","exitFullscreen"],Tc.changeEvents=["onwebkitfullscreenchange","onmozfullscreenchange","onmsfullscreenchange","onfullscreenchange"];class Ac{constructor(e){var t;this.playerContainer=e,this.videoContainer=e.querySelector("div"),this.videoElement=this.videoContainer.querySelector("video"),this.interfaceContainer=document.createElement("div"),this.playerContainer.classList.add("porvata","porvata-container"),this.videoContainer.classList.add("video-player","porvata-player","hide"),null===(t=this.videoElement)||void 0===t||t.classList.add("porvata-video"),this.interfaceContainer.classList.add("porvata-interface","hide"),this.playerContainer.appendChild(this.interfaceContainer)}getInterfaceContainer(){return this.interfaceContainer}getPlayerContainer(){return this.playerContainer}getVideoContainer(){return this.videoContainer}getVideoElement(){return this.videoElement}setAttribute(e,t){this.playerContainer.setAttribute(e,t)}setVastAttributes(e,t,i){const n=fd.getVastAttributes(e,t,i);Object.keys(n).forEach((e=>this.setAttribute(e,n[e])))}setAutoPlayOnVideoElement(e){this.videoElement&&(this.videoElement.autoplay=e,this.videoElement.muted=e)}setAudioOnVideoElement(e){this.videoElement&&(this.videoElement.muted=0===e,this.videoElement.volume=e)}}const Cc="video-player-fullscreen",Oc="stop-scrolling";class Nc{constructor(e,t,i,n){this.adDisplayContainer=e,this.adsLoader=t,this.adsRequest=i,this.settings=n,this.state=null,this.adsManager=null,this.eventListeners={},this.destroyCallbacks=new ei;const s=n.getPlayerContainer();this.playCounter=0,this.dom=new Ac(s),this.container=s;const o=s.querySelector("video");this.nativeFullscreen=new Tc(o),this.registerStateListeners(),this.settings.isAutoPlay()&&(this.setAutoPlay(!0),this.updatePlayCounter()),this.destroyCallbacks.onItemFlush((e=>e())),this.nativeFullscreen.isSupported()&&this.nativeFullscreen.addChangeListener((()=>this.onFullscreenChange()))}registerStateListeners(){this.addEventListener(window.google.ima.AdEvent.Type.LOADED,(e=>this.setAdStatus(en.STATUS_SUCCESS,e.getAd()))),this.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,(()=>this.setAdStatus(en.STATUS_ERROR))),this.addEventListener("resume",(()=>this.setState("playing"))),this.addEventListener("start",(()=>this.setState("playing"))),this.addEventListener("pause",(()=>this.setState("paused"))),this.addEventListener("wikiaAdStop",(()=>this.setState("stopped"))),this.addEventListener("allAdsCompleted",(()=>this.setState("stopped"))),this.addEventListener("adCanPlay",(()=>this.dom.getInterfaceContainer().classList.remove("hide"))),this.addEventListener("wikiaAdCompleted",(()=>this.dom.getInterfaceContainer().classList.add("hide")))}getAdsManager(){return this.adsManager}setAdsManager(e){this.adsManager=e}addEventListener(e,t){if(-1!==e.indexOf("wikia"))return this.eventListeners[e]=this.eventListeners[e]||[],void this.eventListeners[e].push(t);null!==this.adsManager?this.adsManager.addEventListener(e,t):this.addEventListener("wikiaAdsManagerLoaded",(()=>this.adsManager.addEventListener(e,t)))}removeEventListener(e,t){}dispatchEvent(e){this.eventListeners[e]&&this.eventListeners[e].length>0&&this.eventListeners[e].forEach((e=>{e({})}))}setAutoPlay(e){this.dom.setAutoPlayOnVideoElement(e),this.settings.setAutoPlay(e)}setAdStatus(e,t){this.dom.setVastAttributes(this.adsRequest.adTagUrl,e,t)}requestAds(){this.adsLoader.requestAds(this.adsRequest)}play(e,t){void 0!==e&&void 0!==t&&(this.settings.setHeight(t),this.settings.setWidth(e)),this.settings.getWidth()&&this.settings.getHeight()&&!this.isFullscreen()||(this.settings.setHeight(this.dom.getPlayerContainer().offsetHeight),this.settings.setWidth(this.dom.getPlayerContainer().offsetWidth)),this.dispatchEvent("wikiaAdPlayTriggered"),this.adDisplayContainer.initialize(),this.adsManager.init(Math.round(this.settings.getWidth()),Math.round(this.settings.getHeight()),window.google.ima.ViewMode.NORMAL),this.adsManager.start(),this.updatePlayCounter()}reload(){const e=Ic.createAdsRequest(this.settings);this.adsManager.destroy(),this.adsLoader.contentComplete(),this.adsLoader.requestAds(e)}resize(e,t){const i=window.google.ima.ViewMode;isFinite(e)&&isFinite(t)&&(this.settings.setHeight(t),this.settings.setWidth(e)),this.adsManager&&(this.isFullscreen()?this.adsManager.resize(window.innerWidth,window.innerHeight,i.FULLSCREEN):this.adsManager.resize(Math.round(this.settings.getWidth()),Math.round(this.settings.getHeight()),i.NORMAL))}getRemainingTime(){return this.adsManager.getRemainingTime()}setState(e){this.state=e}getState(){return this.state}getPlayCounter(){return this.playCounter}updatePlayCounter(){this.playCounter++}isPaused(){return"paused"===this.getState()}isPlaying(){return"playing"===this.getState()}resume(){this.adsManager.resume()}pause(){this.adsManager.pause()}stop(){this.adsManager.stop(),this.dispatchEvent("wikiaAdStop")}toggleVolume(){this.isMuted()?(this.unmute(),this.dispatchEvent("wikiaAdUnmute")):(this.mute(),this.dispatchEvent("wikiaAdMute"))}isMuted(){return 0===this.adsManager.getVolume()}mute(){this.setVolume(0)}unmute(){this.setVolume(.75)}setVolume(e){this.dom.setAudioOnVideoElement(e),this.adsManager.setVolume(e),this.dispatchEvent("wikiaVolumeChange")}toggleFullscreen(){this.fullscreenMuteProtect=!0,this.nativeFullscreen.isSupported()?this.nativeFullscreen.toggle():this.onFullscreenChange()}onFullscreenChange(){this.isFullscreen()?(this.dom.getPlayerContainer().classList.add(Cc),document.documentElement.classList.add(Oc)):(this.dom.getPlayerContainer().classList.remove(Cc),document.documentElement.classList.remove(Oc),this.fullscreenMuteProtect?this.fullscreenMuteProtect=!1:this.isPlaying()&&!this.isMuted()&&this.mute()),this.resize(),this.dispatchEvent("wikiaFullscreenChange")}isFullscreen(){return this.nativeFullscreen.isFullscreen()}addOnDestroyCallback(e){this.destroyCallbacks.push(e)}destroy(){this.destroyCallbacks.flush()}}class Pc{static create(e){return A(this,void 0,void 0,(function*(){e.getPlayerContainer().style.opacity="0",yield Pc.load();const t=e.getSlotName(),i=Qi.get(t);!function(e,t){e.setConfigProperty("autoplay",t.isAutoPlay()),e.setConfigProperty("audio",!t.isAutoPlay()),e.setTargetingConfigProperty("autoplay",t.isAutoPlay()?"yes":"no"),e.setTargetingConfigProperty("audio",t.isAutoPlay()?"no":"yes")}(i,e);const n=Ic.createDisplayContainer(e.getPlayerContainer(),i),s=Ic.createAdsLoader(n,e),o=Ic.createAdsRequest(e),r=function(e){return[$a].filter((t=>t.isEnabled(e)))}(e),a=new Nc(n,s,o,e);return r.forEach((e=>e.load())),this.registerAdsLoaderListeners(s,a,e,r),yield a.requestAds(),a}))}static load(){return A(this,void 0,void 0,(function*(){return Pc.loadSdkPromise||(Pc.loadSdkPromise=window.google&&window.google.ima?new Promise((e=>e())):Oi.loadScript("//imasdk.googleapis.com/js/sdkloader/ima3.js")),Pc.loadSdkPromise}))}static registerAdsLoaderListeners(e,t,i,n){e.addEventListener(window.google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,(e=>{const s=Ic.getRenderingSettings(),o=e.getAdsManager(function(){const e=document.createElement("video");return e.setAttribute("preload","none"),e}(),s);t.setAdsManager(o),Promise.all(n.map((e=>e.init(t,i)))).then((()=>{t.dispatchEvent("wikiaAdsManagerLoaded"),i.getPlayerContainer().style.opacity="1"}))}),!1),e.addEventListener(window.google.ima.AdErrorEvent.Type.AD_ERROR,(e=>{const i=window.google.ima.AdError.ErrorCode.VAST_EMPTY_RESPONSE;"function"==typeof e.getError&&e.getError().getErrorCode()===i&&t.dispatchEvent("wikiaEmptyAd"),t.setAdStatus(en.STATUS_ERROR)}))}}class kc{constructor(e){this.params=e,this.lastKnownAdData={contentType:"",creativeId:"",lineItemId:""},this.logger=(...e)=>q(kc.LOG_GROUP,...e),this.listeners=(Z.get("listeners.porvata")||[]).filter((e=>!e.isEnabled||e.isEnabled()))}init(){this.dispatch("init")}registerVideoEvents(e){this.video=e,this.dispatch("ready"),Object.keys(kc.EVENTS).forEach((t=>{e.addEventListener(t,(e=>{let i,n;e.getError&&(i=e.getError().getErrorCode()),e.getAd&&(n=e.getAd()),this.dispatch(kc.EVENTS[t],i,n)}))}))}dispatch(e,t=0,i){const n=this.getVideoData(e,t,i);this.logger(e,n),this.listeners.forEach((t=>{t.onEvent(e,this.params,n)})),this.params.position&&e===kc.EVENTS.viewable_impression?Qi.get(this.params.position).emit(ki.VIDEO_VIEWED_EVENT):this.params.position&&e===kc.EVENTS.wikiaXClick&&Qi.get(this.params.position).emit(kc.EVENTS.wikiaXClick)}getVideoData(e,t,i){let n,s,o;if(i){const e=Ga.getAdInfo(i);n=e.contentType,s=e.creativeId,o=e.lineItemId}else this.video&&this.video.container&&(n=this.video.container.getAttribute("data-vast-content-type"),s=this.video.container.getAttribute("data-vast-creative-id"),o=this.video.container.getAttribute("data-vast-line-item-id"));return this.lastKnownAdData.contentType=n||this.lastKnownAdData.contentType,this.lastKnownAdData.creativeId=s||this.lastKnownAdData.creativeId,this.lastKnownAdData.lineItemId=o||this.lastKnownAdData.lineItemId,{ad_error_code:t,ad_product:this.params.adProduct,audio:this.params.withAudio?1:0,content_type:this.lastKnownAdData.contentType||"(none)",creative_id:this.lastKnownAdData.creativeId||"",ctp:this.params.withCtp?1:0,event_name:e,line_item_id:this.lastKnownAdData.lineItemId||"",player:kc.PLAYER_NAME,position:this.params.position?this.params.position.toLowerCase():"(none)"}}}var Dc,Lc,zc;kc.EVENTS={adCanPlay:"ad_can_play",complete:"completed",click:"clicked",firstquartile:"first_quartile",impression:"impression",loaded:"loaded",midpoint:"midpoint",pause:"paused",resume:"resumed",start:"started",thirdquartile:"third_quartile",viewable_impression:"viewable_impression",adError:"error",wikiaAdPlayTriggered:"play_triggered",wikiaAdStop:"closed",wikiaAdMute:"mute",wikiaAdUnmute:"unmute",wikiaXClick:"force_close",wikiaInViewportWithOffer:"in_viewport_with_offer",wikiaInViewportWithoutOffer:"in_viewport_without_offer",wikiaFullscreenChange:"fullscreen_change"},kc.LOG_GROUP="porvata-listener",kc.PLAYER_NAME="porvata",function(e){e[e.DISABLED=0]="DISABLED",e[e.ENABLED=1]="ENABLED",e[e.INSECURE=2]="INSECURE"}(Dc||(Dc={}));class xc{constructor(e){this.params=e,this.adProduct=e.adProduct,this.autoPlay=!!e.autoPlay,this.height=e.height,this.iasTracking=function(e){return"boolean"==typeof e.iasTracking?e.iasTracking:!!Z.get("options.video.iasTracking.enabled")}(e),this.playerContainer=e.container,this.slotName=e.slotName,this.src=e.src,this.width=e.width,this.vastUrl=e.vastUrl,this.vastTargeting=e.vastTargeting,this.vpaidMode=e.vpaidMode||Dc.ENABLED}getAdProduct(){return this.adProduct}getParams(){return this.params}getPlayerContainer(){return this.playerContainer}getSlotName(){return this.slotName}getSrc(){return this.src}getVpaidMode(){return this.vpaidMode}getHeight(){return this.height}setHeight(e){this.height=e}getWidth(){return this.width}setWidth(e){this.width=e}isIasTrackingEnabled(){return this.iasTracking}isAutoPlay(){return this.autoPlay}setAutoPlay(e){this.autoPlay=e}getVastTargeting(){return this.vastTargeting}getVastUrl(){return this.vastUrl}}class Rc{static addOnViewportChangeListener(e,t){return wo.addListener(e.viewportHookElement||e.container,t,{offsetTop:e.viewportOffsetTop||0,offsetBottom:e.viewportOffsetBottom||0})}static createVideoContainer(e){const t=document.createElement("div"),i=document.createElement("div");return t.classList.add("video-overlay"),i.classList.add("video-display-wrapper"),t.appendChild(i),e.appendChild(t),i}static inject(e){const t=new kc({adProduct:e.adProduct,position:e.slotName,src:e.src,withAudio:!e.autoPlay,withCtp:!e.autoPlay});let i=!0,n=!1,s=null;e.vastTargeting=e.vastTargeting||{};const o=new xc(e);return t.init(),Pc.create(o).then((o=>{function r(t){t&&!n&&e.autoPlay&&(o.dispatchEvent("wikiaFirstTimeInViewport"),o.play(),n=!0)}function a(){e.startInViewportOnly||!e.autoPlay||n?s=Rc.addOnViewportChangeListener(e,r):(n=!0,o.play())}var d;return t.registerVideoEvents(o),o.addEventListener("adCanPlay",(()=>{var t;o.dispatchEvent("wikiaAdStarted"),null===(t=Qi.get(e.slotName))||void 0===t||t.emit(ki.VIDEO_AD_IMPRESSION)})),o.addEventListener("allAdsCompleted",(()=>{o.isFullscreen()&&o.toggleFullscreen(),o.setAutoPlay(!1),o.dispatchEvent("wikiaAdCompleted"),s&&(wo.removeListener(s),s=null),i=!1,t.params.withAudio=!0,t.params.withCtp=!0})),o.addEventListener("wikiaAdRestart",(()=>{i=!1})),o.addEventListener("start",(()=>{o.dispatchEvent("wikiaAdPlay"),s||n||a()})),o.addEventListener("resume",(()=>{o.dispatchEvent("wikiaAdPlay")})),o.addEventListener("pause",(()=>{o.dispatchEvent("wikiaAdPause")})),o.addOnDestroyCallback((()=>{s&&(wo.removeListener(s),s=null)})),e.autoPlay&&(d=o).addEventListener("wikiaAdsManagerLoaded",(()=>{i&&d.mute()})),e.onReady&&e.onReady(o),o.addEventListener("wikiaAdsManagerLoaded",(()=>{a()})),o.addEventListener("wikiaEmptyAd",(()=>{s=Rc.addOnViewportChangeListener(e,(()=>{o.dispatchEvent("wikiaFirstTimeInViewport"),wo.removeListener(s)}))})),o}))}}let jc=class{constructor(e,t){this.adSlot=e,this.params=t,this.state$=new Dt(1),this.video$=this.state$.asObservable()}register(){const e=this.getPlayerParams();this.setCtpTargeting(e.autoPlay),Rc.inject(e).then((t=>this.state$.next({player:t,params:e})))}getPlayerParams(){return Object.assign(Object.assign({},this.params),{vastTargeting:{},autoPlay:this.isAutoPlayEnabled(),container:this.createPlayerContainer(),hideWhenPlaying:this.params.thumbnail})}createPlayerContainer(){const e=Rc.createVideoContainer(this.adSlot.getElement());return e.parentElement.classList.add("hide"),e}isAutoPlayEnabled(){const e=!Kl(this.params),t=this.params.autoPlay&&!e,i=this.params.autoPlay&&e;return Boolean(t||i)}setCtpTargeting(e){const t=e?"":"-audio",i=e?"":"-ctp";this.adSlot.setConfigProperty("slotNameSuffix",i||t||""),this.adSlot.setTargetingConfigProperty("audio",t?"yes":"no"),this.adSlot.setTargetingConfigProperty("ctp",i?"yes":"no")}discard(){this.state$.complete()}};var Vc,Mc,Uc,Bc;jc=E([h({autobind:!1}),I(0,g(zl.SLOT)),I(1,g(zl.PARAMS)),T("design:paramtypes",["function"==typeof(Lc=void 0!==xn&&xn)?Lc:Object,"function"==typeof(zc=void 0!==i.UapParams&&i.UapParams)?zc:Object])],jc);let $c=Vc=class{constructor(e,t,i){this.adSlot=e,this.params=t,this.playerRegistry=i,this.destroy$=new st}onEnter(){return A(this,void 0,void 0,(function*(){if(!Ta.isVideoEnabled(this.params))return this.playerRegistry.discard();ga.setupSlotVideoAdUnit(this.adSlot,this.params),this.playerRegistry.register(),this.playerRegistry.video$.pipe(Rt(1),kn((({player:e,params:t})=>this.adjustUI(e,t))),bt((({player:e})=>this.handleEvents(e))),fc(this.destroy$)).subscribe()}))}handleEvents(e){return Pt(gc(e,"adCanPlay").pipe(kn((()=>e.dom.getVideoContainer().classList.remove("hide")))),gc(e,"wikiaAdStarted").pipe(bt((()=>gc(e,"wikiaAdCompleted"))),(t=Vc.DEBOUNCE_TIME,void 0===i&&(i=wc),Xe((function(e,n){var s=null,o=null,r=null,a=function(){if(s){s.unsubscribe(),s=null;var e=o;o=null,n.next(e)}};function d(){var e=r+t,o=i.now();if(o<e)return s=this.schedule(void 0,e-o),void n.add(s);a()}e.subscribe(Je(n,(function(e){o=e,r=i.now(),s||(s=i.schedule(d,t),n.add(s))}),(function(){a(),n.complete()}),void 0,(function(){o=s=null})))}))),kn((()=>e.reload()))),Gt.action$.pipe(Ft(Gt.getGlobalAction(Ut.AD_ENGINE_SLOT_EVENT)),xt((e=>{var t;return e.event===ki.CUSTOM_EVENT&&e.adSlotName===this.adSlot.getSlotName()&&(null===(t=e.payload)||void 0===t?void 0:t.status)===Ta.SLOT_FORCE_UNSTICK})),kn((()=>e.stop()))));var t,i}adjustUI(e,t){(class{static add(e,t){const i=document.createElement("div"),n=document.createElement("div");i.classList.add("progress-bar"),n.classList.add("current-time"),i.appendChild(n),i.pause=()=>{n.style.width=n.offsetWidth/i.offsetWidth*100+"%"},i.reset=()=>{n.style.transitionDuration="",n.style.width="0"},i.rewind=()=>{const e=n.style.transitionDuration;i.reset(),Xi.forceRepaint(n),n.style.transitionDuration=e},i.start=()=>{const t=e.getRemainingTime();t?(t>0&&(n.style.transitionDuration=`${t}s`),Xi.forceRepaint(n),n.style.width="100%"):n.style.width="0"},e.addEventListener("wikiaAdPlay",i.start),e.addEventListener("wikiaAdCompleted",i.reset),e.addEventListener("wikiaAdRestart",i.rewind),e.addEventListener("wikiaAdPause",i.pause),t.appendChild(i)}}).add(e,e.dom.getInterfaceContainer()),new Zl("bottom-panel dynamic-panel",[oc,dc,rc]).add(e,e.dom.getInterfaceContainer(),t),class{static add(e,t,i){let n,s;const o=Ai.isSmartphone()||Ai.isTablet(),r=document.createElement("div"),a=t.querySelector(".dynamic-panel");function d(){s=window.setTimeout((()=>{r.classList.add("fading"),a.classList.add("fading")}),3e3),n=window.setTimeout((()=>{t.classList.remove("ui-visible")}),4e3)}function l(){clearTimeout(n),clearTimeout(s),r.classList.remove("fading"),a.classList.remove("fading")}r.classList.add("toggle-ui-overlay"),e.addEventListener("start",(()=>{t.classList.add("ui-visible"),l(),d()})),o?(r.addEventListener("click",(()=>{t.classList.toggle("ui-visible"),l(),e.isPlaying()&&d()})),e.addEventListener("resume",d),e.addEventListener("pause",l)):(t.addEventListener("mouseenter",(()=>{t.classList.add("ui-visible"),l()})),t.addEventListener("mouseleave",(()=>{d()})),r.addEventListener("click",(()=>{top.open(i.clickThroughURL,"_blank"),Gt.emit(Ut.AD_ENGINE_VIDEO_TOGGLE_UI_OVERLAY_CLICKED,{adSlotName:e.settings.getSlotName(),ad_status:"video-click"})}))),t.appendChild(r)}}.add(e,e.dom.getInterfaceContainer(),t),class{static add(e,t){e.addEventListener("wikiaAdStarted",(()=>{t.classList.remove("hide")})),e.addEventListener("wikiaAdCompleted",(()=>{t.classList.add("hide")}))}}.add(e,t.container.parentElement),class{static add(e,t,i){e.addEventListener("wikiaAdStarted",(()=>{i.thumbnail.classList.add("hidden-state")})),e.addEventListener("wikiaAdCompleted",(()=>{i.thumbnail.classList.remove("hidden-state")}))}}.add(e,void 0,t),class{static add(e,t,i){const n=document.createElement("div");n.classList.add("player-overlay"),n.classList.add("replay-overlay"),n.addEventListener("click",(()=>{!function(e,t,i){e.play(),e.getPlayCounter()>1&&t.emit(i,{adSlotName:e.settings.getSlotName(),ad_status:"replay-click"})}(e,Gt,Ut.AD_ENGINE_VIDEO_OVERLAY_CLICKED)})),i.autoPlay||cc(n,i),e.addEventListener("wikiaAdCompleted",(()=>{cc(n,i),lc(t)}));const s=function(e){const t=nc(sc.REPLAY,["replay-icon","overlay-icon"]);return e.appendChild(t),t}(n);if(!i.autoPlay){const t=function(e){const t=nc(sc.PLAY,["play-icon","overlay-icon"]);return e.appendChild(t),t}(n);s.style.display="none",e.addEventListener("start",(()=>{s.style.display="",t.style.display="none"}))}const o=e.params&&e.params.thumbnail?e.params.thumbnail:i.thumbnail;o.appendChild(n),lc(o),lc(t)}}.add(e,e.dom.getPlayerContainer(),t),class{static add(e,t,i){const n=document.createElement("div"),s=nc(sc.LEARN_MORE,["learn-more-icon","porvata-icon"]),o=document.createElement("div");o.innerText=io("learn-more"),n.appendChild(o),n.appendChild(s),n.classList.add("learn-more"),n.addEventListener("click",(()=>{top.open(i.clickThroughURL,"_blank"),Gt.emit(Ut.AD_ENGINE_VIDEO_LEARN_MORE_CLICKED,{adSlotName:e.settings.getSlotName(),ad_status:"learn-more-click"})})),t.appendChild(n)}}.add(e,e.dom.getPlayerContainer(),t)}onDestroy(){return A(this,void 0,void 0,(function*(){this.destroy$.next(),this.destroy$.complete(),this.playerRegistry.discard()}))}};function Fc(e,t){return Xe((function(i,n){var s=null,o=0,r=!1,a=function(){return r&&!s&&n.complete()};i.subscribe(Je(n,(function(i){null==s||s.unsubscribe();var r=0,d=o++;mt(e(i,d)).subscribe(s=Je(n,(function(e){return n.next(t?t(i,e,d,r++):e)}),(function(){s=null,a()})))}),(function(){r=!0,a()})))}))}var Gc;$c.DEBOUNCE_TIME=10,$c=Vc=E([h({autobind:!1}),I(0,g(zl.SLOT)),I(1,g(zl.PARAMS)),T("design:paramtypes",["function"==typeof(Mc=void 0!==xn&&xn)?Mc:Object,"function"==typeof(Uc=void 0!==i.UapParams&&i.UapParams)?Uc:Object,"function"==typeof(Bc=void 0!==jc&&jc)?Bc:Object])],$c);let Hc=class{constructor(e){this.playerRegistry=e,this.destroy$=new st}onEnter(e){return A(this,void 0,void 0,(function*(){this.playerRegistry.video$.pipe(Rt(1),xt((({params:e})=>!e.autoPlay)),Fc((({player:e})=>gc(e,"wikiaAdStarted").pipe(Rt(1)))),kn((()=>e("impact",{allowMulticast:!0}))),fc(this.destroy$)).subscribe()}))}onDestroy(){return A(this,void 0,void 0,(function*(){this.destroy$.next(),this.destroy$.complete()}))}};var Wc;Hc=E([h({autobind:!1}),T("design:paramtypes",["function"==typeof(Gc=void 0!==jc&&jc)?Gc:Object])],Hc);let qc=class{constructor(e){this.playerRegistry=e,this.destroy$=new st}onEnter(e){return A(this,void 0,void 0,(function*(){this.playerRegistry.video$.pipe(Rt(1),Fc((({player:e})=>gc(e,"wikiaAdStarted").pipe(jt(1)))),kn((()=>e("impact",{allowMulticast:!0}))),fc(this.destroy$)).subscribe()}))}onDestroy(){return A(this,void 0,void 0,(function*(){this.destroy$.next(),this.destroy$.complete()}))}};qc=E([h({autobind:!1}),T("design:paramtypes",["function"==typeof(Wc=void 0!==jc&&jc)?Wc:Object])],qc);class Kc{constructor(e={}){this.props=e}render(){return document.createDocumentFragment()}getClassNames(){return this.props.classNames||[]}}class Yc extends Kc{render(){const e=document.createElement("div");return e.innerText=io("advertisement"),e.className="advertisement-label",e}}var Xc;let Jc=class{constructor(e){this.adSlot=e}onEnter(){return A(this,void 0,void 0,(function*(){const e=this.adSlot.getElement();if(e.querySelector(".advertisement-label"))return;const t=new Yc;e.appendChild(t.render())}))}};Jc=E([h({autobind:!1}),I(0,g(zl.SLOT)),T("design:paramtypes",["function"==typeof(Xc=void 0!==xn&&xn)?Xc:Object])],Jc);let Qc=class{constructor(e){this.name=e}onEnter(e){return A(this,void 0,void 0,(function*(){window.ads.transitions=window.ads.transitions||{},window.ads.transitions[this.name]=t=>e(t,{allowMulticast:!0})}))}onDestroy(){return A(this,void 0,void 0,(function*(){delete window.ads.transitions[this.name]}))}};Qc=E([h({autobind:!1}),I(0,g(zl.NAME)),T("design:paramtypes",[String])],Qc);var Zc={schedule:function(e){var t=requestAnimationFrame,i=cancelAnimationFrame,n=Zc.delegate;n&&(t=n.requestAnimationFrame,i=n.cancelAnimationFrame);var s=t((function(t){i=void 0,e(t)}));return new _e((function(){return null==i?void 0:i(s)}))},requestAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Zc.delegate;return((null==i?void 0:i.requestAnimationFrame)||requestAnimationFrame).apply(void 0,P([],N(e)))},cancelAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=Zc.delegate;return((null==i?void 0:i.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,P([],N(e)))},delegate:void 0},eu=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.scheduler=t,n.work=i,n}return w(t,e),t.prototype.requestAsyncId=function(t,i,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,i,n):(t.actions.push(this),t._scheduled||(t._scheduled=Zc.requestAnimationFrame((function(){return t.flush(void 0)}))))},t.prototype.recycleAsyncId=function(t,i,n){var s;if(void 0===n&&(n=0),null!=n?n>0:this.delay>0)return e.prototype.recycleAsyncId.call(this,t,i,n);var o=t.actions;null!=i&&(null===(s=o[o.length-1])||void 0===s?void 0:s.id)!==i&&(Zc.cancelAnimationFrame(i),t._scheduled=void 0)},t}(yc),tu=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return w(t,e),t.prototype.flush=function(e){this._active=!0;var t=this._scheduled;this._scheduled=void 0;var i,n=this.actions;e=e||n.shift();do{if(i=e.execute(e.state,e.delay))break}while((e=n[0])&&e.id===t&&n.shift());if(this._active=!1,i){for(;(e=n[0])&&e.id===t&&n.shift();)e.unsubscribe();throw i}},t}(Sc))(eu);let iu=class{constructor(){this.scroll$=this.createSource(document,"scroll"),this.resize$=this.createSource(window,"resize")}createSource(e,t){return gc(e,t).pipe(At(tu),ld(),od())}};iu=E([h()],iu);const nu=Symbol("navbar"),su=Symbol("page"),ou=Symbol("footer");var ru;let au=class{constructor(e){this.element=e,this.stylesBackup={}}setProperty(e,t){return this.saveProperty(e),this.element.style[e]=t,this}saveProperty(e){void 0===this.stylesBackup[e]&&(this.stylesBackup[e]=this.element.style[e])}addClass(...e){return this.saveClasses(),this.element.classList.add(...e),this}removeClass(...e){return this.saveClasses(),this.element.classList.remove(...e),this}saveClasses(){this.classesBackup||(this.classesBackup=this.element.classList.value)}restore(){for(const[e,t]of Object.entries(this.stylesBackup))this.element.style[e]=t;this.classesBackup&&(this.element.classList.value=this.classesBackup),this.stylesBackup={},this.classesBackup=void 0}};au=E([h({autobind:!1}),T("design:paramtypes",["function"==typeof(ru="undefined"!=typeof HTMLElement&&HTMLElement)?ru:Object])],au);let du=class{constructor(){this.elements=new Map}element(e){return this.elements.has(e)||this.elements.set(e,new au(e)),this.elements.get(e)}restore(){this.elements.forEach((e=>e.restore())),this.elements.clear()}};var lu,cu,uu;du=E([h({autobind:!1})],du);let pu=class{constructor(e,t,i){this.params=e,this.adSlot=t,this.navbar=i}getPageOffsetImpact(){return this.getSlotHeightImpact()+(Z.get("templates.ignoreNavbarHeight")?0:this.navbar.offsetHeight)}getPageOffsetResolved(){return this.getSlotHeightResolved()+(Z.get("templates.ignoreNavbarHeight")?0:this.navbar.offsetHeight)}getNavbarOffsetImpactToResolved(){return this.getSlotHeightImpactToResolved()}getNavbarOffsetResolvedToNone(){const e=this.getNavbarOffsetResolved()-window.scrollY;return e<=0?0:e}getNavbarOffsetResolved(){return this.getSlotHeightResolved()}getSlotOffsetResolvedToNone(){return this.getNavbarOffsetResolvedToNone()-this.getSlotHeightResolved()}getSlotHeightImpactToResolved(){const e=this.getSlotHeightResolved(),t=this.getSlotHeightImpact();return t-(t-e)*this.getProgressImpactToResolved()}getProgressImpactToResolved(){const e=this.getSlotHeightResolved(),t=this.getSlotHeightImpact(),i=window.scrollY/(t-e);return i>=1?1:i}getSlotHeightImpact(){var e,t,i;return void 0===(null===(i=null===(t=null===(e=this.params)||void 0===e?void 0:e.config)||void 0===t?void 0:t.aspectRatio)||void 0===i?void 0:i.default)?this.adSlot.element.offsetHeight:this.calculateSlotHeight(this.params.config.aspectRatio.default)}getSlotHeightResolved(){var e,t,i;return void 0===(null===(i=null===(t=null===(e=this.params)||void 0===e?void 0:e.config)||void 0===t?void 0:t.aspectRatio)||void 0===i?void 0:i.resolved)?this.adSlot.element.offsetHeight:this.calculateSlotHeight(this.params.config.aspectRatio.resolved)}calculateSlotHeight(e){return 1/e*this.adSlot.element.offsetWidth}getSlotHeightClipping(){const e=window.scrollY;return!e||e<=0?"unset":e>=this.adSlot.element.offsetHeight?"rect(0, 0, 0, 0)":`rect(0 ${this.adSlot.element.offsetWidth}px ${this.adSlot.element.offsetHeight-e}px 0)`}};var hu,gu,mu,fu,vu;pu=E([h({autobind:!1}),I(0,g(zl.PARAMS)),I(1,g(zl.SLOT)),I(2,g(nu)),T("design:paramtypes",["function"==typeof(lu=void 0!==i.UapParams&&i.UapParams)?lu:Object,"function"==typeof(cu=void 0!==xn&&xn)?cu:Object,"function"==typeof(uu="undefined"!=typeof HTMLElement&&HTMLElement)?uu:Object])],pu);let bu=class{constructor(e,t,i,n,s){this.params=e,this.adSlot=t,this.page=i,this.manipulator=n,this.reader=s}addClassToPage(e){this.manipulator.element(this.page).addClass(e)}setPageOffsetImpact(){this.setPageOffset(this.reader.getPageOffsetImpact())}setPageOffset(e){this.manipulator.element(this.page).setProperty("marginTop",`${e}px`)}setSlotOffsetResolvedToNone(){this.setSlotOffset(this.reader.getSlotOffsetResolvedToNone())}setSlotOffset(e){this.manipulator.element(this.adSlot.getElement()).setProperty("top",`${e}px`)}setSlotHeightImpactToResolved(){this.setSlotHeight(`${this.reader.getSlotHeightImpactToResolved()}px`)}setSlotHeightResolved(){this.setSlotHeight(`${this.reader.getSlotHeightResolved()}px`)}setSlotHeightImpact(){this.setSlotHeight(`${this.reader.getSlotHeightImpact()}px`)}setSlotHeight(e){this.manipulator.element(this.adSlot.getElement()).setProperty("height",e)}setSlotHeightClipping(){this.manipulator.element(this.adSlot.getElement()).setProperty("clip",this.reader.getSlotHeightClipping())}setPlaceholderHeightResolved(){this.setPlaceholderHeight(`${this.reader.getSlotHeightResolved()}px`)}setPlaceholderHeightImpact(){this.setPlaceholderHeight(`${this.reader.getSlotHeightImpact()}px`)}setPlaceholderHeight(e){let t=this.adSlot.getElement().parentElement;t.classList.contains("ad-slot-placeholder")&&(t=t.parentElement),this.manipulator.element(t).setProperty("height",e),Gt.emit(Ut.AD_ENGINE_UAP_DOM_CHANGED,{element:"placeholder",size:e})}setResolvedImage(){this.params.image2&&this.params.image2.background?(this.manipulator.element(this.params.image1.element).addClass("hidden-state"),this.manipulator.element(this.params.image2.element).removeClass("hidden-state")):this.params.image1&&this.manipulator.element(this.params.image1.element).removeClass("hidden-state")}setImpactImage(){this.params.image1&&this.manipulator.element(this.params.image1.element).removeClass("hidden-state")}};var yu,_u;bu=E([h({autobind:!1}),I(0,g(zl.PARAMS)),I(1,g(zl.SLOT)),I(2,g(su)),T("design:paramtypes",["function"==typeof(hu=void 0!==i.UapParams&&i.UapParams)?hu:Object,"function"==typeof(gu=void 0!==xn&&xn)?gu:Object,"function"==typeof(mu="undefined"!=typeof HTMLElement&&HTMLElement)?mu:Object,"function"==typeof(fu=void 0!==du&&du)?fu:Object,"function"==typeof(vu=void 0!==pu&&pu)?vu:Object])],bu);let Su=class{constructor(e,t){this.domListener=e,this.manager=t,this.unsubscribe$=new st}onEnter(){return A(this,void 0,void 0,(function*(){this.manager.setResolvedImage(),this.domListener.resize$.pipe(td({}),kn((()=>{this.manager.setSlotHeightResolved(),this.manager.setPlaceholderHeightResolved()})),fc(this.unsubscribe$)).subscribe()}))}onLeave(){return A(this,void 0,void 0,(function*(){this.unsubscribe$.next()}))}};var wu,Eu,Iu;Su=E([h({autobind:!1}),T("design:paramtypes",["function"==typeof(yu=void 0!==iu&&iu)?yu:Object,"function"==typeof(_u=void 0!==bu&&bu)?_u:Object])],Su);let Tu=wu=class{static provide(e){return{bind:wu,provider:t=>new wu(t.get(zl.SLOT),t.get(zl.PARAMS),e)}}constructor(e,t,i){this.adSlot=e,this.fallbackTimeout=i}isViewedAndDelayed(){return Pt(sd(!1),Nt(this.adSlot.loaded.then((()=>ln(this.fallbackTimeout)))).pipe(Ze((()=>!0))))}};var Au,Cu,Ou;Tu=wu=E([h({autobind:!1}),I(0,g(zl.SLOT)),I(1,g(zl.PARAMS)),T("design:paramtypes",["function"==typeof(Eu=void 0!==xn&&xn)?Eu:Object,"function"==typeof(Iu=void 0!==i.UapParams&&i.UapParams)?Iu:Object,Number])],Tu);let Nu=class{constructor(e,t,i){this.adSlot=e,this.domListener=t,this.timeout=i,this.unsubscribe$=new st}onEnter(e){return A(this,void 0,void 0,(function*(){this.adSlot.emitEvent(Ta.SLOT_STICKED_STATE),this.timeout.isViewedAndDelayed().pipe(xt((e=>e)),Fc((()=>this.domListener.scroll$.pipe(Rt(1)))),kn((()=>{this.adSlot.emitEvent(Ta.SLOT_UNSTICKED_STATE),e("transition")})),fc(this.unsubscribe$)).subscribe()}))}onLeave(){return A(this,void 0,void 0,(function*(){this.unsubscribe$.next()}))}};Nu=E([h({autobind:!1}),I(0,g(zl.SLOT)),T("design:paramtypes",["function"==typeof(Au=void 0!==xn&&xn)?Au:Object,"function"==typeof(Cu=void 0!==iu&&iu)?Cu:Object,"function"==typeof(Ou=void 0!==Tu&&Tu)?Ou:Object])],Nu);class Pu extends Kc{render(){const e=document.createElement("button");return this.getClassNames().forEach((t=>e.classList.add(t))),e.addEventListener("click",(e=>this.onClick(e))),e}getClassNames(){return["button-control",...super.getClassNames()]}onClick(e){const{onClick:t}=this.props;"function"==typeof t&&t(e)}}class ku extends Kc{render(){const{onClick:e}=this.props,t=new Pu({onClick:e,classNames:this.getClassNames()}).render(),i=nc(sc.CROSS,["icon"]);return t.appendChild(i),t}getClassNames(){return["button-close",...super.getClassNames()]}}var Du,Lu;let zu=class{constructor(e,t){this.adSlot=e,this.domListener=t}appendOnViewed(e){return Nt(this.adSlot.viewed).pipe(td({}),Rt(1),kn((()=>this.adSlot.getElement().appendChild(e))))}appendOnScroll(e){return this.domListener.scroll$.pipe(td({}),xt((()=>window.scrollY>0)),Rt(1),kn((()=>this.adSlot.getElement().appendChild(e))))}};var xu,Ru;zu=E([h({autobind:!1}),I(0,g(zl.SLOT)),T("design:paramtypes",["function"==typeof(Du=void 0!==xn&&xn)?Du:Object,"function"==typeof(Lu=void 0!==iu&&iu)?Lu:Object])],zu);let ju=class{constructor(e,t){this.adSlot=e,this.helper=t,this.unsubscribe$=new st}onEnter(e){return A(this,void 0,void 0,(function*(){this.button=new ku({onClick:()=>{this.adSlot.emitEvent(Ta.SLOT_FORCE_UNSTICK),e("transition")}}).render(),this.helper.appendOnScroll(this.button).pipe(fc(this.unsubscribe$)).subscribe()}))}onLeave(){return A(this,void 0,void 0,(function*(){this.unsubscribe$.next(),this.button.remove()}))}};function Vu(...e){return function(...e){return t=>t.pipe(Fc((t=>Pt(...e).pipe(Ze((()=>t))))))}(...e,sd({}))}var Mu,Uu;ju=E([h({autobind:!1}),I(0,g(zl.SLOT)),T("design:paramtypes",["function"==typeof(xu=void 0!==xn&&xn)?xu:Object,"function"==typeof(Ru=void 0!==zu&&zu)?Ru:Object])],ju);let Bu=class{constructor(e,t){this.params=e,this.reader=t}getVideoSizeImpact(){return this.calculateVideoSize(this.reader.getSlotHeightImpact(),0)}getVideoSizeResolved(){return this.calculateVideoSize(this.reader.getSlotHeightResolved(),1)}getVideoSizeImpactToResolved(){return this.calculateVideoSize(this.reader.getSlotHeightImpactToResolved(),this.reader.getProgressImpactToResolved())}calculateVideoSize(e,t){if(!this.params.config)return;const{height:i,width:n}=this.getSize(e,t);return{top:this.getPercentage(t,this.params.config.state.top),right:this.getPercentage(t,this.params.config.state.right),bottom:this.getPercentage(t,this.params.config.state.bottom),height:Math.ceil(i),width:Math.ceil(n)}}getSize(e,t){if(!this.params.config)return;const i=e*(this.getPercentage(t,this.params.config.state.height)/100);return{height:i,width:i*(16/9)}}getPercentage(e,t){if(!t)return;const{default:i,resolved:n}=t;return i-(i-n)*e}};var $u,Fu,Gu;Bu=E([h({autobind:!1}),I(0,g(zl.PARAMS)),T("design:paramtypes",["function"==typeof(Mu=void 0!==i.UapParams&&i.UapParams)?Mu:Object,"function"==typeof(Uu=void 0!==pu&&pu)?Uu:Object])],Bu);let Hu=class{constructor(e,t,i){this.manipulator=e,this.reader=t,this.params=i}setVideoSizeResolved(e){if(!e.isFullscreen())return this.setVideoSize(e,this.reader.getVideoSizeResolved())}setVideoSizeImpact(e){if(!e.isFullscreen())return this.setVideoSize(e,this.reader.getVideoSizeImpact())}setVideoSizeImpactToResolved(e){if(!e.isFullscreen())return this.setVideoSize(e,this.reader.getVideoSizeImpactToResolved())}setVideoSize(e,t){e.resize(t.width,t.height);const i=e.dom.getPlayerContainer().parentElement,n=this.params.thumbnail;this.setProperties(i,t),this.setProperties(n,t)}setProperties(e,{width:t,height:i,top:n,right:s,bottom:o}){this.manipulator.element(e).setProperty("width",`${t}px`),this.manipulator.element(e).setProperty("height",`${i}px`),"number"==typeof n&&this.manipulator.element(e).setProperty("top",`${n}%`),"number"==typeof s&&this.manipulator.element(e).setProperty("right",`${s}%`),"number"==typeof o&&this.manipulator.element(e).setProperty("bottom",`${o}%`)}};var Wu,qu,Ku;Hu=E([h({autobind:!1}),I(2,g(zl.PARAMS)),T("design:paramtypes",["function"==typeof($u=void 0!==du&&du)?$u:Object,"function"==typeof(Fu=void 0!==Bu&&Bu)?Fu:Object,"function"==typeof(Gu=void 0!==i.UapParams&&i.UapParams)?Gu:Object])],Hu);let Yu=class{constructor(e,t,i){this.playerRegistry=e,this.domListener=t,this.manager=i,this.unsubscribe$=new st}onEnter(){return A(this,void 0,void 0,(function*(){this.playerRegistry.video$.pipe(Vu(this.domListener.resize$),kn((({player:e})=>this.manager.setVideoSizeResolved(e))),fc(this.unsubscribe$)).subscribe()}))}onLeave(){return A(this,void 0,void 0,(function*(){this.unsubscribe$.next()}))}};var Xu;Yu=E([h({autobind:!1}),T("design:paramtypes",["function"==typeof(Wu=void 0!==jc&&jc)?Wu:Object,"function"==typeof(qu=void 0!==iu&&iu)?qu:Object,"function"==typeof(Ku=void 0!==Hu&&Hu)?Ku:Object])],Yu);let Ju=class{constructor(e){this.manipulator=e}onEnter(){return A(this,void 0,void 0,(function*(){}))}onLeave(){return A(this,void 0,void 0,(function*(){this.manipulator.restore()}))}};var Qu;Ju=E([h({autobind:!1}),T("design:paramtypes",["function"==typeof(Xu=void 0!==du&&du)?Xu:Object])],Ju);let Zu=class{constructor(e){this.footer=e}useScrollCorrection(){const e=window.scrollY;return()=>window.scrollBy(0,e-window.scrollY)}usePositionCorrection(e=this.footer){const t=e.getBoundingClientRect().top;return()=>window.scrollBy(0,e.getBoundingClientRect().top-t)}};var ep,tp,ip,np;Zu=E([h({autobind:!1}),I(0,g(ou)),T("design:paramtypes",["function"==typeof(Qu="undefined"!=typeof HTMLElement&&HTMLElement)?Qu:Object])],Zu);let sp=class{constructor(e,t,i,n){this.adSlot=e,this.scrollCorrector=t,this.manipulator=i,this.reader=n,this.unsubscribe$=new st}onEnter(e){return A(this,void 0,void 0,(function*(){this.animate().pipe(kn((()=>{const t=this.scrollCorrector.useScrollCorrection();this.adSlot.removeClass("uap-toc-pusher"),e("resolved").then(t)})),fc(this.unsubscribe$)).subscribe()}))}animate(){const e=Ta.SLIDE_OUT_TIME;return this.manipulator.element(this.adSlot.getElement()).setProperty("transition",`top ${e}ms ${Ta.CSS_TIMING_EASE_IN_CUBIC}`).setProperty("top",`${this.reader.getSlotOffsetResolvedToNone()}px`),Nt(ln(e))}onLeave(){return A(this,void 0,void 0,(function*(){this.unsubscribe$.next()}))}};var op,rp;sp=E([h({autobind:!1}),I(0,g(zl.SLOT)),T("design:paramtypes",["function"==typeof(ep=void 0!==xn&&xn)?ep:Object,"function"==typeof(tp=void 0!==Zu&&Zu)?tp:Object,"function"==typeof(ip=void 0!==du&&du)?ip:Object,"function"==typeof(np=void 0!==pu&&pu)?np:Object])],sp);let ap=class{constructor(e,t){this.domListener=e,this.manager=t,this.unsubscribe$=new st}onEnter(){return A(this,void 0,void 0,(function*(){Pt(this.domListener.resize$,this.domListener.scroll$).pipe(td({}),kn((()=>this.manager.setSlotHeightClipping())),fc(this.unsubscribe$)).subscribe()}))}onLeave(){return A(this,void 0,void 0,(function*(){this.unsubscribe$.next()}))}};var dp,lp,cp;ap=E([h({autobind:!1}),T("design:paramtypes",["function"==typeof(op=void 0!==iu&&iu)?op:Object,"function"==typeof(rp=void 0!==bu&&bu)?rp:Object])],ap);let up=class{constructor(e,t,i){this.params=e,this.domListener=t,this.manager=i,this.unsubscribe$=new st}onEnter(){return A(this,void 0,void 0,(function*(){Z.get("state.isMobile")&&this.params.thumbnail?this.setImpactSizeOnScroll():this.manager.setImpactImage(),this.domListener.resize$.pipe(td({}),kn((()=>{this.manager.setSlotHeightImpact(),this.manager.setPlaceholderHeightImpact()})),fc(this.unsubscribe$)).subscribe()}))}onLeave(){return A(this,void 0,void 0,(function*(){this.unsubscribe$.next()}))}setImpactSizeOnScroll(){this.domListener.scroll$.pipe(Ba((()=>{this.manager.setImpactImage()})),fc(this.unsubscribe$)).subscribe()}};var pp,hp;up=E([h({autobind:!1}),I(0,g(zl.PARAMS)),T("design:paramtypes",["function"==typeof(dp=void 0!==i.UapParams&&i.UapParams)?dp:Object,"function"==typeof(lp=void 0!==iu&&iu)?lp:Object,"function"==typeof(cp=void 0!==bu&&bu)?cp:Object])],up);let gp=class{constructor(e,t){this.domListener=e,this.manager=t,this.unsubscribe$=new st}onEnter(){return A(this,void 0,void 0,(function*(){Pt(this.domListener.resize$,this.domListener.scroll$).pipe(td({}),kn((()=>this.manager.setSlotHeightImpactToResolved())),fc(this.unsubscribe$)).subscribe()}))}onLeave(){return A(this,void 0,void 0,(function*(){this.unsubscribe$.next()}))}};var mp,fp,vp,bp,yp;gp=E([h({autobind:!1}),T("design:paramtypes",["function"==typeof(pp=void 0!==iu&&iu)?pp:Object,"function"==typeof(hp=void 0!==bu&&bu)?hp:Object])],gp);let _p=class{constructor(e,t,i,n,s){this.adSlot=e,this.domListener=t,this.scrollCorrector=i,this.reader=n,this.timeout=s,this.unsubscribe$=new st}onEnter(e){return A(this,void 0,void 0,(function*(){this.domListener.scroll$.pipe(td({}),Fa(this.timeout.isViewedAndDelayed()),xt((()=>this.reachedResolvedSize())),kn((([,t])=>{const i=this.scrollCorrector.usePositionCorrection();t?(this.adSlot.emitEvent(Ta.SLOT_STICKY_STATE_SKIPPED),e("transition").then(i)):e("sticky").then(i)})),fc(this.unsubscribe$)).subscribe()}))}reachedResolvedSize(){return 1===this.reader.getProgressImpactToResolved()}onLeave(){return A(this,void 0,void 0,(function*(){this.unsubscribe$.next()}))}};var Sp,wp,Ep;_p=E([h({autobind:!1}),I(0,g(zl.SLOT)),T("design:paramtypes",["function"==typeof(mp=void 0!==xn&&xn)?mp:Object,"function"==typeof(fp=void 0!==iu&&iu)?fp:Object,"function"==typeof(vp=void 0!==Zu&&Zu)?vp:Object,"function"==typeof(bp=void 0!==pu&&pu)?bp:Object,"function"==typeof(yp=void 0!==Tu&&Tu)?yp:Object])],_p);let Ip=class{constructor(e,t,i){this.playerRegistry=e,this.domListener=t,this.manager=i,this.unsubscribe$=new st}onEnter(){return A(this,void 0,void 0,(function*(){this.playerRegistry.video$.pipe(Vu(this.domListener.scroll$,this.domListener.resize$),kn((({player:e})=>this.manager.setVideoSizeImpactToResolved(e))),fc(this.unsubscribe$)).subscribe()}))}onLeave(){return A(this,void 0,void 0,(function*(){this.unsubscribe$.next()}))}};var Tp,Ap;Ip=E([h({autobind:!1}),T("design:paramtypes",["function"==typeof(Sp=void 0!==jc&&jc)?Sp:Object,"function"==typeof(wp=void 0!==iu&&iu)?wp:Object,"function"==typeof(Ep=void 0!==Hu&&Hu)?Ep:Object])],Ip);let Cp=class{constructor(e,t){this.adSlot=e,this.playerRegistry=t,this.unsubscribe$=new st}onEnter(e){return A(this,void 0,void 0,(function*(){this.playerRegistry.video$.pipe(Fc((({player:e})=>gc(e,"wikiaAdCompleted"))),kn((()=>{this.adSlot.emitEvent(Ta.SLOT_VIDEO_DONE),e("resolved")})),fc(this.unsubscribe$)).subscribe()}))}onLeave(){return A(this,void 0,void 0,(function*(){this.unsubscribe$.next()}))}};var Op,Np;Cp=E([h({autobind:!1}),I(0,g(zl.SLOT)),T("design:paramtypes",["function"==typeof(Tp=void 0!==xn&&xn)?Tp:Object,"function"==typeof(Ap=void 0!==jc&&jc)?Ap:Object])],Cp);let Pp=class{constructor(e,t){this.playerRegistry=e,this.manipulator=t,this.unsubscribe$=new st}onEnter(){return A(this,void 0,void 0,(function*(){this.playerRegistry.video$.pipe(Rt(1),kn((({player:e})=>this.setLearnMoreBlockDisplay(e))),fc(this.unsubscribe$)).subscribe()}))}setLearnMoreBlockDisplay(e){const t=e.settings.getPlayerContainer().querySelector(".learn-more");this.manipulator.element(t).addClass("show-learn-more")}onLeave(){return A(this,void 0,void 0,(function*(){this.unsubscribe$.next()}))}};var kp;Pp=E([h({autobind:!1}),T("design:paramtypes",["function"==typeof(Op=void 0!==jc&&jc)?Op:Object,"function"==typeof(Np=void 0!==du&&du)?Np:Object])],Pp);let Dp=class{constructor(e){this.params=e}onEnter(){return A(this,void 0,void 0,(function*(){this.params.newTakeoverConfig&&Gt.emit(Ut.AD_ENGINE_UAP_NTC_LOADED),Ta.init(this.params,Object.keys(Z.get("slots")),[])}))}};Dp=E([h({autobind:!1}),I(0,g(zl.PARAMS)),T("design:paramtypes",["function"==typeof(kp=void 0!==i.UapParams&&i.UapParams)?kp:Object])],Dp);var Lp,zp,xp=new qe(ke);function Rp(e,t,i){void 0===e&&(e=0),void 0===i&&(i=Ec);var n=-1;return null!=t&&(St(t)?i=t:n=t),new qe((function(t){var s,o=(s=e)instanceof Date&&!isNaN(s)?+e-i.now():e;o<0&&(o=0);var r=0;return i.schedule((function(){t.closed||(t.next(r++),0<=n?this.schedule(void 0,n):t.complete())}),o)}))}let jp=class{constructor(e,t){this.adSlot=e,this.unsubscribe$=new st,this.additionalHideTime=t.get("icFloorAdhesionDelay"),this.timeoutHideTime=t.get("icFloorAdhesionTimeout")}onEnter(e){return A(this,void 0,void 0,(function*(){Pt(this.getViewabilityStream(),this.getTimeoutStream()).pipe(Rt(1),kn((()=>e("transition"))),fc(this.unsubscribe$)).subscribe()}))}getViewabilityStream(){return-1===this.additionalHideTime?xp:Nt(this.adSlot.viewed).pipe(bt((()=>Rp(this.additionalHideTime))))}getTimeoutStream(){return this.timeoutHideTime?Rp(this.timeoutHideTime):_t}onLeave(){return A(this,void 0,void 0,(function*(){this.unsubscribe$.next()}))}};var Vp;jp=E([h({autobind:!1}),I(0,g(zl.SLOT)),T("design:paramtypes",["function"==typeof(Lp=void 0!==xn&&xn)?Lp:Object,"function"==typeof(zp=void 0!==Ci&&Ci)?zp:Object])],jp);let Mp=class{constructor(e){this.adSlot=e}onEnter(e){return A(this,void 0,void 0,(function*(){this.button=new ku({onClick:()=>{this.adSlot.emitEvent(Yi.SLOT_CLOSE_IMMEDIATELY),e("hidden")}}).render(),setTimeout((()=>{this.adSlot.getElement().appendChild(this.button)}),0)}))}onLeave(){return A(this,void 0,void 0,(function*(){this.button.remove()}))}};var Up,Bp;Mp=E([h({autobind:!1}),I(0,g(zl.SLOT)),T("design:paramtypes",["function"==typeof(Vp=void 0!==xn&&xn)?Vp:Object])],Mp);let $p=class{constructor(e,t){this.adSlot=e,this.manipulator=t,this.unsubscribe$=new st}onEnter(e){return A(this,void 0,void 0,(function*(){this.animate().pipe(kn((()=>{e("hidden")})),fc(this.unsubscribe$)).subscribe()}))}animate(){const e=this.adSlot.getElement().offsetHeight;return this.manipulator.element(this.adSlot.getElement()).setProperty("transition",`bottom 600ms ${Ta.CSS_TIMING_EASE_IN_CUBIC}, opacity 400ms ${Ta.CSS_TIMING_EASE_IN_CUBIC}`).setProperty("opacity","0").setProperty("bottom",`-${e}px`),Rp(1e3)}onLeave(){return A(this,void 0,void 0,(function*(){this.unsubscribe$.next()}))}};var Fp,Gp;$p=E([h({autobind:!1}),I(0,g(zl.SLOT)),T("design:paramtypes",["function"==typeof(Up=void 0!==xn&&xn)?Up:Object,"function"==typeof(Bp=void 0!==du&&du)?Bp:Object])],$p);let Hp=class{constructor(e,t){this.adSlot=e,this.manipulator=t}onEnter(){return A(this,void 0,void 0,(function*(){this.manipulator.element(this.adSlot.element).addClass(xn.HIDDEN_CLASS),document.body.classList.remove("has-sticky-tlb"),this.adSlot.emitEvent(ki.HIDDEN_EVENT)}))}};var Wp;Hp=E([h({autobind:!1}),I(0,g(zl.SLOT)),T("design:paramtypes",["function"==typeof(Fp=void 0!==xn&&xn)?Fp:Object,"function"==typeof(Gp=void 0!==du&&du)?Gp:Object])],Hp);let qp=class{constructor(e){this.adSlot=e}onEnter(e){return A(this,void 0,void 0,(function*(){this.adSlot.setConfigProperty("showManually",!0),this.adSlot.addClass(xn.HIDDEN_CLASS),this.adSlot.addClass("floor-adhesion"),this.adSlot.addClass("out-of-page-template"),this.adSlot.isOutOfPage()&&(yield Xi.adjustIframeByContentSize(this.adSlot)),e("display")}))}onLeave(){return A(this,void 0,void 0,(function*(){this.adSlot.show()}))}};var Kp,Yp;qp=E([h({autobind:!1}),I(0,g(zl.SLOT)),T("design:paramtypes",["function"==typeof(Wp=void 0!==xn&&xn)?Wp:Object])],qp);let Xp=Kp=class{constructor(e){this.adSlot=e}onEnter(e){return A(this,void 0,void 0,(function*(){(yield this.isUAP())?this.blockStickyTLB("UAP"):this.isStickyTlbForced()||this.isLineAndGeo()||this.isOrderAndGeo()?xd.isBlocking()?this.blockStickyTLB("AdBlock"):e("initial"):this.blockStickyTLB(`Line item ID ${this.adSlot.lineItemId}`)}))}blockStickyTLB(e){this.adSlot.emitEvent(Ta.SLOT_STICKINESS_DISABLED),this.logger(`Template 'stickyTlb' could not be applied for ${e}`)}isLineAndGeo(){const e=Z.get("templates.stickyTlb.lineItemIds")||[];return this.checkIdsMapBySlotGamId(this.adSlot.lineItemId.toString(),e)}isOrderAndGeo(){const e=Z.get("templates.stickyTlb.ordersIds")||[];return this.checkIdsMapBySlotGamId(this.adSlot.orderId.toString(),e)}checkIdsMapBySlotGamId(e,t){return!!Array.isArray(t)&&t.map((e=>e.toString())).some((t=>{const[i,n]=t.split(":",2);return i.toString()===e&&(!n||Xt.isProperGeo([n]))}))}isUAP(){return A(this,void 0,void 0,(function*(){return new Promise((e=>{Gt.on(Ut.AD_ENGINE_UAP_LOAD_STATUS,(t=>{e(t.isLoaded)}))}))}))}isStickyTlbForced(){return Z.get("templates.stickyTlb.forced")}logger(...e){q(Kp.LOG_GROUP,...e)}};var Jp;Xp.LOG_GROUP="sticky-tlb",Xp=Kp=E([h({autobind:!1}),I(0,g(zl.SLOT)),T("design:paramtypes",["function"==typeof(Yp=void 0!==xn&&xn)?Yp:Object])],Xp);let Qp=class{constructor(e){this.adSlot=e}onEnter(e){return A(this,void 0,void 0,(function*(){yield Xi.onReady(this.adSlot),yield this.awaitVisibleDOM(),e("sticky")}))}awaitVisibleDOM(){return A(this,void 0,void 0,(function*(){document.hidden&&(yield un(window,"visibilitychange"))}))}};var Zp;Qp=E([h({autobind:!1}),I(0,g(zl.SLOT)),T("design:paramtypes",["function"==typeof(Jp=void 0!==xn&&xn)?Jp:Object])],Qp);let eh=class{constructor(e){this.adSlot=e}onEnter(){return A(this,void 0,void 0,(function*(){this.adSlot.setConfigProperty("showManually",!0),this.adSlot.addClass("expanded-slot"),this.adSlot.addClass("sticky-tlb"),this.adSlot.setConfigProperty("useGptOnloadEvent",!0),this.adSlot.loaded.then((()=>{this.adSlot.emitEvent(Ta.SLOT_STICKY_READY_STATE)}))}))}onLeave(){return A(this,void 0,void 0,(function*(){this.adSlot.show(),document.body.classList.add("has-uap"),document.body.classList.add("has-sticky-tlb")}))}onDestroy(){return A(this,void 0,void 0,(function*(){document.body.classList.remove("has-uap"),document.body.classList.remove("has-sticky-tlb")}))}};var th,ih;eh=E([h({autobind:!1}),I(0,g(zl.SLOT)),T("design:paramtypes",["function"==typeof(Zp=void 0!==xn&&xn)?Zp:Object])],eh);let nh=class{constructor(e,t){this.adSlot=e,this.helper=t,this.unsubscribe$=new st}onEnter(e){return A(this,void 0,void 0,(function*(){this.button=new ku({onClick:()=>{this.adSlot.emitEvent(Ta.SLOT_FORCE_UNSTICK),e("hidden")}}).render(),this.helper.appendOnScroll(this.button).pipe(fc(this.unsubscribe$)).subscribe()}))}onLeave(){return A(this,void 0,void 0,(function*(){this.unsubscribe$.next(),this.button.remove()}))}};var sh,oh;nh=E([h({autobind:!1}),I(0,g(zl.SLOT)),T("design:paramtypes",["function"==typeof(th=void 0!==xn&&xn)?th:Object,"function"==typeof(ih=void 0!==zu&&zu)?ih:Object])],nh);let rh=class{constructor(e,t){this.adSlot=e,this.manager=t,this.unsubscribe$=new st}onEnter(){return A(this,void 0,void 0,(function*(){this.manager.addClassToPage("uap-sticked"),this.adSlot.addClass("uap-toc-pusher")}))}onLeave(){return A(this,void 0,void 0,(function*(){this.unsubscribe$.next()}))}};function ah(){return[{bind:nu,value:document.getElementById("masthead")},{bind:su,value:document.body},{bind:ou,value:document.getElementById("footer")}]}var dh;rh=E([h({autobind:!1}),I(0,g(zl.SLOT)),T("design:paramtypes",["function"==typeof(sh=void 0!==xn&&xn)?sh:Object,"function"==typeof(oh=void 0!==bu&&bu)?oh:Object])],rh);let lh=class{constructor(e){this.registry=e,Dn.setInitializer(this.registry)}execute(){const e=function(e,t){const i={initial:[Dp,Ql,$c,Hc,qc,Jc,Qc],impact:[],sticky:[Su,Nu,ju,Yu,Ju],transition:[Su,sp,Yu,Ju],resolved:[Su,ap,Yu,Ju]};return Z.get("state.isMobile")?i.impact=[up,gp,_p,Ip,Cp,Pp,Ju]:i.impact=[up,_p,ap,Ip,Cp,Ju],e.register("bfaa",i,"initial",[Zu,jc,du,bu,pu,Bu,Hu,zu,Tu.provide(Ta.BFAA_UNSTICK_DELAY),t()])}(this.registry,ah),t=this.registry.register("floorAdhesion",{initial:[qp,Qc],display:[jp,Mp,Ju],transition:[$p,Ju],hidden:[Hp,Ju]},"initial",[du]),i=function(e,t){return e.register("stickyTlb",{blocking:[Xp],initial:[Qp,eh,Jc,Qc],sticky:[Su,Nu,nh,Ju,rh],transition:[Su,sp,Ju,rh],resolved:[Su,ap,Ju],hidden:[Hp,Ju]},"blocking",[du,bu,pu,Zu,zu,Tu.provide(Ta.TLB_UNSTICK_DELAY),t()])}(this.registry,ah);Pt(e,t,i).subscribe((e=>{q(`TemplateLogger - ${e.templateName}\n`,`StateName: ${e.stateName}, Type: ${e.type}`)}))}};var ch;lh=E([h(),T("design:paramtypes",["function"==typeof(dh=void 0!==Bl&&Bl)?dh:Object])],lh);let uh=class{constructor(e){this.pipeline=e}execute(){this.pipeline.add((()=>Z.extend(Sl)),(()=>Z.set("state.isMobile",!Ai.isDesktop())),(()=>function(){return A(this,void 0,void 0,(function*(){window.ads.adEngineVersion&&window.console.warn("Multiple <?= PACKAGE(name) ?> initializations. This may cause issues."),window.ads.adEngineVersion="v145.5.2",q("ad-engine",window.ads.adEngineVersion),Xt.setUpGeoData(),yield ii.init(),Xt.setUpGeoData()}))}()),ns,as,cs,hs,Is,Mr,Br,Pr,Gr,xa,kl,Pl,jr,Cl,Nl,wl,As,Va,lh,_l,Nr,Ll,Dl),this.pipeline.execute()}};uh=E([h(),T("design:paramtypes",["function"==typeof(ch=void 0!==zr&&zr)?ch:Object])],uh),(new _).get(uh).execute()})()})();
//# sourceMappingURL=main.bundle.js.map